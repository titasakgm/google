if(typeof MSApp==="undefined"){MSApp={execUnsafeLocalFunction:function(a){return a()}};
/*!
 * jQuery JavaScript Library v1.8.3
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Tue Nov 13 2012 08:20:33 GMT-0500 (Eastern Standard Time)
 */
}(function(a3,aC){var x,ag,o=a3.document,aJ=a3.location,d=a3.navigator,bh=a3.jQuery,J=a3.$,an=Array.prototype.push,a5=Array.prototype.slice,aL=Array.prototype.indexOf,A=Object.prototype.toString,W=Object.prototype.hasOwnProperty,aP=String.prototype.trim,bH=function(e,b0){return new bH.fn.init(e,b0,x)},by=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,ab=/\S/,aW=/\s+/,D=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,bp=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,a=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,bg=/^[\],:{}\s]*$/,bj=/(?:^|:|,)(?:\s*\[)+/g,bE=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,a1=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,bQ=/^-ms-/,aV=/-([\da-z])/gi,O=function(e,b0){return(b0+"").toUpperCase()},aG=function(){if(o.addEventListener){o.removeEventListener("DOMContentLoaded",aG,false);bH.ready()}else{if(o.readyState==="complete"){o.detachEvent("onreadystatechange",aG);bH.ready()}}},aa={};bH.fn=bH.prototype={constructor:bH,init:function(e,b3,b2){var b1,b4,b0,b5;if(!e){return this}if(e.nodeType){this.context=this[0]=e;this.length=1;return this}if(typeof e==="string"){if(e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3){b1=[null,e,null]}else{b1=bp.exec(e)}if(b1&&(b1[1]||!b3)){if(b1[1]){b3=b3 instanceof bH?b3[0]:b3;b5=(b3&&b3.nodeType?b3.ownerDocument||b3:o);e=bH.parseHTML(b1[1],b5,true);if(a.test(b1[1])&&bH.isPlainObject(b3)){this.attr.call(e,b3,true)}return bH.merge(this,e)}else{b4=o.getElementById(b1[2]);if(b4&&b4.parentNode){if(b4.id!==b1[2]){return b2.find(e)}this.length=1;this[0]=b4}this.context=o;this.selector=e;return this}}else{if(!b3||b3.jquery){return(b3||b2).find(e)}else{return this.constructor(b3).find(e)}}}else{if(bH.isFunction(e)){return b2.ready(e)}}if(e.selector!==aC){this.selector=e.selector;this.context=e.context}return bH.makeArray(e,this)},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return a5.call(this)},get:function(e){return e==null?this.toArray():(e<0?this[this.length+e]:this[e])},pushStack:function(b0,b2,e){var b1=bH.merge(this.constructor(),b0);b1.prevObject=this;b1.context=this.context;if(b2==="find"){b1.selector=this.selector+(this.selector?" ":"")+e}else{if(b2){b1.selector=this.selector+"."+b2+"("+e+")"}}return b1},each:function(b0,e){return bH.each(this,b0,e)},ready:function(e){bH.ready.promise().done(e);return this},eq:function(e){e=+e;return e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(a5.apply(this,arguments),"slice",a5.call(arguments).join(","))},map:function(e){return this.pushStack(bH.map(this,function(b1,b0){return e.call(b1,b0,b1)}))},end:function(){return this.prevObject||this.constructor(null)},push:an,sort:[].sort,splice:[].splice};bH.fn.init.prototype=bH.fn;bH.extend=bH.fn.extend=function(){var b8,b1,e,b0,b5,b6,b4=arguments[0]||{},b3=1,b2=arguments.length,b7=false;if(typeof b4==="boolean"){b7=b4;b4=arguments[1]||{};b3=2}if(typeof b4!=="object"&&!bH.isFunction(b4)){b4={}}if(b2===b3){b4=this;--b3}for(;b3<b2;b3++){if((b8=arguments[b3])!=null){for(b1 in b8){e=b4[b1];b0=b8[b1];if(b4===b0){continue}if(b7&&b0&&(bH.isPlainObject(b0)||(b5=bH.isArray(b0)))){if(b5){b5=false;b6=e&&bH.isArray(e)?e:[]}else{b6=e&&bH.isPlainObject(e)?e:{}}b4[b1]=bH.extend(b7,b6,b0)}else{if(b0!==aC){b4[b1]=b0}}}}}return b4};bH.extend({noConflict:function(e){if(a3.$===bH){a3.$=J}if(e&&a3.jQuery===bH){a3.jQuery=bh}return bH},isReady:false,readyWait:1,holdReady:function(e){if(e){bH.readyWait++}else{bH.ready(true)}},ready:function(e){if(e===true?--bH.readyWait:bH.isReady){return}if(!o.body){return setTimeout(bH.ready,1)}bH.isReady=true;if(e!==true&&--bH.readyWait>0){return}ag.resolveWith(o,[bH]);if(bH.fn.trigger){bH(o).trigger("ready").off("ready")}},isFunction:function(e){return bH.type(e)==="function"},isArray:Array.isArray||function(e){return bH.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return !isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):aa[A.call(e)]||"object"},isPlainObject:function(b2){if(!b2||bH.type(b2)!=="object"||b2.nodeType||bH.isWindow(b2)){return false}try{if(b2.constructor&&!W.call(b2,"constructor")&&!W.call(b2.constructor.prototype,"isPrototypeOf")){return false}}catch(b1){return false}var b0;for(b0 in b2){}return b0===aC||W.call(b2,b0)},isEmptyObject:function(b0){var e;for(e in b0){return false}return true},error:function(e){throw new Error(e)},parseHTML:function(b2,b1,e){var b0;if(!b2||typeof b2!=="string"){return null}if(typeof b1==="boolean"){e=b1;b1=0}b1=b1||o;if((b0=a.exec(b2))){return[b1.createElement(b0[1])]}b0=bH.buildFragment([b2],b1,e?null:[]);return bH.merge([],(b0.cacheable?bH.clone(b0.fragment):b0.fragment).childNodes)},parseJSON:function(e){if(!e||typeof e!=="string"){return null}e=bH.trim(e);if(a3.JSON&&a3.JSON.parse){return a3.JSON.parse(e)}if(bg.test(e.replace(bE,"@").replace(a1,"]").replace(bj,""))){return(new Function("return "+e))()}bH.error("Invalid JSON: "+e)},parseXML:function(b2){var b0,b1;if(!b2||typeof b2!=="string"){return null}try{if(a3.DOMParser){b1=new DOMParser();b0=b1.parseFromString(b2,"text/xml")}else{b0=new ActiveXObject("Microsoft.XMLDOM");b0.async="false";b0.loadXML(b2)}}catch(b3){b0=aC}if(!b0||!b0.documentElement||b0.getElementsByTagName("parsererror").length){bH.error("Invalid XML: "+b2)}return b0},noop:function(){},globalEval:function(e){if(e&&ab.test(e)){(a3.execScript||function(b0){a3["eval"].call(a3,b0)})(e)}},camelCase:function(e){return e.replace(bQ,"ms-").replace(aV,O)},nodeName:function(b0,e){return b0.nodeName&&b0.nodeName.toLowerCase()===e.toLowerCase()},each:function(b4,b5,b1){var b0,b2=0,b3=b4.length,e=b3===aC||bH.isFunction(b4);if(b1){if(e){for(b0 in b4){if(b5.apply(b4[b0],b1)===false){break}}}else{for(;b2<b3;){if(b5.apply(b4[b2++],b1)===false){break}}}}else{if(e){for(b0 in b4){if(b5.call(b4[b0],b0,b4[b0])===false){break}}}else{for(;b2<b3;){if(b5.call(b4[b2],b2,b4[b2++])===false){break}}}}return b4},trim:aP&&!aP.call("\uFEFF\xA0")?function(e){return e==null?"":aP.call(e)}:function(e){return e==null?"":(e+"").replace(D,"")},makeArray:function(e,b1){var b2,b0=b1||[];if(e!=null){b2=bH.type(e);if(e.length==null||b2==="string"||b2==="function"||b2==="regexp"||bH.isWindow(e)){an.call(b0,e)}else{bH.merge(b0,e)}}return b0},inArray:function(b2,b0,b1){var e;if(b0){if(aL){return aL.call(b0,b2,b1)}e=b0.length;b1=b1?b1<0?Math.max(0,e+b1):b1:0;for(;b1<e;b1++){if(b1 in b0&&b0[b1]===b2){return b1}}}return -1},merge:function(b3,b1){var e=b1.length,b2=b3.length,b0=0;if(typeof e==="number"){for(;b0<e;b0++){b3[b2++]=b1[b0]}}else{while(b1[b0]!==aC){b3[b2++]=b1[b0++]}}b3.length=b2;return b3},grep:function(b0,b5,e){var b4,b1=[],b2=0,b3=b0.length;e=!!e;for(;b2<b3;b2++){b4=!!b5(b0[b2],b2);if(e!==b4){b1.push(b0[b2])}}return b1},map:function(e,b6,b7){var b4,b5,b3=[],b1=0,b0=e.length,b2=e instanceof bH||b0!==aC&&typeof b0==="number"&&((b0>0&&e[0]&&e[b0-1])||b0===0||bH.isArray(e));if(b2){for(;b1<b0;b1++){b4=b6(e[b1],b1,b7);if(b4!=null){b3[b3.length]=b4}}}else{for(b5 in e){b4=b6(e[b5],b5,b7);if(b4!=null){b3[b3.length]=b4}}}return b3.concat.apply([],b3)},guid:1,proxy:function(b3,b2){var b1,e,b0;if(typeof b2==="string"){b1=b3[b2];b2=b3;b3=b1}if(!bH.isFunction(b3)){return aC}e=a5.call(arguments,2);b0=function(){return b3.apply(b2,e.concat(a5.call(arguments)))};b0.guid=b3.guid=b3.guid||bH.guid++;return b0},access:function(e,b5,b8,b6,b3,b9,b7){var b1,b4=b8==null,b2=0,b0=e.length;if(b8&&typeof b8==="object"){for(b2 in b8){bH.access(e,b5,b2,b8[b2],1,b9,b6)}b3=1}else{if(b6!==aC){b1=b7===aC&&bH.isFunction(b6);if(b4){if(b1){b1=b5;b5=function(cb,ca,cc){return b1.call(bH(cb),cc)}}else{b5.call(e,b6);b5=null}}if(b5){for(;b2<b0;b2++){b5(e[b2],b8,b1?b6.call(e[b2],b2,b5(e[b2],b8)):b6,b7)}}b3=1}}return b3?e:b4?b5.call(e):b0?b5(e[0],b8):b9},now:function(){return(new Date()).getTime()}});bH.ready.promise=function(b3){if(!ag){ag=bH.Deferred();if(o.readyState==="complete"){setTimeout(bH.ready,1)}else{if(o.addEventListener){o.addEventListener("DOMContentLoaded",aG,false);a3.addEventListener("load",bH.ready,false)}else{o.attachEvent("onreadystatechange",aG);a3.attachEvent("onload",bH.ready);var b2=false;try{b2=a3.frameElement==null&&o.documentElement}catch(b1){}if(b2&&b2.doScroll){(function b0(){if(!bH.isReady){try{b2.doScroll("left")}catch(b4){return setTimeout(b0,50)}bH.ready()}})()}}}}return ag.promise(b3)};bH.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(b0,e){aa["[object "+e+"]"]=e.toLowerCase()});x=bH(o);var bV={};function ad(b0){var e=bV[b0]={};bH.each(b0.split(aW),function(b2,b1){e[b1]=true});return e}bH.Callbacks=function(b9){b9=typeof b9==="string"?(bV[b9]||ad(b9)):bH.extend({},b9);var b2,e,b3,b1,b4,b5,b6=[],b7=!b9.once&&[],b0=function(ca){b2=b9.memory&&ca;e=true;b5=b1||0;b1=0;b4=b6.length;b3=true;for(;b6&&b5<b4;b5++){if(b6[b5].apply(ca[0],ca[1])===false&&b9.stopOnFalse){b2=false;break}}b3=false;if(b6){if(b7){if(b7.length){b0(b7.shift())}}else{if(b2){b6=[]}else{b8.disable()}}}},b8={add:function(){if(b6){var cb=b6.length;(function ca(cc){bH.each(cc,function(ce,cd){var cf=bH.type(cd);if(cf==="function"){if(!b9.unique||!b8.has(cd)){b6.push(cd)}}else{if(cd&&cd.length&&cf!=="string"){ca(cd)}}})})(arguments);if(b3){b4=b6.length}else{if(b2){b1=cb;b0(b2)}}}return this},remove:function(){if(b6){bH.each(arguments,function(cc,ca){var cb;while((cb=bH.inArray(ca,b6,cb))>-1){b6.splice(cb,1);if(b3){if(cb<=b4){b4--}if(cb<=b5){b5--}}}})}return this},has:function(ca){return bH.inArray(ca,b6)>-1},empty:function(){b6=[];return this},disable:function(){b6=b7=b2=aC;return this},disabled:function(){return !b6},lock:function(){b7=aC;if(!b2){b8.disable()}return this},locked:function(){return !b7},fireWith:function(cb,ca){ca=ca||[];ca=[cb,ca.slice?ca.slice():ca];if(b6&&(!e||b7)){if(b3){b7.push(ca)}else{b0(ca)}}return this},fire:function(){b8.fireWith(this,arguments);return this},fired:function(){return !!e}};return b8};bH.extend({Deferred:function(b1){var b0=[["resolve","done",bH.Callbacks("once memory"),"resolved"],["reject","fail",bH.Callbacks("once memory"),"rejected"],["notify","progress",bH.Callbacks("memory")]],b2="pending",b3={state:function(){return b2},always:function(){e.done(arguments).fail(arguments);return this},then:function(){var b4=arguments;return bH.Deferred(function(b5){bH.each(b0,function(b7,b6){var b9=b6[0],b8=b4[b7];e[b6[1]](bH.isFunction(b8)?function(){var ca=b8.apply(this,arguments);if(ca&&bH.isFunction(ca.promise)){ca.promise().done(b5.resolve).fail(b5.reject).progress(b5.notify)}else{b5[b9+"With"](this===e?b5:this,[ca])}}:b5[b9])});b4=null}).promise()},promise:function(b4){return b4!=null?bH.extend(b4,b3):b3}},e={};b3.pipe=b3.then;bH.each(b0,function(b5,b4){var b7=b4[2],b6=b4[3];b3[b4[1]]=b7.add;if(b6){b7.add(function(){b2=b6},b0[b5^1][2].disable,b0[2][2].lock)}e[b4[0]]=b7.fire;e[b4[0]+"With"]=b7.fireWith});b3.promise(e);if(b1){b1.call(e,e)}return e},when:function(b3){var b1=0,b5=a5.call(arguments),e=b5.length,b0=e!==1||(b3&&bH.isFunction(b3.promise))?e:0,b8=b0===1?b3:bH.Deferred(),b2=function(ca,cb,b9){return function(cc){cb[ca]=this;b9[ca]=arguments.length>1?a5.call(arguments):cc;if(b9===b7){b8.notifyWith(cb,b9)}else{if(!(--b0)){b8.resolveWith(cb,b9)}}}},b7,b4,b6;if(e>1){b7=new Array(e);b4=new Array(e);b6=new Array(e);for(;b1<e;b1++){if(b5[b1]&&bH.isFunction(b5[b1].promise)){b5[b1].promise().done(b2(b1,b6,b5)).fail(b8.reject).progress(b2(b1,b4,b7))}else{--b0}}}if(!b0){b8.resolveWith(b6,b5)}return b8.promise()}});bH.support=MSApp.execUnsafeLocalFunction(function(){var cc,cb,b9,ca,b3,b8,b7,b5,b4,b2,b0,b1=o.createElement("div");b1.setAttribute("className","t");b1.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";cb=b1.getElementsByTagName("*");b9=b1.getElementsByTagName("a")[0];if(!cb||!b9||!cb.length){return{}}ca=o.createElement("select");b3=ca.appendChild(o.createElement("option"));b8=b1.getElementsByTagName("input")[0];b9.style.cssText="top:1px;float:left;opacity:.5";cc={leadingWhitespace:(b1.firstChild.nodeType===3),tbody:!b1.getElementsByTagName("tbody").length,htmlSerialize:!!b1.getElementsByTagName("link").length,style:/top/.test(b9.getAttribute("style")),hrefNormalized:(b9.getAttribute("href")==="/a"),opacity:/^0.5/.test(b9.style.opacity),cssFloat:!!b9.style.cssFloat,checkOn:(b8.value==="on"),optSelected:b3.selected,getSetAttribute:b1.className!=="t",enctype:!!o.createElement("form").enctype,html5Clone:o.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",boxModel:(o.compatMode==="CSS1Compat"),submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,boxSizingReliable:true,pixelPosition:false};b8.checked=true;cc.noCloneChecked=b8.cloneNode(true).checked;ca.disabled=true;cc.optDisabled=!b3.disabled;try{delete b1.test}catch(b6){cc.deleteExpando=false}if(!b1.addEventListener&&b1.attachEvent&&b1.fireEvent){b1.attachEvent("onclick",b0=function(){cc.noCloneEvent=false});b1.cloneNode(true).fireEvent("onclick");b1.detachEvent("onclick",b0)}b8=o.createElement("input");b8.value="t";b8.setAttribute("type","radio");cc.radioValue=b8.value==="t";b8.setAttribute("checked","checked");b8.setAttribute("name","t");b1.appendChild(b8);b7=o.createDocumentFragment();b7.appendChild(b1.lastChild);cc.checkClone=b7.cloneNode(true).cloneNode(true).lastChild.checked;cc.appendChecked=b8.checked;b7.removeChild(b8);b7.appendChild(b1);if(b1.attachEvent){for(b4 in {submit:true,change:true,focusin:true}){b5="on"+b4;b2=(b5 in b1);if(!b2){b1.setAttribute(b5,"return;");b2=(typeof b1[b5]==="function")}cc[b4+"Bubbles"]=b2}}bH(function(){var cd,ch,cf,cg,ce="padding:0;margin:0;border:0;display:block;overflow:hidden;",e=o.getElementsByTagName("body")[0];if(!e){return}cd=o.createElement("div");cd.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px";e.insertBefore(cd,e.firstChild);ch=o.createElement("div");cd.appendChild(ch);ch.innerHTML="<table><tr><td></td><td>t</td></tr></table>";cf=ch.getElementsByTagName("td");cf[0].style.cssText="padding:0;margin:0;border:0;display:none";b2=(cf[0].offsetHeight===0);cf[0].style.display="";cf[1].style.display="none";cc.reliableHiddenOffsets=b2&&(cf[0].offsetHeight===0);ch.innerHTML="";ch.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";cc.boxSizing=(ch.offsetWidth===4);cc.doesNotIncludeMarginInBodyOffset=(e.offsetTop!==1);if(a3.getComputedStyle){cc.pixelPosition=(a3.getComputedStyle(ch,null)||{}).top!=="1%";cc.boxSizingReliable=(a3.getComputedStyle(ch,null)||{width:"4px"}).width==="4px";cg=o.createElement("div");cg.style.cssText=ch.style.cssText=ce;cg.style.marginRight=cg.style.width="0";ch.style.width="1px";ch.appendChild(cg);cc.reliableMarginRight=!parseFloat((a3.getComputedStyle(cg,null)||{}).marginRight)}if(typeof ch.style.zoom!=="undefined"){ch.innerHTML="";ch.style.cssText=ce+"width:1px;padding:1px;display:inline;zoom:1";cc.inlineBlockNeedsLayout=(ch.offsetWidth===3);ch.style.display="block";ch.style.overflow="visible";ch.innerHTML="<div></div>";ch.firstChild.style.width="5px";cc.shrinkWrapBlocks=(ch.offsetWidth!==3);cd.style.zoom=1}e.removeChild(cd);cd=ch=cf=cg=null});b7.removeChild(b1);cb=b9=ca=b3=b8=b7=b1=null;return cc});var bu=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,aM=/([A-Z])/g;bH.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(bH.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(e){e=e.nodeType?bH.cache[e[bH.expando]]:e[bH.expando];return !!e&&!P(e)},data:function(b2,b0,b4,b3){if(!bH.acceptData(b2)){return}var b5,b7,b8=bH.expando,b6=typeof b0==="string",b9=b2.nodeType,e=b9?bH.cache:b2,b1=b9?b2[b8]:b2[b8]&&b8;if((!b1||!e[b1]||(!b3&&!e[b1].data))&&b6&&b4===aC){return}if(!b1){if(b9){b2[b8]=b1=bH.deletedIds.pop()||bH.guid++}else{b1=b8}}if(!e[b1]){e[b1]={};if(!b9){e[b1].toJSON=bH.noop}}if(typeof b0==="object"||typeof b0==="function"){if(b3){e[b1]=bH.extend(e[b1],b0)}else{e[b1].data=bH.extend(e[b1].data,b0)}}b5=e[b1];if(!b3){if(!b5.data){b5.data={}}b5=b5.data}if(b4!==aC){b5[bH.camelCase(b0)]=b4}if(b6){b7=b5[b0];if(b7==null){b7=b5[bH.camelCase(b0)]}}else{b7=b5}return b7},removeData:function(b2,b0,b3){if(!bH.acceptData(b2)){return}var b6,b5,b4,b7=b2.nodeType,e=b7?bH.cache:b2,b1=b7?b2[bH.expando]:bH.expando;if(!e[b1]){return}if(b0){b6=b3?e[b1]:e[b1].data;if(b6){if(!bH.isArray(b0)){if(b0 in b6){b0=[b0]}else{b0=bH.camelCase(b0);if(b0 in b6){b0=[b0]}else{b0=b0.split(" ")}}}for(b5=0,b4=b0.length;b5<b4;b5++){delete b6[b0[b5]]}if(!(b3?P:bH.isEmptyObject)(b6)){return}}}if(!b3){delete e[b1].data;if(!P(e[b1])){return}}if(b7){bH.cleanData([b2],true)}else{if(bH.support.deleteExpando||e!=e.window){delete e[b1]}else{e[b1]=null}}},_data:function(b0,e,b1){return bH.data(b0,e,b1,true)},acceptData:function(b0){var e=b0.nodeName&&bH.noData[b0.nodeName.toLowerCase()];return !e||e!==true&&b0.getAttribute("classid")===e}});bH.fn.extend({data:function(b8,b7){var b3,b0,b6,e,b2,b1=this[0],b5=0,b4=null;if(b8===aC){if(this.length){b4=bH.data(b1);if(b1.nodeType===1&&!bH._data(b1,"parsedAttrs")){b6=b1.attributes;for(b2=b6.length;b5<b2;b5++){e=b6[b5].name;if(!e.indexOf("data-")){e=bH.camelCase(e.substring(5));bw(b1,e,b4[e])}}bH._data(b1,"parsedAttrs",true)}}return b4}if(typeof b8==="object"){return this.each(function(){bH.data(this,b8)})}b3=b8.split(".",2);b3[1]=b3[1]?"."+b3[1]:"";b0=b3[1]+"!";return bH.access(this,function(b9){if(b9===aC){b4=this.triggerHandler("getData"+b0,[b3[0]]);if(b4===aC&&b1){b4=bH.data(b1,b8);b4=bw(b1,b8,b4)}return b4===aC&&b3[1]?this.data(b3[0]):b4}b3[1]=b9;this.each(function(){var ca=bH(this);ca.triggerHandler("setData"+b0,b3);bH.data(this,b8,b9);ca.triggerHandler("changeData"+b0,b3)})},null,b7,arguments.length>1,null,false)},removeData:function(e){return this.each(function(){bH.removeData(this,e)})}});function bw(b2,b1,b3){if(b3===aC&&b2.nodeType===1){var b0="data-"+b1.replace(aM,"-$1").toLowerCase();b3=b2.getAttribute(b0);if(typeof b3==="string"){try{b3=b3==="true"?true:b3==="false"?false:b3==="null"?null:+b3+""===b3?+b3:bu.test(b3)?bH.parseJSON(b3):b3}catch(b4){}bH.data(b2,b1,b3)}else{b3=aC}}return b3}function P(b0){var e;for(e in b0){if(e==="data"&&bH.isEmptyObject(b0[e])){continue}if(e!=="toJSON"){return false}}return true}bH.extend({queue:function(b1,b0,b2){var e;if(b1){b0=(b0||"fx")+"queue";e=bH._data(b1,b0);if(b2){if(!e||bH.isArray(b2)){e=bH._data(b1,b0,bH.makeArray(b2))}else{e.push(b2)}}return e||[]}},dequeue:function(b4,b3){b3=b3||"fx";var b0=bH.queue(b4,b3),b5=b0.length,b2=b0.shift(),e=bH._queueHooks(b4,b3),b1=function(){bH.dequeue(b4,b3)};if(b2==="inprogress"){b2=b0.shift();b5--}if(b2){if(b3==="fx"){b0.unshift("inprogress")}delete e.stop;b2.call(b4,b1,e)}if(!b5&&e){e.empty.fire()}},_queueHooks:function(b1,b0){var e=b0+"queueHooks";return bH._data(b1,e)||bH._data(b1,e,{empty:bH.Callbacks("once memory").add(function(){bH.removeData(b1,b0+"queue",true);bH.removeData(b1,e,true)})})}});bH.fn.extend({queue:function(e,b0){var b1=2;if(typeof e!=="string"){b0=e;e="fx";b1--}if(arguments.length<b1){return bH.queue(this[0],e)}return b0===aC?this:this.each(function(){var b2=bH.queue(this,e,b0);bH._queueHooks(this,e);if(e==="fx"&&b2[0]!=="inprogress"){bH.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){bH.dequeue(this,e)})},delay:function(b0,e){b0=bH.fx?bH.fx.speeds[b0]||b0:b0;e=e||"fx";return this.queue(e,function(b2,b1){var b3=setTimeout(b2,b0);b1.stop=function(){clearTimeout(b3)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(b1,b5){var b0,b2=1,b6=bH.Deferred(),b4=this,e=this.length,b3=function(){if(!(--b2)){b6.resolveWith(b4,[b4])}};if(typeof b1!=="string"){b5=b1;b1=aC}b1=b1||"fx";while(e--){b0=bH._data(b4[e],b1+"queueHooks");if(b0&&b0.empty){b2++;b0.empty.add(b3)}}b3();return b6.promise(b5)}});var a8,bW,n,bK=/[\t\r\n]/g,aj=/\r/g,j=/^(?:button|input)$/i,aB=/^(?:button|input|object|select|textarea)$/i,E=/^a(?:rea|)$/i,N=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,bM=bH.support.getSetAttribute;bH.fn.extend({attr:function(e,b0){return bH.access(this,bH.attr,e,b0,arguments.length>1)},removeAttr:function(e){return this.each(function(){bH.removeAttr(this,e)})},prop:function(e,b0){return bH.access(this,bH.prop,e,b0,arguments.length>1)},removeProp:function(e){e=bH.propFix[e]||e;return this.each(function(){try{this[e]=aC;delete this[e]}catch(b0){}})},addClass:function(b3){var b5,b1,b0,b2,b4,b6,e;if(bH.isFunction(b3)){return this.each(function(b7){bH(this).addClass(b3.call(this,b7,this.className))})}if(b3&&typeof b3==="string"){b5=b3.split(aW);for(b1=0,b0=this.length;b1<b0;b1++){b2=this[b1];if(b2.nodeType===1){if(!b2.className&&b5.length===1){b2.className=b3}else{b4=" "+b2.className+" ";for(b6=0,e=b5.length;b6<e;b6++){if(b4.indexOf(" "+b5[b6]+" ")<0){b4+=b5[b6]+" "}}b2.className=bH.trim(b4)}}}}return this},removeClass:function(b5){var b2,b3,b4,b6,b0,b1,e;if(bH.isFunction(b5)){return this.each(function(b7){bH(this).removeClass(b5.call(this,b7,this.className))})}if((b5&&typeof b5==="string")||b5===aC){b2=(b5||"").split(aW);for(b1=0,e=this.length;b1<e;b1++){b4=this[b1];if(b4.nodeType===1&&b4.className){b3=(" "+b4.className+" ").replace(bK," ");for(b6=0,b0=b2.length;b6<b0;b6++){while(b3.indexOf(" "+b2[b6]+" ")>=0){b3=b3.replace(" "+b2[b6]+" "," ")}}b4.className=b5?bH.trim(b3):""}}}return this},toggleClass:function(b2,b0){var b1=typeof b2,e=typeof b0==="boolean";if(bH.isFunction(b2)){return this.each(function(b3){bH(this).toggleClass(b2.call(this,b3,this.className,b0),b0)})}return this.each(function(){if(b1==="string"){var b5,b4=0,b3=bH(this),b6=b0,b7=b2.split(aW);while((b5=b7[b4++])){b6=e?b6:!b3.hasClass(b5);b3[b6?"addClass":"removeClass"](b5)}}else{if(b1==="undefined"||b1==="boolean"){if(this.className){bH._data(this,"__className__",this.className)}this.className=this.className||b2===false?"":bH._data(this,"__className__")||""}}})},hasClass:function(e){var b2=" "+e+" ",b1=0,b0=this.length;for(;b1<b0;b1++){if(this[b1].nodeType===1&&(" "+this[b1].className+" ").replace(bK," ").indexOf(b2)>=0){return true}}return false},val:function(b2){var e,b0,b3,b1=this[0];if(!arguments.length){if(b1){e=bH.valHooks[b1.type]||bH.valHooks[b1.nodeName.toLowerCase()];if(e&&"get" in e&&(b0=e.get(b1,"value"))!==aC){return b0}b0=b1.value;return typeof b0==="string"?b0.replace(aj,""):b0==null?"":b0}return}b3=bH.isFunction(b2);return this.each(function(b5){var b6,b4=bH(this);if(this.nodeType!==1){return}if(b3){b6=b2.call(this,b5,b4.val())}else{b6=b2}if(b6==null){b6=""}else{if(typeof b6==="number"){b6+=""}else{if(bH.isArray(b6)){b6=bH.map(b6,function(b7){return b7==null?"":b7+""})}}}e=bH.valHooks[this.type]||bH.valHooks[this.nodeName.toLowerCase()];if(!e||!("set" in e)||e.set(this,b6,"value")===aC){this.value=b6}})}});bH.extend({valHooks:{option:{get:function(e){var b0=e.attributes.value;return !b0||b0.specified?e.value:e.text}},select:{get:function(e){var b5,b1,b7=e.options,b3=e.selectedIndex,b2=e.type==="select-one"||b3<0,b6=b2?null:[],b4=b2?b3+1:b7.length,b0=b3<0?b4:b2?b3:0;for(;b0<b4;b0++){b1=b7[b0];if((b1.selected||b0===b3)&&(bH.support.optDisabled?!b1.disabled:b1.getAttribute("disabled")===null)&&(!b1.parentNode.disabled||!bH.nodeName(b1.parentNode,"optgroup"))){b5=bH(b1).val();if(b2){return b5}b6.push(b5)}}return b6},set:function(b0,b1){var e=bH.makeArray(b1);bH(b0).find("option").each(function(){this.selected=bH.inArray(bH(this).val(),e)>=0});if(!e.length){b0.selectedIndex=-1}return e}}},attrFn:{},attr:function(b5,b2,b6,b4){var b1,e,b3,b0=b5.nodeType;if(!b5||b0===3||b0===8||b0===2){return}if(b4&&bH.isFunction(bH.fn[b2])){return bH(b5)[b2](b6)}if(typeof b5.getAttribute==="undefined"){return bH.prop(b5,b2,b6)}b3=b0!==1||!bH.isXMLDoc(b5);if(b3){b2=b2.toLowerCase();e=bH.attrHooks[b2]||(N.test(b2)?bW:a8)}if(b6!==aC){if(b6===null){bH.removeAttr(b5,b2);return}else{if(e&&"set" in e&&b3&&(b1=e.set(b5,b6,b2))!==aC){return b1}else{b5.setAttribute(b2,b6+"");return b6}}}else{if(e&&"get" in e&&b3&&(b1=e.get(b5,b2))!==null){return b1}else{b1=b5.getAttribute(b2);return b1===null?aC:b1}}},removeAttr:function(b2,b4){var b3,b5,b0,e,b1=0;if(b4&&b2.nodeType===1){b5=b4.split(aW);for(;b1<b5.length;b1++){b0=b5[b1];if(b0){b3=bH.propFix[b0]||b0;e=N.test(b0);if(!e){bH.attr(b2,b0,"")}b2.removeAttribute(bM?b0:b3);if(e&&b3 in b2){b2[b3]=false}}}}},attrHooks:{type:{set:function(e,b0){if(j.test(e.nodeName)&&e.parentNode){bH.error("type property can't be changed")}else{if(!bH.support.radioValue&&b0==="radio"&&bH.nodeName(e,"input")){var b1=e.value;e.setAttribute("type",b0);if(b1){e.value=b1}return b0}}}},value:{get:function(b0,e){if(a8&&bH.nodeName(b0,"button")){return a8.get(b0,e)}return e in b0?b0.value:null},set:function(b0,b1,e){if(a8&&bH.nodeName(b0,"button")){return a8.set(b0,b1,e)}b0.value=b1}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(b4,b2,b5){var b1,e,b3,b0=b4.nodeType;if(!b4||b0===3||b0===8||b0===2){return}b3=b0!==1||!bH.isXMLDoc(b4);if(b3){b2=bH.propFix[b2]||b2;e=bH.propHooks[b2]}if(b5!==aC){if(e&&"set" in e&&(b1=e.set(b4,b5,b2))!==aC){return b1}else{return(b4[b2]=b5)}}else{if(e&&"get" in e&&(b1=e.get(b4,b2))!==null){return b1}else{return b4[b2]}}},propHooks:{tabIndex:{get:function(b0){var e=b0.getAttributeNode("tabindex");return e&&e.specified?parseInt(e.value,10):aB.test(b0.nodeName)||E.test(b0.nodeName)&&b0.href?0:aC}}}});bW={get:function(b0,e){var b2,b1=bH.prop(b0,e);return b1===true||typeof b1!=="boolean"&&(b2=b0.getAttributeNode(e))&&b2.nodeValue!==false?e.toLowerCase():aC},set:function(b0,b2,e){var b1;if(b2===false){bH.removeAttr(b0,e)}else{b1=bH.propFix[e]||e;if(b1 in b0){b0[b1]=true}b0.setAttribute(e,e.toLowerCase())}return e}};if(!bM){n={name:true,id:true,coords:true};a8=bH.valHooks.button={get:function(b1,b0){var e;e=b1.getAttributeNode(b0);return e&&(n[b0]?e.value!=="":e.specified)?e.value:aC},set:function(b1,b2,b0){var e=b1.getAttributeNode(b0);if(!e){e=o.createAttribute(b0);b1.setAttributeNode(e)}return(e.value=b2+"")}};bH.each(["width","height"],function(b0,e){bH.attrHooks[e]=bH.extend(bH.attrHooks[e],{set:function(b1,b2){if(b2===""){b1.setAttribute(e,"auto");return b2}}})});bH.attrHooks.contenteditable={get:a8.get,set:function(b0,b1,e){if(b1===""){b1="false"}a8.set(b0,b1,e)}}}if(!bH.support.hrefNormalized){bH.each(["href","src","width","height"],function(b0,e){bH.attrHooks[e]=bH.extend(bH.attrHooks[e],{get:function(b2){var b1=b2.getAttribute(e,2);return b1===null?aC:b1}})})}if(!bH.support.style){bH.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||aC},set:function(e,b0){return(e.style.cssText=b0+"")}}}if(!bH.support.optSelected){bH.propHooks.selected=bH.extend(bH.propHooks.selected,{get:function(b0){var e=b0.parentNode;if(e){e.selectedIndex;if(e.parentNode){e.parentNode.selectedIndex}}return null}})}if(!bH.support.enctype){bH.propFix.enctype="encoding"}if(!bH.support.checkOn){bH.each(["radio","checkbox"],function(){bH.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}})}bH.each(["radio","checkbox"],function(){bH.valHooks[this]=bH.extend(bH.valHooks[this],{set:function(e,b0){if(bH.isArray(b0)){return(e.checked=bH.inArray(bH(e).val(),b0)>=0)}}})});var bF=/^(?:textarea|input|select)$/i,bs=/^([^\.]*|)(?:\.(.+)|)$/,bb=/(?:^|\s)hover(\.\S+|)\b/,a4=/^key/,bL=/^(?:mouse|contextmenu)|click/,bz=/^(?:focusinfocus|focusoutblur)$/,ar=function(e){return bH.event.special.hover?e:e.replace(bb,"mouseenter$1 mouseleave$1")};bH.event={add:function(b2,b6,cd,b4,b3){var b7,b5,ce,cc,cb,b9,e,ca,b0,b1,b8;if(b2.nodeType===3||b2.nodeType===8||!b6||!cd||!(b7=bH._data(b2))){return}if(cd.handler){b0=cd;cd=b0.handler;b3=b0.selector}if(!cd.guid){cd.guid=bH.guid++}ce=b7.events;if(!ce){b7.events=ce={}}b5=b7.handle;if(!b5){b7.handle=b5=function(cf){return typeof bH!=="undefined"&&(!cf||bH.event.triggered!==cf.type)?bH.event.dispatch.apply(b5.elem,arguments):aC};b5.elem=b2}b6=bH.trim(ar(b6)).split(" ");for(cc=0;cc<b6.length;cc++){cb=bs.exec(b6[cc])||[];b9=cb[1];e=(cb[2]||"").split(".").sort();b8=bH.event.special[b9]||{};b9=(b3?b8.delegateType:b8.bindType)||b9;b8=bH.event.special[b9]||{};ca=bH.extend({type:b9,origType:cb[1],data:b4,handler:cd,guid:cd.guid,selector:b3,needsContext:b3&&bH.expr.match.needsContext.test(b3),namespace:e.join(".")},b0);b1=ce[b9];if(!b1){b1=ce[b9]=[];b1.delegateCount=0;if(!b8.setup||b8.setup.call(b2,b4,e,b5)===false){if(b2.addEventListener){b2.addEventListener(b9,b5,false)}else{if(b2.attachEvent){b2.attachEvent("on"+b9,b5)}}}}if(b8.add){b8.add.call(b2,ca);if(!ca.handler.guid){ca.handler.guid=cd.guid}}if(b3){b1.splice(b1.delegateCount++,0,ca)}else{b1.push(ca)}bH.event.global[b9]=true}b2=null},global:{},remove:function(b2,b7,cd,b3,b6){var ce,cf,ca,b1,b0,b4,b5,cc,b9,e,cb,b8=bH.hasData(b2)&&bH._data(b2);if(!b8||!(cc=b8.events)){return}b7=bH.trim(ar(b7||"")).split(" ");for(ce=0;ce<b7.length;ce++){cf=bs.exec(b7[ce])||[];ca=b1=cf[1];b0=cf[2];if(!ca){for(ca in cc){bH.event.remove(b2,ca+b7[ce],cd,b3,true)}continue}b9=bH.event.special[ca]||{};ca=(b3?b9.delegateType:b9.bindType)||ca;e=cc[ca]||[];b4=e.length;b0=b0?new RegExp("(^|\\.)"+b0.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(b5=0;b5<e.length;b5++){cb=e[b5];if((b6||b1===cb.origType)&&(!cd||cd.guid===cb.guid)&&(!b0||b0.test(cb.namespace))&&(!b3||b3===cb.selector||b3==="**"&&cb.selector)){e.splice(b5--,1);if(cb.selector){e.delegateCount--}if(b9.remove){b9.remove.call(b2,cb)}}}if(e.length===0&&b4!==e.length){if(!b9.teardown||b9.teardown.call(b2,b0,b8.handle)===false){bH.removeEvent(b2,ca,b8.handle)}delete cc[ca]}}if(bH.isEmptyObject(cc)){delete b8.handle;bH.removeData(b2,"events",true)}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(b0,b7,b5,ce){if(b5&&(b5.nodeType===3||b5.nodeType===8)){return}var e,b2,b8,cc,b4,b3,ca,b9,b6,cd,cb=b0.type||b0,b1=[];if(bz.test(cb+bH.event.triggered)){return}if(cb.indexOf("!")>=0){cb=cb.slice(0,-1);b2=true}if(cb.indexOf(".")>=0){b1=cb.split(".");cb=b1.shift();b1.sort()}if((!b5||bH.event.customEvent[cb])&&!bH.event.global[cb]){return}b0=typeof b0==="object"?b0[bH.expando]?b0:new bH.Event(cb,b0):new bH.Event(cb);b0.type=cb;b0.isTrigger=true;b0.exclusive=b2;b0.namespace=b1.join(".");b0.namespace_re=b0.namespace?new RegExp("(^|\\.)"+b1.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;b3=cb.indexOf(":")<0?"on"+cb:"";if(!b5){e=bH.cache;for(b8 in e){if(e[b8].events&&e[b8].events[cb]){bH.event.trigger(b0,b7,e[b8].handle.elem,true)}}return}b0.result=aC;if(!b0.target){b0.target=b5}b7=b7!=null?bH.makeArray(b7):[];b7.unshift(b0);ca=bH.event.special[cb]||{};if(ca.trigger&&ca.trigger.apply(b5,b7)===false){return}b6=[[b5,ca.bindType||cb]];if(!ce&&!ca.noBubble&&!bH.isWindow(b5)){cd=ca.delegateType||cb;cc=bz.test(cd+cb)?b5:b5.parentNode;for(b4=b5;cc;cc=cc.parentNode){b6.push([cc,cd]);b4=cc}if(b4===(b5.ownerDocument||o)){b6.push([b4.defaultView||b4.parentWindow||a3,cd])}}for(b8=0;b8<b6.length&&!b0.isPropagationStopped();b8++){cc=b6[b8][0];b0.type=b6[b8][1];b9=(bH._data(cc,"events")||{})[b0.type]&&bH._data(cc,"handle");if(b9){b9.apply(cc,b7)}b9=b3&&cc[b3];if(b9&&bH.acceptData(cc)&&b9.apply&&b9.apply(cc,b7)===false){b0.preventDefault()}}b0.type=cb;if(!ce&&!b0.isDefaultPrevented()){if((!ca._default||ca._default.apply(b5.ownerDocument,b7)===false)&&!(cb==="click"&&bH.nodeName(b5,"a"))&&bH.acceptData(b5)){if(b3&&b5[cb]&&((cb!=="focus"&&cb!=="blur")||b0.target.offsetWidth!==0)&&!bH.isWindow(b5)){b4=b5[b3];if(b4){b5[b3]=null}bH.event.triggered=cb;b5[cb]();bH.event.triggered=aC;if(b4){b5[b3]=b4}}}}return b0.result},dispatch:function(e){e=bH.event.fix(e||a3.event);var b6,b5,cf,b9,b8,b0,b7,cd,b2,ce,b3=((bH._data(this,"events")||{})[e.type]||[]),b4=b3.delegateCount,cb=a5.call(arguments),b1=!e.exclusive&&!e.namespace,ca=bH.event.special[e.type]||{},cc=[];cb[0]=e;e.delegateTarget=this;if(ca.preDispatch&&ca.preDispatch.call(this,e)===false){return}if(b4&&!(e.button&&e.type==="click")){for(cf=e.target;cf!=this;cf=cf.parentNode||this){if(cf.disabled!==true||e.type!=="click"){b8={};b7=[];for(b6=0;b6<b4;b6++){cd=b3[b6];b2=cd.selector;if(b8[b2]===aC){b8[b2]=cd.needsContext?bH(b2,this).index(cf)>=0:bH.find(b2,this,null,[cf]).length}if(b8[b2]){b7.push(cd)}}if(b7.length){cc.push({elem:cf,matches:b7})}}}}if(b3.length>b4){cc.push({elem:this,matches:b3.slice(b4)})}for(b6=0;b6<cc.length&&!e.isPropagationStopped();b6++){b0=cc[b6];e.currentTarget=b0.elem;for(b5=0;b5<b0.matches.length&&!e.isImmediatePropagationStopped();b5++){cd=b0.matches[b5];if(b1||(!e.namespace&&!cd.namespace)||e.namespace_re&&e.namespace_re.test(cd.namespace)){e.data=cd.data;e.handleObj=cd;b9=((bH.event.special[cd.origType]||{}).handle||cd.handler).apply(b0.elem,cb);if(b9!==aC){e.result=b9;if(b9===false){e.preventDefault();e.stopPropagation()}}}}}if(ca.postDispatch){ca.postDispatch.call(this,e)}return e.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(b0,e){if(b0.which==null){b0.which=e.charCode!=null?e.charCode:e.keyCode}return b0}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(b2,b1){var b3,b4,e,b0=b1.button,b5=b1.fromElement;if(b2.pageX==null&&b1.clientX!=null){b3=b2.target.ownerDocument||o;b4=b3.documentElement;e=b3.body;b2.pageX=b1.clientX+(b4&&b4.scrollLeft||e&&e.scrollLeft||0)-(b4&&b4.clientLeft||e&&e.clientLeft||0);b2.pageY=b1.clientY+(b4&&b4.scrollTop||e&&e.scrollTop||0)-(b4&&b4.clientTop||e&&e.clientTop||0)}if(!b2.relatedTarget&&b5){b2.relatedTarget=b5===b2.target?b1.toElement:b5}if(!b2.which&&b0!==aC){b2.which=(b0&1?1:(b0&2?3:(b0&4?2:0)))}return b2}},fix:function(b1){if(b1[bH.expando]){return b1}var b0,b4,e=b1,b2=bH.event.fixHooks[b1.type]||{},b3=b2.props?this.props.concat(b2.props):this.props;b1=bH.Event(e);for(b0=b3.length;b0;){b4=b3[--b0];b1[b4]=e[b4]}if(!b1.target){b1.target=e.srcElement||o}if(b1.target.nodeType===3){b1.target=b1.target.parentNode}b1.metaKey=!!b1.metaKey;return b2.filter?b2.filter(b1,e):b1},special:{load:{noBubble:true},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(b1,b0,e){if(bH.isWindow(this)){this.onbeforeunload=e}},teardown:function(b0,e){if(this.onbeforeunload===e){this.onbeforeunload=null}}}},simulate:function(b1,b3,b2,b0){var b4=bH.extend(new bH.Event(),b2,{type:b1,isSimulated:true,originalEvent:{}});if(b0){bH.event.trigger(b4,null,b3)}else{bH.event.dispatch.call(b3,b4)}if(b4.isDefaultPrevented()){b2.preventDefault()}}};bH.event.handle=bH.event.dispatch;bH.removeEvent=o.removeEventListener?function(b0,e,b1){if(b0.removeEventListener){b0.removeEventListener(e,b1,false)}}:function(b1,b0,b2){var e="on"+b0;if(b1.detachEvent){if(typeof b1[e]==="undefined"){b1[e]=null}b1.detachEvent(e,b2)}};bH.Event=function(b0,e){if(!(this instanceof bH.Event)){return new bH.Event(b0,e)}if(b0&&b0.type){this.originalEvent=b0;this.type=b0.type;this.isDefaultPrevented=(b0.defaultPrevented||b0.returnValue===false||b0.getPreventDefault&&b0.getPreventDefault())?S:Y}else{this.type=b0}if(e){bH.extend(this,e)}this.timeStamp=b0&&b0.timeStamp||bH.now();this[bH.expando]=true};function Y(){return false}function S(){return true}bH.Event.prototype={preventDefault:function(){this.isDefaultPrevented=S;var b0=this.originalEvent;if(!b0){return}if(b0.preventDefault){b0.preventDefault()}else{b0.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=S;var b0=this.originalEvent;if(!b0){return}if(b0.stopPropagation){b0.stopPropagation()}b0.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=S;this.stopPropagation()},isDefaultPrevented:Y,isPropagationStopped:Y,isImmediatePropagationStopped:Y};bH.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(b0,e){bH.event.special[b0]={delegateType:e,bindType:e,handle:function(b4){var b2,b6=this,b5=b4.relatedTarget,b3=b4.handleObj,b1=b3.selector;if(!b5||(b5!==b6&&!bH.contains(b6,b5))){b4.type=b3.origType;b2=b3.handler.apply(this,arguments);b4.type=e}return b2}}});if(!bH.support.submitBubbles){bH.event.special.submit={setup:function(){if(bH.nodeName(this,"form")){return false}bH.event.add(this,"click._submit keypress._submit",function(b2){var b1=b2.target,b0=bH.nodeName(b1,"input")||bH.nodeName(b1,"button")?b1.form:aC;if(b0&&!bH._data(b0,"_submit_attached")){bH.event.add(b0,"submit._submit",function(e){e._submit_bubble=true});bH._data(b0,"_submit_attached",true)}})},postDispatch:function(e){if(e._submit_bubble){delete e._submit_bubble;if(this.parentNode&&!e.isTrigger){bH.event.simulate("submit",this.parentNode,e,true)}}},teardown:function(){if(bH.nodeName(this,"form")){return false}bH.event.remove(this,"._submit")}}}if(!bH.support.changeBubbles){bH.event.special.change={setup:function(){if(bF.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){bH.event.add(this,"propertychange._change",function(e){if(e.originalEvent.propertyName==="checked"){this._just_changed=true}});bH.event.add(this,"click._change",function(e){if(this._just_changed&&!e.isTrigger){this._just_changed=false}bH.event.simulate("change",this,e,true)})}return false}bH.event.add(this,"beforeactivate._change",function(b1){var b0=b1.target;if(bF.test(b0.nodeName)&&!bH._data(b0,"_change_attached")){bH.event.add(b0,"change._change",function(e){if(this.parentNode&&!e.isSimulated&&!e.isTrigger){bH.event.simulate("change",this.parentNode,e,true)}});bH._data(b0,"_change_attached",true)}})},handle:function(b0){var e=b0.target;if(this!==e||b0.isSimulated||b0.isTrigger||(e.type!=="radio"&&e.type!=="checkbox")){return b0.handleObj.handler.apply(this,arguments)}},teardown:function(){bH.event.remove(this,"._change");return !bF.test(this.nodeName)}}}if(!bH.support.focusinBubbles){bH.each({focus:"focusin",blur:"focusout"},function(b2,e){var b0=0,b1=function(b3){bH.event.simulate(e,b3.target,bH.event.fix(b3),true)};bH.event.special[e]={setup:function(){if(b0++===0){o.addEventListener(b2,b1,true)}},teardown:function(){if(--b0===0){o.removeEventListener(b2,b1,true)}}}})}bH.fn.extend({on:function(b1,e,b4,b3,b0){var b5,b2;if(typeof b1==="object"){if(typeof e!=="string"){b4=b4||e;e=aC}for(b2 in b1){this.on(b2,e,b4,b1[b2],b0)}return this}if(b4==null&&b3==null){b3=e;b4=e=aC}else{if(b3==null){if(typeof e==="string"){b3=b4;b4=aC}else{b3=b4;b4=e;e=aC}}}if(b3===false){b3=Y}else{if(!b3){return this}}if(b0===1){b5=b3;b3=function(b6){bH().off(b6);return b5.apply(this,arguments)};b3.guid=b5.guid||(b5.guid=bH.guid++)}return this.each(function(){bH.event.add(this,b1,b3,b4,e)})},one:function(b0,e,b2,b1){return this.on(b0,e,b2,b1,1)},off:function(b1,e,b3){var b0,b2;if(b1&&b1.preventDefault&&b1.handleObj){b0=b1.handleObj;bH(b1.delegateTarget).off(b0.namespace?b0.origType+"."+b0.namespace:b0.origType,b0.selector,b0.handler);return this}if(typeof b1==="object"){for(b2 in b1){this.off(b2,e,b1[b2])}return this}if(e===false||typeof e==="function"){b3=e;e=aC}if(b3===false){b3=Y}return this.each(function(){bH.event.remove(this,b1,b3,e)})},bind:function(e,b1,b0){return this.on(e,null,b1,b0)},unbind:function(e,b0){return this.off(e,null,b0)},live:function(e,b1,b0){bH(this.context).on(e,this.selector,b1,b0);return this},die:function(e,b0){bH(this.context).off(e,this.selector||"**",b0);return this},delegate:function(e,b0,b2,b1){return this.on(b0,e,b2,b1)},undelegate:function(e,b0,b1){return arguments.length===1?this.off(e,"**"):this.off(b0,e||"**",b1)},trigger:function(e,b0){return this.each(function(){bH.event.trigger(e,b0,this)})},triggerHandler:function(e,b0){if(this[0]){return bH.event.trigger(e,b0,this[0],true)}},toggle:function(b2){var b0=arguments,e=b2.guid||bH.guid++,b1=0,b3=function(b4){var b5=(bH._data(this,"lastToggle"+b2.guid)||0)%b1;bH._data(this,"lastToggle"+b2.guid,b5+1);b4.preventDefault();return b0[b5].apply(this,arguments)||false};b3.guid=e;while(b1<b0.length){b0[b1++].guid=e}return this.click(b3)},hover:function(e,b0){return this.mouseenter(e).mouseleave(b0||e)}});bH.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu").split(" "),function(b0,e){bH.fn[e]=function(b2,b1){if(b1==null){b1=b2;b2=null}return arguments.length>0?this.on(e,null,b2,b1):this.trigger(e)};if(a4.test(e)){bH.event.fixHooks[e]=bH.event.keyHooks}if(bL.test(e)){bH.event.fixHooks[e]=bH.event.mouseHooks}});
/*!
 * Sizzle CSS Selector Engine
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://sizzlejs.com/
 */
(function(cT,ci){var cY,cb,cM,b1,cn,cB,ce,ch,cd,cK,ca=true,cv="undefined",c0=("sizcache"+Math.random()).replace(".",""),b5=String,b9=cT.document,cc=b9.documentElement,cs=0,cg=0,cF=[].pop,cX=[].push,cm=[].slice,cp=[].indexOf||function(c9){var c8=0,e=this.length;for(;c8<e;c8++){if(this[c8]===c9){return c8}}return -1},c2=function(e,c8){e[c0]=c8==null||c8;return e},c6=function(){var e={},c8=[];return c2(function(c9,da){if(c8.push(c9)>cM.cacheLength){delete e[c8.shift()]}return(e[c9+" "]=da)},e)},cV=c6(),cW=c6(),co=c6(),cz="[\\x20\\t\\r\\n\\f]",cl="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",cj=cl.replace("w","w#"),c5="([*^$|!~]?=)",cQ="\\["+cz+"*("+cl+")"+cz+"*(?:"+c5+cz+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+cj+")|)|)"+cz+"*\\]",c7=":("+cl+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+cQ+")|[^:]|\\\\.)*|.*))\\)|)",cA=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+cz+"*((?:-\\d)?\\d*)"+cz+"*\\)|)(?=[^-]|$)",cU=new RegExp("^"+cz+"+|((?:^|[^\\\\])(?:\\\\.)*)"+cz+"+$","g"),b6=new RegExp("^"+cz+"*,"+cz+"*"),cI=new RegExp("^"+cz+"*([\\x20\\t\\r\\n\\f>+~])"+cz+"*"),cN=new RegExp(c7),cP=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,cE=/^:not/,cS=/[\x20\t\r\n\f]*[+~]/,c1=/:not\($/,ct=/h\d/i,cO=/input|select|textarea|button/i,cu=/\\(?!\\)/g,cH={ID:new RegExp("^#("+cl+")"),CLASS:new RegExp("^\\.("+cl+")"),NAME:new RegExp("^\\[name=['\"]?("+cl+")['\"]?\\]"),TAG:new RegExp("^("+cl.replace("w","w*")+")"),ATTR:new RegExp("^"+cQ),PSEUDO:new RegExp("^"+c7),POS:new RegExp(cA,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+cz+"*(even|odd|(([+-]|)(\\d*)n|)"+cz+"*(?:([+-]|)"+cz+"*(\\d+)|))"+cz+"*\\)|)","i"),needsContext:new RegExp("^"+cz+"*[>+~]|"+cA,"i")},cL=function(c8){var da=b9.createElement("div");try{return c8(da)}catch(c9){return false}finally{da=null}},b8=cL(function(e){e.appendChild(b9.createComment(""));return !e.getElementsByTagName("*").length}),cD=cL(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild&&typeof e.firstChild.getAttribute!==cv&&e.firstChild.getAttribute("href")==="#"}),cr=cL(function(c8){c8.innerHTML="<select></select>";var e=typeof c8.lastChild.getAttribute("multiple");return e!=="boolean"&&e!=="string"}),cC=cL(function(e){e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!e.getElementsByClassName||!e.getElementsByClassName("e").length){return false}e.lastChild.className="e";return e.getElementsByClassName("e").length===2}),b0=cL(function(e){MSApp.execUnsafeLocalFunction(function(){e.id=c0+0;e.innerHTML="<a name='"+c0+"'></a><div name='"+c0+"'></div>";cc.insertBefore(e,cc.firstChild);var c8=b9.getElementsByName&&b9.getElementsByName(c0).length===2+b9.getElementsByName(c0+0).length;cb=!b9.getElementById(c0);cc.removeChild(e);return c8})});try{cm.call(cc.childNodes,0)[0].nodeType}catch(c4){cm=function(c8){var c9,e=[];for(;(c9=this[c8]);c8++){e.push(c9)}return e}}function cR(da,e,dc,df){dc=dc||[];e=e||b9;var dd,c8,de,c9,db=e.nodeType;if(!da||typeof da!=="string"){return dc}if(db!==1&&db!==9){return[]}de=cn(e);if(!de&&!df){if((dd=cP.exec(da))){if((c9=dd[1])){if(db===9){c8=e.getElementById(c9);if(c8&&c8.parentNode){if(c8.id===c9){dc.push(c8);return dc}}else{return dc}}else{if(e.ownerDocument&&(c8=e.ownerDocument.getElementById(c9))&&cB(e,c8)&&c8.id===c9){dc.push(c8);return dc}}}else{if(dd[2]){cX.apply(dc,cm.call(e.getElementsByTagName(da),0));return dc}else{if((c9=dd[3])&&cC&&e.getElementsByClassName){cX.apply(dc,cm.call(e.getElementsByClassName(c9),0));return dc}}}}}return cZ(da.replace(cU,"$1"),e,dc,df,de)}cR.matches=function(c8,e){return cR(c8,null,null,e)};cR.matchesSelector=function(e,c8){return cR(c8,null,null,[e]).length>0};function cJ(e){return function(c9){var c8=c9.nodeName.toLowerCase();return c8==="input"&&c9.type===e}}function b4(e){return function(c9){var c8=c9.nodeName.toLowerCase();return(c8==="input"||c8==="button")&&c9.type===e}}function cG(e){return c2(function(c8){c8=+c8;return c2(function(c9,dd){var db,da=e([],c9.length,c8),dc=da.length;while(dc--){if(c9[(db=da[dc])]){c9[db]=!(dd[db]=c9[db])}}})})}b1=cR.getText=function(db){var da,c8="",c9=0,e=db.nodeType;if(e){if(e===1||e===9||e===11){if(typeof db.textContent==="string"){return db.textContent}else{for(db=db.firstChild;db;db=db.nextSibling){c8+=b1(db)}}}else{if(e===3||e===4){return db.nodeValue}}}else{for(;(da=db[c9]);c9++){c8+=b1(da)}}return c8};cn=cR.isXML=function(e){var c8=e&&(e.ownerDocument||e).documentElement;return c8?c8.nodeName!=="HTML":false};cB=cR.contains=cc.contains?function(c8,e){var da=c8.nodeType===9?c8.documentElement:c8,c9=e&&e.parentNode;return c8===c9||!!(c9&&c9.nodeType===1&&da.contains&&da.contains(c9))}:cc.compareDocumentPosition?function(c8,e){return e&&!!(c8.compareDocumentPosition(e)&16)}:function(c8,e){while((e=e.parentNode)){if(e===c8){return true}}return false};cR.attr=function(c9,c8){var da,e=cn(c9);if(!e){c8=c8.toLowerCase()}if((da=cM.attrHandle[c8])){return da(c9)}if(e||cr){return c9.getAttribute(c8)}da=c9.getAttributeNode(c8);return da?typeof c9[c8]==="boolean"?c9[c8]?c8:null:da.specified?da.value:null:null};cM=cR.selectors={cacheLength:50,createPseudo:c2,match:cH,attrHandle:cD?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:cb?function(da,c9,c8){if(typeof c9.getElementById!==cv&&!c8){var e=c9.getElementById(da);return e&&e.parentNode?[e]:[]}}:function(da,c9,c8){if(typeof c9.getElementById!==cv&&!c8){var e=c9.getElementById(da);return e?e.id===da||typeof e.getAttributeNode!==cv&&e.getAttributeNode("id").value===da?[e]:ci:[]}},TAG:b8?function(e,c8){if(typeof c8.getElementsByTagName!==cv){return c8.getElementsByTagName(e)}}:function(e,db){var da=db.getElementsByTagName(e);if(e==="*"){var dc,c9=[],c8=0;for(;(dc=da[c8]);c8++){if(dc.nodeType===1){c9.push(dc)}}return c9}return da},NAME:b0&&function(e,c8){if(typeof c8.getElementsByName!==cv){return c8.getElementsByName(name)}},CLASS:cC&&function(c9,c8,e){if(typeof c8.getElementsByClassName!==cv&&!e){return c8.getElementsByClassName(c9)}}},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(cu,"");e[3]=(e[4]||e[5]||"").replace(cu,"");if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1]==="nth"){if(!e[2]){cR.error(e[0])}e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd"));e[4]=+((e[6]+e[7])||e[2]==="odd")}else{if(e[2]){cR.error(e[0])}}return e},PSEUDO:function(c8){var c9,e;if(cH.CHILD.test(c8[0])){return null}if(c8[3]){c8[2]=c8[3]}else{if((c9=c8[4])){if(cN.test(c9)&&(e=b2(c9,true))&&(e=c9.indexOf(")",c9.length-e)-c9.length)){c9=c9.slice(0,e);c8[0]=c8[0].slice(0,e)}c8[2]=c9}}return c8.slice(0,3)}},filter:{ID:cb?function(e){e=e.replace(cu,"");return function(c8){return c8.getAttribute("id")===e}}:function(e){e=e.replace(cu,"");return function(c9){var c8=typeof c9.getAttributeNode!==cv&&c9.getAttributeNode("id");return c8&&c8.value===e}},TAG:function(e){if(e==="*"){return function(){return true}}e=e.replace(cu,"").toLowerCase();return function(c8){return c8.nodeName&&c8.nodeName.toLowerCase()===e}},CLASS:function(e){var c8=cV[c0][e+" "];return c8||(c8=new RegExp("(^|"+cz+")"+e+"("+cz+"|$)"))&&cV(e,function(c9){return c8.test(c9.className||(typeof c9.getAttribute!==cv&&c9.getAttribute("class"))||"")})},ATTR:function(c9,c8,e){return function(dc,db){var da=cR.attr(dc,c9);if(da==null){return c8==="!="}if(!c8){return true}da+="";return c8==="="?da===e:c8==="!="?da!==e:c8==="^="?e&&da.indexOf(e)===0:c8==="*="?e&&da.indexOf(e)>-1:c8==="$="?e&&da.substr(da.length-e.length)===e:c8==="~="?(" "+da+" ").indexOf(e)>-1:c8==="|="?da===e||da.substr(0,e.length+1)===e+"-":false}},CHILD:function(e,c9,da,c8){if(e==="nth"){return function(dd){var dc,de,db=dd.parentNode;if(da===1&&c8===0){return true}if(db){de=0;for(dc=db.firstChild;dc;dc=dc.nextSibling){if(dc.nodeType===1){de++;if(dd===dc){break}}}}de-=c8;return de===da||(de%da===0&&de/da>=0)}}return function(dc){var db=dc;switch(e){case"only":case"first":while((db=db.previousSibling)){if(db.nodeType===1){return false}}if(e==="first"){return true}db=dc;case"last":while((db=db.nextSibling)){if(db.nodeType===1){return false}}return true}}},PSEUDO:function(da,c9){var e,c8=cM.pseudos[da]||cM.setFilters[da.toLowerCase()]||cR.error("unsupported pseudo: "+da);if(c8[c0]){return c8(c9)}if(c8.length>1){e=[da,da,"",c9];return cM.setFilters.hasOwnProperty(da.toLowerCase())?c2(function(dd,df){var dc,db=c8(dd,c9),de=db.length;while(de--){dc=cp.call(dd,db[de]);dd[dc]=!(df[dc]=db[de])}}):function(db){return c8(db,0,e)}}return c8}},pseudos:{not:c2(function(e){var c8=[],c9=[],da=ce(e.replace(cU,"$1"));return da[c0]?c2(function(dc,dh,df,dd){var dg,db=da(dc,null,dd,[]),de=dc.length;while(de--){if((dg=db[de])){dc[de]=!(dh[de]=dg)}}}):function(dd,dc,db){c8[0]=dd;da(c8,null,db,c9);return !c9.pop()}}),has:c2(function(e){return function(c8){return cR(e,c8).length>0}}),contains:c2(function(e){return function(c8){return(c8.textContent||c8.innerText||b1(c8)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===false},disabled:function(e){return e.disabled===true},checked:function(e){var c8=e.nodeName.toLowerCase();return(c8==="input"&&!!e.checked)||(c8==="option"&&!!e.selected)},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},parent:function(e){return !cM.pseudos.empty(e)},empty:function(c8){var e;c8=c8.firstChild;while(c8){if(c8.nodeName>"@"||(e=c8.nodeType)===3||e===4){return false}c8=c8.nextSibling}return true},header:function(e){return ct.test(e.nodeName)},text:function(c9){var c8,e;return c9.nodeName.toLowerCase()==="input"&&(c8=c9.type)==="text"&&((e=c9.getAttribute("type"))==null||e.toLowerCase()===c8)},radio:cJ("radio"),checkbox:cJ("checkbox"),file:cJ("file"),password:cJ("password"),image:cJ("image"),submit:b4("submit"),reset:b4("reset"),button:function(c8){var e=c8.nodeName.toLowerCase();return e==="input"&&c8.type==="button"||e==="button"},input:function(e){return cO.test(e.nodeName)},focus:function(e){var c8=e.ownerDocument;return e===c8.activeElement&&(!c8.hasFocus||c8.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},active:function(e){return e===e.ownerDocument.activeElement},first:cG(function(){return[0]}),last:cG(function(e,c8){return[c8-1]}),eq:cG(function(e,c9,c8){return[c8<0?c8+c9:c8]}),even:cG(function(e,c9){for(var c8=0;c8<c9;c8+=2){e.push(c8)}return e}),odd:cG(function(e,c9){for(var c8=1;c8<c9;c8+=2){e.push(c8)}return e}),lt:cG(function(e,da,c9){for(var c8=c9<0?c9+da:c9;--c8>=0;){e.push(c8)}return e}),gt:cG(function(e,da,c9){for(var c8=c9<0?c9+da:c9;++c8<da;){e.push(c8)}return e})}};function b3(c8,e,c9){if(c8===e){return c9}var da=c8.nextSibling;while(da){if(da===e){return -1}da=da.nextSibling}return 1}ch=cc.compareDocumentPosition?function(c8,e){if(c8===e){cd=true;return 0}return(!c8.compareDocumentPosition||!e.compareDocumentPosition?c8.compareDocumentPosition:c8.compareDocumentPosition(e)&4)?-1:1}:function(df,de){if(df===de){cd=true;return 0}else{if(df.sourceIndex&&de.sourceIndex){return df.sourceIndex-de.sourceIndex}}var dc,c8,c9=[],e=[],db=df.parentNode,dd=de.parentNode,dg=db;if(db===dd){return b3(df,de)}else{if(!db){return -1}else{if(!dd){return 1}}}while(dg){c9.unshift(dg);dg=dg.parentNode}dg=dd;while(dg){e.unshift(dg);dg=dg.parentNode}dc=c9.length;c8=e.length;for(var da=0;da<dc&&da<c8;da++){if(c9[da]!==e[da]){return b3(c9[da],e[da])}}return da===dc?b3(df,e[da],-1):b3(c9[da],de,1)};[0,0].sort(ch);ca=!cd;cR.uniqueSort=function(c9){var da,db=[],c8=1,e=0;cd=ca;c9.sort(ch);if(cd){for(;(da=c9[c8]);c8++){if(da===c9[c8-1]){e=db.push(c8)}}while(e--){c9.splice(db[e],1)}}return c9};cR.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};function b2(db,dg){var c8,dc,de,df,dd,c9,e,da=cW[c0][db+" "];if(da){return dg?0:da.slice(0)}dd=db;c9=[];e=cM.preFilter;while(dd){if(!c8||(dc=b6.exec(dd))){if(dc){dd=dd.slice(dc[0].length)||dd}c9.push(de=[])}c8=false;if((dc=cI.exec(dd))){de.push(c8=new b5(dc.shift()));dd=dd.slice(c8.length);c8.type=dc[0].replace(cU," ")}for(df in cM.filter){if((dc=cH[df].exec(dd))&&(!e[df]||(dc=e[df](dc)))){de.push(c8=new b5(dc.shift()));dd=dd.slice(c8.length);c8.type=df;c8.matches=dc}}if(!c8){break}}return dg?dd.length:dd?cR.error(db):cW(db,c9).slice(0)}function cx(db,c9,da){var e=c9.dir,dc=da&&c9.dir==="parentNode",c8=cg++;return c9.first?function(df,de,dd){while((df=df[e])){if(dc||df.nodeType===1){return db(df,de,dd)}}}:function(dg,df,de){if(!de){var dd,dh=cs+" "+c8+" ",di=dh+cY;while((dg=dg[e])){if(dc||dg.nodeType===1){if((dd=dg[c0])===di){return dg.sizset}else{if(typeof dd==="string"&&dd.indexOf(dh)===0){if(dg.sizset){return dg}}else{dg[c0]=di;if(db(dg,df,de)){dg.sizset=true;return dg}dg.sizset=false}}}}}else{while((dg=dg[e])){if(dc||dg.nodeType===1){if(db(dg,df,de)){return dg}}}}}}function cf(e){return e.length>1?function(db,da,c8){var c9=e.length;while(c9--){if(!e[c9](db,da,c8)){return false}}return true}:e[0]}function cw(e,c8,c9,da,dd){var db,dg=[],dc=0,de=e.length,df=c8!=null;for(;dc<de;dc++){if((db=e[dc])){if(!c9||c9(db,da,dd)){dg.push(db);if(df){c8.push(dc)}}}}return dg}function c3(c9,c8,db,da,dc,e){if(da&&!da[c0]){da=c3(da)}if(dc&&!dc[c0]){dc=c3(dc,e)}return c2(function(dn,dk,df,dm){var dq,dl,dh,dg=[],dp=[],de=dk.length,dd=dn||cq(c8||"*",df.nodeType?[df]:df,[]),di=c9&&(dn||!c8)?cw(dd,dg,c9,df,dm):dd,dj=db?dc||(dn?c9:de||da)?[]:dk:di;if(db){db(di,dj,df,dm)}if(da){dq=cw(dj,dp);da(dq,[],df,dm);dl=dq.length;while(dl--){if((dh=dq[dl])){dj[dp[dl]]=!(di[dp[dl]]=dh)}}}if(dn){if(dc||c9){if(dc){dq=[];dl=dj.length;while(dl--){if((dh=dj[dl])){dq.push((di[dl]=dh))}}dc(null,(dj=[]),dq,dm)}dl=dj.length;while(dl--){if((dh=dj[dl])&&(dq=dc?cp.call(dn,dh):dg[dl])>-1){dn[dq]=!(dk[dq]=dh)}}}}else{dj=cw(dj===dk?dj.splice(de,dj.length):dj);if(dc){dc(null,dk,dj,dm)}else{cX.apply(dk,dj)}}})}function cy(dd){var c8,db,c9,dc=dd.length,dg=cM.relative[dd[0].type],dh=dg||cM.relative[" "],da=dg?1:0,de=cx(function(di){return di===c8},dh,true),df=cx(function(di){return cp.call(c8,di)>-1},dh,true),e=[function(dk,dj,di){return(!dg&&(di||dj!==cK))||((c8=dj).nodeType?de(dk,dj,di):df(dk,dj,di))}];for(;da<dc;da++){if((db=cM.relative[dd[da].type])){e=[cx(cf(e),db)]}else{db=cM.filter[dd[da].type].apply(null,dd[da].matches);if(db[c0]){c9=++da;for(;c9<dc;c9++){if(cM.relative[dd[c9].type]){break}}return c3(da>1&&cf(e),da>1&&dd.slice(0,da-1).join("").replace(cU,"$1"),db,da<c9&&cy(dd.slice(da,c9)),c9<dc&&cy((dd=dd.slice(c9))),c9<dc&&dd.join(""))}e.push(db)}}return cf(e)}function b7(da,c9){var e=c9.length>0,db=da.length>0,c8=function(dl,df,dk,dj,ds){var dg,dh,dm,dr=[],dq=0,di="0",dc=dl&&[],dn=ds!=null,dp=cK,de=dl||db&&cM.find.TAG("*",ds&&df.parentNode||df),dd=(cs+=dp==null?1:Math.E);if(dn){cK=df!==b9&&df;cY=c8.el}for(;(dg=de[di])!=null;di++){if(db&&dg){for(dh=0;(dm=da[dh]);dh++){if(dm(dg,df,dk)){dj.push(dg);break}}if(dn){cs=dd;cY=++c8.el}}if(e){if((dg=!dm&&dg)){dq--}if(dl){dc.push(dg)}}}dq+=di;if(e&&di!==dq){for(dh=0;(dm=c9[dh]);dh++){dm(dc,dr,df,dk)}if(dl){if(dq>0){while(di--){if(!(dc[di]||dr[di])){dr[di]=cF.call(dj)}}}dr=cw(dr)}cX.apply(dj,dr);if(dn&&!dl&&dr.length>0&&(dq+c9.length)>1){cR.uniqueSort(dj)}}if(dn){cs=dd;cK=dp}return dc};c8.el=0;return e?c2(c8):c8}ce=cR.compile=function(e,dc){var c9,c8=[],db=[],da=co[c0][e+" "];if(!da){if(!dc){dc=b2(e)}c9=dc.length;while(c9--){da=cy(dc[c9]);if(da[c0]){c8.push(da)}else{db.push(da)}}da=co(e,b7(db,c8))}return da};function cq(c8,db,da){var c9=0,e=db.length;for(;c9<e;c9++){cR(c8,db[c9],da)}return da}function cZ(c9,e,db,df,de){var dc,di,c8,dh,dg,dd=b2(c9),da=dd.length;if(!df){if(dd.length===1){di=dd[0]=dd[0].slice(0);if(di.length>2&&(c8=di[0]).type==="ID"&&e.nodeType===9&&!de&&cM.relative[di[1].type]){e=cM.find.ID(c8.matches[0].replace(cu,""),e,de)[0];if(!e){return db}c9=c9.slice(di.shift().length)}for(dc=cH.POS.test(c9)?-1:di.length-1;dc>=0;dc--){c8=di[dc];if(cM.relative[(dh=c8.type)]){break}if((dg=cM.find[dh])){if((df=dg(c8.matches[0].replace(cu,""),cS.test(di[0].type)&&e.parentNode||e,de))){di.splice(dc,1);c9=df.length&&di.join("");if(!c9){cX.apply(db,cm.call(df,0));return db}break}}}}}ce(c9,dd)(df,e,de,db,cS.test(c9));return db}if(b9.querySelectorAll){(function(){var dc,dd=cZ,db=/'|\\/g,c9=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,c8=[":focus"],e=[":active"],da=cc.matchesSelector||cc.mozMatchesSelector||cc.webkitMatchesSelector||cc.oMatchesSelector||cc.msMatchesSelector;cL(function(de){de.innerHTML="<select><option selected=''></option></select>";if(!de.querySelectorAll("[selected]").length){c8.push("\\["+cz+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)")}if(!de.querySelectorAll(":checked").length){c8.push(":checked")}});cL(function(de){MSApp.execUnsafeLocalFunction(function(){de.innerHTML="<p test=''></p>";if(de.querySelectorAll("[test^='']").length){c8.push("[*^$]="+cz+"*(?:\"\"|'')")}de.innerHTML="<input type='hidden'/>";if(!de.querySelectorAll(":enabled").length){c8.push(":enabled",":disabled")}})});c8=new RegExp(c8.join("|"));cZ=function(dk,df,dm,dq,dp){if(!dq&&!dp&&!c8.test(dk)){var di,dn,dh=true,de=c0,dg=df,dl=df.nodeType===9&&dk;if(df.nodeType===1&&df.nodeName.toLowerCase()!=="object"){di=b2(dk);if((dh=df.getAttribute("id"))){de=dh.replace(db,"\\$&")}else{df.setAttribute("id",de)}de="[id='"+de+"'] ";dn=di.length;while(dn--){di[dn]=de+di[dn].join("")}dg=cS.test(dk)&&df.parentNode||df;dl=di.join(",")}if(dl){try{cX.apply(dm,cm.call(dg.querySelectorAll(dl),0));return dm}catch(dj){}finally{if(!dh){df.removeAttribute("id")}}}}return dd(dk,df,dm,dq,dp)};if(da){cL(function(df){dc=da.call(df,"div");try{da.call(df,"[test!='']:sizzle");e.push("!=",c7)}catch(de){}});e=new RegExp(e.join("|"));cR.matchesSelector=function(df,dh){dh=dh.replace(c9,"='$1']");if(!cn(df)&&!e.test(dh)&&!c8.test(dh)){try{var de=da.call(df,dh);if(de||dc||df.document&&df.document.nodeType!==11){return de}}catch(dg){}}return cR(dh,null,null,[df]).length>0}}})()}cM.pseudos.nth=cM.pseudos.eq;function ck(){}cM.filters=ck.prototype=cM.pseudos;cM.setFilters=new ck();cR.attr=bH.attr;bH.find=cR;bH.expr=cR.selectors;bH.expr[":"]=bH.expr.pseudos;bH.unique=cR.uniqueSort;bH.text=cR.getText;bH.isXMLDoc=cR.isXML;bH.contains=cR.contains})(a3);var ah=/Until$/,br=/^(?:parents|prev(?:Until|All))/,am=/^.[^:#\[\.,]*$/,z=bH.expr.match.needsContext,bv={children:true,contents:true,next:true,prev:true};bH.fn.extend({find:function(e){var b3,b0,b5,b6,b4,b2,b1=this;if(typeof e!=="string"){return bH(e).filter(function(){for(b3=0,b0=b1.length;b3<b0;b3++){if(bH.contains(b1[b3],this)){return true}}})}b2=this.pushStack("","find",e);for(b3=0,b0=this.length;b3<b0;b3++){b5=b2.length;bH.find(e,this[b3],b2);if(b3>0){for(b6=b5;b6<b2.length;b6++){for(b4=0;b4<b5;b4++){if(b2[b4]===b2[b6]){b2.splice(b6--,1);break}}}}}return b2},has:function(b2){var b1,b0=bH(b2,this),e=b0.length;return this.filter(function(){for(b1=0;b1<e;b1++){if(bH.contains(this,b0[b1])){return true}}})},not:function(e){return this.pushStack(aN(this,e,false),"not",e)},filter:function(e){return this.pushStack(aN(this,e,true),"filter",e)},is:function(e){return !!e&&(typeof e==="string"?z.test(e)?bH(e,this.context).index(this[0])>=0:bH.filter(e,this).length>0:this.filter(e).length>0)},closest:function(b3,b2){var b4,b1=0,e=this.length,b0=[],b5=z.test(b3)||typeof b3!=="string"?bH(b3,b2||this.context):0;for(;b1<e;b1++){b4=this[b1];while(b4&&b4.ownerDocument&&b4!==b2&&b4.nodeType!==11){if(b5?b5.index(b4)>-1:bH.find.matchesSelector(b4,b3)){b0.push(b4);break}b4=b4.parentNode}}b0=b0.length>1?bH.unique(b0):b0;return this.pushStack(b0,"closest",b3)},index:function(e){if(!e){return(this[0]&&this[0].parentNode)?this.prevAll().length:-1}if(typeof e==="string"){return bH.inArray(this[0],bH(e))}return bH.inArray(e.jquery?e[0]:e,this)},add:function(e,b0){var b2=typeof e==="string"?bH(e,b0):bH.makeArray(e&&e.nodeType?[e]:e),b1=bH.merge(this.get(),b2);return this.pushStack(aS(b2[0])||aS(b1[0])?b1:bH.unique(b1))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});bH.fn.andSelf=bH.fn.addBack;function aS(e){return !e||!e.parentNode||e.parentNode.nodeType===11}function aZ(b0,e){do{b0=b0[e]}while(b0&&b0.nodeType!==1);return b0}bH.each({parent:function(b0){var e=b0.parentNode;return e&&e.nodeType!==11?e:null},parents:function(e){return bH.dir(e,"parentNode")},parentsUntil:function(b0,e,b1){return bH.dir(b0,"parentNode",b1)},next:function(e){return aZ(e,"nextSibling")},prev:function(e){return aZ(e,"previousSibling")},nextAll:function(e){return bH.dir(e,"nextSibling")},prevAll:function(e){return bH.dir(e,"previousSibling")},nextUntil:function(b0,e,b1){return bH.dir(b0,"nextSibling",b1)},prevUntil:function(b0,e,b1){return bH.dir(b0,"previousSibling",b1)},siblings:function(e){return bH.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return bH.sibling(e.firstChild)},contents:function(e){return bH.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:bH.merge([],e.childNodes)}},function(e,b0){bH.fn[e]=function(b3,b1){var b2=bH.map(this,b0,b3);if(!ah.test(e)){b1=b3}if(b1&&typeof b1==="string"){b2=bH.filter(b1,b2)}b2=this.length>1&&!bv[e]?bH.unique(b2):b2;if(this.length>1&&br.test(e)){b2=b2.reverse()}return this.pushStack(b2,e,a5.call(arguments).join(","))}});bH.extend({filter:function(b1,e,b0){if(b0){b1=":not("+b1+")"}return e.length===1?bH.find.matchesSelector(e[0],b1)?[e[0]]:[]:bH.find.matches(b1,e)},dir:function(b1,b0,b3){var e=[],b2=b1[b0];while(b2&&b2.nodeType!==9&&(b3===aC||b2.nodeType!==1||!bH(b2).is(b3))){if(b2.nodeType===1){e.push(b2)}b2=b2[b0]}return e},sibling:function(b1,b0){var e=[];for(;b1;b1=b1.nextSibling){if(b1.nodeType===1&&b1!==b0){e.push(b1)}}return e}});function aN(b2,b1,e){b1=b1||0;if(bH.isFunction(b1)){return bH.grep(b2,function(b4,b3){var b5=!!b1.call(b4,b3,b4);return b5===e})}else{if(b1.nodeType){return bH.grep(b2,function(b4,b3){return(b4===b1)===e})}else{if(typeof b1==="string"){var b0=bH.grep(b2,function(b3){return b3.nodeType===1});if(am.test(b1)){return bH.filter(b1,b0,!e)}else{b1=bH.filter(b1,b0)}}}}return bH.grep(b2,function(b4,b3){return(bH.inArray(b4,b1)>=0)===e})}function B(e){var b1=c.split("|"),b0=e.createDocumentFragment();if(b0.createElement){while(b1.length){b0.createElement(b1.pop())}}return b0}var c="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",aw=/ jQuery\d+="(?:null|\d+)"/g,bZ=/^\s+/,az=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,p=/<([\w:]+)/,bU=/<tbody/i,K=/<|&#?\w+;/,ak=/<(?:script|style|link)/i,aq=/<(?:script|object|embed|option|style)/i,L=new RegExp("<(?:"+c+")[\\s/>]","i"),aF=/^(?:checkbox|radio)$/,bS=/checked\s*(?:[^=]|=\s*.checked.)/i,bx=/\/(java|ecma)script/i,aI=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,U={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},aR=B(o),l=aR.appendChild(o.createElement("div"));U.optgroup=U.option;U.tbody=U.tfoot=U.colgroup=U.caption=U.thead;U.th=U.td;if(!bH.support.htmlSerialize){U._default=[1,"X<div>","</div>"]}bH.fn.extend({text:function(e){return bH.access(this,function(b0){return b0===aC?bH.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(b0))},null,e,arguments.length)},wrapAll:function(e){if(bH.isFunction(e)){return this.each(function(b1){bH(this).wrapAll(e.call(this,b1))})}if(this[0]){var b0=bH(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){b0.insertBefore(this[0])}b0.map(function(){var b1=this;while(b1.firstChild&&b1.firstChild.nodeType===1){b1=b1.firstChild}return b1}).append(this)}return this},wrapInner:function(e){if(bH.isFunction(e)){return this.each(function(b0){bH(this).wrapInner(e.call(this,b0))})}return this.each(function(){var b0=bH(this),b1=b0.contents();if(b1.length){b1.wrapAll(e)}else{b0.append(e)}})},wrap:function(e){var b0=bH.isFunction(e);return this.each(function(b1){bH(this).wrapAll(b0?e.call(this,b1):e)})},unwrap:function(){return this.parent().each(function(){if(!bH.nodeName(this,"body")){bH(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1||this.nodeType===11){this.appendChild(e)}})},prepend:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1||this.nodeType===11){this.insertBefore(e,this.firstChild)}})},before:function(){if(!aS(this[0])){return this.domManip(arguments,false,function(b0){this.parentNode.insertBefore(b0,this)})}if(arguments.length){var e=bH.clean(arguments);return this.pushStack(bH.merge(e,this),"before",this.selector)}},after:function(){if(!aS(this[0])){return this.domManip(arguments,false,function(b0){this.parentNode.insertBefore(b0,this.nextSibling)})}if(arguments.length){var e=bH.clean(arguments);return this.pushStack(bH.merge(this,e),"after",this.selector)}},remove:function(e,b2){var b1,b0=0;for(;(b1=this[b0])!=null;b0++){if(!e||bH.filter(e,[b1]).length){if(!b2&&b1.nodeType===1){bH.cleanData(b1.getElementsByTagName("*"));bH.cleanData([b1])}if(b1.parentNode){b1.parentNode.removeChild(b1)}}}return this},empty:function(){var b0,e=0;for(;(b0=this[e])!=null;e++){if(b0.nodeType===1){bH.cleanData(b0.getElementsByTagName("*"))}while(b0.firstChild){b0.removeChild(b0.firstChild)}}return this},clone:function(b0,e){b0=b0==null?false:b0;e=e==null?b0:e;return this.map(function(){return bH.clone(this,b0,e)})},html:function(e){return bH.access(this,function(b3){var b2=this[0]||{},b1=0,b0=this.length;if(b3===aC){return b2.nodeType===1?b2.innerHTML.replace(aw,""):aC}if(typeof b3==="string"&&!ak.test(b3)&&(bH.support.htmlSerialize||!L.test(b3))&&(bH.support.leadingWhitespace||!bZ.test(b3))&&!U[(p.exec(b3)||["",""])[1].toLowerCase()]){b3=b3.replace(az,"<$1></$2>");try{for(;b1<b0;b1++){b2=this[b1]||{};if(b2.nodeType===1){bH.cleanData(b2.getElementsByTagName("*"));b2.innerHTML=b3}}b2=0}catch(b4){}}if(b2){this.empty().append(b3)}},null,e,arguments.length)},replaceWith:function(e){if(!aS(this[0])){if(bH.isFunction(e)){return this.each(function(b2){var b1=bH(this),b0=b1.html();b1.replaceWith(e.call(this,b2,b0))})}if(typeof e!=="string"){e=bH(e).detach()}return this.each(function(){var b1=this.nextSibling,b0=this.parentNode;bH(this).remove();if(b1){bH(b1).before(e)}else{bH(b0).append(e)}})}return this.length?this.pushStack(bH(bH.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,true)},domManip:function(b5,b9,b8){b5=[].concat.apply([],b5);var b1,b3,b4,b7,b2=0,b6=b5[0],b0=[],e=this.length;if(!bH.support.checkClone&&e>1&&typeof b6==="string"&&bS.test(b6)){return this.each(function(){bH(this).domManip(b5,b9,b8)})}if(bH.isFunction(b6)){return this.each(function(cb){var ca=bH(this);b5[0]=b6.call(this,cb,b9?ca.html():aC);ca.domManip(b5,b9,b8)})}if(this[0]){b1=bH.buildFragment(b5,this,b0);b4=b1.fragment;b3=b4.firstChild;if(b4.childNodes.length===1){b4=b3}if(b3){b9=b9&&bH.nodeName(b3,"tr");for(b7=b1.cacheable||e-1;b2<e;b2++){b8.call(b9&&bH.nodeName(this[b2],"table")?y(this[b2],"tbody"):this[b2],b2===b7?b4:bH.clone(b4,true,true))}}b4=b3=null;if(b0.length){bH.each(b0,function(ca,cb){if(cb.src){if(bH.ajax){bH.ajax({url:cb.src,type:"GET",dataType:"script",async:false,global:false,"throws":true})}else{bH.error("no ajax")}}else{bH.globalEval((cb.text||cb.textContent||cb.innerHTML||"").replace(aI,""))}if(cb.parentNode){cb.parentNode.removeChild(cb)}})}}return this}});function y(b0,e){return b0.getElementsByTagName(e)[0]||b0.appendChild(b0.ownerDocument.createElement(e))}function ap(b6,b0){if(b0.nodeType!==1||!bH.hasData(b6)){return}var b3,b2,e,b5=bH._data(b6),b4=bH._data(b0,b5),b1=b5.events;if(b1){delete b4.handle;b4.events={};for(b3 in b1){for(b2=0,e=b1[b3].length;b2<e;b2++){bH.event.add(b0,b3,b1[b3][b2])}}}if(b4.data){b4.data=bH.extend({},b4.data)}}function G(b0,e){var b1;if(e.nodeType!==1){return}if(e.clearAttributes){e.clearAttributes()}if(e.mergeAttributes){e.mergeAttributes(b0)}b1=e.nodeName.toLowerCase();if(b1==="object"){if(e.parentNode){e.outerHTML=b0.outerHTML}if(bH.support.html5Clone&&(b0.innerHTML&&!bH.trim(e.innerHTML))){e.innerHTML=b0.innerHTML}}else{if(b1==="input"&&aF.test(b0.type)){e.defaultChecked=e.checked=b0.checked;if(e.value!==b0.value){e.value=b0.value}}else{if(b1==="option"){e.selected=b0.defaultSelected}else{if(b1==="input"||b1==="textarea"){e.defaultValue=b0.defaultValue}else{if(b1==="script"&&e.text!==b0.text){e.text=b0.text}}}}}e.removeAttribute(bH.expando)}bH.buildFragment=function(b2,b3,b0){var b1,e,b4,b5=b2[0];b3=b3||o;b3=!b3.nodeType&&b3[0]||b3;b3=b3.ownerDocument||b3;if(b2.length===1&&typeof b5==="string"&&b5.length<512&&b3===o&&b5.charAt(0)==="<"&&!aq.test(b5)&&(bH.support.checkClone||!bS.test(b5))&&(bH.support.html5Clone||!L.test(b5))){e=true;b1=bH.fragments[b5];b4=b1!==aC}if(!b1){b1=b3.createDocumentFragment();bH.clean(b2,b3,b1,b0);if(e){bH.fragments[b5]=b4&&b1}}return{fragment:b1,cacheable:e}};bH.fragments={};bH.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,b0){bH.fn[e]=function(b1){var b3,b5=0,b4=[],b7=bH(b1),b2=b7.length,b6=this.length===1&&this[0].parentNode;if((b6==null||b6&&b6.nodeType===11&&b6.childNodes.length===1)&&b2===1){b7[b0](this[0]);return this}else{for(;b5<b2;b5++){b3=(b5>0?this.clone(true):this).get();bH(b7[b5])[b0](b3);b4=b4.concat(b3)}return this.pushStack(b4,e,b7.selector)}}});function m(e){if(typeof e.getElementsByTagName!=="undefined"){return e.getElementsByTagName("*")}else{if(typeof e.querySelectorAll!=="undefined"){return e.querySelectorAll("*")}else{return[]}}}function bT(e){if(aF.test(e.type)){e.defaultChecked=e.checked}}bH.extend({clone:function(b3,b5,b1){var e,b0,b2,b4;if(bH.support.html5Clone||bH.isXMLDoc(b3)||!L.test("<"+b3.nodeName+">")){b4=b3.cloneNode(true)}else{l.innerHTML=b3.outerHTML;l.removeChild(b4=l.firstChild)}if((!bH.support.noCloneEvent||!bH.support.noCloneChecked)&&(b3.nodeType===1||b3.nodeType===11)&&!bH.isXMLDoc(b3)){G(b3,b4);e=m(b3);b0=m(b4);for(b2=0;e[b2];++b2){if(b0[b2]){G(e[b2],b0[b2])}}}if(b5){ap(b3,b4);if(b1){e=m(b3);b0=m(b4);for(b2=0;e[b2];++b2){ap(e[b2],b0[b2])}}}e=b0=null;return b4},clean:function(cc,b1,e,b2){var b9,b8,cb,cg,b5,cf,b6,b3,b0,ca,ce,b7,b4=b1===o&&aR,cd=[];if(!b1||typeof b1.createDocumentFragment==="undefined"){b1=o}for(b9=0;(cb=cc[b9])!=null;b9++){if(typeof cb==="number"){cb+=""}if(!cb){continue}if(typeof cb==="string"){if(!K.test(cb)){cb=b1.createTextNode(cb)}else{b4=b4||B(b1);b6=b1.createElement("div");b4.appendChild(b6);cb=cb.replace(az,"<$1></$2>");cg=(p.exec(cb)||["",""])[1].toLowerCase();b5=U[cg]||U._default;cf=b5[0];b6.innerHTML=b5[1]+cb+b5[2];while(cf--){b6=b6.lastChild}if(!bH.support.tbody){b3=bU.test(cb);b0=cg==="table"&&!b3?b6.firstChild&&b6.firstChild.childNodes:b5[1]==="<table>"&&!b3?b6.childNodes:[];for(b8=b0.length-1;b8>=0;--b8){if(bH.nodeName(b0[b8],"tbody")&&!b0[b8].childNodes.length){b0[b8].parentNode.removeChild(b0[b8])}}}if(!bH.support.leadingWhitespace&&bZ.test(cb)){b6.insertBefore(b1.createTextNode(bZ.exec(cb)[0]),b6.firstChild)}cb=b6.childNodes;b6.parentNode.removeChild(b6)}}if(cb.nodeType){cd.push(cb)}else{bH.merge(cd,cb)}}if(b6){cb=b6=b4=null}if(!bH.support.appendChecked){for(b9=0;(cb=cd[b9])!=null;b9++){if(bH.nodeName(cb,"input")){bT(cb)}else{if(typeof cb.getElementsByTagName!=="undefined"){bH.grep(cb.getElementsByTagName("input"),bT)}}}}if(e){ce=function(ch){if(!ch.type||bx.test(ch.type)){return b2?b2.push(ch.parentNode?ch.parentNode.removeChild(ch):ch):e.appendChild(ch)}};for(b9=0;(cb=cd[b9])!=null;b9++){if(!(bH.nodeName(cb,"script")&&ce(cb))){e.appendChild(cb);if(typeof cb.getElementsByTagName!=="undefined"){b7=bH.grep(bH.merge([],cb.getElementsByTagName("script")),ce);cd.splice.apply(cd,[b9+1,0].concat(b7));b9+=b7.length}}}}return cd},cleanData:function(b0,b8){var b3,b1,b2,b7,b4=0,b9=bH.expando,e=bH.cache,b5=bH.support.deleteExpando,b6=bH.event.special;for(;(b2=b0[b4])!=null;b4++){if(b8||bH.acceptData(b2)){b1=b2[b9];b3=b1&&e[b1];if(b3){if(b3.events){for(b7 in b3.events){if(b6[b7]){bH.event.remove(b2,b7)}else{bH.removeEvent(b2,b7,b3.handle)}}}if(e[b1]){delete e[b1];if(b5){delete b2[b9]}else{if(b2.removeAttribute){b2.removeAttribute(b9)}else{b2[b9]=null}}bH.deletedIds.push(b1)}}}}}});(function(){var e,b0;bH.uaMatch=function(b2){b2=b2.toLowerCase();var b1=/(chrome)[ \/]([\w.]+)/.exec(b2)||/(webkit)[ \/]([\w.]+)/.exec(b2)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(b2)||/(msie) ([\w.]+)/.exec(b2)||b2.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(b2)||[];return{browser:b1[1]||"",version:b1[2]||"0"}};e=bH.uaMatch(d.userAgent);b0={};if(e.browser){b0[e.browser]=true;b0.version=e.version}if(b0.chrome){b0.webkit=true}else{if(b0.webkit){b0.safari=true}}bH.browser=b0;bH.sub=function(){function b1(b4,b5){return new b1.fn.init(b4,b5)}bH.extend(true,b1,this);b1.superclass=this;b1.fn=b1.prototype=this();b1.fn.constructor=b1;b1.sub=this.sub;b1.fn.init=function b3(b4,b5){if(b5&&b5 instanceof bH&&!(b5 instanceof b1)){b5=b1(b5)}return bH.fn.init.call(this,b4,b5,b2)};b1.fn.init.prototype=b1.fn;var b2=b1(o);return b1}})();var F,aA,aX,bf=/alpha\([^)]*\)/i,aT=/opacity=([^)]*)/,bl=/^(top|right|bottom|left)$/,H=/^(none|table(?!-c[ea]).+)/,a0=/^margin/,a9=new RegExp("^("+by+")(.*)$","i"),X=new RegExp("^("+by+")(?!px)[a-z%]+$","i"),T=new RegExp("^([-+])=("+by+")","i"),bi={BODY:"block"},ba={position:"absolute",visibility:"hidden",display:"block"},bB={letterSpacing:0,fontWeight:400},bR=["Top","Right","Bottom","Left"],at=["Webkit","O","Moz","ms"],aK=bH.fn.toggle;function b(b2,b0){if(b0 in b2){return b0}var b3=b0.charAt(0).toUpperCase()+b0.slice(1),e=b0,b1=at.length;while(b1--){b0=at[b1]+b3;if(b0 in b2){return b0}}return e}function R(b0,e){b0=e||b0;return bH.css(b0,"display")==="none"||!bH.contains(b0.ownerDocument,b0)}function s(b4,e){var b3,b5,b0=[],b1=0,b2=b4.length;for(;b1<b2;b1++){b3=b4[b1];if(!b3.style){continue}b0[b1]=bH._data(b3,"olddisplay");if(e){if(!b0[b1]&&b3.style.display==="none"){b3.style.display=""}if(b3.style.display===""&&R(b3)){b0[b1]=bH._data(b3,"olddisplay",bD(b3.nodeName))}}else{b5=F(b3,"display");if(!b0[b1]&&b5!=="none"){bH._data(b3,"olddisplay",b5)}}}for(b1=0;b1<b2;b1++){b3=b4[b1];if(!b3.style){continue}if(!e||b3.style.display==="none"||b3.style.display===""){b3.style.display=e?b0[b1]||"":"none"}}return b4}bH.fn.extend({css:function(e,b0){return bH.access(this,function(b2,b1,b3){return b3!==aC?bH.style(b2,b1,b3):bH.css(b2,b1)},e,b0,arguments.length>1)},show:function(){return s(this,true)},hide:function(){return s(this)},toggle:function(b1,b0){var e=typeof b1==="boolean";if(bH.isFunction(b1)&&bH.isFunction(b0)){return aK.apply(this,arguments)}return this.each(function(){if(e?b1:R(this)){bH(this).show()}else{bH(this).hide()}})}});bH.extend({cssHooks:{opacity:{get:function(b1,b0){if(b0){var e=F(b1,"opacity");return e===""?"1":e}}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":bH.support.cssFloat?"cssFloat":"styleFloat"},style:function(b2,b1,b8,b3){if(!b2||b2.nodeType===3||b2.nodeType===8||!b2.style){return}var b6,b7,b9,b4=bH.camelCase(b1),b0=b2.style;b1=bH.cssProps[b4]||(bH.cssProps[b4]=b(b0,b4));b9=bH.cssHooks[b1]||bH.cssHooks[b4];if(b8!==aC){b7=typeof b8;if(b7==="string"&&(b6=T.exec(b8))){b8=(b6[1]+1)*b6[2]+parseFloat(bH.css(b2,b1));b7="number"}if(b8==null||b7==="number"&&isNaN(b8)){return}if(b7==="number"&&!bH.cssNumber[b4]){b8+="px"}if(!b9||!("set" in b9)||(b8=b9.set(b2,b8,b3))!==aC){try{b0[b1]=b8}catch(b5){}}}else{if(b9&&"get" in b9&&(b6=b9.get(b2,false,b3))!==aC){return b6}return b0[b1]}},css:function(b5,b3,b4,b0){var b6,b2,e,b1=bH.camelCase(b3);b3=bH.cssProps[b1]||(bH.cssProps[b1]=b(b5.style,b1));e=bH.cssHooks[b3]||bH.cssHooks[b1];if(e&&"get" in e){b6=e.get(b5,true,b0)}if(b6===aC){b6=F(b5,b3)}if(b6==="normal"&&b3 in bB){b6=bB[b3]}if(b4||b0!==aC){b2=parseFloat(b6);return b4||bH.isNumeric(b2)?b2||0:b6}return b6},swap:function(b3,b2,b4){var b1,b0,e={};for(b0 in b2){e[b0]=b3.style[b0];b3.style[b0]=b2[b0]}b1=b4.call(b3);for(b0 in b2){b3.style[b0]=e[b0]}return b1}});if(a3.getComputedStyle){F=function(b6,b0){var e,b3,b2,b5,b4=a3.getComputedStyle(b6,null),b1=b6.style;if(b4){e=b4.getPropertyValue(b0)||b4[b0];if(e===""&&!bH.contains(b6.ownerDocument,b6)){e=bH.style(b6,b0)}if(X.test(e)&&a0.test(b0)){b3=b1.width;b2=b1.minWidth;b5=b1.maxWidth;b1.minWidth=b1.maxWidth=b1.width=e;e=b4.width;b1.width=b3;b1.minWidth=b2;b1.maxWidth=b5}}return e}}else{if(o.documentElement.currentStyle){F=function(b3,b1){var b4,e,b0=b3.currentStyle&&b3.currentStyle[b1],b2=b3.style;if(b0==null&&b2&&b2[b1]){b0=b2[b1]}if(X.test(b0)&&!bl.test(b1)){b4=b2.left;e=b3.runtimeStyle&&b3.runtimeStyle.left;if(e){b3.runtimeStyle.left=b3.currentStyle.left}b2.left=b1==="fontSize"?"1em":b0;b0=b2.pixelLeft+"px";b2.left=b4;if(e){b3.runtimeStyle.left=e}}return b0===""?"auto":b0}}}function aH(e,b1,b2){var b0=a9.exec(b1);return b0?Math.max(0,b0[1]-(b2||0))+(b0[2]||"px"):b1}function au(b2,b0,e,b4){var b1=e===(b4?"border":"content")?4:b0==="width"?1:0,b3=0;for(;b1<4;b1+=2){if(e==="margin"){b3+=bH.css(b2,e+bR[b1],true)}if(b4){if(e==="content"){b3-=parseFloat(F(b2,"padding"+bR[b1]))||0}if(e!=="margin"){b3-=parseFloat(F(b2,"border"+bR[b1]+"Width"))||0}}else{b3+=parseFloat(F(b2,"padding"+bR[b1]))||0;if(e!=="padding"){b3+=parseFloat(F(b2,"border"+bR[b1]+"Width"))||0}}}return b3}function v(b2,b0,e){var b3=b0==="width"?b2.offsetWidth:b2.offsetHeight,b1=true,b4=bH.support.boxSizing&&bH.css(b2,"boxSizing")==="border-box";if(b3<=0||b3==null){b3=F(b2,b0);if(b3<0||b3==null){b3=b2.style[b0]}if(X.test(b3)){return b3}b1=b4&&(bH.support.boxSizingReliable||b3===b2.style[b0]);b3=parseFloat(b3)||0}return(b3+au(b2,b0,e||(b4?"border":"content"),b1))+"px"}function bD(b1){if(bi[b1]){return bi[b1]}var e=bH("<"+b1+">").appendTo(o.body),b0=e.css("display");e.remove();if(b0==="none"||b0===""){aA=o.body.appendChild(aA||bH.extend(o.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!aX||!aA.createElement){aX=(aA.contentWindow||aA.contentDocument).document;aX.write("<!doctype html><html><body>");aX.close()}e=aX.body.appendChild(aX.createElement(b1));b0=F(e,"display");o.body.removeChild(aA)}bi[b1]=b0;return b0}bH.each(["height","width"],function(b0,e){bH.cssHooks[e]={get:function(b3,b2,b1){if(b2){if(b3.offsetWidth===0&&H.test(F(b3,"display"))){return bH.swap(b3,ba,function(){return v(b3,e,b1)})}else{return v(b3,e,b1)}}},set:function(b2,b3,b1){return aH(b2,b3,b1?au(b2,e,b1,bH.support.boxSizing&&bH.css(b2,"boxSizing")==="border-box"):0)}}});if(!bH.support.opacity){bH.cssHooks.opacity={get:function(b0,e){return aT.test((e&&b0.currentStyle?b0.currentStyle.filter:b0.style.filter)||"")?(0.01*parseFloat(RegExp.$1))+"":e?"1":""},set:function(b3,b4){var b2=b3.style,b0=b3.currentStyle,e=bH.isNumeric(b4)?"alpha(opacity="+b4*100+")":"",b1=b0&&b0.filter||b2.filter||"";b2.zoom=1;if(b4>=1&&bH.trim(b1.replace(bf,""))===""&&b2.removeAttribute){b2.removeAttribute("filter");if(b0&&!b0.filter){return}}b2.filter=bf.test(b1)?b1.replace(bf,e):b1+" "+e}}}bH(function(){if(!bH.support.reliableMarginRight){bH.cssHooks.marginRight={get:function(b0,e){return bH.swap(b0,{display:"inline-block"},function(){if(e){return F(b0,"marginRight")}})}}}if(!bH.support.pixelPosition&&bH.fn.position){bH.each(["top","left"],function(e,b0){bH.cssHooks[b0]={get:function(b3,b2){if(b2){var b1=F(b3,b0);return X.test(b1)?bH(b3).position()[b0]+"px":b1}}}})}});if(bH.expr&&bH.expr.filters){bH.expr.filters.hidden=function(e){return(e.offsetWidth===0&&e.offsetHeight===0)||(!bH.support.reliableHiddenOffsets&&((e.style&&e.style.display)||F(e,"display"))==="none")};bH.expr.filters.visible=function(e){return !bH.expr.filters.hidden(e)}}bH.each({margin:"",padding:"",border:"Width"},function(e,b0){bH.cssHooks[e+b0]={expand:function(b3){var b2,b4=typeof b3==="string"?b3.split(" "):[b3],b1={};for(b2=0;b2<4;b2++){b1[e+bR[b2]+b0]=b4[b2]||b4[b2-2]||b4[0]}return b1}};if(!a0.test(e)){bH.cssHooks[e+b0].set=aH}});var bt=/%20/g,aQ=/\[\]$/,V=/\r?\n/g,bA=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,aE=/^(?:select|textarea)/i;bH.fn.extend({serialize:function(){return bH.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?bH.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||aE.test(this.nodeName)||bA.test(this.type))}).map(function(e,b0){var b1=bH(this).val();return b1==null?null:bH.isArray(b1)?bH.map(b1,function(b3,b2){return{name:b0.name,value:b3.replace(V,"\r\n")}}):{name:b0.name,value:b1.replace(V,"\r\n")}}).get()}});bH.param=function(e,b1){var b2,b0=[],b3=function(b4,b5){b5=bH.isFunction(b5)?b5():(b5==null?"":b5);b0[b0.length]=encodeURIComponent(b4)+"="+encodeURIComponent(b5)};if(b1===aC){b1=bH.ajaxSettings&&bH.ajaxSettings.traditional}if(bH.isArray(e)||(e.jquery&&!bH.isPlainObject(e))){bH.each(e,function(){b3(this.name,this.value)})}else{for(b2 in e){k(b2,e[b2],b1,b3)}}return b0.join("&").replace(bt,"+")};function k(b1,b3,b0,b2){var e;if(bH.isArray(b3)){bH.each(b3,function(b5,b4){if(b0||aQ.test(b1)){b2(b1,b4)}else{k(b1+"["+(typeof b4==="object"?b5:"")+"]",b4,b0,b2)}})}else{if(!b0&&bH.type(b3)==="object"){for(e in b3){k(b1+"["+e+"]",b3[e],b0,b2)}}else{b2(b1,b3)}}}var bY,Z,ao=/#.*$/,ae=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,C=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,r=/^(?:GET|HEAD)$/,aD=/^\/\//,bO=/\?/,g=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Q=/([?&])_=[^&]*/,aU=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,bX=bH.fn.load,w={},a7={},aY=["*/"]+["*"];try{Z=aJ.href}catch(be){Z=o.createElement("a");Z.href="";Z=Z.href}bY=aU.exec(Z.toLowerCase())||[];function bJ(e){return function(b3,b5){if(typeof b3!=="string"){b5=b3;b3="*"}var b0,b6,b7,b2=b3.toLowerCase().split(aW),b1=0,b4=b2.length;if(bH.isFunction(b5)){for(;b1<b4;b1++){b0=b2[b1];b7=/^\+/.test(b0);if(b7){b0=b0.substr(1)||"*"}b6=e[b0]=e[b0]||[];b6[b7?"unshift":"push"](b5)}}}}function q(b0,b9,b4,b7,b6,b2){b6=b6||b9.dataTypes[0];b2=b2||{};b2[b6]=true;var b8,b5=b0[b6],b1=0,e=b5?b5.length:0,b3=(b0===w);for(;b1<e&&(b3||!b8);b1++){b8=b5[b1](b9,b4,b7);if(typeof b8==="string"){if(!b3||b2[b8]){b8=aC}else{b9.dataTypes.unshift(b8);b8=q(b0,b9,b4,b7,b8,b2)}}}if((b3||!b8)&&!b2["*"]){b8=q(b0,b9,b4,b7,"*",b2)}return b8}function u(b1,b2){var b0,e,b3=bH.ajaxSettings.flatOptions||{};for(b0 in b2){if(b2[b0]!==aC){(b3[b0]?b1:(e||(e={})))[b0]=b2[b0]}}if(e){bH.extend(true,b1,e)}}bH.fn.load=function(b2,b5,b6){if(typeof b2!=="string"&&bX){return bX.apply(this,arguments)}if(!this.length){return this}var e,b3,b1,b0=this,b4=b2.indexOf(" ");if(b4>=0){e=b2.slice(b4,b2.length);b2=b2.slice(0,b4)}if(bH.isFunction(b5)){b6=b5;b5=aC}else{if(b5&&typeof b5==="object"){b3="POST"}}bH.ajax({url:b2,type:b3,dataType:"html",data:b5,complete:function(b8,b7){if(b6){b0.each(b6,b1||[b8.responseText,b7,b8])}}}).done(function(b7){b1=arguments;b0.html(e?bH("<div>").append(b7.replace(g,"")).find(e):b7)});return this};bH.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,b0){bH.fn[b0]=function(b1){return this.on(b0,b1)}});bH.each(["get","post"],function(e,b0){bH[b0]=function(b1,b3,b4,b2){if(bH.isFunction(b3)){b2=b2||b4;b4=b3;b3=aC}return bH.ajax({type:b0,url:b1,data:b3,success:b4,dataType:b2})}});bH.extend({getScript:function(e,b0){return bH.get(e,aC,b0,"script")},getJSON:function(e,b0,b1){return bH.get(e,b0,b1,"json")},ajaxSetup:function(b0,e){if(e){u(b0,bH.ajaxSettings)}else{e=b0;b0=bH.ajaxSettings}u(b0,e);return b0},ajaxSettings:{url:Z,isLocal:C.test(bY[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":aY},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a3.String,"text html":true,"text json":bH.parseJSON,"text xml":bH.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:bJ(w),ajaxTransport:bJ(a7),ajax:function(b5,b2){if(typeof b5==="object"){b2=b5;b5=aC}b2=b2||{};var b8,cm,b3,ch,ca,ce,b1,cg,b9=bH.ajaxSetup({},b2),co=b9.context||b9,cc=co!==b9&&(co.nodeType||co instanceof bH)?bH(co):bH.event,cn=bH.Deferred(),cj=bH.Callbacks("once memory"),b6=b9.statusCode||{},cd={},ck={},b4=0,b7="canceled",cf={readyState:0,setRequestHeader:function(cp,cq){if(!b4){var e=cp.toLowerCase();cp=ck[e]=ck[e]||cp;cd[cp]=cq}return this},getAllResponseHeaders:function(){return b4===2?cm:null},getResponseHeader:function(cp){var e;if(b4===2){if(!b3){b3={};while((e=ae.exec(cm))){b3[e[1].toLowerCase()]=e[2]}}e=b3[cp.toLowerCase()]}return e===aC?null:e},overrideMimeType:function(e){if(!b4){b9.mimeType=e}return this},abort:function(e){e=e||b7;if(ch){ch.abort(e)}cb(0,e);return this}};function cb(ct,cp,cu,cr){var e,cx,cv,cs,cw,cq=cp;if(b4===2){return}b4=2;if(ca){clearTimeout(ca)}ch=aC;cm=cr||"";cf.readyState=ct>0?4:0;if(cu){cs=h(b9,cf,cu)}if(ct>=200&&ct<300||ct===304){if(b9.ifModified){cw=cf.getResponseHeader("Last-Modified");if(cw){bH.lastModified[b8]=cw}cw=cf.getResponseHeader("Etag");if(cw){bH.etag[b8]=cw}}if(ct===304){cq="notmodified";e=true}else{e=af(b9,cs);cq=e.state;cx=e.data;cv=e.error;e=!cv}}else{cv=cq;if(!cq||ct){cq="error";if(ct<0){ct=0}}}cf.status=ct;cf.statusText=(cp||cq)+"";if(e){cn.resolveWith(co,[cx,cq,cf])}else{cn.rejectWith(co,[cf,cq,cv])}cf.statusCode(b6);b6=aC;if(b1){cc.trigger("ajax"+(e?"Success":"Error"),[cf,b9,e?cx:cv])}cj.fireWith(co,[cf,cq]);if(b1){cc.trigger("ajaxComplete",[cf,b9]);if(!(--bH.active)){bH.event.trigger("ajaxStop")}}}cn.promise(cf);cf.success=cf.done;cf.error=cf.fail;cf.complete=cj.add;cf.statusCode=function(cp){if(cp){var e;if(b4<2){for(e in cp){b6[e]=[b6[e],cp[e]]}}else{e=cp[cf.status];cf.always(e)}}return this};b9.url=((b5||b9.url)+"").replace(ao,"").replace(aD,bY[1]+"//");b9.dataTypes=bH.trim(b9.dataType||"*").toLowerCase().split(aW);if(b9.crossDomain==null){ce=aU.exec(b9.url.toLowerCase());b9.crossDomain=!!(ce&&(ce[1]!==bY[1]||ce[2]!==bY[2]||(ce[3]||(ce[1]==="http:"?80:443))!=(bY[3]||(bY[1]==="http:"?80:443))))}if(b9.data&&b9.processData&&typeof b9.data!=="string"){b9.data=bH.param(b9.data,b9.traditional)}q(w,b9,b2,cf);if(b4===2){return cf}b1=b9.global;b9.type=b9.type.toUpperCase();b9.hasContent=!r.test(b9.type);if(b1&&bH.active++===0){bH.event.trigger("ajaxStart")}if(!b9.hasContent){if(b9.data){b9.url+=(bO.test(b9.url)?"&":"?")+b9.data;delete b9.data}b8=b9.url;if(b9.cache===false){var b0=bH.now(),cl=b9.url.replace(Q,"$1_="+b0);b9.url=cl+((cl===b9.url)?(bO.test(b9.url)?"&":"?")+"_="+b0:"")}}if(b9.data&&b9.hasContent&&b9.contentType!==false||b2.contentType){cf.setRequestHeader("Content-Type",b9.contentType)}if(b9.ifModified){b8=b8||b9.url;if(bH.lastModified[b8]){cf.setRequestHeader("If-Modified-Since",bH.lastModified[b8])}if(bH.etag[b8]){cf.setRequestHeader("If-None-Match",bH.etag[b8])}}cf.setRequestHeader("Accept",b9.dataTypes[0]&&b9.accepts[b9.dataTypes[0]]?b9.accepts[b9.dataTypes[0]]+(b9.dataTypes[0]!=="*"?", "+aY+"; q=0.01":""):b9.accepts["*"]);for(cg in b9.headers){cf.setRequestHeader(cg,b9.headers[cg])}if(b9.beforeSend&&(b9.beforeSend.call(co,cf,b9)===false||b4===2)){return cf.abort()}b7="abort";for(cg in {success:1,error:1,complete:1}){cf[cg](b9[cg])}ch=q(a7,b9,b2,cf);if(!ch){cb(-1,"No Transport")}else{cf.readyState=1;if(b1){cc.trigger("ajaxSend",[cf,b9])}if(b9.async&&b9.timeout>0){ca=setTimeout(function(){cf.abort("timeout")},b9.timeout)}try{b4=1;ch.send(cd,cb)}catch(ci){if(b4<2){cb(-1,ci)}else{throw ci}}}return cf},active:0,lastModified:{},etag:{}});function h(b8,b7,b4){var b3,b5,b2,e,b0=b8.contents,b6=b8.dataTypes,b1=b8.responseFields;for(b5 in b1){if(b5 in b4){b7[b1[b5]]=b4[b5]}}while(b6[0]==="*"){b6.shift();if(b3===aC){b3=b8.mimeType||b7.getResponseHeader("content-type")}}if(b3){for(b5 in b0){if(b0[b5]&&b0[b5].test(b3)){b6.unshift(b5);break}}}if(b6[0] in b4){b2=b6[0]}else{for(b5 in b4){if(!b6[0]||b8.converters[b5+" "+b6[0]]){b2=b5;break}if(!e){e=b5}}b2=b2||e}if(b2){if(b2!==b6[0]){b6.unshift(b2)}return b4[b2]}}function af(ca,b2){var b8,b0,b6,b4,b7=ca.dataTypes.slice(),b1=b7[0],b9={},b3=0;if(ca.dataFilter){b2=ca.dataFilter(b2,ca.dataType)}if(b7[1]){for(b8 in ca.converters){b9[b8.toLowerCase()]=ca.converters[b8]}}for(;(b6=b7[++b3]);){if(b6!=="*"){if(b1!=="*"&&b1!==b6){b8=b9[b1+" "+b6]||b9["* "+b6];if(!b8){for(b0 in b9){b4=b0.split(" ");if(b4[1]===b6){b8=b9[b1+" "+b4[0]]||b9["* "+b4[0]];if(b8){if(b8===true){b8=b9[b0]}else{if(b9[b0]!==true){b6=b4[0];b7.splice(b3--,0,b6)}}break}}}}if(b8!==true){if(b8&&ca["throws"]){b2=b8(b2)}else{try{b2=b8(b2)}catch(b5){return{state:"parsererror",error:b8?b5:"No conversion from "+b1+" to "+b6}}}}}b1=b6}}return{state:"success",data:b2}}var bq=[],ax=/\?/,a6=/(=)\?(?=&|$)|\?\?/,bm=bH.now();bH.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=bq.pop()||(bH.expando+"_"+(bm++));this[e]=true;return e}});bH.ajaxPrefilter("json jsonp",function(b9,b4,b8){var b7,e,b6,b2=b9.data,b0=b9.url,b1=b9.jsonp!==false,b5=b1&&a6.test(b0),b3=b1&&!b5&&typeof b2==="string"&&!(b9.contentType||"").indexOf("application/x-www-form-urlencoded")&&a6.test(b2);if(b9.dataTypes[0]==="jsonp"||b5||b3){b7=b9.jsonpCallback=bH.isFunction(b9.jsonpCallback)?b9.jsonpCallback():b9.jsonpCallback;e=a3[b7];if(b5){b9.url=b0.replace(a6,"$1"+b7)}else{if(b3){b9.data=b2.replace(a6,"$1"+b7)}else{if(b1){b9.url+=(ax.test(b0)?"&":"?")+b9.jsonp+"="+b7}}}b9.converters["script json"]=function(){if(!b6){bH.error(b7+" was not called")}return b6[0]};b9.dataTypes[0]="json";a3[b7]=function(){b6=arguments};b8.always(function(){a3[b7]=e;if(b9[b7]){b9.jsonpCallback=b4.jsonpCallback;bq.push(b7)}if(b6&&bH.isFunction(e)){e(b6[0])}b6=e=aC});return"script"}});bH.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){bH.globalEval(e);return e}}});bH.ajaxPrefilter("script",function(e){if(e.cache===aC){e.cache=false}if(e.crossDomain){e.type="GET";e.global=false}});bH.ajaxTransport("script",function(b1){if(b1.crossDomain){var e,b0=o.head||o.getElementsByTagName("head")[0]||o.documentElement;return{send:function(b2,b3){e=o.createElement("script");e.async="async";if(b1.scriptCharset){e.charset=b1.scriptCharset}e.src=b1.url;e.onload=e.onreadystatechange=function(b5,b4){if(b4||!e.readyState||/loaded|complete/.test(e.readyState)){e.onload=e.onreadystatechange=null;if(b0&&e.parentNode){b0.removeChild(e)}e=aC;if(!b4){b3(200,"success")}}};b0.insertBefore(e,b0.firstChild)},abort:function(){if(e){e.onload(0,1)}}}}});var ai,aO=a3.ActiveXObject?function(){for(var e in ai){ai[e](0,1)}}:false,av=0;function bC(){try{return new a3.XMLHttpRequest()}catch(b0){}}function bc(){try{return new a3.ActiveXObject("Microsoft.XMLHTTP")}catch(b0){}}bH.ajaxSettings.xhr=a3.ActiveXObject?function(){return !this.isLocal&&bC()||bc()}:bC;(function(e){bH.extend(bH.support,{ajax:!!e,cors:!!e&&("withCredentials" in e)})})(bH.ajaxSettings.xhr());if(bH.support.ajax){bH.ajaxTransport(function(e){if(!e.crossDomain||bH.support.cors){var b0;return{send:function(b6,b1){var b4,b3,b5=e.xhr();if(e.username){b5.open(e.type,e.url,e.async,e.username,e.password)}else{b5.open(e.type,e.url,e.async)}if(e.xhrFields){for(b3 in e.xhrFields){b5[b3]=e.xhrFields[b3]}}if(e.mimeType&&b5.overrideMimeType){b5.overrideMimeType(e.mimeType)}if(!e.crossDomain&&!b6["X-Requested-With"]){b6["X-Requested-With"]="XMLHttpRequest"}try{for(b3 in b6){b5.setRequestHeader(b3,b6[b3])}}catch(b2){}b5.send((e.hasContent&&e.data)||null);b0=function(cf,b9){var ca,b8,b7,cd,cc;try{if(b0&&(b9||b5.readyState===4)){b0=aC;if(b4){b5.onreadystatechange=bH.noop;if(aO){delete ai[b4]}}if(b9){if(b5.readyState!==4){b5.abort()}}else{ca=b5.status;b7=b5.getAllResponseHeaders();cd={};cc=b5.responseXML;if(cc&&cc.documentElement){cd.xml=cc}try{cd.text=b5.responseText}catch(ce){}try{b8=b5.statusText}catch(ce){b8=""}if(!ca&&e.isLocal&&!e.crossDomain){ca=cd.text?200:404}else{if(ca===1223){ca=204}}}}}catch(cb){if(!b9){b1(-1,cb)}}if(cd){b1(ca,b8,cd,b7)}};if(!e.async){b0()}else{if(b5.readyState===4){setTimeout(b0,0)}else{b4=++av;if(aO){if(!ai){ai={};bH(a3).unload(aO)}ai[b4]=b0}b5.onreadystatechange=b0}}},abort:function(){if(b0){b0(0,1)}}}}})}var M,ac,bP=/^(?:toggle|show|hide)$/,bI=new RegExp("^(?:([-+])=|)("+by+")([a-z%]*)$","i"),bN=/queueHooks$/,ay=[i],a2={"*":[function(e,b6){var b2,b7,b8=this.createTween(e,b6),b3=bI.exec(b6),b4=b8.cur(),b0=+b4||0,b1=1,b5=20;if(b3){b2=+b3[2];b7=b3[3]||(bH.cssNumber[e]?"":"px");if(b7!=="px"&&b0){b0=bH.css(b8.elem,e,true)||b2||1;do{b1=b1||".5";b0=b0/b1;bH.style(b8.elem,e,b0+b7)}while(b1!==(b1=b8.cur()/b4)&&b1!==1&&--b5)}b8.unit=b7;b8.start=b0;b8.end=b3[1]?b0+(b3[1]+1)*b2:b2}return b8}]};function bk(){setTimeout(function(){M=aC},0);return(M=bH.now())}function bd(b0,e){bH.each(e,function(b5,b3){var b4=(a2[b5]||[]).concat(a2["*"]),b1=0,b2=b4.length;for(;b1<b2;b1++){if(b4[b1].call(b0,b5,b3)){return}}})}function f(b1,b5,b8){var b9,b4=0,e=0,b0=ay.length,b7=bH.Deferred().always(function(){delete b3.elem}),b3=function(){var cf=M||bk(),cc=Math.max(0,b2.startTime+b2.duration-cf),ca=cc/b2.duration||0,ce=1-ca,cb=0,cd=b2.tweens.length;for(;cb<cd;cb++){b2.tweens[cb].run(ce)}b7.notifyWith(b1,[b2,ce,cc]);if(ce<1&&cd){return cc}else{b7.resolveWith(b1,[b2]);return false}},b2=b7.promise({elem:b1,props:bH.extend({},b5),opts:bH.extend(true,{specialEasing:{}},b8),originalProperties:b5,originalOptions:b8,startTime:M||bk(),duration:b8.duration,tweens:[],createTween:function(cd,ca,cc){var cb=bH.Tween(b1,b2.opts,cd,ca,b2.opts.specialEasing[cd]||b2.opts.easing);b2.tweens.push(cb);return cb},stop:function(cb){var ca=0,cc=cb?b2.tweens.length:0;for(;ca<cc;ca++){b2.tweens[ca].run(1)}if(cb){b7.resolveWith(b1,[b2,cb])}else{b7.rejectWith(b1,[b2,cb])}return this}}),b6=b2.props;al(b6,b2.opts.specialEasing);for(;b4<b0;b4++){b9=ay[b4].call(b2,b1,b6,b2.opts);if(b9){return b9}}bd(b2,b6);if(bH.isFunction(b2.opts.start)){b2.opts.start.call(b1,b2)}bH.fx.timer(bH.extend(b3,{anim:b2,queue:b2.opts.queue,elem:b1}));return b2.progress(b2.opts.progress).done(b2.opts.done,b2.opts.complete).fail(b2.opts.fail).always(b2.opts.always)}function al(b2,b4){var b1,b0,b5,b3,e;for(b1 in b2){b0=bH.camelCase(b1);b5=b4[b0];b3=b2[b1];if(bH.isArray(b3)){b5=b3[1];b3=b2[b1]=b3[0]}if(b1!==b0){b2[b0]=b3;delete b2[b1]}e=bH.cssHooks[b0];if(e&&"expand" in e){b3=e.expand(b3);delete b2[b0];for(b1 in b3){if(!(b1 in b2)){b2[b1]=b3[b1];b4[b1]=b5}}}else{b4[b0]=b5}}}bH.Animation=bH.extend(f,{tweener:function(b0,b3){if(bH.isFunction(b0)){b3=b0;b0=["*"]}else{b0=b0.split(" ")}var b2,e=0,b1=b0.length;for(;e<b1;e++){b2=b0[e];a2[b2]=a2[b2]||[];a2[b2].unshift(b3)}},prefilter:function(b0,e){if(e){ay.unshift(b0)}else{ay.push(b0)}}});function i(b3,b9,e){var b8,b1,cb,b2,cf,b5,ce,cd,cc,b4=this,b0=b3.style,ca={},b7=[],b6=b3.nodeType&&R(b3);if(!e.queue){cd=bH._queueHooks(b3,"fx");if(cd.unqueued==null){cd.unqueued=0;cc=cd.empty.fire;cd.empty.fire=function(){if(!cd.unqueued){cc()}}}cd.unqueued++;b4.always(function(){b4.always(function(){cd.unqueued--;if(!bH.queue(b3,"fx").length){cd.empty.fire()}})})}if(b3.nodeType===1&&("height" in b9||"width" in b9)){e.overflow=[b0.overflow,b0.overflowX,b0.overflowY];if(bH.css(b3,"display")==="inline"&&bH.css(b3,"float")==="none"){if(!bH.support.inlineBlockNeedsLayout||bD(b3.nodeName)==="inline"){b0.display="inline-block"}else{b0.zoom=1}}}if(e.overflow){b0.overflow="hidden";if(!bH.support.shrinkWrapBlocks){b4.done(function(){b0.overflow=e.overflow[0];b0.overflowX=e.overflow[1];b0.overflowY=e.overflow[2]})}}for(b8 in b9){cb=b9[b8];if(bP.exec(cb)){delete b9[b8];b5=b5||cb==="toggle";if(cb===(b6?"hide":"show")){continue}b7.push(b8)}}b2=b7.length;if(b2){cf=bH._data(b3,"fxshow")||bH._data(b3,"fxshow",{});if("hidden" in cf){b6=cf.hidden}if(b5){cf.hidden=!b6}if(b6){bH(b3).show()}else{b4.done(function(){bH(b3).hide()})}b4.done(function(){var cg;bH.removeData(b3,"fxshow",true);for(cg in ca){bH.style(b3,cg,ca[cg])}});for(b8=0;b8<b2;b8++){b1=b7[b8];ce=b4.createTween(b1,b6?cf[b1]:0);ca[b1]=cf[b1]||bH.style(b3,b1);if(!(b1 in cf)){cf[b1]=ce.start;if(b6){ce.end=ce.start;ce.start=b1==="width"||b1==="height"?1:0}}}}}function I(b1,b0,b3,e,b2){return new I.prototype.init(b1,b0,b3,e,b2)}bH.Tween=I;I.prototype={constructor:I,init:function(b2,b0,b4,e,b3,b1){this.elem=b2;this.prop=b4;this.easing=b3||"swing";this.options=b0;this.start=this.now=this.cur();this.end=e;this.unit=b1||(bH.cssNumber[b4]?"":"px")},cur:function(){var e=I.propHooks[this.prop];return e&&e.get?e.get(this):I.propHooks._default.get(this)},run:function(b1){var b0,e=I.propHooks[this.prop];if(this.options.duration){this.pos=b0=bH.easing[this.easing](b1,this.options.duration*b1,0,1,this.options.duration)}else{this.pos=b0=b1}this.now=(this.end-this.start)*b0+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(e&&e.set){e.set(this)}else{I.propHooks._default.set(this)}return this}};I.prototype.init.prototype=I.prototype;I.propHooks={_default:{get:function(b0){var e;if(b0.elem[b0.prop]!=null&&(!b0.elem.style||b0.elem.style[b0.prop]==null)){return b0.elem[b0.prop]}e=bH.css(b0.elem,b0.prop,false,"");return !e||e==="auto"?0:e},set:function(e){if(bH.fx.step[e.prop]){bH.fx.step[e.prop](e)}else{if(e.elem.style&&(e.elem.style[bH.cssProps[e.prop]]!=null||bH.cssHooks[e.prop])){bH.style(e.elem,e.prop,e.now+e.unit)}else{e.elem[e.prop]=e.now}}}}};I.propHooks.scrollTop=I.propHooks.scrollLeft={set:function(e){if(e.elem.nodeType&&e.elem.parentNode){e.elem[e.prop]=e.now}}};bH.each(["toggle","show","hide"],function(b0,e){var b1=bH.fn[e];bH.fn[e]=function(b2,b4,b3){return b2==null||typeof b2==="boolean"||(!b0&&bH.isFunction(b2)&&bH.isFunction(b4))?b1.apply(this,arguments):this.animate(bG(e,true),b2,b4,b3)}});bH.fn.extend({fadeTo:function(e,b2,b1,b0){return this.filter(R).css("opacity",0).show().end().animate({opacity:b2},e,b1,b0)},animate:function(b5,b2,b4,b3){var b1=bH.isEmptyObject(b5),e=bH.speed(b2,b4,b3),b0=function(){var b6=f(this,bH.extend({},b5),e);if(b1){b6.stop(true)}};return b1||e.queue===false?this.each(b0):this.queue(e.queue,b0)},stop:function(b1,b0,e){var b2=function(b3){var b4=b3.stop;delete b3.stop;b4(e)};if(typeof b1!=="string"){e=b0;b0=b1;b1=aC}if(b0&&b1!==false){this.queue(b1||"fx",[])}return this.each(function(){var b6=true,b3=b1!=null&&b1+"queueHooks",b5=bH.timers,b4=bH._data(this);if(b3){if(b4[b3]&&b4[b3].stop){b2(b4[b3])}}else{for(b3 in b4){if(b4[b3]&&b4[b3].stop&&bN.test(b3)){b2(b4[b3])}}}for(b3=b5.length;b3--;){if(b5[b3].elem===this&&(b1==null||b5[b3].queue===b1)){b5[b3].anim.stop(e);b6=false;b5.splice(b3,1)}}if(b6||!e){bH.dequeue(this,b1)}})}});function bG(b1,b3){var b2,e={height:b1},b0=0;b3=b3?1:0;for(;b0<4;b0+=2-b3){b2=bR[b0];e["margin"+b2]=e["padding"+b2]=b1}if(b3){e.opacity=e.width=b1}return e}bH.each({slideDown:bG("show"),slideUp:bG("hide"),slideToggle:bG("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,b0){bH.fn[e]=function(b1,b3,b2){return this.animate(b0,b1,b3,b2)}});bH.speed=function(b1,b2,b0){var e=b1&&typeof b1==="object"?bH.extend({},b1):{complete:b0||!b0&&b2||bH.isFunction(b1)&&b1,duration:b1,easing:b0&&b2||b2&&!bH.isFunction(b2)&&b2};e.duration=bH.fx.off?0:typeof e.duration==="number"?e.duration:e.duration in bH.fx.speeds?bH.fx.speeds[e.duration]:bH.fx.speeds._default;if(e.queue==null||e.queue===true){e.queue="fx"}e.old=e.complete;e.complete=function(){if(bH.isFunction(e.old)){e.old.call(this)}if(e.queue){bH.dequeue(this,e.queue)}};return e};bH.easing={linear:function(e){return e},swing:function(e){return 0.5-Math.cos(e*Math.PI)/2}};bH.timers=[];bH.fx=I.prototype.init;bH.fx.tick=function(){var b1,b0=bH.timers,e=0;M=bH.now();for(;e<b0.length;e++){b1=b0[e];if(!b1()&&b0[e]===b1){b0.splice(e--,1)}}if(!b0.length){bH.fx.stop()}M=aC};bH.fx.timer=function(e){if(e()&&bH.timers.push(e)&&!ac){ac=setInterval(bH.fx.tick,bH.fx.interval)}};bH.fx.interval=13;bH.fx.stop=function(){clearInterval(ac);ac=null};bH.fx.speeds={slow:600,fast:200,_default:400};bH.fx.step={};if(bH.expr&&bH.expr.filters){bH.expr.filters.animated=function(e){return bH.grep(bH.timers,function(b0){return e===b0.elem}).length}}var bn=/^(?:body|html)$/i;bH.fn.offset=function(b9){if(arguments.length){return b9===aC?this:this.each(function(ca){bH.offset.setOffset(this,b9,ca)})}var b0,b5,b6,b3,b7,e,b2,b4={top:0,left:0},b1=this[0],b8=b1&&b1.ownerDocument;if(!b8){return}if((b5=b8.body)===b1){return bH.offset.bodyOffset(b1)}b0=b8.documentElement;if(!bH.contains(b0,b1)){return b4}if(typeof b1.getBoundingClientRect!=="undefined"){b4=b1.getBoundingClientRect()}b6=bo(b8);b3=b0.clientTop||b5.clientTop||0;b7=b0.clientLeft||b5.clientLeft||0;e=b6.pageYOffset||b0.scrollTop;b2=b6.pageXOffset||b0.scrollLeft;return{top:b4.top+e-b3,left:b4.left+b2-b7}};bH.offset={bodyOffset:function(e){var b1=e.offsetTop,b0=e.offsetLeft;if(bH.support.doesNotIncludeMarginInBodyOffset){b1+=parseFloat(bH.css(e,"marginTop"))||0;b0+=parseFloat(bH.css(e,"marginLeft"))||0}return{top:b1,left:b0}},setOffset:function(b2,cb,b5){var b6=bH.css(b2,"position");if(b6==="static"){b2.style.position="relative"}var b4=bH(b2),b0=b4.offset(),e=bH.css(b2,"top"),b9=bH.css(b2,"left"),ca=(b6==="absolute"||b6==="fixed")&&bH.inArray("auto",[e,b9])>-1,b8={},b7={},b1,b3;if(ca){b7=b4.position();b1=b7.top;b3=b7.left}else{b1=parseFloat(e)||0;b3=parseFloat(b9)||0}if(bH.isFunction(cb)){cb=cb.call(b2,b5,b0)}if(cb.top!=null){b8.top=(cb.top-b0.top)+b1}if(cb.left!=null){b8.left=(cb.left-b0.left)+b3}if("using" in cb){cb.using.call(b2,b8)}else{b4.css(b8)}}};bH.fn.extend({position:function(){if(!this[0]){return}var b1=this[0],b0=this.offsetParent(),b2=this.offset(),e=bn.test(b0[0].nodeName)?{top:0,left:0}:b0.offset();b2.top-=parseFloat(bH.css(b1,"marginTop"))||0;b2.left-=parseFloat(bH.css(b1,"marginLeft"))||0;e.top+=parseFloat(bH.css(b0[0],"borderTopWidth"))||0;e.left+=parseFloat(bH.css(b0[0],"borderLeftWidth"))||0;return{top:b2.top-e.top,left:b2.left-e.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||o.body;while(e&&(!bn.test(e.nodeName)&&bH.css(e,"position")==="static")){e=e.offsetParent}return e||o.body})}});bH.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b1,b0){var e=/Y/.test(b0);bH.fn[b1]=function(b2){return bH.access(this,function(b3,b6,b5){var b4=bo(b3);if(b5===aC){return b4?(b0 in b4)?b4[b0]:b4.document.documentElement[b6]:b3[b6]}if(b4){b4.scrollTo(!e?b5:bH(b4).scrollLeft(),e?b5:bH(b4).scrollTop())}else{b3[b6]=b5}},b1,b2,arguments.length,null)}});function bo(e){return bH.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:false}bH.each({Height:"height",Width:"width"},function(e,b0){bH.each({padding:"inner"+e,content:b0,"":"outer"+e},function(b1,b2){bH.fn[b2]=function(b6,b5){var b4=arguments.length&&(b1||typeof b6!=="boolean"),b3=b1||(b6===true||b5===true?"margin":"border");return bH.access(this,function(b8,b7,b9){var ca;if(bH.isWindow(b8)){return b8.document.documentElement["client"+e]}if(b8.nodeType===9){ca=b8.documentElement;return Math.max(b8.body["scroll"+e],ca["scroll"+e],b8.body["offset"+e],ca["offset"+e],ca["client"+e])}return b9===aC?bH.css(b8,b7,b9,b3):bH.style(b8,b7,b9,b3)},b0,b4?b6:aC,b4,null)}})});a3.jQuery=a3.$=bH;if(typeof define==="function"&&define.amd&&define.amd.jQuery){define("jquery",[],function(){return bH})}})(window);if(!window.require){window.require=function require(){}}if(!window.sc_require){window.sc_require=require}if(!window.sc_resource){window.sc_resource=function sc_resource(){}}sc_require("license");window.YES=true;window.NO=false;if(typeof console==="undefined"){window.console={};console.log=console.info=console.warn=console.error=function(){}}window.SC=window.SC||{};window.SproutCore=window.SproutCore||SC;SC=window.SC;SC.VERSION="Edge";SC._baseMixin=function(e){var c=Array.prototype.slice.call(arguments,1),g=c[0]||{},a=1,f=c.length,b,h,d;if(f===1){g=this||{};a=0}for(;a<f;a++){if(!(b=c[a])){continue}for(d in b){if(!b.hasOwnProperty(d)){continue}h=b[d];if(g===h){continue}if(h!==undefined&&(e||(g[d]===undefined))){g[d]=h}}if(b.hasOwnProperty("toString")){g.toString=b.toString}}return g};SC.mixin=function(){var a=Array.prototype.slice.call(arguments);a.unshift(true);return SC._baseMixin.apply(this,a)};SC.supplement=function(){var a=Array.prototype.slice.call(arguments);a.unshift(false);return SC._baseMixin.apply(this,a)};SC.extend=SC.mixin;SC.mixin({T_ERROR:"error",T_OBJECT:"object",T_NULL:"null",T_CLASS:"class",T_HASH:"hash",T_FUNCTION:"function",T_UNDEFINED:"undefined",T_NUMBER:"number",T_BOOL:"boolean",T_ARRAY:"array",T_STRING:"string",T_DATE:"date",T_REGEXP:"regexp",typeOf:function(a){var b=SC._nativeTypeOf(a);if(b==="function"){return a.isClass?SC.T_CLASS:SC.T_FUNCTION}else{if(b==="object"){if(SC.Error&&(a instanceof SC.Error)){return SC.T_ERROR}else{if(a instanceof SC.Object){return SC.T_OBJECT}else{return SC.T_HASH}}}}return b},_nativeTypeOf:function(a){if(a===undefined){return SC.T_UNDEFINED}if(a===null){return SC.T_NULL}var c=typeof a,b;if(c==="object"||c==="function"){b=SC._nativeToString.call(a);return SC._nativeTypeHash[b]||"object"}else{return c}},_nativeTypeHash:{"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},_nativeToString:Object.prototype.toString,none:function(a){return a==null},empty:function(a){return a===null||a===undefined||a===""},isArray:function(a){if(!a||a.setInterval){return false}if(Array.isArray&&Array.isArray(a)){return true}if(a.objectAt){return true}if(a.length!==undefined&&SC._nativeTypeOf(a)==="object"){return true}return false},makeArray:function(a){return SC.isArray(a)?a:SC.A(a)},A:function(c){if(c===null||c===undefined){return[]}if(c.slice instanceof Function){if(typeof(c)==="string"){return[c]}else{return c.slice()}}if(c.toArray){return c.toArray()}if(!SC.isArray(c)){return[c]}var b=[],a=c.length;while(--a>=0){b[a]=c[a]}return b},guidKey:"SproutCore"+(SC.VERSION+Math.random()).replace(/\D/g,""),_guidPrefixes:{number:"nu",string:"st"},_guidCaches:{number:{},string:{}},_numberGuids:[],_stringGuids:{},_keyCache:{},_uuid:0,guidFor:function(e){var b,c,d=typeof e;if(e===undefined){return"(undefined)"}if(e===null){return"(null)"}if(d===SC.T_NUMBER||d===SC.T_STRING){b=this._guidCaches[d];c=b[e];if(!c){c="st"+(SC._uuid++);b[e]=c}return c}else{if(d===SC.T_BOOL){return(e)?"(true)":"(false)"}}var a=this.guidKey;if(e[a]){return e[a]}if(e===Object){return"(Object)"}if(e===Array){return"(Array)"}return SC.generateGuid(e,"sc")},keyFor:function(d,c){var b,a=this._keyCache[d];if(!a){a=this._keyCache[d]={}}b=a[c];if(!b){b=a[c]=d+"_"+c}return b},generateGuid:function(c,b){var a=(b+(SC._uuid++));if(c){c[this.guidKey]=a}return a},hashFor:function(){var a=arguments.length,c="",e,d,b;for(b=0;b<a;++b){e=arguments[b];c+=(e&&(d=e.hash)&&(typeof d===SC.T_FUNCTION))?d.call(e):this.guidFor(e)}return c===""?null:c},isEqual:function(d,c){return this.hashFor(d)===this.hashFor(c)},compare:function(s,p){if(s===p){return 0}var j=SC.typeOf(s);var g=SC.typeOf(p);var b=SC.ORDER_DEFINITION_MAPPING;if(!b){var d=SC.ORDER_DEFINITION;b=SC.ORDER_DEFINITION_MAPPING={};var q,n;for(q=0,n=d.length;q<n;++q){b[d[q]]=q}delete SC.ORDER_DEFINITION}var u=b[j];var c=b[g];if(u<c){return -1}if(u>c){return 1}switch(j){case SC.T_BOOL:case SC.T_NUMBER:if(s<p){return -1}if(s>p){return 1}return 0;case SC.T_STRING:var k=s.localeCompare(p);if(k<0){return -1}if(k>0){return 1}return 0;case SC.T_ARRAY:var o=s.length;var m=p.length;var e=Math.min(o,m);var a=0;var h=0;var f=arguments.callee;while(a===0&&h<e){a=f(s[h],p[h]);h++}if(a!==0){return a}if(o<m){return -1}if(o>m){return 1}return 0;case SC.T_OBJECT:if(s.constructor.isComparable===YES){return s.constructor.compare(s,p)}return 0;default:return 0}},K:function(){return this},EMPTY_ARRAY:[],EMPTY_HASH:{},EMPTY_RANGE:{start:0,length:0},beget:function(c){if(c===null||c===undefined){return null}var a=SC.K;a.prototype=c;var b=new a();a.prototype=null;if(typeof c.didBeget==="function"){b=c.didBeget(b)}return b},copy:function(d,b){var c=d,a;if(d){if(d.isCopyable){return d.copy(b)}if(d.clone){return d.clone()}}switch(SC._nativeTypeOf(d)){case"array":c=d.slice();if(b){a=c.length;while(a--){c[a]=SC.copy(c[a],true)}}break;case"object":c={};for(var e in d){c[e]=b?SC.copy(d[e],true):d[e]}}return c},merge:function(){var c={},b=arguments.length,a;for(a=0;a<b;a++){SC.mixin(c,arguments[a])}return c},keys:function(c){var a=[];for(var b in c){a.push(b)}return a},inspect:function(d){var a,b=[];for(var c in d){a=d[c];if(a==="toString"){continue}if(SC.typeOf(a)===SC.T_FUNCTION){a="function () { ... }"}b.push(c+": "+a)}return"{ "+b.join(", ")+" }"},tupleForPropertyPath:function(e,a){if(e==null){return null}if(typeof e==="object"&&(e instanceof Array)){return e}var c;var b=e.indexOf("*");if(b<0){b=e.lastIndexOf(".")}c=(b>=0)?e.slice(b+1):e;var d=this.objectForPropertyPath(e,a,b);return(d&&c)?[d,c]:null},objectForPropertyPath:function(f,c,d){var g,b,e,a;if(!c){c=window}if(typeof f==="string"){if(d===undefined){d=f.length}g=0;while((c)&&(g<d)){b=f.indexOf(".",g);if((b<0)||(b>d)){b=d}e=f.slice(g,b);c=c.get?c.get(e):c[e];g=b+1}if(g<d){c=undefined}}else{g=0;a=f.length;e=null;while((g<a)&&c){e=f[g++];if(e){c=(c.get)?c.get(e):c[e]}}if(g<a){c=undefined}}return c},requiredObjectForPropertyPath:function(c,a,b){var d=SC.objectForPropertyPath(c,a,b);if(!d){throw c+" could not be found"}return d}});SC.clone=SC.copy;SC.$A=SC.A;SC.didLoad=SC.K;SC.ORDER_DEFINITION=[SC.T_ERROR,SC.T_UNDEFINED,SC.T_NULL,SC.T_BOOL,SC.T_NUMBER,SC.T_STRING,SC.T_ARRAY,SC.T_HASH,SC.T_OBJECT,SC.T_FUNCTION,SC.T_CLASS];SC.Function={property:function(b,c){b.dependentKeys=SC.$A(c);var a=SC.guidFor(b);b.cacheKey="__cache__"+a;b.lastSetValueKey="__lastValue__"+a;b.isProperty=true;return b},cacheable:function(a,b){a.isProperty=true;if(!a.dependentKeys){a.dependentKeys=[]}a.isCacheable=(b===undefined)?true:b;return a},idempotent:function(a,b){a.isProperty=true;if(!a.dependentKeys){this.dependentKeys=[]}a.isVolatile=(b===undefined)?true:b;return a},enhance:function(a){a.isEnhancement=true;return a},observes:function(c,a){var f=a.length,b=null,e=null;while(--f>=0){var d=a[f];if((d.indexOf(".")<0)&&(d.indexOf("*")<0)){if(!b){b=c.localPropertyPaths=[]}b.push(d)}else{if(!e){e=c.propertyPaths=[]}e.push(d)}}return c}};sc_require("system/function");SC.mixin(Function.prototype,{property:function(){return SC.Function.property(this,arguments)},cacheable:function(a){return SC.Function.cacheable(this,a)},idempotent:function(a){return SC.Function.idempotent(this,a)},enhance:function(){return SC.Function.enhance(this)},observes:function(a){return SC.Function.observes(this,arguments)}});SC.ObserverSet={add:function(j,a,c){var b=SC.guidFor(j),f=SC.guidFor(a),i=this._members,d=this.members,g=i[b],h,e;if(!g){g=i[b]={_size:0}}h=g[f];if(h===undefined){g[f]=d.length;g._size++;e=[j,a,c];d.push(e)}else{}},remove:function(g,h){var e=SC.guidFor(g),b=SC.guidFor(h);var d=this._members[e],a=this.members;if(!d){return false}var c=d[b];if(c===undefined){return false}if(c!==a.length-1){var f=(a[c]=a[a.length-1]);this._members[SC.guidFor(f[0])][SC.guidFor(f[1])]=c}a.pop();delete this._members[e][b];if(--this._members[e]._size===0){delete this._members[e]}return true},invokeMethods:function(){var b=this.members,d;for(var c=0,a=b.length;c<a;c++){d=b[c];d[1].call(d[0])}},clone:function(){var c=SC.ObserverSet.create(),d=this.members;c._members=SC.clone(this._members);var e=c.members;for(var b=0,a=d.length;b<a;b++){e[b]=SC.clone(d[b]);e[b].length=3}return c},create:function(){return new SC.ObserverSet.constructor()},getMembers:function(){return this.members.slice(0)},constructor:function(){this._members={};this.members=[]}};SC.ObserverSet.constructor.prototype=SC.ObserverSet;SC.ObserverSet.slice=SC.ObserverSet.clone;SC.ObserverSet.copy=SC.ObserverSet.clone;SC._ChainObserver=function(b,a){this.property=b;this.root=a||this};SC._ChainObserver.createChain=function(e,l,g,a,b){var c=l.split("."),j=new SC._ChainObserver(c[0]),h=j;for(var d=1,f=c.length;d<f;d++){h=h.next=new SC._ChainObserver(c[d],j)}var k=j.tails=[h];j.objectDidChange(e);k.forEach(function(i){i.target=g;i.method=a;i.context=b});j.tails=null;return j};SC._ChainObserver.prototype={isChainObserver:true,object:null,property:null,next:null,root:null,target:null,method:null,tail:function(){if(this._tail){return this._tail}var a=this;while(a.next){a=a.next}this._tail=a;return a},objectDidChange:function(a){if(a===this.object){return}if(this.object){if(this.property==="@each"&&this.object._removeContentObserver){this.object._removeContentObserver(this)}else{if(this.object.removeObserver){this.object.removeObserver(this.property,this,this.propertyDidChange)}}}this.object=a;if(this.property==="@each"&&this.next){if(this.object&&this.object._addContentObserver){this.object._addContentObserver(this)}}else{if(this.object&&this.object.addObserver){this.object.addObserver(this.property,this,this.propertyDidChange)}this.propertyDidChange()}},propertyDidChange:function(){var b=this.object;var e=this.property;var d=(b&&b.get)?b.get(e):null;if(this.next){this.next.objectDidChange(d)}var f=this.target,g=this.method,c=this.context;if(f&&g){var a=b?b.propertyRevision:null;if(c){g.call(f,b,e,d,c,a)}else{g.call(f,b,e,d,a)}}},destroyChain:function(){var a=this.object;if(a){if(this.property==="@each"&&this.next&&a._removeContentObserver){a._removeContentObserver(this)}if(a.removeObserver){a.removeObserver(this.property,this,this.propertyDidChange)}}if(this.next){this.next.destroyChain()}this.next=this.target=this.method=this.object=this.context=null;return null}};sc_require("ext/function");sc_require("private/observer_set");sc_require("private/chain_observer");SC.LOG_OBSERVERS=false;SC.OBSERVES_HANDLER_ADD=0;SC.OBSERVES_HANDLER_REMOVE=1;SC.Observable={isObservable:YES,automaticallyNotifiesObserversFor:function(a){return YES},get:function(c){var b=this[c],a;if(b===undefined){return this.unknownProperty(c)}else{if(b&&b.isProperty){if(b.isCacheable){a=this._kvo_cache;if(!a){a=this._kvo_cache={}}return(a[b.cacheKey]!==undefined)?a[b.cacheKey]:(a[b.cacheKey]=b.call(this,c))}else{return b.call(this,c)}}else{return b}}},set:function(i,g){var b=this[i],j=this.automaticallyNotifiesObserversFor(i),f=g,d,a,h,e;if(g===undefined&&SC.typeOf(i)===SC.T_HASH){var c=i;for(i in c){if(!c.hasOwnProperty(i)){continue}this.set(i,c[i])}return this}if(!j&&this._kvo_cacheable&&(a=this._kvo_cache)){d=this._kvo_cachedep;if(!d||(d=d[i])===undefined){d=this._kvo_computeCachedDependentsFor(i)}if(d){h=d.length;while(--h>=0){e=d[h];a[e.cacheKey]=a[e.lastSetValueKey]=undefined}}}if(b&&b.isProperty){a=this._kvo_cache;if(b.isVolatile||!a||(a[b.lastSetValueKey]!==g)){if(!a){a=this._kvo_cache={}}a[b.lastSetValueKey]=g;if(j){this.propertyWillChange(i)}f=b.call(this,i,g);if(b.isCacheable){a[b.cacheKey]=f}if(j){this.propertyDidChange(i,f,YES)}}}else{if(b===undefined){if(j){this.propertyWillChange(i)}this.unknownProperty(i,g);if(j){this.propertyDidChange(i,f)}}else{if(this[i]!==g){if(j){this.propertyWillChange(i)}f=this[i]=g;if(j){this.propertyDidChange(i,f)}}}}return this},unknownProperty:function(a,b){if(b!==undefined){this[a]=b}return b},beginPropertyChanges:function(){this._kvo_changeLevel=(this._kvo_changeLevel||0)+1;return this},endPropertyChanges:function(){this._kvo_changeLevel=(this._kvo_changeLevel||1)-1;var b=this._kvo_changeLevel,a=this._kvo_changes;if((b<=0)&&a&&(a.length>0)&&!SC.Observers.isObservingSuspended){this._notifyPropertyObservers()}return this},propertyWillChange:function(a){return this},propertyDidChange:function(n,l,c){this._kvo_revision=(this._kvo_revision||0)+1;var b=this._kvo_changeLevel||0,h,m,i,d,f=SC.LOG_OBSERVERS&&(this.LOG_OBSERVING!==NO);var j=this._kvo_property_chains;if(j){var g=j[n];if(g){this.beginPropertyChanges();g=SC.clone(g);g.forEach(function(o){o.notifyPropertyDidChange()});this.endPropertyChanges()}}var a=this._kvo_cache;if(a){if(!c){d=this[n];if(d&&d.isProperty){a[d.cacheKey]=a[d.lastSetValueKey]=undefined}}if(this._kvo_cacheable){h=this._kvo_cachedep;if(!h||(h=h[n])===undefined){h=this._kvo_computeCachedDependentsFor(n)}if(h){m=h.length;while(--m>=0){i=h[m];a[i.cacheKey]=a[i.lastSetValueKey]=undefined}}}}var e=SC.Observers.isObservingSuspended;if((b>0)||e){var k=this._kvo_changes;if(!k){k=this._kvo_changes=SC.CoreSet.create()}k.add(n);if(e){if(f){console.log("%@%@: will not notify observers because observing is suspended".fmt(SC.KVO_SPACES,this))}SC.Observers.objectHasPendingChanges(this)}}else{this._notifyPropertyObservers(n)}return this},registerDependentKey:function(c,g){var h=this._kvo_dependents,d,b,f,e,a;if(typeof g==="object"&&(g instanceof Array)){d=g;f=0}else{d=arguments;f=1}b=d.length;if(!h){this._kvo_dependents=h={}}while(--b>=f){e=d[b];if(e.indexOf(".")>=0){SC._PropertyChain.createChain(e,this,c).activate()}else{a=h[e];if(!a){a=h[e]=[]}a.push(c)}}},registerDependentKeyWithChain:function(b,a){var c=this._chainsFor(b);c.add(a)},removeDependentKeyWithChain:function(b,a){var c=this._chainsFor(b);c.remove(a);if(c.get("length")===0){delete this._kvo_property_chains[b]}},_chainsFor:function(a){this._kvo_property_chains=this._kvo_property_chains||{};var b=this._kvo_property_chains[a]||SC.CoreSet.create();this._kvo_property_chains[a]=b;return b},_kvo_addCachedDependents:function(b,f,h,c){var a=f.length,e,d,g;while(--a>=0){d=f[a];c.add(d);e=this[d];if(e&&(e instanceof Function)&&e.isProperty){if(e.isCacheable){b.push(e)}if((g=h[d])&&g.length>0){this._kvo_addCachedDependents(b,g,h,c)}}}},_kvo_computeCachedDependentsFor:function(c){var d=this._kvo_cachedep,f=this._kvo_dependents,e=f?f[c]:null,a,b;if(!d){d=this._kvo_cachedep={}}if(!e||e.length===0){return d[c]=null}a=d[c]=[];b=SC._TMP_SEEN_SET=(SC._TMP_SEEN_SET||SC.CoreSet.create());b.add(c);this._kvo_addCachedDependents(a,e,f,b);b.clear();if(a.length===0){a=d[c]=null}return a},_kvo_for:function(c,b){var a=this[c];if(!this._kvo_cloned){this._kvo_cloned={}}if(!a){a=this[c]=(b===undefined)?[]:b.create();this._kvo_cloned[c]=YES}else{if(!this._kvo_cloned[c]){a=this[c]=a.copy();this._kvo_cloned[c]=YES}}return a},addObserver:function(c,e,f,b){var d,a;if(f===undefined){f=e;e=this}if(!e){e=this}if(typeof f==="string"){f=e[f]}if(!f){throw new Error("You must pass a method to addObserver()")}c=c.toString();if(c.indexOf(".")>=0){a=SC._ChainObserver.createChain(this,c,e,f,b);a.masterTarget=e;a.masterMethod=f;this._kvo_for(SC.keyFor("_kvo_chains",c)).push(a)}else{if((this[c]===undefined)&&(c.indexOf("@")===0)){this.get(c)}if(e===this){e=null}d=SC.keyFor("_kvo_observers",c);this._kvo_for(d,SC.ObserverSet).add(e,f,b);this._kvo_for("_kvo_observed_keys",SC.CoreSet).add(c)}if(this.didAddObserver){this.didAddObserver(c,e,f)}return this},removeObserver:function(c,f,h){var d,e,b,g,a;if(h===undefined){h=f;f=this}if(!f){f=this}if(typeof h==="string"){h=f[h]}if(!h){throw new Error("You must pass a method to removeObserver()")}c=c.toString();if(c.indexOf(".")>=0){d=SC.keyFor("_kvo_chains",c);if(e=this[d]){e=this._kvo_for(d);a=e.length;while(--a>=0){b=e[a];if(b&&(b.masterTarget===f)&&(b.masterMethod===h)){e[a]=b.destroyChain()}}}}else{if(f===this){f=null}d=SC.keyFor("_kvo_observers",c);if(g=this[d]){g=this._kvo_for(d);g.remove(f,h);if(g.getMembers().length===0){this._kvo_for("_kvo_observed_keys",SC.CoreSet).remove(c)}}}if(this.didRemoveObserver){this.didRemoveObserver(c,f,h)}return this},hasObserverFor:function(a){SC.Observers.flush(this);var c=this[SC.keyFor("_kvo_observers",a)],b=this[SC.keyFor("_kvo_local",a)];if(b&&b.length>0){return YES}if(c&&c.getMembers().length>0){return YES}return NO},initObservable:function(){if(this._observableInited){return}this._observableInited=YES;var e,k,i,h,g,d,j,f,b,l,c,a;if(k=this._observers){f=k.length;for(e=0;e<f;e++){i=k[e];g=this[i];d=g.propertyPaths;j=(d)?d.length:0;for(b=0;b<j;b++){l=d[b];this.addObservesHandler(g,l)}}}this.bindings=[];if(k=this._bindings){for(e=0,a=k.length;e<a;e++){i=k[e];h=this[i];c=i.slice(0,-7);this[i]=this.bind(c,h)}}if(k=this._properties){for(e=0,a=k.length;e<a;e++){i=k[e];if(h=this[i]){if(h.isCacheable){this._kvo_cacheable=YES}if(h.dependentKeys&&(h.dependentKeys.length>0)){this.registerDependentKey(i,h.dependentKeys)}}}}delete this._bindings;delete this._properties;return this},destroyObservable:function(){var f,h,d,e,i,b,g;this.bindings.invoke("destroy");delete this.bindings;if(h=this._observers){d=h.length;for(var c=0;c<d;c++){f=h[c];e=this[f];b=e.propertyPaths;g=(b)?b.length:0;for(var a=0;a<g;a++){i=b[a];this.removeObservesHandler(e,i)}}}delete this._observers;return this},addObservesHandler:function(a,b){this._configureObservesHandler(SC.OBSERVES_HANDLER_ADD,a,b);return this},removeObservesHandler:function(a,b){this._configureObservesHandler(SC.OBSERVES_HANDLER_REMOVE,a,b);return this},_configureObservesHandler:function(d,b,e){var c,a;switch(d){case SC.OBSERVES_HANDLER_ADD:d="addObserver";break;case SC.OBSERVES_HANDLER_REMOVE:d="removeObserver";break;default:throw new Error("invalid action provided: "+d)}c=e.indexOf(".");if(c<0){this[d](e,this,b)}else{if(e.indexOf("*")===0){this[d](e.slice(1),this,b)}else{a=null;if(c===0){a=this;e=e.slice(1)}else{if(c===4&&e.slice(0,5)==="this."){a=this;e=e.slice(5)}else{if(c<0&&e.length===4&&e==="this"){a=this;e=""}else{if(c>0&&e[0]===e.charAt(0).toLowerCase()){a=this}}}}SC.Observers[d](e,this,b,a)}}},observersForKey:function(a){SC.Observers.flush(this);var b=this[SC.keyFor("_kvo_observers",a)];return b?b.getMembers():[]},_notifyPropertyObservers:function(u){if(!this._observableInited){this.initObservable()}SC.Observers.flush(this);var g=SC.LOG_OBSERVERS&&this.LOG_OBSERVING!==NO,o,r,m,d,n,l,q,p,j,a,f,s,c,i,e,b,h,k;if(g){h=SC.KVO_SPACES=(SC.KVO_SPACES||"")+"  ";console.log('%@%@: notifying observers after change to key "%@"'.fmt(h,this,u))}d=this["_kvo_observers_*"];this._kvo_changeLevel=(this._kvo_changeLevel||0)+1;while(((r=this._kvo_changes)&&(r.length>0))||u){q=++this.propertyRevision;if(!r){r=SC.CoreSet.create()}this._kvo_changes=null;if(u==="*"){r.add("*");r.addEach(this._kvo_for("_kvo_observed_keys",SC.CoreSet))}else{if(u){r.add(u)}}if(m=this._kvo_dependents){for(n=0;n<r.length;n++){u=r[n];l=m[u];if(l&&(i=l.length)){if(g){console.log("%@...including dependent keys for %@: %@".fmt(h,u,l))}k=this._kvo_cache;if(!k){k=this._kvo_cache={}}while(--i>=0){r.add(u=l[i]);if(e=this[u]){this[e.cacheKey]=undefined;k[e.cacheKey]=k[e.lastSetValueKey]=undefined}}}}}while(r.length>0){u=r.pop();o=this[SC.keyFor("_kvo_observers",u)];if(o){p=o.getMembers();j=p.length;for(f=0;f<j;f++){a=p[f];if(a[3]===q){continue}if(!a[1]){console.log(a)}s=a[0]||this;c=a[1];b=a[2];a[3]=q;if(g){console.log('%@...firing observer on %@ for key "%@"'.fmt(h,s,u))}if(b!==undefined){c.call(s,this,u,null,b,q)}else{c.call(s,this,u,null,q)}}}p=this[SC.keyFor("_kvo_local",u)];if(p){j=p.length;for(f=0;f<j;f++){a=p[f];c=this[a];if(c){if(g){console.log('%@...firing local observer %@.%@ for key "%@"'.fmt(h,this,a,u))}c.call(this,this,u,null,q)}}}if(d&&u!=="*"){p=d.getMembers();j=p.length;for(f=0;f<j;f++){a=p[f];s=a[0]||this;c=a[1];b=a[2];if(g){console.log('%@...firing * observer on %@ for key "%@"'.fmt(h,s,u))}if(b!==undefined){c.call(s,this,u,null,b,q)}else{c.call(s,this,u,null,q)}}}if(this.propertyObserver){if(g){console.log('%@...firing %@.propertyObserver for key "%@"'.fmt(h,this,u))}this.propertyObserver(this,u,null,q)}}if(r){r.destroy()}u=null}this._kvo_changeLevel=(this._kvo_changeLevel||1)-1;if(g){SC.KVO_SPACES=h.slice(0,-2)}return YES},bind:function(a,c,e){var d,b;if(e!==undefined){c=[c,e]}b=typeof c;if(b==="string"||(b==="object"&&(c instanceof Array))){d=this[a+"BindingDefault"]||SC.Binding;d=d.beget().from(c)}else{d=c.beget()}d=d.to(a,this).connect();this.bindings.push(d);return d},didChangeFor:function(a){var b,f,e,j,d,c,h,i,g;a=SC.hashFor(a);b=this._kvo_didChange_valueCache;if(!b){b=this._kvo_didChange_valueCache={}}f=this._kvo_didChange_revisionCache;if(!f){f=this._kvo_didChange_revisionCache={}}e=b[a]||{};j=f[a]||{};d=false;c=this._kvo_revision||0;h=arguments.length;while(--h>=1){i=arguments[h];if(j[i]!=c){g=this.get(i);if(e[i]!==g){d=true;e[i]=g}}j[i]=c}b[a]=e;f[a]=j;return d},setIfChanged:function(a,b){if(b===undefined&&SC.typeOf(a)===SC.T_HASH){var c=a;for(a in c){if(!c.hasOwnProperty(a)){continue}this.setIfChanged(a,c[a])}return this}return(this.get(a)!==b)?this.set(a,b):this},getPath:function(b){var a=SC.tupleForPropertyPath(b,this);if(a===null||a[0]===null){return undefined}return SC.get(a[0],a[1])},setPath:function(c,b){if(c.indexOf(".")>=0){var a=SC.tupleForPropertyPath(c,this);if(!a||!a[0]){return null}a[0].set(a[1],b)}else{this.set(c,b)}return this},setPathIfChanged:function(c,b){if(c.indexOf(".")>=0){var a=SC.tupleForPropertyPath(c,this);if(!a||!a[0]){return null}if(a[0].get(a[1])!==b){a[0].set(a[1],b)}}else{this.setIfChanged(c,b)}return this},getEach:function(){var d=SC.A(arguments),c=[],a,b;for(a=0,b=d.length;a<b;a++){c[c.length]=this.getPath(d[a])}return c},incrementProperty:function(b,a){if(!a){a=1}this.set(b,(this.get(b)||0)+a);return this.get(b)},decrementProperty:function(b,a){if(!a){a=1}this.set(b,(this.get(b)||0)-a);return this.get(b)},toggleProperty:function(a,b,c){if(b===undefined){b=true}if(c===undefined){c=false}b=(this.get(a)==b)?c:b;this.set(a,b);return this.get(a)},notifyPropertyChange:function(a,b){this.propertyWillChange(a);this.propertyDidChange(a,b);return this},allPropertiesDidChange:function(){this._kvo_cache=null;this._notifyPropertyObservers("*");return this},addProbe:function(a){this.addObserver(a,SC.logChange)},removeProbe:function(a){this.removeObserver(a,SC.logChange)},logProperty:function(){var b=SC.$A(arguments),d,c,a;for(a=0,c=b.length;a<c;a++){d=b[a];console.log("%@:%@: ".fmt(SC.guidFor(this),d),this.get(d))}},propertyRevision:1};SC.logChange=function logChange(c,a,b){console.log("CHANGE: %@[%@] => %@".fmt(c,a,c.get(a)))};SC.mixin(SC,{get:function(a,b){if(!a){return undefined}if(b===undefined){return this[a]}if(a.get){return a.get(b)}return a[b]},getPath:function(a,b){if(b===undefined){b=a;a=window}return SC.objectForPropertyPath(b,a)}});SC.mixin(Array.prototype,SC.Observable);SC.Enumerator=function(a){this.enumerable=a;this.reset();return this};SC.Enumerator.prototype={nextObject:function(){var c=this._index;var a=this._length;if(c>=a){return undefined}var b=this.enumerable.nextObject(c,this._previousObject,this._context);this._previousObject=b;this._index=c+1;if(c>=a){this._context=SC.Enumerator._pushContext(this._context)}return b},reset:function(){var b=this.enumerable;if(!b){throw SC.$error("Enumerator has been destroyed")}this._length=b.get?b.get("length"):b.length;var a=this._length;this._index=0;this._previousObject=null;this._context=(a>0)?SC.Enumerator._popContext():null},destroy:function(){this.enumerable=this._length=this._index=this._previousObject=this._context=null}};SC.Enumerator.create=function(a){return new SC.Enumerator(a)};SC.Enumerator._popContext=function(){var a=this._contextCache?this._contextCache.pop():null;return a||{}};SC.Enumerator._pushContext=function(b){this._contextCache=this._contextCache||[];var a=this._contextCache;a.push(b);return null};sc_require("core");sc_require("ext/function");sc_require("system/enumerator");SC.Enumerable={isEnumerable:YES,nextObject:function(a,c,b){return this.objectAt?this.objectAt(a):this[a]},firstObject:function(){if(this.get("length")===0){return undefined}if(this.objectAt){return this.objectAt(0)}var b=SC.Enumerator._popContext(),a;a=this.nextObject(0,null,b);b=SC.Enumerator._pushContext(b);return a}.property().cacheable(),lastObject:function(){var a=this.get("length");if(a===0){return undefined}if(this.objectAt){return this.objectAt(a-1)}}.property().cacheable(),enumerator:function(){return SC.Enumerator.create(this)},forEach:function(g,f){if(typeof g!=="function"){throw new TypeError()}var b=this.get?this.get("length"):this.length;if(f===undefined){f=null}var e=null;var c=SC.Enumerator._popContext();for(var a=0;a<b;a++){var d=this.nextObject(a,e,c);g.call(f,d,a,this);e=d}e=null;c=SC.Enumerator._pushContext(c);return this},getEach:function(a){return this.map(function(b){return b?(b.get?b.get(a):b[a]):null},this)},setEach:function(a,b){this.forEach(function(c){if(c){if(c.set){c.set(a,b)}else{c[a]=b}}},this);return this},map:function(h,g){if(typeof h!=="function"){throw new TypeError()}var b=this.get?this.get("length"):this.length;if(g===undefined){g=null}var c=[];var f=null;var d=SC.Enumerator._popContext();for(var a=0;a<b;a++){var e=this.nextObject(a,f,d);c[a]=h.call(g,e,a,this);f=e}f=null;d=SC.Enumerator._pushContext(d);return c},mapProperty:function(a){return this.map(function(b){return b?(b.get?b.get(a):b[a]):null})},filter:function(h,g){if(typeof h!=="function"){throw new TypeError()}var b=this.get?this.get("length"):this.length;if(g===undefined){g=null}var c=[];var f=null;var d=SC.Enumerator._popContext();for(var a=0;a<b;a++){var e=this.nextObject(a,f,d);if(h.call(g,e,a,this)){c.push(e)}f=e}f=null;d=SC.Enumerator._pushContext(d);return c},sortProperty:function(b){var c=(typeof b===SC.T_STRING)?arguments:b,a=c.length,d;if(this instanceof Array){d=this}else{d=[];this.forEach(function(e){d.push(e)})}if(!d){return[]}return d.sort(function(g,f){var e,i,k,j,h=0;for(e=0;h===0&&e<a;e++){i=c[e];k=g?(g.get?g.get(i):g[i]):null;j=f?(f.get?f.get(i):f[i]):null;h=SC.compare(k,j)}return h})},filterProperty:function(h,d){var b=this.get?this.get("length"):this.length,c=[],g=null,a=SC.Enumerator._popContext(),e,i,f;if(d===undefined){for(e=0;e<b;e++){i=this.nextObject(e,g,a);f=i?(i.get?i.get(h):i[h]):null;if(!!f){c.push(i)}g=i}}else{for(e=0;e<b;e++){i=this.nextObject(e,g,a);f=i?(i.get?i.get(h):i[h]):null;if(SC.isEqual(f,d)){c.push(i)}g=i}}g=null;a=SC.Enumerator._pushContext(a);return c},find:function(h,d){var c=this.get?this.get("length"):this.length;if(d===undefined){d=null}var g=null,b,i=NO,e=null;var a=SC.Enumerator._popContext();for(var f=0;f<c&&!i;f++){b=this.nextObject(f,g,a);if(i=h.call(d,b,f,this)){e=b}g=b}b=g=null;a=SC.Enumerator._pushContext(a);return e},findProperty:function(i,f){var c=this.get?this.get("length"):this.length;var j=NO,d=null,h=null,b,g;var a=SC.Enumerator._popContext();for(var e=0;e<c&&!j;e++){b=this.nextObject(e,h,a);g=b?(b.get?b.get(i):b[i]):null;j=(f===undefined)?!!g:SC.isEqual(g,f);if(j){d=b}h=b}h=b=null;a=SC.Enumerator._pushContext(a);return d},every:function(h,g){if(typeof h!=="function"){throw new TypeError()}var b=this.get?this.get("length"):this.length;if(g===undefined){g=null}var c=YES;var f=null;var d=SC.Enumerator._popContext();for(var a=0;c&&(a<b);a++){var e=this.nextObject(a,f,d);if(!h.call(g,e,a,this)){c=NO}f=e}f=null;d=SC.Enumerator._pushContext(d);return c},everyProperty:function(i,e){var c=this.get?this.get("length"):this.length;var d=YES;var h=null;var a=SC.Enumerator._popContext();for(var f=0;d&&(f<c);f++){var b=this.nextObject(f,h,a);var g=b?(b.get?b.get(i):b[i]):null;d=(e===undefined)?!!g:SC.isEqual(g,e);h=b}h=null;a=SC.Enumerator._pushContext(a);return d},some:function(h,g){if(typeof h!=="function"){throw new TypeError()}var b=this.get?this.get("length"):this.length;if(g===undefined){g=null}var c=NO;var f=null;var d=SC.Enumerator._popContext();for(var a=0;(!c)&&(a<b);a++){var e=this.nextObject(a,f,d);if(h.call(g,e,a,this)){c=YES}f=e}f=null;d=SC.Enumerator._pushContext(d);return c},someProperty:function(i,e){var c=this.get?this.get("length"):this.length;var d=NO;var h=null;var a=SC.Enumerator._popContext();for(var f=0;!d&&(f<c);f++){var b=this.nextObject(f,h,a);var g=b?(b.get?b.get(i):b[i]):null;d=(e===undefined)?!!g:SC.isEqual(g,e);h=b}h=null;a=SC.Enumerator._pushContext(a);return d},reduce:function(g,h,i){if(typeof g!=="function"){throw new TypeError()}var c=this.get?this.get("length"):this.length;if(c===0&&h===undefined){throw new TypeError()}var d=h;var f=null;var a=SC.Enumerator._popContext();for(var e=0;e<c;e++){var b=this.nextObject(e,f,a);if(b!==null){if(d===undefined){d=b}else{d=g.call(null,d,b,e,this,i)}}f=b}f=null;a=SC.Enumerator._pushContext(a);if(d===undefined){throw new TypeError()}return d},invoke:function(h){var e=this.get?this.get("length"):this.length;if(e<=0){return[]}var i;var g=[];var c=arguments.length;if(c>1){for(i=1;i<c;i++){g.push(arguments[i])}}var f=[];var j=null;var b=SC.Enumerator._popContext();for(i=0;i<e;i++){var d=this.nextObject(i,j,b);var a=d?d[h]:null;if(a){f[i]=a.apply(d,g)}j=d}j=null;b=SC.Enumerator._pushContext(b);return f},invokeWhile:function(d,i){var f=this.get?this.get("length"):this.length;if(f<=0){return null}var j;var h=[];var c=arguments.length;if(c>2){for(j=2;j<c;j++){h.push(arguments[j])}}var g=d;var k=null;var b=SC.Enumerator._popContext();for(j=0;(g===d)&&(j<f);j++){var e=this.nextObject(j,k,b);var a=e?e[i]:null;if(a){g=a.apply(e,h)}k=e}k=null;b=SC.Enumerator._pushContext(b);return g},toArray:function(){var a=[];this.forEach(function(b){a.push(b)},this);return a},groupBy:function(i){var c=this.get?this.get("length"):this.length,d=[],h=null,a=SC.Enumerator._popContext(),e=[],j=[],f,b,g;for(f=0;f<c;f++){b=this.nextObject(f,h,a);g=b?(b.get?b.get(i):b[i]):null;if(SC.none(e[g])){e[g]=[];j.push(g)}e[g].push(b);h=b}h=null;a=SC.Enumerator._pushContext(a);for(f=0,c=j.length;f<c;f++){d.push(e[j[f]])}return d}};SC._buildReducerFor=function(a,b){return function(d,e){var f=this[a];if(SC.typeOf(f)!==SC.T_FUNCTION){return this.unknownProperty?this.unknownProperty(d,e):null}else{var c=SC.Enumerable.reduce.call(this,f,null,b);return c}}.property("[]")};SC.Reducers={"[]":function(a,b){return this}.property(),enumerableContentDidChange:function(c,a,b){if(!SC.none(c)){if(c===0){this.notifyPropertyChange("firstObject")}if(!SC.none(a)&&c+a>=this.get("length")-1){this.notifyPropertyChange("lastObject")}}this.notifyPropertyChange("[]")},reducedProperty:function(i,g,f){if(!i||typeof i!==SC.T_STRING||i.charAt(0)!=="@"){return undefined}var d=i.match(/^@([^(]*)(\(([^)]*)\))?$/);if(!d||d.length<2){return undefined}var h=d[1];var j=d[3];h="reduce"+h.slice(0,1).toUpperCase()+h.slice(1);var a=this[h];if(SC.typeOf(a)!==SC.T_FUNCTION){return undefined}if(f===NO){return SC.Enumerable.reduce.call(this,a,null,j)}var c=SC._buildReducerFor(h,j);var b=this.constructor.prototype;if(b){b[i]=c;var e=b._properties||[];e.push(i);b._properties=e;this.registerDependentKey(i,"[]")}return SC.Enumerable.reduce.call(this,a,null,j)},reduceMax:function(a,d,b,f,c){if(c&&d){d=d.get?d.get(c):d[c]}if(a===null){return d}return(d>a)?d:a},reduceMaxObject:function(b,f,c,g,d){var a=b,h=f;if(d){if(f){h=f.get?f.get(d):f[d]}if(b){a=b.get?b.get(d):b[d]}}if(a===null){return f}return(h>a)?f:b},reduceMin:function(a,d,b,f,c){if(c&&d){d=d.get?d.get(c):d[c]}if(a===null){return d}return(d<a)?d:a},reduceMinObject:function(b,f,c,g,d){var a=b,h=f;if(d){if(f){h=f.get?f.get(d):f[d]}if(b){a=b.get?b.get(d):b[d]}}if(a===null){return f}return(h<a)?f:b},reduceAverage:function(b,g,d,h,f){if(f&&g){g=g.get?g.get(f):g[f]}var c=(b||0)+g;var a=h.get?h.get("length"):h.length;if(d>=a-1){c=c/a}return c},reduceSum:function(a,d,b,f,c){if(c&&d){d=d.get?d.get(c):d[c]}return(a===null)?d:a+d}};SC.mixin(SC.Enumerable,SC.Reducers);SC.mixin(Array.prototype,SC.Reducers);Array.prototype.isEnumerable=YES;(function(){var a={nextObject:SC.Enumerable.nextObject,enumerator:SC.Enumerable.enumerator,firstObject:SC.Enumerable.firstObject,lastObject:SC.Enumerable.lastObject,sortProperty:SC.Enumerable.sortProperty,mapProperty:function(g){var e=this.length;var f=[];for(var d=0;d<e;d++){var h=this[d];f[d]=h?(h.get?h.get(g):h[g]):null}return f},filterProperty:function(g,i){var e=this.length,f=[],d,h,j;if(i===undefined){for(d=0;d<e;d++){h=this[d];j=h?(h.get?h.get(g):h[g]):null;if(!!j){f.push(h)}}}else{for(d=0;d<e;d++){h=this[d];j=h?(h.get?h.get(g):h[g]):null;if(SC.isEqual(j,i)){f.push(h)}}}return f},groupBy:function(h){var e=this.length,g=[],j=[],f=[],d,i,k;for(d=0;d<e;d++){i=this[d];k=i?(i.get?i.get(h):i[h]):null;if(SC.none(j[k])){j[k]=[];f.push(k)}j[k].push(i)}for(d=0,e=f.length;d<e;d++){g.push(j[f[d]])}return g},find:function(j,i){if(typeof j!=="function"){throw new TypeError()}var e=this.length;if(i===undefined){i=null}var g,f=null,h=NO;for(var d=0;d<e&&!h;d++){g=this[d];if(h=j.call(i,g,d,this)){f=g}}g=null;return f},findProperty:function(g,j){var e=this.length;var h,k,i=NO,f=null;for(var d=0;d<e&&!i;d++){k=(h=this[d])?(h.get?h.get(g):h[g]):null;i=(j===undefined)?!!k:SC.isEqual(k,j);if(i){f=h}}h=null;return f},everyProperty:function(g,i){var e=this.length;var f=YES;for(var d=0;f&&(d<e);d++){var h=this[d];var j=h?(h.get?h.get(g):h[g]):null;f=(i===undefined)?!!j:SC.isEqual(j,i)}return f},someProperty:function(g,i){var e=this.length;var f=NO;for(var d=0;!f&&(d<e);d++){var h=this[d];var j=h?(h.get?h.get(g):h[g]):null;f=(i===undefined)?!!j:SC.isEqual(j,i)}return f},invoke:function(f){var e=this.length;if(e<=0){return[]}var d;var h=[];var j=arguments.length;if(j>1){for(d=1;d<j;d++){h.push(arguments[d])}}var g=[];for(d=0;d<e;d++){var i=this[d];var k=i?i[f]:null;if(k){g[d]=k.apply(i,h)}}return g},invokeWhile:function(f,k){var h=this.length;if(h<=0){return null}var l;var j=[];var e=arguments.length;if(e>2){for(l=2;l<e;l++){j.push(arguments[l])}}var i=f;for(l=0;(i===f)&&(l<h);l++){var g=this[l];var d=g?g[k]:null;if(d){i=d.apply(g,j)}}return i},toArray:function(){var e=this.length;if(e<=0){return[]}var f=[];for(var d=0;d<e;d++){var g=this[d];f.push(g)}return f},getEach:function(g){var f=[];var e=this.length;for(var d=0;d<e;d++){var h=this[d];f[d]=h?(h.get?h.get(g):h[g]):null}return f},setEach:function(f,g){var e=this.length;for(var d=0;d<e;d++){var h=this[d];if(h){if(h.set){h.set(f,g)}else{h[f]=g}}}return this}};var c={forEach:function(h,g){if(typeof h!=="function"){throw new TypeError()}if(g===undefined){g=null}for(var e=0,d=this.length;e<d;e++){var f=this[e];h.call(g,f,e,this)}return this},map:function(j,h){if(typeof j!=="function"){throw new TypeError()}if(h===undefined){h=null}var e=[];for(var f=0,d=this.length;f<d;f++){var g=this[f];e[f]=j.call(h,g,f,this)}return e},filter:function(j,h){if(typeof j!=="function"){throw new TypeError()}if(h===undefined){h=null}var e=[];for(var f=0,d=this.length;f<d;f++){var g=this[f];if(j.call(h,g,f,this)){e.push(g)}}return e},every:function(i,h){if(typeof i!=="function"){throw new TypeError()}var e=this.length;if(h===undefined){h=null}var f=YES;for(var d=0;f&&(d<e);d++){var g=this[d];if(!i.call(h,g,d,this)){f=NO}}return f},some:function(i,h){if(typeof i!=="function"){throw new TypeError()}var e=this.length;if(h===undefined){h=null}var f=NO;for(var d=0;(!f)&&(d<e);d++){var g=this[d];if(i.call(h,g,d,this)){f=YES}}return f},reduce:function(j,f,i){if(typeof j!=="function"){throw new TypeError()}var e=this.length;if(e===0&&f===undefined){throw new TypeError()}var g=f;for(var d=0;d<e;d++){var h=this[d];if(h!==null){if(g===undefined){g=h}else{g=j.call(null,g,h,d,this,i)}}}if(g===undefined){throw new TypeError()}return g}};for(var b in c){if(!c.hasOwnProperty(b)){continue}if(!Array.prototype[b]||((typeof Prototype==="object")&&Prototype.Version.match(/^1\.6/))){Array.prototype[b]=c[b]}}SC.mixin(Array.prototype,a)})();SC.RangeObserver={isRangeObserver:YES,toString:function(){var a=this.indexes?this.indexes.toString():"SC.IndexSet<..>";return a.replace("IndexSet","RangeObserver(%@)".fmt(SC.guidFor(this)))},create:function(d,f,e,g,c,a){var b=SC.beget(this);b.source=d;b.indexes=f?f.frozenCopy():null;b.target=e;b.method=(typeof g==="string")?e[g]:g;b.context=c;b.isDeep=a||false;b.beginObserving();return b},extend:function(d){var c=SC.beget(this),b=arguments;for(var e=0,a=b.length;e<a;e++){SC.mixin(c,b[e])}return c},destroy:function(a){this.endObserving();return this},update:function(a,b){if(this.indexes&&this.indexes.isEqual(b)){return this}this.indexes=b?b.frozenCopy():null;this.endObserving().beginObserving();return this},beginObserving:function(){if(!this.isDeep){return this}var c=this.observing=this.observing||SC.CoreSet.create();var a=this._beginObservingForEach,b=this.source;if(!a){a=this._beginObservingForEach=function(d){var e=b.objectAt(d);if(e&&e.addObserver){c.push(e);e._kvo_needsRangeObserver=true}}}this.indexes.forEach(a);this.isObserving=false;SC.Observers.addPendingRangeObserver(this);return this},setupPending:function(b){var e=this.observing;if(this.isObserving||!e||(e.get("length")===0)){return true}if(e.contains(b)){this.isObserving=true;var c=this._setupPendingForEach;if(!c){var d=this.source,f=this.objectPropertyDidChange,a=this;c=this._setupPendingForEach=function(g){var j=d.objectAt(g),h=SC.guidFor(j),i;if(j&&j.addObserver){e.push(j);j.addObserver("*",a,f);i=a[h];if(i==null){a[h]=g}else{if(i.isIndexSet){i.add(g)}else{a[h]=SC.IndexSet.create(i).add(g)}}}}}this.indexes.forEach(c);return true}else{return false}},endObserving:function(){if(!this.isDeep){return this}var e=this.observing;if(this.isObserving){var b=this.objectPropertyDidChange,c=this.source,a,f,d;if(e){f=e.length;for(a=0;a<f;a++){d=e[a];d.removeObserver("*",this,b);this[SC.guidFor(d)]=null}e.length=0}this.isObserving=false}if(e){e.clear()}return this},rangeDidChange:function(b){var a=this.indexes;if(!b||!a||a.intersects(b)){this.endObserving();this.method.call(this.target,this.source,null,"[]",b,this.context);this.beginObserving()}return this},objectPropertyDidChange:function(d,f,g,a){var e=this.context,h=this.method,c=SC.guidFor(d),b=this[c];if(b&&!b.isIndexSet){b=this[c]=SC.IndexSet.create(b).freeze()}h.call(this.target,this.source,d,f,b,e||a,a)}};sc_require("ext/function");sc_require("mixins/observable");sc_require("mixins/enumerable");sc_require("system/range_observer");SC.OUT_OF_RANGE_EXCEPTION="Index out of range";SC.CoreArray={isSCArray:YES,replace:function(a,c,b){throw new Error("replace() must be implemented to support SC.Array")},indexOf:function(d,c){var b,a=this.get("length");if(c===undefined){c=0}else{c=(c<0)?Math.ceil(c):Math.floor(c)}if(c<0){c+=a}for(b=c;b<a;b++){if(this.objectAt(b,YES)===d){return b}}return -1},lastIndexOf:function(d,c){var b,a=this.get("length");if(c===undefined){c=a-1}else{c=(c<0)?Math.ceil(c):Math.floor(c)}if(c<0){c+=a}for(b=c;b>=0;b--){if(this.objectAt(b)===d){return b}}return -1},objectAt:function(a){if(a<0){return undefined}if(a>=this.get("length")){return undefined}return this.get(a)},"[]":function(a,b){if(b!==undefined){this.replace(0,this.get("length"),b)}return this}.property(),insertAt:function(a,b){if(a>this.get("length")){throw SC.OUT_OF_RANGE_EXCEPTION}this.replace(a,0,[b]);return this},removeAt:function(d,a){var c=0,b=[];if(typeof d===SC.T_NUMBER){if((d<0)||(d>=this.get("length"))){throw SC.OUT_OF_RANGE_EXCEPTION}if(a===undefined){this.replace(d,1,b);return this}else{d=SC.IndexSet.create(d,a)}}this.beginPropertyChanges();d.forEachRange(function(f,e){f-=c;c+=e;this.replace(f,e,b)},this);this.endPropertyChanges();return this},removeObject:function(b){var c=this.get("length")||0;while(--c>=0){var a=this.objectAt(c);if(a===b){this.removeAt(c)}}return this},removeObjects:function(a){this.beginPropertyChanges();a.forEach(function(b){this.removeObject(b)},this);this.endPropertyChanges();return this},slice:function(b,d){var a=[];var c=this.get("length");if(SC.none(b)){b=0}if(SC.none(d)||(d>c)){d=c}while(b<d){a[a.length]=this.objectAt(b++)}return a},pushObject:function(a){this.insertAt(this.get("length"),a);return a},pushObjects:function(a){this.beginPropertyChanges();a.forEach(function(b){this.pushObject(b)},this);this.endPropertyChanges();return this},popObject:function(){var a=this.get("length");if(a===0){return null}var b=this.objectAt(a-1);this.removeAt(a-1);return b},shiftObject:function(){if(this.get("length")===0){return null}var a=this.objectAt(0);this.removeAt(0);return a},unshiftObject:function(a){this.insertAt(0,a);return a},unshiftObjects:function(a){this.beginPropertyChanges();a.forEach(function(b){this.unshiftObject(b)},this);this.endPropertyChanges();return this},isEqual:function(a){if(!a){return false}if(a==this){return true}var b=a.get("length");if(b!=this.get("length")){return false}while(--b>=0){if(!SC.isEqual(a.objectAt(b),this.objectAt(b))){return false}}return true},compact:function(){return this.without(null)},without:function(b){if(this.indexOf(b)<0){return this}var a=[];this.forEach(function(c){if(c!==b){a[a.length]=c}});return a},uniq:function(){var a=[];this.forEach(function(b){if(a.indexOf(b)<0){a[a.length]=b}});return a},flatten:function(){var a=[];this.forEach(function(b){if(b&&b.isEnumerable){a=a.pushObjects(b.flatten())}else{a.pushObject(b)}});return a},max:function(){return Math.max.apply(Math,this)},min:function(){return Math.min.apply(Math,this)},rangeObserverClass:SC.RangeObserver,contains:function(a){return this.indexOf(a)>=0},addRangeObserver:function(d,f,h,e){var a=this._array_rangeObservers;if(!a){a=this._array_rangeObservers=SC.CoreSet.create()}if(this._array_oldLength===undefined){this._array_oldLength=this.get("length")}var g=this.rangeObserverClass;var b=NO;var c=g.create(this,d,f,h,e,b);a.add(c);if(!this._array_isNotifyingRangeObservers){this._array_isNotifyingRangeObservers=YES;this.addObserver("[]",this,this._array_notifyRangeObservers)}return c},updateRangeObserver:function(b,a){return b.update(this,a)},removeRangeObserver:function(c){var b=c.destroy(this);var a=this._array_rangeObservers;if(a){a.remove(c)}return b},addArrayObservers:function(a){this._modifyObserverSet("add",a)},removeArrayObservers:function(a){this._modifyObserverSet("remove",a)},_modifyObserverSet:function(h,c){var e,b;var g=c.target||this;var a=c.willChange||"arrayWillChange";var f=c.didChange||"arrayDidChange";var d=c.context;if(typeof a==="string"){a=g[a]}if(typeof f==="string"){f=g[f]}e=this._kvo_for("_kvo_array_will_change",SC.ObserverSet);b=this._kvo_for("_kvo_array_did_change",SC.ObserverSet);e[h](g,a,d);b[h](g,f,d)},arrayContentWillChange:function(b,i,a){this._teardownContentObservers(b,i);var f,d,h,j;var g,c;var e=this._kvo_array_will_change;if(e){d=e.members;h=d.length;for(j=0;j<h;j++){f=d[j];g=f[0];c=f[1];c.call(g,b,i,a,this)}}},arrayContentDidChange:function(b,m,a){var d=this._array_rangeObservers,c,k;this.beginPropertyChanges();this.notifyPropertyChange("length");if(d&&d.length>0){k=this._array_rangeChanges;if(!k){k=this._array_rangeChanges=SC.IndexSet.create()}if(m===a){c=m}else{c=this.get("length")-b;if(m>a){c+=(m-a)}}k.add(b,c)}this._setupContentObservers(b,a);var g,f,j,l;var h,e;var i=this._kvo_array_did_change;if(i){if(b===undefined){b=0;m=this.get("length");a=0}f=i.members;j=f.length;for(l=0;l<j;l++){g=f[l];h=g[0];e=g[1];e.call(h,b,m,a,this)}}this.enumerableContentDidChange(b,a,a-m);this.endPropertyChanges();return this},_setupContentObservers:function(f,e){var c=this._kvo_for("_kvo_content_observed_keys",SC.CoreSet);var d;var b;if(c.get("length")>0){d=this.slice(f,f+e);var a=this;c.forEach(function(g){b=SC.keyFor("_kvo_content_observers",g);a._kvo_for(b).forEach(function(h){d.forEach(function(i){a._resumeChainObservingForItemWithChainObserver(i,h)})})})}},_teardownContentObservers:function(e,a){var c=this._kvo_for("_kvo_content_observed_keys",SC.CoreSet);var d;var b;if(c.get("length")>0){d=this.slice(e,e+a);c.forEach(function(f){b=SC.keyFor("_kvo_content_observers",f);d.forEach(function(g){g._kvo_for(b).forEach(function(h){h.destroyChain()})})})}},teardownEnumerablePropertyChains:function(b){var a=this._kvo_enumerable_property_chains;if(a){a.forEach(function(g){var d,c=b.get("length"),i=SC.guidFor(g),f,h,e="_kvo_enumerable_property_clones";g.notifyPropertyDidChange();for(d=0;d<c;d++){h=b.objectAt(d);f=h[e][i];f.deactivate();delete h[e][i]}},this)}return this},setupEnumerablePropertyChains:function(b){var a=this._kvo_enumerable_property_chains;if(a){a.forEach(function(e){var d,c=b.get("length");e.notifyPropertyDidChange();c=b.get("length");for(d=0;d<c;d++){this._clonePropertyChainToItem(e,b.objectAt(d))}},this)}return this},registerDependentKeyWithChain:function(c,b){var a="_kvo_enumerable_property_chains",d;d=this._kvo_for(a,SC.CoreSet);d.add(b);this.forEach(function(e){this._clonePropertyChainToItem(b,e)},this)},_clonePropertyChainToItem:function(c,d){var e=SC.clone(c),b="_kvo_enumerable_property_clones",a;e.object=d;a=d[b]=d[b]||{};a[SC.guidFor(c)]=e;e.activate(d)},removeDependentKeyWithChain:function(d,c){var b="_kvo_enumerable_property_clones",e,a;this.forEach(function(f){f.removeDependentKeyWithChain(d,c);a=f[b];e=a[SC.guidFor(c)];e.deactivate(f)},this)},_resumeChainObservingForItemWithChainObserver:function(d,a){var b=SC.clone(a.next);var c=b.property;b.object=d;d.addObserver(c,b,b.propertyDidChange);if(a.root.tails){a.root.tails.pushObject(b.tail())}d._kvo_for(SC.keyFor("_kvo_content_observers",c)).push(b)},_addContentObserver:function(a){var c=a.next.property;this._kvo_for("_kvo_content_observed_keys",SC.CoreSet).push(c);var d=SC.keyFor("_kvo_content_observers",c);this._kvo_for(d).push(a);var b=a.tail();this.addObserver("[]",b,b.propertyDidChange);this._setupContentObservers(0,a.object.get("length"))},_removeContentObserver:function(a){var f,d;var e=this._kvo_content_observed_keys;var c=a.next.property;var b=a.tail();this.removeObserver("[]",b,b.propertyDidChange);if(e.contains(c)){d=SC.keyFor("_kvo_content_observers",c);f=this._kvo_for(d);f.removeObject(a);this._teardownContentObservers(0,a.object.get("length"));if(f.length===0){this._kvo_for("_kvo_content_observed_keys").remove(c)}}},_array_notifyRangeObservers:function(){var c=this._array_rangeObservers,d=this._array_rangeChanges,b=c?c.length:0,a;if(b>0&&d&&d.length>0){for(a=0;a<b;a++){c[a].rangeDidChange(d)}d.clear()}}};SC.Array=SC.mixin({},SC.Enumerable,SC.CoreArray);sc_require("mixins/array");SC.supplement(Array.prototype,SC.CoreArray);SC.mixin(Array.prototype,{replace:function(b,e,d){if(this.isFrozen){throw SC.FROZEN_ERROR}var c;var a=d?(d.get?d.get("length"):d.length):0;this.arrayContentWillChange(b,e,a);if(a===0){this.splice(b,e)}else{c=[b,e].concat(d);this.splice.apply(this,c)}this.arrayContentDidChange(b,e,a);return this},unknownProperty:function(b,c){var a=this.reducedProperty(b,c);if((c!==undefined)&&a===undefined){a=this[b]=c}return a}});if(Array.prototype.indexOf===SC.CoreArray.indexOf){Array.prototype.indexOf=function(d,c){var b,a=this.length;if(c===undefined){c=0}else{c=(c<0)?Math.ceil(c):Math.floor(c)}if(c<0){c+=a}for(b=c;b<a;b++){if(this[b]===d){return b}}return -1}}if(Array.prototype.lastIndexOf===SC.CoreArray.lastIndexOf){Array.prototype.lastIndexOf=function(d,c){var b,a=this.length;if(c===undefined){c=a-1}else{c=(c<0)?Math.ceil(c):Math.floor(c)}if(c<0){c+=a}for(b=c;b>=0;b--){if(this[b]===d){return b}}return -1}}if(!Date.now){Date.now=function(){return new Date().getTime()}}SC.supplement(Number.prototype,{ordinal:function(){if(SC.Locale){return SC.Locale.currentLocale.ordinalForNumber(this)}var a=this%10;return(~~(this%100/10)===1)?"th":(a===1)?"st":(a===2)?"nd":(a===3)?"rd":"th"}});SC.String={_scs_valueForKey:function(e,g,c){var a,f,d,b=e.indexOf(":");if(b>-1){a=e.substr(b+1);e=e.substr(0,b)}f=g.get?g.get(e):g[e];d=g[e+"Formatter"];if(d){f=d(f,a)}else{if(a){throw new Error("String.fmt was given a formatting string, but key `"+e+"` has no formatter! String: "+c)}}return f},fmt:function(b,a){var c=0,d=undefined,e;if(a){d=a[0]}return b.replace(/%\{(.*?)\}/g,function(g,h){e=YES;if(!d){throw new Error("Cannot use named parameters with `fmt` without a data hash. String: '"+b+"'")}var f=SC.String._scs_valueForKey(h,d,b);if(!SC.none(f)){return f}else{return g}}).replace(/%@([0-9]+)?/g,function(g,f){if(e){throw new Error("Invalid attempt to use both named parameters and indexed parameters. String: '"+b+"'")}f=f?parseInt(f,10)-1:c++;if(a[f]!==undefined){return a[f]}else{return""}})},w:function(f){var d=[],e=f.split(" "),b=e.length,c,a=0;for(a=0;a<b;++a){c=e[a];if(c.length!==0){d.push(c)}}return d}};sc_require("system/string");SC.mixin(String.prototype,{fmt:function(){return SC.String.fmt(this,arguments)},w:function(){return SC.String.w(this)}});SC.Comparable={isComparable:YES,compare:function(d,c){throw new Error("%@.compare() is not implemented".fmt(this.toString()))}};SC.Copyable={isCopyable:YES,copy:function(a){var b=SC._object_className(this.constructor);throw new Error("%@.copy() is not implemented".fmt(b))},frozenCopy:function(){var a=this.get?this.get("isFrozen"):this.isFrozen;if(a===YES){return this}else{if(a===undefined){throw new Error("%@ does not support freezing".fmt(this))}else{return this.copy().freeze()}}}};SC.mixin(Array.prototype,SC.Copyable);Array.prototype.copy=function(b){var c=this.slice(),a;if(b){a=c.length;while(a--){c[a]=SC.copy(c[a],true)}}return c};SC.FROZEN_ERROR=new Error("Cannot modify a frozen object");SC.Freezable={isFreezable:YES,isFrozen:NO,freeze:function(){if(this.set){this.set("isFrozen",YES)}else{this.isFrozen=YES}return this}};SC.mixin(Array.prototype,SC.Freezable);sc_require("mixins/enumerable");sc_require("mixins/observable");sc_require("mixins/freezable");sc_require("mixins/copyable");SC.Set=SC.mixin({},SC.Observable,SC.Enumerable,SC.Freezable,{create:function(c){var d,b,e=SC.Set._pool,f=this.isObservable,a;if(!f&&c===undefined&&e.length>0){return e.pop()}else{d=SC.beget(this);if(f){d.initObservable()}if(c&&c.isEnumerable&&c.get("length")>0){d.isObservable=NO;if(c.isSCArray){a=c.get("length");for(b=0;b<a;b++){d.add(c.objectAt(b))}}else{if(c.isSet){a=c.length;for(b=0;b<a;b++){d.add(c[b])}}else{c.forEach(function(g){d.add(g)},this)}}d.isObservable=f}}return d},isSet:YES,length:0,firstObject:function(){return(this.length>0)?this[0]:undefined}.property(),clear:function(){if(this.isFrozen){throw SC.FROZEN_ERROR}this.length=0;return this},contains:function(b){if(b===null){return NO}var a=this[SC.hashFor(b)];return(!SC.none(a)&&(a<this.length)&&(this[a]===b))},isEqual:function(a){if(!a||!a.isSet||(a.get("length")!==this.get("length"))){return NO}var b=this.get("length");while(--b>=0){if(!a.contains(this[b])){return NO}}return YES},addSetObserver:function(a){if(!this.setObservers){this.setObservers=SC.CoreSet.create()}this.setObservers.add(a)},removeSetObserver:function(a){if(!this.setObservers){return}this.setObservers.remove(a)},add:function(e){if(this.isFrozen){throw SC.FROZEN_ERROR}if(SC.none(e)){return this}var c,d=((c=e.hash)&&(typeof c==="function"))?c.call(e):SC.guidFor(e),b=this[d],a=this.length;if((b>=a)||(this[b]!==e)){this[a]=e;this[d]=a;this.length=a+1;if(this.setObservers){this.didAddItem(e)}}if(this.isObservable){this.enumerableContentDidChange()}return this},addEach:function(c){if(this.isFrozen){throw SC.FROZEN_ERROR}if(!c||!c.isEnumerable){throw new Error("%@.addEach must pass enumerable".fmt(this))}var a,b=this.isObservable;if(b){this.beginPropertyChanges()}if(c.isSCArray){a=c.get("length");while(--a>=0){this.add(c.objectAt(a))}}else{if(c.isSet){a=c.length;while(--a>=0){this.add(c[a])}}else{c.forEach(function(d){this.add(d)},this)}}if(b){this.endPropertyChanges()}return this},remove:function(f){if(this.isFrozen){throw SC.FROZEN_ERROR}if(f===null||f===undefined){return this}var c,d=(f&&(c=f.hash)&&(typeof c===SC.T_FUNCTION))?c.call(f):SC.guidFor(f),b=this[d],a=this.length,e;if((b===null||b===undefined)||(b>=a)||(this[b]!==f)){return this}delete this[d];if(b<(a-1)){e=this[b]=this[a-1];d=(e&&(c=e.hash)&&(typeof c===SC.T_FUNCTION))?c.call(e):SC.guidFor(e);this[d]=b}delete this[a-1];this.length=a-1;if(this.isObservable){this.enumerableContentDidChange()}if(this.setObservers){this.didRemoveItem(f)}return this},pop:function(){if(this.isFrozen){throw SC.FROZEN_ERROR}var a=(this.length>0)?this[this.length-1]:null;this.remove(a);return a},removeEach:function(c){if(this.isFrozen){throw SC.FROZEN_ERROR}if(!c||!c.isEnumerable){throw new Error("%@.addEach must pass enumerable".fmt(this))}var a,b=this.isObservable;if(b){this.beginPropertyChanges()}if(c.isSCArray){a=c.get("length");while(--a>=0){this.remove(c.objectAt(a))}}else{if(c.isSet){a=c.length;while(--a>=0){this.remove(c[a])}}else{c.forEach(function(d){this.remove(d)},this)}}if(b){this.endPropertyChanges()}return this},copy:function(){return this.constructor.create(this)},destroy:function(){this.isFrozen=NO;if(!this.isObservable){SC.Set._pool.push(this.clear())}return this},forEach:function(c,d){var b=this.length;if(!d){d=this}for(var a=0;a<b;a++){c.call(d,this[a],a,this)}return this},toString:function(){var b=this.length,a,c=[];for(a=0;a<b;a++){c[a]=this[a]}return"SC.Set<%@>".fmt(c.join(","))},didAddItem:function(c){var d=this.setObservers;if(!d){return}var b=d.length,a;for(a=0;a<b;a++){d[a].didAddItem(this,c)}},didRemoveItem:function(c){var d=this.setObservers;if(!d){return}var b=d.length,a;for(a=0;a<b;a++){d[a].didRemoveItem(this,c)}},_pool:[],isObservable:YES});SC.Set.constructor=SC.Set;SC.Set.clone=SC.Set.copy;SC.Set.push=SC.Set.unshift=SC.Set.add;SC.Set.shift=SC.Set.pop;SC.Set.addObject=SC.Set.add;SC.Set.removeObject=SC.Set.remove;SC.Set._pool=[];SC.CoreSet=SC.beget(SC.Set);SC.CoreSet.isObservable=NO;SC.CoreSet.constructor=SC.CoreSet;sc_require("mixins/observable");sc_require("system/set");SC.Observers={queue:[],addObserver:function(c,d,e,b){var a;if(typeof c==="string"){a=SC.tupleForPropertyPath(c,b)}else{a=c}if(a&&a[0].addObserver){a[0].addObserver(a[1],d,e)}else{this.queue.push([c,d,e,b])}},removeObserver:function(f,g,h,d){var c,b,a,e;a=SC.tupleForPropertyPath(f,d);if(a){a[0].removeObserver(a[1],g,h)}c=this.queue.length;b=this.queue,newQueue=undefined;while(--c>=0){e=b[c];if(e[0]!==f||e[1]!==g||e[2]!==h||e[3]!==d){if(!newQueue){newQueue=[]}newQueue.push(e)}}this.queue=newQueue||this.queue},addPendingRangeObserver:function(a){var b=this.rangeObservers;if(!b){b=this.rangeObservers=SC.CoreSet.create()}b.add(a);return this},_TMP_OUT:[],flush:function(b){var g=this.queue,d,a=g.length;if(g&&a>0){var k=(this.queue=[]);for(d=0;d<a;d++){var l=g[d];if(!l){continue}var h=SC.tupleForPropertyPath(l[0],l[3]);if(h&&h[0].addObserver){h[0].addObserver(h[1],l[1],l[2])}else{k.push(l)}}}if(b._kvo_needsRangeObserver){var j=this.rangeObservers,f=j?j.get("length"):0,c=this._TMP_OUT,e;for(d=0;d<f;d++){e=j[d];if(e.setupPending(b)){c.push(e)}}if(c.length>0){j.removeEach(c)}c.length=0;b._kvo_needsRangeObserver=false}},isObservingSuspended:0,_pending:SC.CoreSet.create(),objectHasPendingChanges:function(a){this._pending.add(a)},suspendPropertyObserving:function(){this.isObservingSuspended++},resumePropertyObserving:function(){var c;if(--this.isObservingSuspended<=0){c=this._pending;this._pending=SC.CoreSet.create();var b,a=c.length;for(b=0;b<a;b++){c[b]._notifyPropertyObservers()}c.clear();c=null}}};sc_require("core");sc_require("mixins/observable");sc_require("private/observer_queue");sc_require("mixins/array");sc_require("system/set");SC.BENCHMARK_OBJECTS=NO;SC._detect_base=function _detect_base(c,b,a){return function d(){var f=b[a],e;if(c.isEnhancement){e=Array.prototype.slice.call(arguments,1)}else{e=arguments}return f.apply(this,e)}};SC._object_extend=function _object_extend(g,f,n){g._kvo_cloned=null;var x,m,e,h=g.concatenatedProperties,k=SC.K,c,b;m=(h)?h.length:0;var a=(m>0)?{}:null;while(--m>=0){x=h[m];c=g[x];b=f[x];if(c){if(!(c instanceof Array)){c=SC.$A(c)}a[x]=(b)?c.concat(b):b}else{if(!(b instanceof Array)){b=SC.$A(b)}a[x]=b}}var w=g._bindings,l=NO,u=g._observers,v=NO,i=g._properties,d=NO,q,j,o,p;var s=g.outlets,r=NO;if(f.outlets){s=(s||SC.EMPTY_ARRAY).concat(f.outlets);r=YES}for(x in f){if(x==="_kvo_cloned"){continue}if(!f.hasOwnProperty(x)){continue}p=(a.hasOwnProperty(x)?a[x]:null)||f[x];if(x.length>7&&x.slice(-7)==="Binding"){if(!l){w=(w||SC.EMPTY_ARRAY).slice();l=YES}if(g[x]==null){w[w.length]=x}}else{if(p&&(p instanceof Function)){if(!p.superclass&&(p!==(e=g[x]))){p.superclass=e||k;p.base=n?SC._detect_base(p,n,x):e||k}if(p.propertyPaths){if(!v){u=(u||SC.EMPTY_ARRAY).slice();v=YES}u[u.length]=x}q=p.localPropertyPaths;if(q){j=q.length;while(--j>=0){o=g._kvo_for(SC.keyFor("_kvo_local",q[j]),SC.CoreSet);o.add(x);g._kvo_for("_kvo_observed_keys",SC.CoreSet).add(q[j])}}if(p.dependentKeys){if(!d){i=(i||SC.EMPTY_ARRAY).slice();d=YES}i[i.length]=x}if(p.autoconfiguredOutlet){if(!r){s=(s||SC.EMPTY_ARRAY).slice();r=YES}s[s.length]=x}if(p.isEnhancement){p=SC._enhance(g[x]||k,p)}}}g[x]=p}if(f.hasOwnProperty("toString")){x="toString";p=(a.hasOwnProperty(x)?a[x]:null)||f[x];if(!p.superclass&&(p!==(e=g[x]))){p.superclass=p.base=e||k}g[x]=p}g._bindings=w||[];g._observers=u||[];g._properties=i||[];g.outlets=s||[];return g};SC._enhance=function(b,a){return function(){var d=Array.prototype.slice.call(arguments,0),c=this;d.unshift(function(){return b.apply(c,arguments)});return a.apply(this,d)}};SC.Object=function(a){this.__sc_super__=SC.Object.prototype;return this._object_init(a)};SC.mixin(SC.Object,{mixin:function(){var a=arguments.length,b;for(b=0;b<a;b++){SC.mixin(this,arguments[b])}return this},superclass:null,extend:function(){var e,c=function(f){this.__sc_super__=c.prototype;return this._object_init(f)};for(e in this){if(!this.hasOwnProperty(e)){continue}c[e]=this[e]}if(this.hasOwnProperty("toString")){c.toString=this.toString}c.superclass=this;c.__sc_super__=this.prototype;SC.generateGuid(c,"sc");c.subclasses=SC.Set.create();this.subclasses.add(c);var d=(c.prototype=SC.beget(this.prototype)),b,a=arguments.length;for(b=0;b<a;b++){SC._object_extend(d,arguments[b],c.__sc_super__)}d.constructor=c;return c},reopen:function(f){if(this.subclasses){var b,e,g,c,a=this.subclasses.length,d;for(d=0;d<a;d++){c=null;b=this.subclasses[d];for(e in f){if(!f.hasOwnProperty(e)){continue}if(b.prototype.hasOwnProperty(e)){if(!c){c=SC.clone(f)}delete c[e];continue}g=f[e];if(g&&(g instanceof Function)&&(g.isEnhancement)){if(!c){c=SC.clone(f)}delete c[e];continue}}b.reopen(c||f)}}return SC._object_extend(this.prototype,f,this.__sc_super__)},create:function(){var b=this,a=new b(arguments);if(SC.ObjectDesigner){SC.ObjectDesigner.didCreateObject(a,SC.$A(arguments))}return a},isClass:YES,subclasses:SC.Set.create(),toString:function(){return SC._object_className(this)},subclassOf:function(b){if(this===b){return NO}var a=this;while(a=a.superclass){if(a===b){return YES}}return NO},hasSubclass:function(a){return(a&&a.subclassOf)?a.subclassOf(this):NO},kindOf:function(a){return(this===a)||this.subclassOf(a)},design:function(){if(this.isDesign){return this}var a=this.extend.apply(this,arguments);a.isDesign=YES;if(SC.ObjectDesigner){SC.ObjectDesigner.didLoadDesign(a,this,SC.A(arguments))}return a}});SC.Object.prototype={_kvo_enabled:YES,_object_init:function(c){var b,a=(c)?c.length:0;for(b=0;b<a;b++){SC._object_extend(this,c[b],this.__sc_super__)}SC.generateGuid(this,"sc");this.init();var d=this.initMixin;a=(d)?d.length:0;for(b=0;b<a;b++){d[b].call(this)}return this},mixin:function(){var b,a=arguments.length,c;for(b=0;b<a;b++){SC._object_extend(this,arguments[b])}this._observableInited=NO;this.initObservable();for(b=0;b<a;b++){c=arguments[b].initMixin;if(c){c.call(this)}}return this},init:function(){this.initObservable();return this},isDestroyed:NO,destroy:function(){if(this.get("isDestroyed")){return this}this.set("isDestroyed",YES);var b,c=this.destroyMixin,a=(c)?c.length:0;for(b=0;b<a;b++){c[b].call(this)}this.destroyObservable();return this},isObject:true,respondsTo:function(a){return !!(this[a] instanceof Function)},tryToPerform:function(b,c,a){return this.respondsTo(b)&&(this[b](c,a)!==NO)},superclass:function(){var a=arguments.callee.caller;return a.superclass?a.superclass.apply(this,arguments):null},instanceOf:function(a){return this.constructor===a},kindOf:function(a){return this.constructor.kindOf(a)},toString:function(){if(!this._object_toString){var a=SC._object_className(this.constructor),b=a+":"+SC.guidFor(this);if(a){this._object_toString=b}else{return b}}return this._object_toString},awake:function(){var d=this.outlets,b,a,c;for(b=0,a=d.length;b<a;++b){c=d[b];this.get(c)}this.bindings.invoke("sync")},invokeOnce:function(a){SC.RunLoop.currentRunLoop.invokeOnce(this,a);return this},invokeLast:function(a){SC.RunLoop.currentRunLoop.invokeLast(this,a);return this},invokeNext:function(a){SC.RunLoop.currentRunLoop.invokeNext(this,a);return this},concatenatedProperties:["concatenatedProperties","initMixin","destroyMixin"]};SC.Object.prototype.constructor=SC.Object;SC.mixin(SC.Object.prototype,SC.Observable);SC.findClassNames=function(){if(SC._object_foundObjectClassNames){return}SC._object_foundObjectClassNames=true;var b=[],c=false;var a=function(d,f,j){var l,i,h;j--;if(b.indexOf(f)>=0){return}b.push(f);for(var g in f){if(g=="__scope__"){continue}if(g=="superclass"){continue}if(g=="__SC__"){g="SC"}if(!g.match(/^[A-Z0-9]/)){continue}if(g=="SC"){if(c){continue}c=true}l=(d)?[d,g].join("."):g;i=f[g];try{h=SC.typeOf(i)}catch(k){break}switch(h){case SC.T_CLASS:if(!i._object_className){i._object_className=l}if(j>=0){a(l,i,j)}break;case SC.T_OBJECT:if(j>=0){a(l,i,j)}break;case SC.T_HASH:if(((d)||(l==="SC"))&&(j>=0)){a(l,i,j)}break;default:break}}};window.__SC__=SC;a(null,window,2)};SC.instanceOf=function(a,b){return !!(a&&a.constructor===b)};SC.kindOf=function(a,b){if(a&&!a.isClass){a=a.constructor}return !!(a&&a.kindOf&&a.kindOf(b))};SC._object_className=function(b){if(SC.isReady===NO){return""}if(!b._object_className){SC.findClassNames()}if(b._object_className){return b._object_className}var a=b;while(a&&!a._object_className){a=a.superclass}return(a&&a._object_className)?a._object_className:"Anonymous"};sc_require("system/object");SC._PropertyChain=SC.Object.extend({object:null,property:null,target:null,toInvalidate:null,nextProperty:null,activate:function(b){var a=this.get("object"),c=this.get("property"),d;if(!b){b=this.get("target")}if(a&&a!==b){this.deactivate()}this.set("object",b);if(b&&c!=="@each"){b.registerDependentKeyWithChain(c,this)}if(this.next){d=b?b.get(c):undefined;this.next.activate(d)}return this},deactivate:function(){var a=this.get("object"),b=this.get("property");if(a){a.removeDependentKeyWithChain(b,this)}if(this.next){this.next.deactivate()}return this},notifyPropertyDidChange:function(){var d=this.get("target"),c=this.get("toInvalidate"),b,a;d.propertyDidChange(c);if(this.next){b=this.get("object");a=b.get(this.get("property"));this.next.activate(a)}}});SC._PropertyChain.createChain=function(h,g,e){var f=h.split(".");var a=f.length,d=1;var b=SC._PropertyChain.create({property:f[0],target:g,toInvalidate:e,nextProperty:f[1]});b.set("length",a);var c=b;while(--a>=1){c=c.next=SC._PropertyChain.create({property:f[d],target:g,toInvalidate:e,nextProperty:f[++d]});c.set("length",a)}return b};sc_require("ext/function");sc_require("system/object");SC.MULTIPLE_PLACEHOLDER="@@MULT@@";SC.NULL_PLACEHOLDER="@@NULL@@";SC.EMPTY_PLACEHOLDER="@@EMPTY@@";SC.Binding={isBinding:YES,beget:function(b){var a=SC.beget(this);a.parentBinding=this;if(a._LogicGate){a._logicGate=a._LogicGate.create(a._logicGateHash);a=a.from("logicProperty",a._logicGate).oneWay()}if(b!==undefined){a=a.from(b)}return a},builder:function(){var b=this,a=function(c){return b.beget().from(c)};a.beget=function(){return b.beget()};return a},from:function(b,a){if(!b){return this}var c=(this===SC.Binding)?this.beget():this;c._fromPropertyPath=b;c._fromRoot=a;c._fromTuple=null;return c},to:function(b,a){var c=(this===SC.Binding)?this.beget():this;c._toPropertyPath=b;c._toRoot=a;c._toTuple=null;return c},connect:function(){if(this.isConnected){return this}this.isConnected=YES;this._connectionPending=YES;this._syncOnConnect=YES;SC.Binding._connectQueue.add(this);if(!SC.RunLoop.isRunLoopInProgress()){this._scheduleSync()}return this},_connect:function(){if(!this._connectionPending){return}this._connectionPending=NO;var b,a;b=this._fromPropertyPath;a=this._fromRoot;if(typeof b==="string"){if(b.indexOf(".")===0){b=b.slice(1);if(!a){a=this._toRoot}}else{if(b.indexOf("*")===0){b=[this._fromRoot||this._toRoot,b.slice(1)];a=null}}}this._fromObserverData=[b,this,this.fromPropertyDidChange,a];SC.Observers.addObserver.apply(SC.Observers,this._fromObserverData);if(!this._oneWay){b=this._toPropertyPath;a=this._toRoot;this._toObserverData=[b,this,this.toPropertyDidChange,a];SC.Observers.addObserver.apply(SC.Observers,this._toObserverData)}if(this._syncOnConnect){this._syncOnConnect=NO;this.sync()}},disconnect:function(){if(!this.isConnected){return this}if(this._connectionPending){this._connectionPending=NO;SC.Binding._connectQueue.remove(this)}else{SC.Observers.removeObserver.apply(SC.Observers,this._fromObserverData);if(!this._oneWay){SC.Observers.removeObserver.apply(SC.Observers,this._toObserverData)}SC.Binding._changeQueue.remove(this)}this.isConnected=NO;return this},isDestroyed:NO,destroy:function(){if(this.isDestroyed){return}this.isDestroyed=YES;if(this._logicGate){this._logicGate.destroy();this._logicGate=null;this._LogicGate=null;this._logicGateHash=null}this.disconnect();this._bindingSource=null;this._toRoot=this._toTarget=null;this._fromRoot=this._fromTarget=null;this._toObserverData=this._fromObserverData=null},fromPropertyDidChange:function(c,b){var a=c?c.get(b):null;if(!this.isConnected){return}if(a!==this._bindingValue||b==="[]"){this._setBindingValue(c,b);SC.Binding._changeQueue.add(this);this._scheduleSync()}},toPropertyDidChange:function(c,b){if(this._oneWay){return}var a=c.get(b);if(!this.isConnected){return}if(a!==this._transformedBindingValue){this._setBindingValue(c,b);SC.Binding._changeQueue.add(this);this._scheduleSync()}},_scheduleSync:function(){if(SC.RunLoop.isRunLoopInProgress()||SC.Binding._syncScheduled){return}SC.Binding._syncScheduled=YES;setTimeout(function(){SC.run();SC.Binding._syncScheduled=NO},1)},_setBindingValue:function(b,a){this._bindingSource=b;this._bindingKey=a},_computeBindingValue:function(){var c=this._bindingSource,b=this._bindingKey,a;this._bindingValue=a=(c?c.getPath(b):null);this._transformedBindingValue=this._computeTransformedValue(a)},_computeTransformedValue:function(e){var d=this._transforms,b,a,c;if(d){a=d.length;for(b=0;b<a;b++){c=d[b];e=c(e,this)}}if(this._noError&&SC.typeOf(e)===SC.T_ERROR){e=null}return e},_connectQueue:SC.CoreSet.create(),_alternateConnectQueue:SC.CoreSet.create(),_changeQueue:SC.CoreSet.create(),_alternateChangeQueue:SC.CoreSet.create(),flushPendingChanges:function(){if(this._isFlushing){return NO}this._isFlushing=YES;SC.Observers.suspendPropertyObserving();var b=NO,a,c;while((a=this._connectQueue).length>0){this._connectQueue=this._alternateConnectQueue;this._alternateConnectQueue=a;while((c=a.pop())){c._connect()}}while((a=this._changeQueue).length>0){b=YES;this._changeQueue=this._alternateChangeQueue;this._alternateChangeQueue=a;while((c=a.pop())){c.applyBindingValue()}}this._isFlushing=NO;SC.Observers.resumePropertyObserving();return b},applyBindingValue:function(){this._computeBindingTargets();this._computeBindingValue();var a=this._bindingValue,b=this._transformedBindingValue;if(!this._oneWay&&this._fromTarget){this._fromTarget.setPathIfChanged(this._fromPropertyKey,a)}if(this._toTarget){this._toTarget.setPathIfChanged(this._toPropertyKey,b)}},sync:function(){var d,c,a,b;if(!this.isConnected){return this}if(this._connectionPending){this._syncOnConnect=YES}else{this._computeBindingTargets();d=this._fromTarget;c=this._fromPropertyKey;if(!d||!c){return this}if(!d.isObservable){return this}a=d.getPath(c);b=this._computeTransformedValue(a);if(a!==this._bindingValue||b!==this._transformedBindingValue||c==="[]"){this._setBindingValue(d,c);SC.Binding._changeQueue.add(this)}}return this},_syncOnConnect:NO,_computeBindingTargets:function(){var c,b,a;if(!this._fromTarget){c=this._fromPropertyPath;b=this._fromRoot;if(typeof c==="string"){if(c.indexOf(".")===0){c=c.slice(1);if(!b){b=this._toRoot}}else{if(c.indexOf("*")===0){c=[b||this._toRoot,c.slice(1)];b=null}}}a=SC.tupleForPropertyPath(c,b);if(a){this._fromTarget=a[0];this._fromPropertyKey=a[1]}}if(!this._toTarget){c=this._toPropertyPath;b=this._toRoot;a=SC.tupleForPropertyPath(c,b);if(a){this._toTarget=a[0];this._toPropertyKey=a[1];if(this._logicGate){this._logicGate.set("localObject",this._toTarget)}}}},oneWay:function(c,a){if((a===undefined)&&(SC.typeOf(c)===SC.T_BOOL)){a=c;c=null}var b=this.from(c);if(b===SC.Binding){b=b.beget()}b._oneWay=(a===undefined)?YES:a;return b},transform:function(b){var c=(this===SC.Binding)?this.beget():this;var a=c._transforms;if(a&&(a===c.parentBinding._transforms)){a=c._transforms=a.slice()}if(!a){a=c._transforms=[]}a.push(b);return c},resetTransforms:function(){var a=(this===SC.Binding)?this.beget():this;a._transforms=null;return a},noError:function(c,a){if((a===undefined)&&(SC.typeOf(c)===SC.T_BOOL)){a=c;c=null}var b=this.from(c);if(b===SC.Binding){b=b.beget()}b._noError=(a===undefined)?YES:a;return b},single:function(b,a){if(a===undefined){a=SC.MULTIPLE_PLACEHOLDER}return this.from(b).transform(function(e,d){if(e&&e.isEnumerable){var c=e.get("length");e=(c>1)?a:(c<=0)?null:e.firstObject()}return e})},notEmpty:function(b,a){if(a===undefined){a=SC.EMPTY_PLACEHOLDER}return this.from(b).transform(function(d,c){if(SC.none(d)||(d==="")||(SC.isArray(d)&&(d.get?d.get("length"):d.length)===0)){d=a}return d})},notNull:function(b,a){if(a===undefined){a=SC.EMPTY_PLACEHOLDER}return this.from(b).transform(function(d,c){if(SC.none(d)){d=a}return d})},multiple:function(a){return this.from(a).transform(function(b){if(!SC.isArray(b)){b=(b==null)?[]:[b]}return b})},bool:function(a){return this.from(a).transform(function(b){var c=SC.typeOf(b);if(c===SC.T_ERROR){return b}return(c==SC.T_ARRAY)?(b.length>0):(b==="")?NO:!!b})},not:function(a){return this.from(a).transform(function(b){var c=SC.typeOf(b);if(c===SC.T_ERROR){return b}return !((c==SC.T_ARRAY)?(b.length>0):(b==="")?NO:!!b)})},isNull:function(a){return this.from(a).transform(function(b){var c=SC.typeOf(b);return(c===SC.T_ERROR)?b:SC.none(b)})},_LogicGateAnd:SC.Object.extend({logicProperty:function(){return(this.get("valueA")&&this.get("valueB"))}.property("valueA","valueB").cacheable()}),_LogicGateOr:SC.Object.extend({logicProperty:function(){return(this.get("valueA")||this.get("valueB"))}.property("valueA","valueB").cacheable()}),_logicGateBinding:function(c,d,b){if(d.indexOf("*")===0||d.indexOf(".")===0){d=d.slice(1).replace(/\*/g,".");d="*localObject."+d}if(b.indexOf("*")===0||b.indexOf(".")===0){b=b.slice(1).replace(/\*/g,".");b="*localObject."+b}var f={localObject:null,valueABinding:SC.Binding.oneWay(d),valueBBinding:SC.Binding.oneWay(b)},e=c.create(f);var a=this.from("logicProperty",e).oneWay();a._LogicGate=c;a._logicGateHash=f;a._logicGate=e;return a},and:function(b,a){return this._logicGateBinding(this._LogicGateAnd,b,a)},or:function(b,a){return this._logicGateBinding(this._LogicGateOr,b,a)},equalTo:function(b,a){if(a===undefined){a=b;b=null}return this.from(b).transform(function(c,d){return c===a})},toString:function(){var c=this._fromRoot?"<%@>:%@".fmt(this._fromRoot,this._fromPropertyPath):this._fromPropertyPath;var b=this._toRoot?"<%@>:%@".fmt(this._toRoot,this._toPropertyPath):this._toPropertyPath;var a=this._oneWay?"[oneWay]":"";return"SC.Binding%@(%@ -> %@)%@".fmt(SC.guidFor(this),c,b,a)}};SC.binding=function(b,a){return SC.Binding.from(b,a)};sc_require("ext/function");SC.Error=SC.Object.extend({code:-1,message:"",errorValue:null,errorObject:function(){return this}.property().cacheable(),label:null,toString:function(){return"SC.Error:%@:%@ (%@)".fmt(SC.guidFor(this),this.get("message"),this.get("code"))},isError:YES});SC.Error.desc=function(d,a,e,c){var b={message:d};if(a!==undefined){b.label=a}if(c!==undefined){b.code=c}if(e!==undefined){b.errorValue=e}return this.create(b)};SC.$error=function(b,a,d,e){return SC.Error.desc(b,a,d,e)};SC.ok=function(a){return(a!==false)&&!(a&&a.isError)};SC.$ok=SC.ok;SC.val=function(a){if(a&&a.isError){return a.get?a.get("errorValue"):null}else{return a}};SC.$val=SC.val;SC.Error.HAS_MULTIPLE_VALUES=-100;sc_require("mixins/enumerable");sc_require("mixins/observable");sc_require("mixins/freezable");sc_require("mixins/copyable");SC.IndexSet=SC.mixin({},SC.Observable,SC.Enumerable,SC.Freezable,SC.Copyable,{_sc_sliceContent:function(e){if(e.length<1000){return e.slice()}var d=0,a=[],b=e[0];while(b!==0){a[d]=b;d=(b<0)?(0-b):b;b=e[d]}a[d]=0;this._hint(0,d,a);return a},create:function(c,b){var a=SC.beget(this);a.initObservable();a.registerDependentKey("min","[]");if(c&&c.isIndexSet){a._content=this._sc_sliceContent(c._content);a.max=c.max;a.length=c.length;a.source=c.source}else{a._content=[0];if(c!==undefined){a.add(c,b)}}return a},isIndexSet:YES,HINT_SIZE:256,length:0,max:0,min:function(){var a=this._content,b=a[0];return(b===0)?-1:(b>0)?0:Math.abs(b)}.property("[]").cacheable(),firstObject:function(){return(this.get("length")>0)?this.get("min"):undefined}.property(),rangeStartForIndex:function(c){var f=this._content,a=this.get("max"),b,e,d;if(c>=a){return a}if(Math.abs(f[c])>c){return c}d=c-(c%SC.IndexSet.HINT_SIZE);b=f[d];if(SC.none(b)){b=this._infRange}if(b<0||b>c){b=d}e=f[b];if(e===undefined){e=this.rangeStartForIndex(b)}else{e=Math.abs(e)}while(e<c){b=e;e=Math.abs(f[b])}return b},isEqual:function(c){if(c===this){return YES}if(!c||!c.isIndexSet||(c.max!==this.max)||(c.length!==this.length)){return NO}var e=this._content,b=c._content,d=0,a=e[d];do{if(b[d]!==a){return NO}d=Math.abs(a);a=e[d]}while(d!==0);return YES},indexBefore:function(b){if(b===0){return -1}b--;var c=this._content,a=this.get("max"),d=this.rangeStartForIndex(b);if(!c){return null}if(!isFinite(d)){return b}while((d===a)||(c[d]<0)){if(d===0){return -1}b=d-1;d=this.rangeStartForIndex(b)}return b},indexAfter:function(b){var d=this._content,a=this.get("max"),e,c;if(!d||(b>=a)){return -1}b++;e=this.rangeStartForIndex(b);c=d[e];while(c<0){if(c===0){return -1}b=e=Math.abs(c);c=d[e]}return b},contains:function(g,c){var b,f,a,e,d;if(c===undefined){if(g===null||g===undefined){return NO}if(typeof g===SC.T_NUMBER){c=1}else{if(g&&g.isIndexSet){if(g===this){return YES}b=g._content;f=0;a=b[f];while(a!==0){if((a>0)&&!this.contains(f,a-f)){return NO}f=Math.abs(a);a=b[f]}return YES}else{c=g.length;g=g.start}}}e=this.rangeStartForIndex(g);if(isFinite(e)){d=this._content[e];return(d>0)&&(e<=g)&&(d>=(g+c))}else{return true}},intersects:function(f,c){var b,e,a,d;if(c===undefined){if(typeof f===SC.T_NUMBER){c=1}else{if(f&&f.isIndexSet){if(f===this){return YES}b=f._content;e=0;a=b[e];while(a!==0){if((a>0)&&this.intersects(e,a-e)){return YES}e=Math.abs(a);a=b[e]}return NO}else{c=f.length;f=f.start}}}e=this.rangeStartForIndex(f);b=this._content;a=b[e];d=f+c;while(e<d){if(a===0){return NO}if((a>0)&&(a>f)){return YES}e=Math.abs(a);a=b[e]}return NO},without:function(b,a){if(b===this){return SC.IndexSet.create()}return this.clone().remove(b,a)},replace:function(c,a){if(a===undefined){if(typeof c===SC.T_NUMBER){a=1}else{if(c&&c.isIndexSet){this._content=this._sc_sliceContent(c._content);this.beginPropertyChanges().set("max",c.max).set("length",c.length).set("source",c.source).enumerableContentDidChange();this.endPropertyChanges();return this}else{a=c.length;c=c.start}}}var b=this.length;this._content.length=1;this._content[0]=0;this.length=this.max=0;return this.add(c,a)},add:function(a,b){if(this.isFrozen){throw SC.FROZEN_ERROR}var e,i,d;if(a&&a.isIndexSet){e=a._content;if(!e){return this}i=0;d=e[0];while(d!==0){if(d>0){this.add(i,d-i)}i=d<0?0-d:d;d=e[i]}return this}else{if(b===undefined){if(a===null||a===undefined){return this}else{if(typeof a===SC.T_NUMBER){b=1}else{b=a.length;a=a.start}}}else{if(b===null){b=1}}}if(b<=0){return this}var f=this.get("max"),c=f,h,g;e=this._content;if(a===f){if(a>0){i=this.rangeStartForIndex(a-1);d=e[i];if(d>0){delete e[f];e[i]=f=a+b;a=i}else{e[f]=f=a+b}}else{e[a]=f=b}e[f]=0;this.set("max",f);this.set("length",this.length+b);b=f-a}else{if(a>f){e[f]=0-a;e[a]=a+b;e[a+b]=0;this.set("max",a+b);this.set("length",this.length+b);b=a+b-f;a=f}else{i=this.rangeStartForIndex(a);d=e[i];f=a+b;h=0;if((a>0)&&(i===a)&&(d<=0)){i=this.rangeStartForIndex(a-1);d=e[i]}if(d<0){e[i]=0-a;if(Math.abs(d)>f){e[a]=0-f;e[f]=d}else{e[a]=d}}else{a=i;if(d>f){f=d}}i=a;while(i<f){g=e[i];if(g===0){e[f]=0;d=f;h+=f-i}else{d=Math.abs(g);if(d>f){e[f]=g;d=f}if(g<0){h+=d-i}}delete e[i];i=d}if((i=e[f])>0){delete e[f];f=i}e[a]=f;if(f>c){this.set("max",f)}this.set("length",this.get("length")+h);b=f-a}}this._hint(a,b);if(h!==0){this.enumerableContentDidChange()}return this},remove:function(a,b){if(this.isFrozen){throw SC.FROZEN_ERROR}if(b===undefined){if(a===null||a===undefined){return this}else{if(typeof a===SC.T_NUMBER){b=1}else{if(a.isIndexSet){a.forEachRange(this.remove,this);return this}else{b=a.length;a=a.start}}}}if(b<=0){return this}var f=this.get("max"),c=f,e=this._content,j,d,i,g,h;if(a>=f){return this}j=this.rangeStartForIndex(a);d=e[j];h=a+b;i=0;if((a>0)&&(j===a)&&(d>0)){j=this.rangeStartForIndex(a-1);d=e[j]}if(d>0){e[j]=a;if(d>h){e[a]=h;e[h]=d}else{e[a]=d}}else{a=j;d=Math.abs(d);if(d>h){h=d}}if(!isFinite(d)){this._hint(j,a-j);this._infRange=h}j=a;while(j<h){g=e[j];if(g===0){e[h]=0;d=h}else{d=Math.abs(g);if(d>h){e[h]=g;d=h}if(g>0){i+=d-j}}delete e[j];j=d}if((j=e[h])<0){delete e[h];h=Math.abs(j)}if(e[h]===0){delete e[h];e[a]=0;this.set("max",a)}else{e[a]=0-h}if(isFinite(i)){this.set("length",this.get("length")-i)}else{this.set("length",0)}b=Math.min(e.length,h-a);this._hint(a,b);if(i!==0){this.enumerableContentDidChange()}return this},_hint:function(g,d,c){if(c===undefined){c=this._content}var b=SC.IndexSet.HINT_SIZE,a=Math.abs(c[g]),f=g-(g%b)+b,e=g+d;while(f<e){while((a!==0)&&(a<=f)){g=a;a=Math.abs(c[g])}if(a===0){delete c[f]}else{if(!isFinite(a)){this._infRange=g;f=Infinity}else{if(f!==g){c[f]=g}}}f+=b}},clear:function(){if(this.isFrozen){throw SC.FROZEN_ERROR}var a=this.length;this._content.length=1;this._content[0]=0;this._infRange=null;this.set("length",0).set("max",0);if(a>0){this.enumerableContentDidChange()}},addEach:function(b){if(this.isFrozen){throw SC.FROZEN_ERROR}this.beginPropertyChanges();var a=b.get("length");if(b.isSCArray){while(--a>=0){this.add(b.objectAt(a))}}else{if(b.isEnumerable){b.forEach(function(c){this.add(c)},this)}}this.endPropertyChanges();return this},removeEach:function(b){if(this.isFrozen){throw SC.FROZEN_ERROR}this.beginPropertyChanges();var a=b.get("length");if(b.isSCArray){while(--a>=0){this.remove(b.objectAt(a))}}else{if(b.isEnumerable){b.forEach(function(c){this.remove(c)},this)}}this.endPropertyChanges();return this},clone:function(){return SC.IndexSet.create(this)},inspect:function(){var e=this._content,b=e.length,a=0,c=[],d;for(a=0;a<b;a++){d=e[a];if(d!==undefined){c.push("%@:%@".fmt(a,d))}}return"SC.IndexSet<%@>".fmt(c.join(" , "))},forEachRange:function(f,d){var b=this._content,e=0,a=b[e],c=this.source;if(d===undefined){d=null}while(a!==0){if(a>0){f.call(d,e,a-e,this,c)}e=Math.abs(a);a=b[e]}return this},forEachIn:function(b,c,j,f){var g=this._content,i=0,h=0,d=b+c,a=this.source,e=g[i];if(f===undefined){f=null}while(e!==0){if(i<b){i=b}while((i<e)&&(i<d)){j.call(f,i++,h++,this,a)}if(i>=d){i=e=0}else{i=Math.abs(e);e=g[i]}}return this},lengthIn:function(g,d){var a=0;if(d===undefined){if(g===null||g===undefined){return 0}else{if(typeof g===SC.T_NUMBER){d=1}else{if(g.isIndexSet){g.forEachRange(function(i,h){a+=this.lengthIn(i,h)},this);return a}else{d=g.length;g=g.start}}}}if(this.get("length")===0){return 0}var c=this._content,f=0,b=c[f],e=g+d;while(f<e&&b!==0){if(b>0){a+=(b>e)?e-f:b-f}f=Math.abs(b);b=c[f]}return a},source:null,indexOf:function(d,c){var f=this.source;if(!f){throw new Error("%@.indexOf() requires source".fmt(this))}var b=f.get("length"),e=this._content,g=e[0]<0?Math.abs(e[0]):0,a;while(g>=0&&g<b){a=f.indexOf(d,g);if(a<0){return -1}if(this.contains(a)){return a}g=a+1}return -1},lastIndexOf:function(d,c){var e=this.source;if(!e){throw new Error("%@.lastIndexOf() requires source".fmt(this))}var b=e.get("length"),f=this.max-1,a;if(f>=b){f=b-1}while(f>=0){a=e.lastIndexOf(d,f);if(a<0){return -1}if(this.contains(a)){return a}f=a+1}return -1},forEachObject:function(g,e){var d=this.source;if(!d){throw new Error("%@.forEachObject() requires source".fmt(this))}var c=this._content,f=0,a=0,b=c[f];if(e===undefined){e=null}while(b!==0){while(f<b){g.call(e,d.objectAt(f),f,d,this);f++}f=Math.abs(b);b=c[f]}return this},addObject:function(c,d){var e=this.source;if(!e){throw new Error("%@.addObject() requires source".fmt(this))}var b=e.get("length"),f=0,a;while(f>=0&&f<b){a=e.indexOf(c,f);if(a>=0){this.add(a);if(d){return this}f=a++}else{return this}}return this},addObjects:function(b,a){b.forEach(function(c){this.addObject(c,a)},this);return this},removeObject:function(c,d){var e=this.source;if(!e){throw new Error("%@.removeObject() requires source".fmt(this))}var b=e.get("length"),f=0,a;while(f>=0&&f<b){a=e.indexOf(c,f);if(a>=0){this.remove(a);if(d){return this}f=a+1}else{return this}}return this},removeObjects:function(b,a){b.forEach(function(c){this.removeObject(c,a)},this);return this},LOG_OBSERVING:NO,forEach:function(g,e){var c=this._content,f=0,a=0,d=this.source,b=c[f];if(e===undefined){e=null}while(b!==0){if(isFinite(b)){while(f<b){g.call(e,f++,a++,this,d)}f=Math.abs(b);b=c[f]}else{throw new Error("Developer Error: You may not iterate an infinite range in SC.IndexSet.")}}return this},nextObject:function(f,b,c){var e=this._content,d=c.next,a=this.get("max");if(b===null){b=d=0}else{if(b>=a){delete c.next;return null}else{b++}}if(b===d){do{b=Math.abs(d);d=e[b]}while(d<0);c.next=d}return b},toString:function(){var a=[];this.forEachRange(function(c,b){a.push(b===1?c:"%@..%@".fmt(c,c+b-1))},this);return"SC.IndexSet<%@>".fmt(a.join(","))},max:0});SC.IndexSet.slice=SC.IndexSet.copy=SC.IndexSet.clone;SC.IndexSet.EMPTY=SC.IndexSet.create().freeze();SC.json={encode:function(a){return JSON.stringify(a)},decode:function(a){return JSON.parse(a)}};if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());sc_require("ext/function");SC.LOGGER_LOG_DELIMITER=", ";SC.LOGGER_LOG_ERROR="ERROR: ";SC.LOGGER_LOG_INFO="INFO:  ";SC.LOGGER_LOG_WARN="WARN:  ";SC.LOGGER_LOG_DEBUG="DEBUG: ";SC.LOGGER_LOG_GROUP_HEADER="** %@";SC.LOGGER_LOG_GROUP_INDENTATION="    ";SC.LOGGER_RECORDED_LOG_TIMESTAMP_PREFIX="%@:  ";SC.LOGGER_LEVEL_DEBUG="debug";SC.LOGGER_LEVEL_INFO="info";SC.LOGGER_LEVEL_WARN="warn";SC.LOGGER_LEVEL_ERROR="error";SC.LOGGER_LEVEL_NONE="none";SC.Logger=SC.Object.create({messagePrefix:null,outputMessagePrefix:null,recordedMessagePrefix:null,logOutputLevel:null,logRecordingLevel:SC.LOGGER_LEVEL_NONE,recordedLogMessages:null,recordedLogMessagesMaximumLength:500,recordedLogMessagesPruningMinimumLength:100,debugEnabled:NO,exists:function(){return !SC.none(this.get("reporter"))}.property("reporter").cacheable(),fallBackOnAlert:NO,reporter:console,debug:function(a,b){SC.Logger._handleMessage(SC.LOGGER_LEVEL_DEBUG,YES,a,arguments)},debugWithoutFmt:function(){this._handleMessage(SC.LOGGER_LEVEL_DEBUG,NO,null,arguments)},debugGroup:function(a,b){SC.Logger._handleGroup(SC.LOGGER_LEVEL_DEBUG,a,arguments)},debugGroupEnd:function(){SC.Logger._handleGroupEnd(SC.LOGGER_LEVEL_DEBUG)},info:function(a,b){SC.Logger._handleMessage(SC.LOGGER_LEVEL_INFO,YES,a,arguments)},infoWithoutFmt:function(){this._handleMessage(SC.LOGGER_LEVEL_INFO,NO,null,arguments)},infoGroup:function(a,b){SC.Logger._handleGroup(SC.LOGGER_LEVEL_INFO,a,arguments)},infoGroupEnd:function(){SC.Logger._handleGroupEnd(SC.LOGGER_LEVEL_INFO)},warn:function(a,b){SC.Logger._handleMessage(SC.LOGGER_LEVEL_WARN,YES,a,arguments)},warnWithoutFmt:function(){this._handleMessage(SC.LOGGER_LEVEL_WARN,NO,null,arguments)},warnGroup:function(a,b){SC.Logger._handleGroup(SC.LOGGER_LEVEL_WARN,a,arguments)},warnGroupEnd:function(){SC.Logger._handleGroupEnd(SC.LOGGER_LEVEL_WARN)},error:function(a,b){SC.Logger._handleMessage(SC.LOGGER_LEVEL_ERROR,YES,a,arguments)},errorWithoutFmt:function(){this._handleMessage(SC.LOGGER_LEVEL_ERROR,NO,null,arguments)},errorGroup:function(a,b){SC.Logger._handleGroup(SC.LOGGER_LEVEL_ERROR,a,arguments)},errorGroupEnd:function(){SC.Logger._handleGroupEnd(SC.LOGGER_LEVEL_ERROR)},outputRecordedLogMessages:function(n){if(!this.get("exists")){return}var r=this.get("reporter"),k=this.get("recordedLogMessages"),a=0,d=SC.LOGGER_RECORDED_LOG_TIMESTAMP_PREFIX,q,o,b,c,g,h,e,f,u,m,l,p,s;if(k){for(q=0,o=k.length;q<o;++q){b=k[q];c=b.type;if(n){g=d.fmt(b.timestamp.toUTCString())}h=b.message;if(h){e=b.originalArguments;this._outputMessage(c,g,a,h,e)}else{m=b.indentation;u=b.title;l=m-a;if(r.group){if(Math.abs(l)>1){for(p=0,s=(l-1);p<s;++p){if(l>0){r.group()}else{r.groupEnd()}}}if(l>0){f=g?g:"";f+=u;r.group(f)}else{r.groupEnd()}}else{if(l>0){this._outputGroup(c,g,m-1,u)}}a=m}}}},stringifyRecordedLogMessages:function(){var j="",f=this.get("recordedLogMessages"),m=0,h=SC.LOGGER_RECORDED_LOG_TIMESTAMP_PREFIX,d=this._LOG_FALLBACK_PREFIX_MAPPING,c=SC.LOGGER_LOG_GROUP_HEADER,e,a,o,l,r,q,g,p,n,k,b;if(f){for(e=0,a=f.length;e<a;++e){o=f[e];l=o.type;g=h.fmt(o.timestamp.toUTCString());g+=d[l]||"";r=o.message;if(r){q=o.originalArguments;p=g+this._indentation(m);p+=q?this._argumentsToString(q):r}else{k=o.indentation;n=o.title;b=k-m;if(b>0){p=g+this._indentation(m)+c.fmt(n)}m=k}j+=p+"\n"}}return j},log:function(){var a=this.get("reporter"),c=arguments[0],d=this.get("messagePrefix"),e=this.get("outputMessagePrefix"),b=NO;if(c&&SC.typeOf(c)===SC.T_STRING){if(d||e){if(d){c=d+c}if(e){c=e+c}arguments[0]=c}}if(this.get("exists")){if(typeof a.log==="function"){a.log.apply(a,arguments);b=YES}else{if(a.log){a.log(this._argumentsToArray(arguments));b=YES}}}if(!b&&this.get("fallBackOnAlert")){if(this.get("exists")&&(typeof a.alert==="function")){a.alert(arguments);b=YES}else{alert(arguments);b=YES}}return b},group:function(b){var a=this.get("reporter");if(this.get("exists")&&(typeof a.group==="function")){a.group(b)}},groupEnd:function(){var a=this.get("reporter");if(this.get("exists")&&(typeof a.groupEnd==="function")){a.groupEnd()}},dir:function(){var a=this.get("reporter");if(this.get("exists")&&(typeof a.dir==="function")){a.dir.apply(a,arguments)}else{this.log.apply(this,arguments)}},dirxml:function(){var a=this.get("reporter");if(this.get("exists")&&(typeof a.dirxml==="function")){a.dirxml.apply(a,arguments)}else{this.log.apply(this,arguments)}},profile:function(b){var a=this.get("reporter");if(this.get("exists")&&(typeof a.profile==="function")){a.profile(b);return YES}return NO},profileEnd:function(b){var a=this.get("reporter");if(this.get("exists")&&(typeof a.profileEnd==="function")){a.profileEnd(b);return YES}return NO},time:function(b){var a=this.get("reporter");if(this.get("exists")&&(typeof a.time==="function")){a.time(b);return YES}return NO},timeEnd:function(b){var a=this.get("reporter");if(this.get("exists")&&(typeof a.timeEnd==="function")){a.timeEnd(b);return YES}return NO},trace:function(){var a=this.get("reporter");if(this.get("exists")&&(typeof a.trace==="function")){a.trace();return YES}return NO},init:function(){arguments.callee.base.apply(this,arguments);if(!this.get("logOutputLevel")){if(SC.buildMode==="debug"){this.set("logOutputLevel",SC.LOGGER_LEVEL_DEBUG)}else{this.set("logOutputLevel",SC.LOGGER_LEVEL_INFO)}}this.debugEnabledDidChange()},debugEnabledDidChange:function(){if(this.get("debugEnabled")){this.set("logOutputLevel",SC.LOGGER_LEVEL_DEBUG)}}.observes("debugEnabled"),_handleMessage:function(l,n,p,o){var a=this._shouldOutputType(l),d=this._shouldRecordType(l),e,f,j,k,b,m,h,c,g;if(!(a||d)){return}e=(o&&o.length>1);if(n&&(SC.none(p)||(typeof p!=="string"))){n=NO}if(n){if(e){k=[];for(f=1,j=o.length;f<j;++f){k.push(o[f])}p=p.fmt.apply(p,k)}}h=this.get("messagePrefix");if(h){p=h+p}if(a){c=this.get("outputMessagePrefix");k=n?null:o;this._outputMessage(l,null,this._outputIndentationLevel,(c?c+p:p),k)}if(d){g=this.get("recordedMessagePrefix");m={type:l,message:p?(g?g+p:p):YES,timestamp:new Date()};if(!n&&e){m.originalArguments=o}this._addRecordedMessageEntry(m)}},_handleGroup:function(l,n,q){var a=this._shouldOutputType(l),e=this._shouldRecordType(l),f,g,j,k,p,d,c,h,b,m,o;if(!(a||e)){return}f=(q&&q.length>1);if(n&&f){k=[];for(g=1,j=q.length;g<j;++g){k.push(q[g])}n=n.fmt.apply(n,k)}if(a){this._outputGroup(l,null,this._outputIndentationLevel,n);this._outputIndentationLevel++}if(e){m=++this._recordingIndentationLevel;o={type:l,indentation:m,beginGroup:YES,title:n,timestamp:new Date()};this._addRecordedMessageEntry(o)}},_handleGroupEnd:function(d){var g=this._shouldOutputType(d),c=this._shouldRecordType(d),a,f,b,e;if(!(g||c)){return}if(g){this._outputIndentationLevel--;if(this.get("exists")){a=this.get("reporter");f=a.groupEnd;if(f){f.call(a)}}}if(c){b=--this._recordingIndentationLevel;e={type:d,indentation:b,timestamp:new Date()};this._addRecordedMessageEntry(e)}},_shouldOutputType:function(a){var c=this._LOG_LEVEL_MAPPING,d=c[a]||0,b=c[this.get("logOutputLevel")]||0;return(d<=b)},_shouldRecordType:function(a){var c=this._LOG_LEVEL_MAPPING,d=c[a]||0,b=c[this.get("logRecordingLevel")]||0;return(d<=b)},_outputMessage:function(h,g,i,l,k){if(!this.get("exists")){return}var d=this.get("reporter"),b,a,c,e,f,j;a=!d.group;c=d[h];if(c){if(!k){b=g?g:"";if(a){b+=this._indentation(i)}b+=l;d[h](b)}else{f=this._argumentsToArray(k);e="";if(g){e=g}if(a){e+=this._indentation(i)}if(e){f.splice(0,0,e)}if(c.apply){c.apply(d,f)}else{d[h](f)}}}else{if(d.log){e="";if(g){e=g}e+=this._LOG_FALLBACK_PREFIX_MAPPING[h]||"";if(a){e+=this._indentation(i)}if(!k){d.log(e+l)}else{f=this._argumentsToArray(k);if(e){f.splice(0,0,e)}d.log(f)}}}},_outputGroup:function(d,f,c,g){if(!this.get("exists")){return}var b=this.get("reporter"),e=b.group,a;if(e){a=f?f:"";a+=g;e.call(b,a)}else{if(b.log){a="";if(f){a=f}a+=this._LOG_FALLBACK_PREFIX_MAPPING[d]||"";a+=this._indentation(c);a+=SC.LOGGER_LOG_GROUP_HEADER.fmt(g);b.log(a)}}},_addRecordedMessageEntry:function(c){var b=this.get("recordedLogMessages"),a;if(!b){b=[];this.set("recordedLogMessages",b)}b.push(c);a=b.length;if(a>this.get("recordedLogMessagesMaximumLength")){b.splice(0,(a-this.get("recordedLogMessagesPruningMinimumLength")))}b.enumerableContentDidChange()},_argumentsToArray:function(c){var b=[],d,a;if(c){for(d=0,a=c.length;d<a;++d){b[d]=c[d]}}return b},_argumentsToString:function(){var c="",b=SC.LOGGER_LOG_DELIMITER,d,a;for(d=0,a=(arguments.length-1);d<a;++d){c+=arguments[d]+b}c+=arguments[a];return c},_indentation:function(d){if(!d||d<0){d=0}var b="",a=SC.LOGGER_LOG_GROUP_INDENTATION,c;for(c=0;c<d;++c){b+=a}return b},_outputIndentationLevel:0,_recordingIndentationLevel:0,_LOG_LEVEL_MAPPING:{debug:4,info:3,warn:2,error:1,none:0},_LOG_FALLBACK_PREFIX_MAPPING:{debug:SC.LOGGER_LOG_DEBUG,info:SC.LOGGER_LOG_INFO,warn:SC.LOGGER_LOG_WARN,error:SC.LOGGER_LOG_ERROR}});SC.debug=SC.Logger.debug;SC.info=SC.Logger.info;SC.warn=SC.Logger.warn;SC.error=SC.Logger.error;sc_require("ext/function");sc_require("private/observer_set");SC.RunLoop=SC.Object.extend({beginRunLoop:function(){this._start=new Date().getTime();if(SC.LOG_BINDINGS||SC.LOG_OBSERVERS){SC.Logger.log("-- SC.RunLoop.beginRunLoop at %@".fmt(this._start))}this._runLoopInProgress=YES;this._flushinvokeNextQueue();return this},isRunLoopInProgress:function(){return this._runLoopInProgress}.property(),endRunLoop:function(){if(SC.LOG_BINDINGS||SC.LOG_OBSERVERS){SC.Logger.log("-- SC.RunLoop.endRunLoop ~ flushing application queues")}this.flushAllPending();this._start=null;if(SC.LOG_BINDINGS||SC.LOG_OBSERVERS){SC.Logger.log("-- SC.RunLoop.endRunLoop ~ End")}SC.RunLoop.lastRunLoopEnd=Date.now();this._runLoopInProgress=NO;var a=this._invokeNextQueue;if(a&&a.getMembers().length){this._invokeNextTimeout=this.scheduleRunLoop(SC.RunLoop.lastRunLoopEnd)}return this},flushAllPending:function(){var a;do{a=this.flushApplicationQueues();if(!a){a=this._flushinvokeLastQueue()}}while(a)},invokeOnce:function(b,c){if(c===undefined){c=b;b=this}var a;if(typeof c==="string"){c=b[c]}if(!this._invokeQueue){this._invokeQueue=SC.ObserverSet.create()}if(c){this._invokeQueue.add(b,c,undefined,a)}return this},invokeLast:function(b,c){if(c===undefined){c=b;b=this}var a;if(typeof c==="string"){c=b[c]}if(!this._invokeLastQueue){this._invokeLastQueue=SC.ObserverSet.create()}this._invokeLastQueue.add(b,c,undefined,a);return this},invokeNext:function(a,b){if(b===undefined){b=a;a=this}if(typeof b==="string"){b=a[b]}if(!this._invokeNextQueue){this._invokeNextQueue=SC.ObserverSet.create()}this._invokeNextQueue.add(a,b);return this},flushApplicationQueues:function(){var b=NO,a=this._invokeQueue;if(a&&a.getMembers().length){this._invokeQueue=null;b=YES;a.invokeMethods()}return SC.Binding.flushPendingChanges()||b},_flushinvokeLastQueue:function(){var a=this._invokeLastQueue,b=NO;if(a&&a.getMembers().length){this._invokeLastQueue=null;b=YES;if(b){a.invokeMethods()}}return b},_flushinvokeNextQueue:function(){var a=this._invokeNextQueue,b=NO;if(a&&a.getMembers().length){this._invokeNextQueue=null;b=YES;if(b){a.invokeMethods()}}return b},scheduleRunLoop:function(b){if(this._timeoutAt==null||this._timeoutAt>b){if(this._timeout){clearTimeout(this._timeout)}var a=Math.max(0,b-Date.now());this._timeout=setTimeout(this._timeoutDidFire,a);this._timeoutAt=b}return this._timeout},_timeoutDidFire:function(){var a=SC.RunLoop.currentRunLoop;a._timeout=a._timeoutAt=a._invokeNextTimeout=null;SC.run()},unscheduleRunLoop:function(){if(!this._invokeNextTimeout){clearTimeout(this._timeout);this._timeout=this._timeoutAt=null}}});SC.RunLoop.currentRunLoop=null;SC.RunLoop.runLoopClass=SC.RunLoop;SC.RunLoop.begin=function(){var a=this.currentRunLoop;if(!a){a=this.currentRunLoop=this.runLoopClass.create()}a.beginRunLoop();return this};SC.RunLoop.end=function(){var a=this.currentRunLoop;if(!a){throw new Error("SC.RunLoop.end() called outside of a runloop!")}a.endRunLoop();return this};SC.RunLoop.kill=function(){this.currentRunLoop=this.runLoopClass.create();return this};SC.RunLoop.isRunLoopInProgress=function(){if(this.currentRunLoop){return this.currentRunLoop.get("isRunLoopInProgress")}return NO};SC.run=function(g,f,b){var a=SC.RunLoop.isRunLoopInProgress();if(SC.ExceptionHandler&&SC.ExceptionHandler.enabled){try{if(b||!a){SC.RunLoop.begin()}if(g){g.call(f)}if(b||!a){SC.RunLoop.end()}}catch(d){var c=SC.ExceptionHandler.handleException(d);if(!c&&!SC.browser.isIE){throw d}}}else{if(b||!a){SC.RunLoop.begin()}if(g){g.call(f)}if(b||!a){SC.RunLoop.end()}}};SC.RunLoop.wrapFunction=function(b){var a=function(){var c=SC.RunLoop.isRunLoopInProgress();if(!c){SC.RunLoop.begin()}var d=arguments.callee.wrapped.apply(this,arguments);if(!c){SC.RunLoop.end()}return d};a.wrapped=b;return a};SC.DROP_ON=1;SC.DROP_BEFORE=2;SC.DROP_AFTER=4;SC.DROP_ANY=7;SC.ALIGN_LEFT="left";SC.ALIGN_RIGHT="right";SC.ALIGN_CENTER="center";SC.ALIGN_TOP="top";SC.ALIGN_MIDDLE="middle";SC.ALIGN_BOTTOM="bottom";SC.ALIGN_TOP_LEFT="top-left";SC.ALIGN_TOP_RIGHT="top-right";SC.ALIGN_BOTTOM_LEFT="bottom-left";SC.ALIGN_BOTTOM_RIGHT="bottom-right";SC.ALIGN_DEFAULT="default";SC.POSITION_RIGHT=0;SC.POSITION_LEFT=1;SC.POSITION_TOP=2;SC.POSITION_BOTTOM=3;SC.mixin({data:$.data,removeData:$.removeData,STRINGS:{},stringsFor:function(b,a){SC.mixin(SC.STRINGS,a);return this}});SC.mixin(SC.browser,{_cachedNames:null,_testEl:null,_testSupportFor:function(e,b,d){var c=e[b]!=null,a;if(d!=null){a=e[b];e[b]=d;c=e[b]===d;e[b]=a}return c},compare:function(c,a){var f,g,e;if(typeof c==="number"||typeof a==="number"){c=String(c);a=String(a)}f=function(h){return Number(h.match(/^[0-9]+/))};g=SC.A(c.split(".")).map(f);e=SC.A(a.split(".")).map(f);for(var d=0;d<e.length;d++){var b=g[d]-e[d];if(isNaN(b)){return 0}if(b!==0){return b}}return 0},compareVersion:function(){if(this._versionSplit===undefined){var d=function(e){return Number(e.match(/^[0-9]+/))};this._versionSplit=SC.A(this.version.split(".")).map(d)}var c=SC.A(arguments).map(Number);for(var b=0;b<c.length;b++){var a=this._versionSplit[b]-c[b];if(isNaN(a)){return 0}if(a!==0){return a}}return 0},experimentalNameFor:function(f,c,e){var d=this._cachedNames,b=SC.guidFor(f);if(!d){d=this._cachedNames={};d[b]={}}else{if(!d[b]){d[b]={}}else{if(d[b][c]){return d[b][c]}}}var a=c;if(!this._testSupportFor(f,a,e)){a=SC.browser.classPrefix+c.capitalize();if(!this._testSupportFor(f,a,e)){if(SC.browser.domPrefix===SC.browser.classPrefix){SC.warn("SC.browser.experimentalNameFor(): target, %@, does not have property `%@` or `%@`.".fmt(f,c,a));a=SC.UNSUPPORTED}else{a=SC.browser.domPrefix+c.capitalize();if(!this._testSupportFor(f,a,e)){SC.warn("SC.browser.experimentalNameFor(): target, %@, does not have property `%@`, '%@' or `%@`.".fmt(f,c,SC.browser.classPrefix+c.capitalize(),a));a=SC.UNSUPPORTED}}}}d[b][c]=a;return a},experimentalStyleNameFor:function(b,c){var a=this._testEl;if(!a){a=this._testEl=document.createElement("div")}return this.experimentalNameFor(a.style,b,c)},experimentalCSSNameFor:function(a,e){var b=a,d=a.camelize(),c=this.experimentalStyleNameFor(d,e);if(c===SC.UNSUPPORTED){b=SC.UNSUPPORTED}else{if(c!==d){b=SC.browser.cssPrefix+a}}return b}});SC.Builder=function(a){return SC.Builder.create(a)};SC.Builder.create=function create(c){var b=SC.mixin(SC.beget(this.fn),c||{});if(c.hasOwnProperty("toString")){b.toString=c.toString}var a=function(){var d=SC.beget(b);d.defaultClass=this;d.constructor=a;return d.init.apply(d,arguments)};a.fn=a.prototype=b;a.extend=SC.Builder.create;a.mixin=SC.Builder.mixin;return a};SC.Builder.mixin=function(){var b=arguments.length,a;for(a=0;a<b;a++){SC.mixin(this,arguments[a])}return this};SC.Builder.fn={init:function(a){if(a!==undefined){if(SC.typeOf(a)===SC.T_ARRAY){var b=a.length;while(--b>=0){this[b]=a.objectAt?a.objectAt(b):a[b]}this.length=a.length}else{this[0]=a;this.length=1}}return this},size:function(){return this.length},pushStack:function(){var a=this.constructor.apply(this,arguments);a.prevObject=this;return a},end:function(){return this.prevObject||this.constructor()},toString:function(){return"%@$(%@)".fmt(this.defaultClass.toString(),SC.A(this).invoke("toString").join(","))},mixin:SC.Builder.mixin};(function(){var a=SC.Enumerable,c=SC.Builder.fn,b,d;for(b in a){if(!a.hasOwnProperty(b)){continue}d=Array.prototype[b]||a[b];c[b]=d}})();sc_require("system/builder");SC.$=SC.CoreQuery=jQuery;SC.mixin(SC.$.fn,{isCoreQuery:YES,toString:function(){var c=[],b=this.length,a=0;for(a=0;a<b;a++){c[a]="%@: %@".fmt(a,this[a]?this[a].toString():"(null)")}return"<$:%@>(%@)".fmt(SC.guidFor(this),c.join(" , "))},isVisible:function(){return Array.prototype.every.call(this,function(a){return SC.$.isVisible(a)})},view:function(){return this.map(function(){var a=null,c=this,b;while(!a&&c&&(c!==document)){if(c.nodeType===1&&(b=c.getAttribute("id"))){a=SC.View.views[b]}c=c.parentNode}c=null;return a})},within:function(a){if(this.filter(a).length){return true}return !!this.has(a).length}});(function(){var c={},f={find:function(h,g){return(g!==undefined)?SC.Enumerable.find.call(this,h,g):c.find.call(this,h)},filter:function(h,g){return(g!==undefined)?this.pushStack(SC.Enumerable.filter.call(this,h,g)):c.filter.call(this,h)},filterProperty:function(g,h){return this.pushStack(SC.Enumerable.filterProperty.call(this,g,h))},indexOf:SC.$.index,map:function(h,g){return(g!==undefined)?SC.Enumerable.map.call(this,h,g):c.map.call(this,h)}};var d=SC.$.fn,a=SC.Enumerable,e;for(var b in a){if(a.hasOwnProperty(b)){e=a[b];if(b in f){c[b]=d[b];e=f[b]}d[b]=e}}})();SC.mixin(SC.$,{isVisible:function(a){var b=SC.$;return("hidden"!=a.type)&&(b.css(a,"display")!="none")&&(b.css(a,"visibility")!="hidden")}});sc_require("system/core_query");SC.Event=function(d){var c,b;if(d){this.originalEvent=d;var g=SC.Event._props,f;b=g.length;c=b;while(--c>=0){f=g[c];this[f]=d[f]}}this.timeStamp=this.timeStamp||Date.now();if(!this.target){this.target=this.srcElement||document}if(this.target.nodeType===3){this.target=this.target.parentNode}if(!this.relatedTarget&&this.fromElement){this.relatedTarget=(this.fromElement===this.target)?this.toElement:this.fromElement}if(SC.none(this.pageX)&&!SC.none(this.clientX)){var h=document.documentElement,a=document.body;this.pageX=this.clientX+(h&&h.scrollLeft||a&&a.scrollLeft||0)-(h.clientLeft||0);this.pageY=this.clientY+(h&&h.scrollTop||a&&a.scrollTop||0)-(h.clientTop||0)}if(!this.which&&((this.charCode||d.charCode===0)?this.charCode:this.keyCode)){this.which=this.charCode||this.keyCode}if(!this.metaKey&&this.ctrlKey){this.metaKey=this.ctrlKey}if(!this.which&&this.button){this.which=((this.button&1)?1:((this.button&2)?3:((this.button&4)?2:0)))}if(this.type==="mousewheel"||this.type==="DOMMouseScroll"||this.type==="MozMousePixelScroll"){var e=SC.Event.MOUSE_WHEEL_MULTIPLIER;if(SC.browser.isWebkit&&d.wheelDelta!==undefined){this.wheelDelta=0-(d.wheelDeltaY||d.wheelDeltaX);this.wheelDeltaY=0-(d.wheelDeltaY||0);this.wheelDeltaX=0-(d.wheelDeltaX||0)}else{if(!SC.none(d.detail)&&SC.browser.isMozilla){if(d.axis&&(d.axis===d.HORIZONTAL_AXIS)){this.wheelDeltaX=d.detail;this.wheelDeltaY=this.wheelDelta=0}else{this.wheelDeltaY=this.wheelDelta=d.detail;this.wheelDeltaX=0}}else{this.wheelDelta=this.wheelDeltaY=SC.browser.isIE||SC.browser.isOpera?0-d.wheelDelta:d.wheelDelta;this.wheelDeltaX=0}}this.wheelDelta*=e;this.wheelDeltaX*=e;this.wheelDeltaY*=e}return this};SC.mixin(SC.Event,{MOUSE_WHEEL_MULTIPLIER:function(){var b=1,a=SC.browser.engineVersion;if(SC.browser.name===SC.BROWSER.safari){b=0.4;if(SC.browser.compare(a,"533.17")>0&&SC.browser.compare(a,"534")<0){b=0.004}else{if(SC.browser.compare(a,"533")<0){b=40}}}else{if(SC.browser.name===SC.BROWSER.ie){b=0.3}else{if(SC.browser.name===SC.BROWSER.chrome){b=0.4}}}return b}(),MOUSE_WHEEL_DELTA_LIMIT:1000,_MOUSE_WHEEL_LIMIT_INVALIDATED:NO,create:function(a){return new SC.Event(a)},add:function(f,e,g,h,d,a){if(f&&f.isCoreQuery){if(f.length>0){f.forEach(function(i){this.add(i,e,g,h,d)},this);return this}else{f=f[0]}}if(!f){return this}if(!a){a=NO}if(f.nodeType===3||f.nodeType===8){return SC.Event}if(SC.browser.name===SC.BROWSER.ie&&f.setInterval){f=window}if(SC.typeOf(g)===SC.T_FUNCTION){d=h;h=g;g=null}else{if(g&&SC.typeOf(h)===SC.T_STRING){h=g[h]}}var c=SC.data(f,"sc_events")||SC.data(f,"sc_events",{}),b=c[e];if(!b){b=c[e]={};this._addEventListener(f,e,a)}b[SC.hashFor(g,h)]=[g,h,d];SC.Event._global[e]=YES;f=c=b=null;return this},remove:function(c,b,f,a){if(c&&c.isCoreQuery){if(c.length>0){c.forEach(function(j){this.remove(j,b,f,a)},this);return this}else{c=c[0]}}if(!c){return this}if(c.nodeType===3||c.nodeType===8){return SC.Event}var d,g,i=SC.data(c,"sc_events");if(!i){return this}if(b===undefined){for(var h in i){this.remove(c,h)}}else{if((d=i[b])){var e=NO;if(f||a){if(SC.typeOf(f)===SC.T_FUNCTION){a=f;f=null}else{if(SC.typeOf(a)===SC.T_STRING){a=f[a]}}delete d[SC.hashFor(f,a)];g=null;for(g in d){break}if(g===null){e=YES}}else{e=YES}if(e){delete i[b];this._removeEventListener(c,b)}g=null;for(g in i){break}if(!g){SC.removeData(c,"sc_events");delete this._elements[SC.guidFor(c)];SC.removeData(c,"listener")}}}c=i=d=null;return this},NO_BUBBLE:["blur","focus","change"],simulateEvent:function(d,c,b){var a=SC.Event.create({type:c,target:d,preventDefault:function(){this.cancelled=YES},stopPropagation:function(){this.bubbles=NO},allowDefault:function(){this.hasCustomEventHandling=YES},timeStamp:Date.now(),bubbles:(this.NO_BUBBLE.indexOf(c)<0),cancelled:NO,normalized:YES});if(b){SC.mixin(a,b)}return a},trigger:function(c,b,i,j){if(c&&c.isCoreQuery){if(c.length>0){c.forEach(function(m){this.trigger(m,b,i,j)},this);return this}else{c=c[0]}}if(!c){return this}if(c.nodeType===3||c.nodeType===8){return undefined}i=SC.A(i);var h,k=SC.typeOf(c[b]||null)===SC.T_FUNCTION,a,g,d,l;a=i[0];if(!a||!a.preventDefault){a=this.simulateEvent(c,b);i.unshift(a)}a.type=b;g=c;do{h=SC.Event.handle.apply(g,i);g=(g===document)?null:(g.parentNode||document)}while(!h&&a.bubbles&&g);g=null;d=c["on"+b];l=SC.$.nodeName(c,"a")&&b==="click";if((!k||l)&&d&&d.apply(c,i)===NO){h=NO}if(k&&j!==NO&&h!==NO&&!l){this.triggered=YES;try{c[b]()}catch(f){}}this.triggered=NO;return h},handle:function(b){if((typeof SC==="undefined")||SC.Event.triggered){return YES}var c,f,d,g,h,i,a,e;g=SC.A(arguments);g[0]=b=SC.Event.normalizeEvent(b||window.event);d=(SC.data(this,"sc_events")||{})[b.type];if(!d){return NO}for(h in d){i=d[h];a=i[1];b.handler=a;b.data=b.context=i[2];e=i[0]||this;f=a.apply(e,g);if(c!==NO){c=f}if(f===NO){b.preventDefault();b.stopPropagation()}}return c},unload:function(){var a,b=this._elements;for(a in b){this.remove(b[a])}for(a in b){delete b[a]}delete this._elements},special:{ready:{setup:function(){SC._bindReady();return},teardown:function(){return}},mouseenter:{setup:function(){if(SC.browser.name===SC.BROWSER.ie){return NO}SC.Event.add(this,"mouseover",SC.Event.special.mouseenter.handler);return YES},teardown:function(){if(SC.browser.name===SC.BROWSER.ie){return NO}SC.Event.remove(this,"mouseover",SC.Event.special.mouseenter.handler);return YES},handler:function(a){if(SC.Event._withinElement(a,this)){return YES}a.type="mouseenter";return SC.Event.handle.apply(this,arguments)}},mouseleave:{setup:function(){if(SC.browser.name===SC.BROWSER.ie){return NO}SC.Event.add(this,"mouseout",SC.Event.special.mouseleave.handler);return YES},teardown:function(){if(SC.browser.name===SC.BROWSER.ie){return NO}SC.Event.remove(this,"mouseout",SC.Event.special.mouseleave.handler);return YES},handler:function(a){if(SC.Event._withinElement(a,this)){return YES}a.type="mouseleave";return SC.Event.handle.apply(this,arguments)}}},KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_SPACE:32,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,_withinElement:function(d,c){var b=d.relatedTarget;while(b&&b!==c){try{b=b.parentNode}catch(a){b=c}}return b===c},_addEventListener:function(e,d,a){var f,c=this.special[d];if(!a){a=NO}if(!c||c.setup.call(e)===NO){var b=SC.guidFor(e);this._elements[b]=e;f=SC.data(e,"listener")||SC.data(e,"listener",function(){return SC.Event.handle.apply(SC.Event._elements[b],arguments)});if(e.addEventListener){e.addEventListener(d,f,a)}else{if(e.attachEvent){e.attachEvent("on"+d,f)}}}e=c=f=null},_removeEventListener:function(c,b){var d,a=SC.Event.special[b];if(!a||(a.teardown.call(c)===NO)){d=SC.data(c,"listener");if(d){if(c.removeEventListener){c.removeEventListener(b,d,NO)}else{if(c.detachEvent){c.detachEvent("on"+b,d)}}}}c=a=d=null},_elements:{},normalizeEvent:function(a){if(a===window.event){return SC.Event.create(a)}else{return a.normalized?a:SC.Event.create(a)}},_global:{},_props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target timeStamp toElement type view which touches targetTouches changedTouches animationName elapsedTime dataTransfer".split(" ")});SC.Event.prototype={hasCustomEventHandling:NO,touchesForView:function(a){if(this.touchContext){return this.touchContext.touchesForView(a)}},touchesForResponder:function(a){if(this.touchContext){return this.touchContext.touchesForView(a)}},averagedTouchesForView:function(a){if(this.touchContext){return this.touchContext.averagedTouchesForView(a)}return null},allowDefault:function(){this.hasCustomEventHandling=YES;return this},preventDefault:function(){var a=this.originalEvent;if(a){if(a.preventDefault){a.preventDefault()}else{a.returnValue=NO}}this.hasCustomEventHandling=YES;return this},stopPropagation:function(){var a=this.originalEvent;if(a){if(a.stopPropagation){a.stopPropagation()}a.cancelBubble=YES}this.hasCustomEventHandling=YES;return this},stop:function(){return this.preventDefault().stopPropagation()},normalized:YES,getCharString:function(){if(SC.browser.name===SC.BROWSER.ie&&SC.browser.compare(SC.browser.version,"9.0")<0){if(this.keyCode===8||this.keyCode===9||(this.keyCode>=37&&this.keyCode<=40)){return String.fromCharCode(0)}else{return(this.keyCode>0)?String.fromCharCode(this.keyCode):null}}else{return(this.charCode>0)?String.fromCharCode(this.charCode):null}},commandCodes:function(){var b=this.charCode,f=this.keyCode,a=null,e=null,d;if(f&&f!==b){e=SC.FUNCTION_KEYS[f]}if(e){d=e}else{d=SC.PRINTABLE_KEYS[f]}if(d){var c="";if(this.ctrlKey||this.metaKey){c+="ctrl_"}if(this.altKey){c+="alt_"}if(this.shiftKey){c+="shift_"}e=c+d}a=this.getCharString();return[e,a]}};SC.Event.observe=SC.Event.add;SC.Event.stopObserving=SC.Event.remove;SC.Event.fire=SC.Event.trigger;if(SC.browser.name===SC.BROWSER.ie){SC.Event.add(window,"unload",SC.Event.prototype,SC.Event.unload)}SC.MODIFIER_KEYS={16:"shift",17:"ctrl",18:"alt"};SC.FUNCTION_KEYS={8:"backspace",9:"tab",13:"return",19:"pause",27:"escape",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",44:"printscreen",45:"insert",46:"delete",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scrolllock"};SC.PRINTABLE_KEYS={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",188:",",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:'"'};SC.SYSTEM_CURSOR=SC.DEFAULT_CURSOR="default";SC.AUTO_CURSOR="auto";SC.CROSSHAIR_CURSOR="crosshair";SC.HAND_CURSOR=SC.POINTER_CURSOR="pointer";SC.MOVE_CURSOR="move";SC.E_RESIZE_CURSOR="e-resize";SC.NE_RESIZE_CURSOR="ne-resize";SC.NW_RESIZE_CURSOR="nw-resize";SC.N_RESIZE_CURSOR="n-resize";SC.SE_RESIZE_CURSOR="se-resize";SC.SW_RESIZE_CURSOR="sw-resize";SC.S_RESIZE_CURSOR="s-resize";SC.W_RESIZE_CURSOR="w-resize";SC.IBEAM_CURSOR=SC.TEXT_CURSOR="text";SC.WAIT_CURSOR="wait";SC.HELP_CURSOR="help";SC.Cursor=SC.Object.extend({init:function(){arguments.callee.base.apply(this,arguments);var a=this.get("cursorStyle")||SC.DEFAULT_CURSOR,c=this.constructor.sharedStyleSheet(),b=SC.guidFor(this);if(c.insertRule){c.insertRule("."+b+" {cursor: "+a+";}",c.cssRules?c.cssRules.length:0)}else{if(c.addRule){c.addRule("."+b,"cursor: "+a)}}this.cursorStyle=a;this.className=b;return this},className:null,cursorStyle:SC.DEFAULT_CURSOR,cursorStyleDidChange:function(){var d,f,c,e,g,b,a;d=this.get("cursorStyle")||SC.DEFAULT_CURSOR;f=this._rule;if(f){f.style.cursor=d;return}c="."+this.get("className");e=this.constructor.sharedStyleSheet();g=(e.cssRules?e.cssRules:e.rules)||[];for(b=0,a=g.length;b<a;++b){f=g[b];if(f.selectorText===c){this._rule=f;f.style.cursor=d;break}}}.observes("cursorStyle")});SC.Cursor.sharedStyleSheet=function(){var d,c,b=this._styleSheet;if(!b){d=document.createElement("style");c=document.getElementsByTagName("head")[0];if(!c){c=document.documentElement}c.appendChild(d);for(var a=document.styleSheets.length-1;a>=0;a--){b=document.styleSheets[a];if(b.ownerNode===d){this._styleSheet=b;break}}}return b};SC.Responder=SC.Object.extend({isResponder:YES,pane:null,responderContext:null,nextResponder:null,isFirstResponder:NO,hasFirstResponder:NO,acceptsFirstResponder:YES,becomingFirstResponder:NO,becomeFirstResponder:function(){var a=this.get("pane")||this.get("responderContext")||this.pane();if(a&&this.get("acceptsFirstResponder")){if(a.get("firstResponder")!==this){a.makeFirstResponder(this)}}return this},resignFirstResponder:function(a){var b=this.get("pane")||this.get("responderContext");if(b&&(b.get("firstResponder")===this)){b.makeFirstResponder(null,a)}return YES},willLoseFirstResponder:function(a){},didBecomeFirstResponder:function(a){},destroy:function(){this.resignFirstResponder();arguments.callee.base.apply(this,arguments)}});SC.Theme={isTheme:YES,classNames:[],_extend_class_names:function(c){if(c){if(SC.typeOf(c)===SC.T_HASH&&!c.isSet){for(var b in c){var a=this.classNames.indexOf(b);if(c[b]&&a<0){this.classNames.push(b)}else{if(a>=0){this.classNames.removeAt(a)}}}}else{if(typeof c==="string"){c=c.split(" ")}c.forEach(function(d){if(!this.classNames.contains(d)){this.classNames.push(d)}},this)}}},_extend_self:function(b){if(b.classNames){this._extend_class_names(b.classNames)}var a,c,d;for(a in b){if(a==="classNames"){continue}if(!b.hasOwnProperty(a)){continue}c=b[a];if(c instanceof Function&&!c.base&&(c!==(d=this[a]))){c.base=d}this[a]=c}},create:function(){var c=SC.beget(this);c.baseTheme=this;if(this.themes===SC.Theme.themes){c.themes={}}else{c.themes=SC.beget(this.themes)}c._privateThemes={};c._specializedThemes={};c.classNames=SC.clone(this.classNames);var e=arguments,b=e.length,a,d;for(a=0;a<b;a++){c._extend_self(e[a])}if(c.name&&!c.classNames.contains(c.name)){c.classNames.push(c.name)}return c},subtheme:function(a){var b=this.create({name:a});this.addTheme(b);return b},invisibleSubtheme:function(a){var b=this.create({name:a});this._privateThemes[a]=b;return b},themes:{},find:function(a){if(this===SC.Theme){return this.themes[a]}var b;b=this._privateThemes[a];if(b){return b}b=this._specializedThemes[a];if(b){return b}b=this.themes[a];if(b&&!this._specializedThemes[a]){return(this._specializedThemes[a]=b.create({classNames:this.classNames}))}b=SC.Theme.themes[a];if(b){return b}return null},addTheme:function(a){this.themes[a.name]=a}};SC.BaseTheme=SC.Theme.create({name:""});SC.Theme.themes["sc-base"]=SC.BaseTheme;SC.defaultTheme="sc-base";SC.Locale=SC.Object.extend({init:function(){if(!this.language){SC.Locale._assignLocales()}if(!this.hasStrings){var c=this._deprecatedLanguageCodes||[];c.push(this.language);var b=c.length;var a=null;while(!a&&--b>=0){a=String[c[b]]}if(a){this.hasStrings=YES;this.strings=a}}},hasStrings:NO,strings:{},metrics:{},toString:function(){if(!this.language){SC.Locale._assignLocales()}return"SC.Locale["+this.language+"]"+SC.guidFor(this)},ordinalForNumber:function(a){var c=SC.Locale._numberOrdinalFunctions.en,b=SC.Locale._numberOrdinalFunctions[this.language]||c;return b(a)},locWithDefault:function(b,c){var a=this.strings[b];if(SC.typeOf(a)===SC.T_STRING){return a}else{if(SC.typeOf(c)===SC.T_STRING){return c}}return b},locMetric:function(b){var a=this.metrics[b];if(SC.typeOf(a)===SC.T_NUMBER){return a}else{if(a===undefined){SC.warn('No localized metric found for key "'+b+'"');return undefined}else{SC.warn('Unexpected metric type for key "'+b+'"');return undefined}}},locLayout:function(c,b){var e,g,f,m,l,a=SC.Locale.layoutKeys,k=this.metrics,j=SC.typeOf,d=SC.T_NUMBER,h={};if(b){SC.mixin(h,b)}for(e=0,g=a.length;e<g;++e){f=a[e];m=c+"."+f;l=k[m];if(j(l)===d){if(b&&b[f]){throw new Error("locLayout():  There is a localized value for the key '"+m+"' but a value for '"+f+"' was also specified in the non-localized hash")}h[f]=l}}return h}});SC.Locale.mixin({useAutodetectedLanguage:NO,preferredLanguage:null,layoutKeys:["left","top","right","bottom","width","height","minWidth","minHeight","centerX","centerY"],createCurrentLocale:function(){var c=(String.useAutodetectedLanguage!==undefined)?String.useAutodetectedLanguage:this.useAutodetectedLanguage;var b=(String.preferredLanguage!==undefined)?String.preferredLanguage:this.preferredLanguage;var d=((c)?SC.browser.language:null)||b||SC.browser.language||"en";d=SC.Locale.normalizeLanguage(d);var a=this.localeClassFor(d);if(d!=this.currentLanguage){this.currentLanguage=d;this.currentLocale=a.create()}return this.currentLocale},localeClassFor:function(c){c=SC.Locale.normalizeLanguage(c);var b,a=this.locales[c];if(!a&&((b=c.split("-")[0])!==c)&&(a=this.locales[b])){a=this.locales[c]=a.extend()}if(!a){a=this.locales[c]=this.locales.en.extend()}return a},define:function(b,c){var a;if(c===undefined&&(SC.typeOf(b)!==SC.T_STRING)){a=this;c=b}else{a=SC.Locale.localeClassFor(b)}SC.mixin(a.prototype,c);return a},options:function(){return this.prototype},addStrings:function(b){var a=this.prototype.strings;if(a){if(!this.prototype.hasOwnProperty("strings")){a=this.prototype.strings=SC.clone(a)}}else{a=this.prototype.strings={}}if(b){this.prototype.strings=SC.mixin(a,b)}this.prototype.hasStrings=YES;return this},addMetrics:function(b){var a=this.prototype.metrics;if(a){if(!this.prototype.hasOwnProperty(a)){a=this.prototype.metrics=SC.clone(a)}}else{a=this.prototype.metrics={}}if(b){this.prototype.metrics=SC.mixin(a,b)}return this},_map:{english:"en",french:"fr",german:"de",japanese:"ja",jp:"ja",spanish:"es"},normalizeLanguage:function(a){if(!a){return"en"}return SC.Locale._map[a.toLowerCase()]||a},_assignLocales:function(){for(var a in this.locales){this.locales[a].prototype.language=a}},toString:function(){if(!this.prototype.language){SC.Locale._assignLocales()}return"SC.Locale["+this.prototype.language+"]"},extend:function(){var a=SC.Object.extend.apply(this,arguments);a.addStrings=SC.Locale.addStrings;a.define=SC.Locale.define;a.options=SC.Locale.options;a.toString=SC.Locale.toString;return a},_numberOrdinalFunctions:{en:function(a){var b=a%10;return(~~(a%100/10)===1)?"th":(b===1)?"st":(b===2)?"nd":(b===3)?"rd":"th"}}});SC.Locale.locales={en:SC.Locale.extend({_deprecatedLanguageCodes:["English"]}),fr:SC.Locale.extend({_deprecatedLanguageCodes:["French"]}),de:SC.Locale.extend({_deprecatedLanguageCodes:["German"]}),ja:SC.Locale.extend({_deprecatedLanguageCodes:["Japanese","jp"]}),es:SC.Locale.extend({_deprecatedLanguageCodes:["Spanish"]})};SC.stringsFor=function(c,b){var a=SC.Locale.localeClassFor(c);a.addStrings(b);return this};SC.metricsFor=function(c,b){var a=SC.Locale.localeClassFor(c);a.addMetrics(b);return this};sc_require("system/locale");SC.STRING_TITLEIZE_REGEXP=(/([\s|\-|\_|\n])([^\s|\-|\_|\n]?)/g);SC.STRING_DECAMELIZE_REGEXP=(/([a-z])([A-Z])/g);SC.STRING_DASHERIZE_REGEXP=(/[ _]/g);SC.STRING_DASHERIZE_CACHE={};SC.STRING_TRIM_LEFT_REGEXP=(/^\s+/g);SC.STRING_TRIM_RIGHT_REGEXP=(/\s+$/g);SC.STRING_CSS_ESCAPED_REGEXP=(/(:|\.|\[|\])/g);SC.mixin(SC.String,{capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},camelize:function(d){var b=d.replace(SC.STRING_TITLEIZE_REGEXP,function(f,g,e){return e?e.toUpperCase():""});var c=b.charAt(0),a=c.toLowerCase();return c!==a?a+b.slice(1):b},decamelize:function(a){return a.replace(SC.STRING_DECAMELIZE_REGEXP,"$1_$2").toLowerCase()},dasherize:function(c){var a=SC.STRING_DASHERIZE_CACHE,b=a[c];if(b){return b}else{b=SC.String.decamelize(c).replace(SC.STRING_DASHERIZE_REGEXP,"-");a[c]=b}return b},escapeCssIdForSelector:function(a){return a.replace(SC.STRING_CSS_ESCAPED_REGEXP,"\\$1")},loc:function(d){if(!SC.Locale.currentLocale){SC.Locale.createCurrentLocale()}var b=SC.Locale.currentLocale.locWithDefault(d);if(SC.typeOf(b)!==SC.T_STRING){b=d}var a=SC.$A(arguments);a.shift();if(a.length>0&&a[0]&&a[0].isSCArray){a=a[0]}try{return SC.String.fmt(b,a)}catch(c){SC.error("Error processing string with key: "+d);SC.error("Localized String: "+b);SC.error("Error: "+c)}},locMetric:function(b){var a=SC.Locale,c=a.currentLocale;if(!c){a.createCurrentLocale();c=a.currentLocale}return c.locMetric(b)},locLayout:function(b,c){var a=SC.Locale,d=a.currentLocale;if(!d){a.createCurrentLocale();d=a.currentLocale}return d.locLayout(b,c)},locWithDefault:function(d,c){if(!SC.Locale.currentLocale){SC.Locale.createCurrentLocale()}var b=SC.Locale.currentLocale.locWithDefault(d,c);if(SC.typeOf(b)!==SC.T_STRING){b=d}var a=SC.$A(arguments);a.shift();a.shift();return SC.String.fmt(b,a)},trim:jQuery.trim,trimLeft:function(a){return a.replace(SC.STRING_TRIM_LEFT_REGEXP,"")},trimRight:function(a){return a.replace(SC.STRING_TRIM_RIGHT_REGEXP,"")},mult:function(d,c){if(SC.typeOf(c)!==SC.T_NUMBER||c<1){return null}var a="";for(var b=0;b<c;b+=1){a+=d}return a}});if(String.prototype.trim){SC.supplement(String.prototype,{trim:function(){return SC.String.trim(this,arguments)},trimLeft:function(){return SC.String.trimLeft(this,arguments)},trimRight:function(){return SC.String.trimRight(this,arguments)}})}SC.mixin(String.prototype,{loc:function(){return SC.String.loc(this.toString(),SC.$A(arguments))},locMetric:function(){return SC.String.locMetric(this.toString())},locLayout:function(a){return SC.String.locLayout(this.toString(),a)}});SC.DelegateSupport={delegateFor:function(c){var b=1,a=arguments.length,d;while(b<a){d=arguments[b];if(d&&d[c]!==undefined){return d}b++}return(this[c]!==undefined)?this:null},invokeDelegateMethod:function(c,a,b){b=SC.A(arguments);b=b.slice(2,b.length);if(!c||!c[a]){c=this}var d=c[a];return d?d.apply(c,b):null},getDelegateProperty:function(d,e){var b=1,a=arguments.length,c;while(b<a){c=arguments[b++];if(c&&c[d]!=undefined){return c.get?c.get(d):c[d]}}return(this[d]!=undefined)?this.get(d):undefined}};sc_require("mixins/delegate_support");SC.CoreView=SC.Responder.extend(SC.DelegateSupport);sc_require("views/view/base");SC.CoreView.mixin({IS_RENDERED:256,IS_ATTACHED:128,IS_SHOWN:64,IS_HIDDEN:32,UNRENDERED:512,UNATTACHED:768,UNATTACHED_BY_PARENT:769,ATTACHED_SHOWN:960,ATTACHED_SHOWN_ANIMATING:963,ATTACHED_HIDDEN:928,ATTACHED_HIDDEN_BY_PARENT:929,ATTACHED_BUILDING_IN:961,ATTACHED_BUILDING_OUT:897,ATTACHED_BUILDING_OUT_BY_PARENT:898,ATTACHED_SHOWING:962,ATTACHED_HIDING:930});SC.CoreView.reopen({_buildingOutCount:null,_owningView:null,_preTransitionLayout:null,_preTransitionFrame:null,_transitionLayoutCache:null,viewState:SC.CoreView.UNRENDERED,isAttached:function(){var a=this.get("viewState");return a&SC.CoreView.IS_ATTACHED}.property("viewState").cacheable(),_isRendered:function(){return this.get("viewState")!==SC.CoreView.UNRENDERED}.property("viewState").cacheable(),isVisibleInWindow:function(){var a=this.get("viewState");return a&SC.CoreView.IS_ATTACHED&&a!==SC.CoreView.ATTACHED_HIDDEN&&a!==SC.CoreView.ATTACHED_HIDDEN_BY_PARENT}.property("viewState").cacheable(),_doAdopt:function(k,b){var d=this.get("parentView"),f=true;if(d&&d!==k){this._doOrphan();d=false}if(!d||this.get("childViews").indexOf(this)<0){var j,g=k.get("childViews"),a=k.get("viewState"),e,c,i,h;if(k.willAddChild){k.willAddChild(this,b)}if(this.willAddToParent){this.willAddToParent(k,b)}this.set("parentView",k);if(g.needsClone){k.set(g=[])}j=(b)?g.indexOf(b):g.length;if(j<0){j=g.length}g.insertAt(j,this);this.updateDesignMode(this.get("designMode"),k.get("designMode"));this._adopted();switch(this.get("viewState")){case SC.CoreView.UNRENDERED:switch(a){case SC.CoreView.UNRENDERED:break;default:this._doRender()}break;case SC.CoreView.UNATTACHED:switch(a){case SC.CoreView.UNRENDERED:this._doDestroyLayer();break;default:e=k.get("containerLayer");h=k.get("childViews");i=h.objectAt(h.indexOf(this)+1);c=(i)?i.get("layer"):null;this._doAttach(e,c)}break;default:switch(a){case SC.CoreView.UNRENDERED:this._doDestroyLayer();break;default:e=k.get("containerLayer");h=k.get("childViews");i=h.objectAt(h.indexOf(this)+1);c=(i)?i.get("layer"):null;this._doAttach(e,c)}}if(this.didAddToParent){this.didAddToParent(k,b)}if(k.didAddChild){k.didAddChild(this,b)}}else{f=false}return f},_doAttach:function(b,a){var g=this.get("viewState"),d=this.get("transitionIn"),f,c=false;switch(g){case SC.CoreView.UNATTACHED:var e=this.get("layer");this._executeQueuedUpdates();b.insertBefore(e,a||null);f=this.get("parentView");if(!f||(f&&f.get("isAttached"))){this._routeOnAttached();this._callOnChildViews("_parentDidAppendToDocument");this._notifyDidAttach()}else{this._gotoUnattachedByParentState()}c=true;break;case SC.CoreView.ATTACHED_BUILDING_OUT:this._callOnChildViews("_parentDidCancelBuildOut");this._buildingOutCount=null;if(this.get("transitionOut")){if(d){this._transitionIn();this._gotoAttachedBuildingInState()}else{this._gotoAttachedShownState();this._cancelTransition()}}else{this._gotoAttachedShownState()}c=true;break;case SC.CoreView.ATTACHED_HIDING:case SC.CoreView.ATTACHED_HIDDEN:case SC.CoreView.ATTACHED_HIDDEN_BY_PARENT:case SC.CoreView.ATTACHED_BUILDING_IN:case SC.CoreView.ATTACHED_BUILDING_OUT_BY_PARENT:case SC.CoreView.ATTACHED_SHOWING:case SC.CoreView.UNRENDERED:break;case SC.CoreView.ATTACHED_SHOWN:case SC.CoreView.ATTACHED_SHOWN_ANIMATING:break;case SC.CoreView.UNATTACHED_BY_PARENT:break}return c},_doDestroyLayer:function(){var b=this.get("viewState"),a=false;switch(b){case SC.CoreView.UNRENDERED:case SC.CoreView.ATTACHED_HIDING:case SC.CoreView.ATTACHED_HIDDEN:case SC.CoreView.ATTACHED_HIDDEN_BY_PARENT:case SC.CoreView.ATTACHED_BUILDING_IN:case SC.CoreView.ATTACHED_BUILDING_OUT_BY_PARENT:case SC.CoreView.ATTACHED_SHOWING:case SC.CoreView.ATTACHED_SHOWN:case SC.CoreView.ATTACHED_SHOWN_ANIMATING:case SC.CoreView.UNATTACHED_BY_PARENT:case SC.CoreView.ATTACHED_BUILDING_OUT:break;default:this._notifyWillDestroyLayer();this._callOnChildViews("_notifyWillDestroyLayer");this._executeDoDestroyLayer();this._callOnChildViews("_executeDoDestroyLayer");a=true}return a},_doDetach:function(b){var d=this.get("viewState"),c=this.get("transitionOut"),e=false,a=true;switch(d){case SC.CoreView.ATTACHED_SHOWN:break;case SC.CoreView.UNATTACHED_BY_PARENT:case SC.CoreView.ATTACHED_HIDDEN:case SC.CoreView.ATTACHED_HIDDEN_BY_PARENT:b=true;break;case SC.CoreView.ATTACHED_SHOWN_ANIMATING:this.cancelAnimation();break;case SC.CoreView.ATTACHED_SHOWING:this.cancelAnimation();break;case SC.CoreView.ATTACHED_HIDING:this.cancelAnimation();b=true;break;case SC.CoreView.ATTACHED_BUILDING_IN:if(b||!c){this.cancelAnimation()}else{this._gotoAttachedShownState();this.cancelAnimation(SC.LayoutState.CURRENT);e=true}break;case SC.CoreView.ATTACHED_BUILDING_OUT_BY_PARENT:this.cancelAnimation(SC.LayoutState.CURRENT);this._gotoAttachedShownState();e=true;break;case SC.CoreView.ATTACHED_BUILDING_OUT:if(b){this.cancelAnimation()}return true;case SC.CoreView.UNRENDERED:case SC.CoreView.UNATTACHED:return false}if(b){this._executeDoDetach()}else{this._buildingOutCount=0;this._callOnChildViews("_parentWillBuildOutFromDocument",this);if(c){this._transitionOut(e,this);this._gotoAttachedBuildingOutState()}else{if(this._buildingOutCount>0){this._gotoAttachedBuildingOutState()}else{this._buildingOutCount=null;this._executeDoDetach()}}}return a},_doHide:function(){var b=this.get("viewState"),a=this.get("transitionHide");switch(b){case SC.CoreView.UNRENDERED:case SC.CoreView.ATTACHED_HIDDEN:case SC.CoreView.ATTACHED_HIDING:return false;case SC.CoreView.UNATTACHED:case SC.CoreView.UNATTACHED_BY_PARENT:case SC.CoreView.ATTACHED_BUILDING_OUT_BY_PARENT:case SC.CoreView.ATTACHED_BUILDING_OUT:this._visibleStyleNeedsUpdate=true;return true;case SC.CoreView.ATTACHED_HIDDEN_BY_PARENT:this._doUpdateVisibleStyle();this._gotoAttachedHiddenState();return true;case SC.CoreView.ATTACHED_BUILDING_IN:case SC.CoreView.ATTACHED_SHOWING:this.cancelAnimation();this._teardownTransition();this._gotoAttachedHiddenState();break;case SC.CoreView.ATTACHED_SHOWN_ANIMATING:this.cancelAnimation();break;case SC.CoreView.ATTACHED_SHOWN:break;default:}if(this.willHideInDocument){this.willHideInDocument()}if(a){this._gotoAttachedHidingState();this._transitionHide()}else{this._callOnChildViews("_parentWillHideInDocument");this.invokeOnce(this._doUpdateVisibleStyle);this._gotoAttachedHiddenState();this._callOnChildViews("_parentDidHideInDocument");if(this.didHideInDocument){this.didHideInDocument()}}return true},_doOrphan:function(){var b=this.get("parentView"),d=true;if(b){var c=b.get("childViews"),a=c.indexOf(this);this.set("parentView",null);if(a>=0){c.removeAt(a)}this._orphaned(b)}else{d=false}return d},_doRender:function(){var f=this.get("viewState");switch(f){case SC.CoreView.ATTACHED_SHOWING:case SC.CoreView.ATTACHED_SHOWN:case SC.CoreView.ATTACHED_SHOWN_ANIMATING:case SC.CoreView.ATTACHED_HIDING:case SC.CoreView.ATTACHED_HIDDEN:case SC.CoreView.ATTACHED_HIDDEN_BY_PARENT:case SC.CoreView.ATTACHED_BUILDING_IN:case SC.CoreView.ATTACHED_BUILDING_OUT:case SC.CoreView.ATTACHED_BUILDING_OUT_BY_PARENT:case SC.CoreView.UNATTACHED:case SC.CoreView.UNATTACHED_BY_PARENT:return false;case SC.CoreView.UNRENDERED:var c=this.renderContext(this.get("tagName"));this.renderToContext(c);this.set("layer",c.element());this._gotoUnattachedState();this._callOnChildViews("_parentDidRender");this._rendered();var e=this.get("parentView");if(e&&e.get("_isRendered")){var b=e.get("containerLayer"),g=e.get("childViews"),d=g.objectAt(g.indexOf(this)+1),a=(d)?d.get("layer"):null;this._doAttach(b,a)}return true}},_doShow:function(){var d=this.get("viewState"),c=this.get("parentView"),a=c?c.get("viewState")&SC.CoreView.IS_SHOWN:true,b=this.get("transitionShow");switch(d){case SC.CoreView.ATTACHED_HIDDEN:if(a){this._doUpdateVisibleStyle();this._callOnChildViews("_parentWillShowInDocument");if(this.willShowInDocument){this.willShowInDocument()}}else{this._visibleStyleNeedsUpdate=true;this._gotoAttachedHiddenByParentState();return true}break;case SC.CoreView.ATTACHED_HIDING:this.cancelAnimation();this._teardownTransition();this._gotoAttachedShownState();break;case SC.CoreView.UNATTACHED:case SC.CoreView.UNATTACHED_BY_PARENT:this._visibleStyleNeedsUpdate=true;return true;case SC.CoreView.UNRENDERED:case SC.CoreView.ATTACHED_SHOWN:case SC.CoreView.ATTACHED_SHOWN_ANIMATING:case SC.CoreView.ATTACHED_SHOWING:case SC.CoreView.ATTACHED_HIDDEN_BY_PARENT:case SC.CoreView.ATTACHED_BUILDING_IN:case SC.CoreView.ATTACHED_BUILDING_OUT_BY_PARENT:case SC.CoreView.ATTACHED_BUILDING_OUT:return false;default:}this._executeQueuedUpdates();if(b){this._gotoAttachedShowingState();this._transitionShow()}else{this._gotoAttachedShownState();if(this.didShowInDocument){this.didShowInDocument()}this._callOnChildViews("_parentDidShowInDocument")}return true},_doUpdateContent:function(b){var a=this.get("isVisibleInWindow"),c=true;if(this.get("_isRendered")){if(a||b){this._executeDoUpdateContent()}else{this._contentNeedsUpdate=true}}else{c=false}return c},didTransitionIn:function(){var a=this.get("viewState");if(a===SC.CoreView.ATTACHED_SHOWING||a===SC.CoreView.ATTACHED_BUILDING_IN){this._teardownTransition();this._gotoAttachedShownState();if(this.didShowInDocument){this.didShowInDocument()}}},didTransitionOut:function(){var b=this.get("viewState");if(b===SC.CoreView.ATTACHED_BUILDING_OUT){this._teardownTransition();this._executeDoDetach()}else{if(b===SC.CoreView.ATTACHED_BUILDING_OUT_BY_PARENT){var a=this._owningView;a._buildingOutCount--;if(a._buildingOutCount===0){a._executeDoDetach();this._owningView=null}}else{if(b===SC.CoreView.ATTACHED_HIDING){this._teardownTransition();this._callOnChildViews("_parentWillHideInDocument");this._doUpdateVisibleStyle();this._gotoAttachedHiddenState();this._callOnChildViews("_parentDidHideInDocument");if(this.didHideInDocument){this.didHideInDocument()}}}}},_adopted:function(){},_orphaned:function(a){if(a.didRemoveChild){a.didRemoveChild(this)}if(this.didRemoveFromParent){this.didRemoveFromParent(a)}},_rendered:function(){var c,b,a;c=this.get("displayProperties");for(a=0,b=c.length;a<b;a++){this.addObserver(c[a],this,this.displayDidChange)}this.addObserver("isVisible",this,this._isVisibleDidChange);this.addObserver("isFirstResponder",this,this._isFirstResponderDidChange);this._notifyDidRender()},_gotoAttachedBuildingInState:function(){this.set("viewState",SC.CoreView.ATTACHED_BUILDING_IN)},_gotoAttachedBuildingOutState:function(){this.set("viewState",SC.CoreView.ATTACHED_BUILDING_OUT)},_gotoAttachedBuildingOutByParentState:function(){this.set("viewState",SC.CoreView.ATTACHED_BUILDING_OUT_BY_PARENT)},_gotoAttachedHiddenState:function(){this.set("viewState",SC.CoreView.ATTACHED_HIDDEN)},_gotoAttachedHiddenByParentState:function(){this.set("viewState",SC.CoreView.ATTACHED_HIDDEN_BY_PARENT)},_gotoAttachedHidingState:function(){this.set("viewState",SC.CoreView.ATTACHED_HIDING)},_gotoAttachedShowingState:function(){this.set("viewState",SC.CoreView.ATTACHED_SHOWING)},_gotoAttachedShownState:function(){this.set("viewState",SC.CoreView.ATTACHED_SHOWN)},_gotoUnattachedState:function(){this.set("viewState",SC.CoreView.UNATTACHED)},_gotoUnattachedByParentState:function(){this.set("viewState",SC.CoreView.UNATTACHED_BY_PARENT)},_gotoUnrenderedState:function(){this.set("viewState",SC.CoreView.UNRENDERED)},_cancelTransition:function(){this.cancelAnimation()},_doUpdateVisibleStyle:function(){var a=this.get("isVisible");this.$().toggleClass("sc-hidden",!a);this.$().attr("aria-hidden",a?null:true);this._visibleStyleNeedsUpdate=false},_executeDoDestroyLayer:function(){var c,b,a;this.set("layer",null);c=this.get("displayProperties");for(b=0,a=c.length;b<a;b++){this.removeObserver(c[b],this,this.displayDidChange)}this.removeObserver("isVisible",this,this._isVisibleDidChange);this.removeObserver("isFirstResponder",this,this._isFirstResponderDidChange);this._gotoUnrenderedState()},_executeDoDetach:function(){this._notifyWillDetach();this._callOnChildViews("_parentWillRemoveFromDocument");var a=this.get("layer");a.parentNode.removeChild(a);this._gotoUnattachedState();this._callOnChildViews("_parentDidRemoveFromDocument")},_executeDoUpdateContent:function(){var c=this.renderMixin,d=this.renderContext(this.get("layer"));if(!this.update){this.render(d,false)}else{this.update(d.$())}if(c){var b=c.length;for(var a=0;a<b;++a){c[a].call(this,d,false)}}this.applyAttributesToContext(d);d.update();this.set("layerNeedsUpdate",false);this._contentNeedsUpdate=false;this.notifyPropertyChange("layer");if(this.didUpdateLayer){this.didUpdateLayer()}if(this.designer&&this.designer.viewDidUpdateLayer){this.designer.viewDidUpdateLayer()}},_executeQueuedUpdates:function(){if(this._visibleStyleNeedsUpdate){this._doUpdateVisibleStyle()}if(this._contentNeedsUpdate){this._executeDoUpdateContent()}},_isVisibleDidChange:function(){if(this.get("isVisible")){this._doShow()}else{this._doHide()}},_isFirstResponderDidChange:function(){var a=this.get("isFirstResponder");this.$().toggleClass("focus",a)},_notifyDidRender:function(){var c=this.didCreateLayerMixin,b,a;if(this.didCreateLayer){this.didCreateLayer()}if(c){a=c.length;for(b=0;b<a;++b){c[b].call(this)}}},_notifyDidAttach:function(){this.notifyPropertyChange("frame");if(this.didAppendToDocument){this.didAppendToDocument()}},_notifyWillDetach:function(){if(this.willRemoveFromDocument){this.willRemoveFromDocument()}},_notifyWillDestroyLayer:function(){var b,a,c;c=this.willDestroyLayerMixin;if(c){a=c.length;for(b=0;b<a;++b){c[b].call(this)}}if(this.willDestroyLayer){this.willDestroyLayer()}},_parentDidAppendToDocument:function(){this._executeQueuedUpdates();this._routeOnAttached();this._notifyDidAttach()},_parentDidCancelBuildOut:function(){var b=this.get("viewState"),a=this.get("transitionIn");if(b===SC.CoreView.ATTACHED_BUILDING_OUT_BY_PARENT){if(a){this._transitionIn();this._gotoAttachedBuildingInState()}else{this._cancelTransition();this._gotoAttachedShownState()}}else{if(b===SC.CoreView.ATTACHED_BUILDING_OUT||b&SC.CoreView.IS_HIDDEN){return false}}},_parentDidRender:function(){this._gotoUnattachedByParentState();this._rendered()},_parentWillBuildOutFromDocument:function(a){var c=this.get("viewState"),b=this.get("transitionOut");switch(c){case SC.CoreView.UNRENDERED:case SC.CoreView.UNATTACHED:case SC.CoreView.UNATTACHED_BY_PARENT:case SC.CoreView.ATTACHED_BUILDING_OUT:case SC.CoreView.ATTACHED_BUILDING_OUT_BY_PARENT:case SC.CoreView.ATTACHED_HIDDEN:case SC.CoreView.ATTACHED_HIDDEN_BY_PARENT:case SC.CoreView.ATTACHED_HIDING:return false;case SC.CoreView.ATTACHED_SHOWING:case SC.CoreView.ATTACHED_BUILDING_IN:case SC.CoreView.ATTACHED_SHOWN:if(b){this._owningView=a;this._transitionOut(false,a);this._gotoAttachedBuildingOutByParentState()}return true;default:}},_parentWillRemoveFromDocument:function(){var a=this.get("viewState");switch(a){case SC.CoreView.UNRENDERED:case SC.CoreView.UNATTACHED:case SC.CoreView.UNATTACHED_BY_PARENT:return false;case SC.CoreView.ATTACHED_SHOWING:case SC.CoreView.ATTACHED_HIDING:this._cancelTransition();this._teardownTransition();this._visibleStyleNeedsUpdate=true;break;case SC.CoreView.ATTACHED_BUILDING_IN:case SC.CoreView.ATTACHED_BUILDING_OUT:case SC.CoreView.ATTACHED_BUILDING_OUT_BY_PARENT:this._cancelTransition();this._teardownTransition();break;case SC.CoreView.ATTACHED_HIDDEN:case SC.CoreView.ATTACHED_HIDDEN_BY_PARENT:case SC.CoreView.ATTACHED_SHOWN:break;default:}this._notifyWillDetach()},_ancestorDidChangeParent:function(){this.notifyPropertyChange("pane")},_parentDidRemoveFromDocument:function(){var a=this.get("viewState");if(a&SC.CoreView.IS_ATTACHED){this._gotoUnattachedByParentState()}else{return false}},_parentDidHideInDocument:function(){var a=this.get("viewState");switch(a){case SC.CoreView.UNRENDERED:case SC.CoreView.UNATTACHED:case SC.CoreView.UNATTACHED_BY_PARENT:case SC.CoreView.ATTACHED_HIDING:case SC.CoreView.ATTACHED_BUILDING_OUT:case SC.CoreView.ATTACHED_BUILDING_OUT_BY_PARENT:case SC.CoreView.ATTACHED_HIDDEN:case SC.CoreView.ATTACHED_HIDDEN_BY_PARENT:return false;case SC.CoreView.ATTACHED_BUILDING_IN:case SC.CoreView.ATTACHED_SHOWING:case SC.CoreView.ATTACHED_SHOWN:break;default:}this._gotoAttachedHiddenByParentState();if(this.didHideInDocument){this.didHideInDocument()}},_parentWillHideInDocument:function(){var a=this.get("viewState");switch(a){case SC.CoreView.UNRENDERED:case SC.CoreView.UNATTACHED:case SC.CoreView.ATTACHED_HIDDEN:return false;case SC.CoreView.ATTACHED_HIDING:this._cancelTransition();return false;case SC.CoreView.ATTACHED_BUILDING_IN:case SC.CoreView.ATTACHED_SHOWING:this._cancelTransition();break;case SC.CoreView.ATTACHED_BUILDING_OUT_BY_PARENT:this._cancelTransition();break;case SC.CoreView.ATTACHED_SHOWN:break;default:}if(this.willHideInDocument){this.willHideInDocument()}},_parentDidShowInDocument:function(){var a=this.get("viewState");if(a===SC.CoreView.ATTACHED_HIDDEN_BY_PARENT){this._gotoAttachedShownState();if(this.didShowInDocument){this.didShowInDocument()}}else{return false}},_parentWillShowInDocument:function(){var a=this.get("viewState");if(a===SC.CoreView.ATTACHED_HIDDEN_BY_PARENT){this._executeQueuedUpdates();if(this.willShowInDocument){this.willShowInDocument()}}else{return false}},_setupTransition:function(e){var d=SC.clone(this.get("layout"));this._preTransitionLayout=d;this._preTransitionFrame=this.get("borderFrame");var c=SC.get(e,"layoutProperties");if(c&&c.length){this._transitionLayoutCache={};var b,f,a=c.length;for(b=0;b<a;b++){f=c[b];this._transitionLayoutCache[f]=d[f]===undefined?null:d[f]}}},_teardownTransition:function(){if(this._transitionLayoutCache){this.adjust(this._transitionLayoutCache)}else{if(this._preTransitionLayout){this.set("layout",this._preTransitionLayout)}}this._preTransitionLayout=null;this._preTransitionFrame=null;this._transitionLayoutCache=null},_transitionHide:function(){var b=this.get("transitionHide"),a=this.get("transitionHideOptions")||{};this._setupTransition(b);if(b.setup){b.setup(this,a)}b.run(this,a,this._preTransitionLayout,this._preTransitionFrame)},_transitionIn:function(){var c=this.get("viewState"),a=this.get("transitionIn"),b=this.get("transitionInOptions")||{},d=false;switch(c){case SC.CoreView.ATTACHED_BUILDING_OUT_BY_PARENT:case SC.CoreView.ATTACHED_BUILDING_OUT:this.cancelAnimation(SC.LayoutState.CURRENT);d=true;break;default:this._setupTransition(a)}if(a.setup){a.setup(this,b,d)}a.run(this,b,this._preTransitionLayout,this._preTransitionFrame)},_transitionOut:function(d,a){var c=this.get("transitionOut"),b=this.get("transitionOutOptions")||{};if(!d){this._setupTransition(c)}a._buildingOutCount++;if(c.setup){c.setup(this,b,d)}c.run(this,b,this._preTransitionLayout,this._preTransitionFrame)},_transitionShow:function(){var b=this.get("transitionShow"),a=this.get("transitionShowOptions")||{},c=false;this._setupTransition(b);if(b.setup){b.setup(this,a,c)}b.run(this,a,this._preTransitionLayout,this._preTransitionFrame);this._callOnChildViews("_parentDidShowInDocument")},_routeOnAttached:function(){var c=this.get("parentView"),a=c?c.get("viewState")&SC.CoreView.IS_SHOWN:true;if(this.get("isVisible")){if(a){var b=this.get("transitionIn");if(b){this._gotoAttachedBuildingInState();this._transitionIn()}else{this._gotoAttachedShownState()}}else{this._gotoAttachedHiddenByParentState()}}else{this._gotoAttachedHiddenState()}}});sc_require("system/browser");sc_require("system/event");sc_require("system/cursor");sc_require("system/responder");sc_require("system/theme");sc_require("system/string");sc_require("views/view/statechart");SC.CONTEXT_MENU_ENABLED=YES;SC.TABBING_ONLY_INSIDE_DOCUMENT=NO;SC.FROM_THEME="__FROM_THEME__";SC.EMPTY_CHILD_VIEWS_ARRAY=[];SC.EMPTY_CHILD_VIEWS_ARRAY.needsClone=YES;SC.CoreView.reopen({concatenatedProperties:["outlets","displayProperties","classNames","renderMixin","didCreateLayerMixin","willDestroyLayerMixin","classNameBindings","attributeBindings"],ariaRole:null,ariaHidden:null,createdByParent:false,pane:function(){var a=this;while(a&&!a.isPane){a=a.get("parentView")}return a}.property("parentView").cacheable(),page:null,parentView:null,isVisible:true,isVisibleBindingDefault:SC.Binding.bool(),childViews:SC.EMPTY_CHILD_VIEWS_ARRAY,autoMixins:null,layer:function(a,c){if(c!==undefined){this._view_layer=c}else{c=this._view_layer;if(!c){var b=this.get("parentView");if(b){b=b.get("layer")}this._view_layer=c=this.findLayerInParentLayer(b)}}return c}.property("isVisibleInWindow").cacheable(),$:function(b){var a=this.get("layer");if(!a){return SC.$()}else{if(b===undefined){return SC.$(a)}else{return SC.$(b,a)}}},containerLayer:function(){return this.get("layer")}.property("layer").cacheable(),layerId:function(a,b){if(b){this._layerId=b}if(this._layerId){return this._layerId}return SC.guidFor(this)}.property().cacheable(),findLayerInParentLayer:function(a){var b="#"+this.get("layerId").escapeCssIdForSelector();return jQuery(b,a)[0]||jQuery(b)[0]},isDescendantOf:function(a){var b=this.get("parentView");if(this===a){return YES}else{if(b){return b.isDescendantOf(a)}else{return NO}}},displayDidChange:function(){if(this.get("_isRendered")){this.set("layerNeedsUpdate",true);this.invokeOnce(this._doUpdateContent)}return this},layerNeedsUpdate:NO,updateLayerIfNeeded:function(a){this._doUpdateContent(false);return this},updateLayer:function(){this._doUpdateContent(true);return this},parentViewDidResize:function(){if(!this.get("hasLayout")){this.notifyPropertyChange("frame")}this.viewDidResize()},viewDidResize:function(){},renderContext:function(a){return SC.RenderContext(a)},createLayer:function(){this._doRender();return this},destroyLayer:function(){if(this.get("isAttached")){this._doDetach()}this._doDestroyLayer();return this},replaceLayer:function(){var b,a;if(this.get("isAttached")){b=this.get("layer");a=b.parentNode;this._doDetach()}this.destroyLayer().createLayer();if(a&&!this.get("isAttached")){this._doAttach(a)}return this},parentViewDidChange:function(){},layerLocationNeedsUpdate:NO,updateLayerLocationIfNeeded:function(){return this},updateLayerLocation:function(){return this},renderToContext:function(d){var c,b,a;this.beginPropertyChanges();d.id(this.get("layerId"));d.setAttr("role",this.get("ariaRole"));this._applyClassNameBindings();this._applyAttributeBindings(d);d.addClass(this.get("classNames"));if(this.get("isTextSelectable")){d.addClass("allow-select")}if(!this.get("isVisible")){d.addClass("sc-hidden");d.setAttr("aria-hidden","true")}this.applyAttributesToContext(d);this.render(d,true);if(!this._didRenderChildViews){this.renderChildViews(d)}this._didRenderChildViews=false;if(c=this.renderMixin){a=c.length;for(b=0;b<a;++b){c[b].call(this,d,true)}}this.endPropertyChanges()},applyAttributesToContext:function(a){},_applyClassNameBindings:function(){var a=this.get("classNameBindings"),b=this.get("classNames"),c;if(!a){return}a.forEach(function(f){var e;var d=function(){var h=this._classStringForProperty(f);var g=this.$();if(e){g.removeClass(e);b.removeObject(e)}if(h){g.addClass(h);b.push(h);e=h}else{e=null}};this.addObserver(f.split(":")[0],this,d);c=this._classStringForProperty(f);if(c){b.push(c);e=c}},this)},_applyAttributeBindings:function(a){var e=this.get("attributeBindings"),c,d,b;if(!e){return}e.forEach(function(g){var f=function(){d=this.$();var h=d.attr(g);c=this.get(g);b=typeof c;if((b==="string"||b==="number")&&c!==h){d.attr(g,c)}else{if(c&&b==="boolean"){d.attr(g,g)}else{if(c===NO){d.removeAttr(g)}}}};this.addObserver(g,this,f);c=this.get(g);b=typeof c;if(b==="string"||b==="number"){a.setAttr(g,c)}else{if(c&&b==="boolean"){a.setAttr(g,g)}}},this)},_classStringForProperty:function(c){var a=c.split(":"),b=a[1];c=a[0];var d=SC.getPath(this,c);if(d===YES){if(b){return b}return SC.String.dasherize(c.split(".").get("lastObject"))}else{if(d!==NO&&d!==undefined&&d!==null){return d}else{return null}}},renderChildViews:function(e){var d=this.get("childViews"),b=d.length,a,c;for(a=0;a<b;++a){c=d[a];if(!c){continue}e=e.begin(c.get("tagName"));c.renderToContext(e);e=e.end()}this._didRenderChildViews=true;return e},render:function(){},attributeBindings:null,tagName:"div",classNames:[],classNameBindings:null,toolTip:null,displayToolTip:function(){var a=this.get("toolTip");return(a&&this.get("localize"))?SC.String.loc(a):(a||"")}.property("toolTip","localize").cacheable(),isTextSelectable:NO,displayProperties:[],nextResponder:function(){return this.get("parentView")}.property("parentView").cacheable(),acceptsFirstResponder:NO,_lastLayerId:null,init:function(){var b,a;arguments.callee.base.apply(this,arguments);a=this._lastLayerId=this.get("layerId");SC.View.views[a]=this;this.classNames=this.get("classNames").slice();b=this.childViews=this.get("childViews").slice();this.createChildViews()},awake:function(){arguments.callee.base.apply(this,arguments);var c=this.get("childViews"),b=c.length,a;for(a=0;a<b;++a){if(!c[a]){continue}c[a].awake()}},frame:function(){return this.computeFrameWithParentFrame(null)}.property("useStaticLayout").cacheable(),computeFrameWithParentFrame:function(){var a,b=this.get("parentView"),c;if(a=this.get("layer")){c=SC.offset(a);if(b){c=b.convertFrameFromView(c,null)}c.width=c.originalWidth=a.offsetWidth;c.height=c.originalHeight=a.offsetHeight;c.scale=1;c.transformOriginX=c.transformOriginY=0.5;return c}if(this.get("hasLayout")){return null}else{return{x:0,y:0,width:0,height:0}}},_callOnChildViews:function(a,c){var g,e=this.get("childViews"),f,d;for(var b=e.length-1;b>=0;b--){g=e[b];if(!g){continue}f=g[a];d=f.call(g,c);if(d===undefined||d){g._callOnChildViews(a,c)}}},clippingFrame:function(){var h=this.get("frame");if(!h){return null}var b=(h.scale==null)?1:h.scale,d=NO,n=this.get("parentView"),e=n?n.get("clippingFrame"):null,i,g,o,m,a,c,j;if(!e){return{x:0,y:0,width:h.width/b,height:h.height/b}}j=SC.intersectRects(e,h);j.x-=h.x;j.y-=h.y;if(b!==1){var l,k;if(SC.typeOf(b)===SC.T_ARRAY){l=1/b[0];k=1/b[1]}else{l=k=1/b}j.x*=l;j.width*=l;j.y*=k;j.height*=k}return j}.property("parentView","frame").cacheable(),_sc_view_clippingFrameDidChange:function(){this.notifyPropertyChange("clippingFrame")},removeChild:function(b,a){b._doDetach(a);if(!a&&b.get("viewState")===SC.CoreView.ATTACHED_BUILDING_OUT){b.addObserver("isAttached",this,this._orphanChildView)}else{b._doOrphan()}return this},removeChildAndDestroy:function(b,a){b._doDetach(a);if(b.get("transitionOut")&&!a){b.addObserver("isAttached",this,this._destroyChildView)}else{b.destroy()}return this},removeAllChildren:function(b){var d=this.get("childViews"),a=d.get("length"),c;for(c=a-1;c>=0;c--){this.removeChildAndDestroy(d.objectAt(c),b)}return this},removeFromParent:function(){var a=this.get("parentView");if(a){a.removeChild(this)}return this},_destroyChildView:function(a){if(!a.get("isAttached")){a.removeObserver("isAttached",this,this._destroyChildView);a.destroy()}},_orphanChildView:function(a){if(!a.get("isAttached")){a.removeObserver("isAttached",this,this._orphanChildView);a._doOrphan()}},destroy:function(){if(this.get("isDestroyed")){return this}var a=arguments.callee.base.apply(this,arguments);if(this.getPath("parentView.isDestroyed")){this.invokeNext(this._destroy)}else{this._doDetach(true);this._doDestroyLayer();this._destroy()}delete SC.View.views[this.get("layerId")];var c=this.get("childViews");for(var b=c.length-1;b>=0;b--){c[b].destroy()}return a},_destroy:function(){this._doOrphan();this.set("owner",null);delete this.page},createChildViews:function(){var e=this.get("childViews"),b=e.length,f=false,a,d,c;this.beginPropertyChanges();for(a=0;a<b;++a){d=c=e[a];if(typeof d===SC.T_STRING){c=this[d]}else{d=null}if(!c){f=true;e[a]=null;continue}c=this.createChildView(c);if(d){this[d]=c}e[a]=c}if(f){this.set("childViews",e.compact())}this.endPropertyChanges();return this},createChildView:function(b,c){if(b.isClass){if(!c){c={}}else{c=SC.clone(c)}c.owner=c.parentView=this;if(!c.page){c.page=this.page}c.createdByParent=true;var a=this.autoMixins;if(!!a){a=SC.clone(a);a.push(c);b=b.create.apply(b,a)}else{b=b.create(c)}}else{b.set("parentView",this);b.set("owner",this);b._adopted();if(!b.get("page")){b.set("page",this.page)}}return b},isView:YES,selectStart:function(a){return this.get("isTextSelectable")},contextMenu:function(a){if(this.get("isContextMenuEnabled")){a.allowDefault();return YES}},transitionIn:null,transitionInOptions:null,transitionOut:null,transitionOutOptions:null,transitionShow:null,transitionShowOptions:null,transitionHide:null,transitionHideOptions:null,updateDesignMode:function(a,b){}});SC.CoreView.mixin({isViewClass:YES,design:function(){if(this.isDesign){return this}var a=this.extend.apply(this,arguments);a.isDesign=YES;if(SC.ViewDesigner){SC.ViewDesigner.didLoadDesign(a,this,SC.A(arguments))}return a},extend:function(){var a=arguments[arguments.length-1];if(a&&!SC.none(a.theme)){a.themeName=a.theme;delete a.theme}return SC.Object.extend.apply(this,arguments)},layout:function(a){this.prototype.layout=a;return this},classNames:function(a){a=(this.prototype.classNames||[]).concat(a);this.prototype.classNames=a;return this},tagName:function(a){this.prototype.tagName=a;return this},childView:function(a){var b=this.prototype.childViews||[];if(b===this.superclass.prototype.childViews){b=b.slice()}b.push(a);this.prototype.childViews=b;return this},bind:function(b,d){var c=this.prototype,a=this.superclass.prototype;var e=c._bindings;if(!e||e===a._bindings){e=c._bindings=(e||[]).slice()}b=b+"Binding";c[b]=d;e.push(b);return this},prop:function(a,b){this.prototype[a]=b;return this},localization:function(b,a){if(a){b.rootElement=SC.$(a)[0]}return b},viewFor:function(d,c){var b=SC.$A(arguments);if(SC.none(d)){b.shift()}else{b[0]={rootElement:SC.$(d)[0]}}var a=this.create.apply(this,arguments);b=b[0]=null;return a},create:function(){var b=arguments[arguments.length-1];if(b&&b.theme){b.themeName=b.theme;delete b.theme}var c=this,a=new c(arguments);if(SC.ViewDesigner){SC.ViewDesigner.didCreateView(a,SC.$A(arguments))}return a},loc:function(e){var b=e.childViews;delete e.childViews;this.applyLocalizedAttributes(e);if(SC.ViewDesigner){SC.ViewDesigner.didLoadLocalization(this,SC.$A(arguments))}var d=this.prototype.childViews,a=d.length,c;while(--a>=0){c=d[a];e=b[a];if(e&&c&&typeof c===SC.T_STRING){SC.String.loc(c,e)}}return this},applyLocalizedAttributes:function(a){SC.mixin(this.prototype,a)},views:{}});SC.outlet=function(b,a){return function(c){return(this[c]=SC.objectForPropertyPath(b,(a!==undefined)?a:this))}.property()};SC.CoreView.unload=function(){var a=SC.View.views;if(a){for(var b in a){if(!a.hasOwnProperty(b)){continue}delete a[b]}}};SC.View=SC.CoreView.extend({classNames:["sc-view"],displayProperties:[]});if(SC.browser.isIE){SC.Event.add(window,"unload",SC.View,SC.View.unload)}sc_require("views/view");SC.mixin(SC.View,{HORIZONTAL_STACK:{childLayoutProperties:["marginBefore","marginAfter","isVisible"],layoutDependsOnSize:function(a){var b=a.get("childViewLayoutOptions");if(b){return SC.none(b.resizeToFit)?false:!b.resizeToFit}else{return false}},layoutChildViews:function(j){var v=j.get("childViews"),b=j.get("childViewLayoutOptions")||{},p=SC.none(b.resizeToFit)?true:b.resizeToFit,s=0,h=b.paddingBefore||0,f=b.paddingAfter||0,a=0,d=0,o=0,k=0,e=0,c=b.spacing||0,z,w,x,g,q,r;if(!p){k=j.get("frame").width;if(!k){return}for(q=0,r=v.get("length");q<r;q++){z=v.objectAt(q);if(!z.get("isVisible")||z.get("useAbsoluteLayout")||z.get("useStaticLayout")){continue}x=z.get("layout");g=z.get("marginBefore")||0;d+=Math.max(h,g);if(SC.none(x.width)){w=z.get("fillRatio");if(!SC.none(w)){e+=w}else{if(q==r-1&&e===0){e=1}}}else{d+=z.getPath("borderFrame.width")}s=z.get("marginAfter")||0;h=s||c}if(d!==0||e!==0){d+=Math.max(s,f)}o=Math.max(0,k-d)}s=0;h=b.paddingBefore||0;f=b.paddingAfter||0;for(q=0,r=v.get("length");q<r;q++){var n,u,l;z=v.objectAt(q);if(!z.get("isVisible")||z.get("useAbsoluteLayout")||z.get("useStaticLayout")){continue}x=z.get("layout");g=z.get("marginBefore")||0;a+=Math.max(h,g);u=x.left!==a;z.beginPropertyChanges();if(!p&&!x.width){var y;w=z.get("fillRatio");if(q==r-1&&SC.none(w)){w=1}if(!SC.none(w)){var m=(w/e);n=Math.ceil(o*m);y=Math.max(0,k-a-n);l=x.right!==y;if(l){z.adjust("right",y)}}}if(u){z.adjust("left",a)}z.endPropertyChanges();a+=z.getPath("borderFrame.width");s=z.get("marginAfter")||0;h=s||c}if(a!==0){a+=Math.max(s,f)}if(p&&j.getPath("layout.width")!==a){j.adjust("width",a)}}}});sc_require("views/view");SC.mixin(SC.View,{VERTICAL_STACK:{childLayoutProperties:["marginBefore","marginAfter","isVisible"],layoutDependsOnSize:function(a){var b=a.get("childViewLayoutOptions");if(b){return SC.none(b.resizeToFit)?false:!b.resizeToFit}else{return false}},layoutChildViews:function(k){var w=k.get("childViews"),a=k.get("childViewLayoutOptions")||{},p=SC.none(a.resizeToFit)?true:a.resizeToFit,u=0,j=a.paddingBefore||0,f=a.paddingAfter||0,h=0,c=0,o=0,l=0,e=0,b=a.spacing||0,z,x,y,g,q,s;if(!p){l=k.get("frame").height;if(!l){return}for(q=0,s=w.get("length");q<s;q++){z=w.objectAt(q);if(!z.get("isVisible")||z.get("useAbsoluteLayout")||z.get("useStaticLayout")){continue}y=z.get("layout");g=z.get("marginBefore")||0;c+=Math.max(j,g);if(SC.none(y.height)){x=z.get("fillRatio");if(!SC.none(x)){e+=x}else{if(q==s-1&&e===0){e=1}}}else{c+=z.getPath("borderFrame.height")}u=z.get("marginAfter")||0;j=u||b}if(c!==0||e!==0){c+=Math.max(u,f)}o=Math.max(0,l-c)}u=0;j=a.paddingBefore||0;f=a.paddingAfter||0;for(q=0,s=w.get("length");q<s;q++){var m,d,v;z=w.objectAt(q);if(!z.get("isVisible")||z.get("useAbsoluteLayout")||z.get("useStaticLayout")){continue}y=z.get("layout");g=z.get("marginBefore")||0;h+=Math.max(j,g);d=y.top!==h;z.beginPropertyChanges();if(!p&&!y.height){var r;x=z.get("fillRatio");if(q==s-1&&SC.none(x)){x=1}if(!SC.none(x)){var n=(x/e);m=Math.ceil(o*n);r=Math.max(0,l-h-m);v=y.bottom!==r;if(v){z.adjust("bottom",r)}}}if(d){z.adjust("top",h)}z.endPropertyChanges();h+=z.getPath("borderFrame.height");u=z.get("marginAfter")||0;j=u||b}if(h!==0){h+=Math.max(u,f)}if(p&&k.getPath("layout.height")!==h){k.adjust("height",h)}}}});SC.Controller=SC.Object.extend({isEditable:YES,destroyContentOnReplace:NO,contentObjectDidChanged:function(){var b,a;if(!this.get("destroyContentOnReplace")){return}b=this._oldContent;a=this.get("content");if(b&&a!==b&&b.destroy){b.destroy()}this._oldContent=a}.observes("content")});SC.SelectionSupport={hasSelectionSupport:YES,allowsSelection:YES,allowsMultipleSelection:YES,allowsEmptySelection:YES,firstSelectableObject:function(){return this.get("firstObject")}.property(),selection:function(d,f){var c=this._scsel_selection,g=c?c.get("length"):0,e,b=this.get("arrangedObjects"),a;if((f===undefined)||!this.get("allowsSelection")){f=c}a=(f&&f.isEnumerable)?f.get("length"):0;if((a>1)&&!this.get("allowsMultipleSelection")){if(g>1){f=SC.SelectionSet.create().addObject(c.get("firstObject")).freeze();a=1}else{f=c;a=g}}if((a===0)&&!this.get("allowsEmptySelection")&&b&&b.get("length")!==0){if(g===0){f=this.get("firstSelectableObject");if(f){f=SC.SelectionSet.create().addObject(f).freeze()}else{f=SC.SelectionSet.EMPTY}a=f.get("length")}else{f=c;a=g}}if(a===0){f=SC.SelectionSet.EMPTY}if(f!==c){f=f.frozenCopy()}this._scsel_selection=f;return f}.property("arrangedObjects","allowsEmptySelection","allowsMultipleSelection","allowsSelection").cacheable(),hasSelection:function(){var a=this.get("selection");return !!a&&(a.get("length")>0)}.property("selection").cacheable(),selectObjects:function(b,c){if(!b||b.get("length")===0){if(!c){this.set("selection",SC.SelectionSet.EMPTY)}return this}var a=this.get("selection");if(c&&a){a=a.copy()}else{a=SC.SelectionSet.create()}a.addObjects(b).freeze();this.set("selection",a);return this},selectObject:function(a,b){if(a===null){if(!b){this.set("selection",null)}return this}else{return this.selectObjects([a],b)}},deselectObjects:function(b){if(!b||b.get("length")===0){return this}var a=this.get("selection");if(!a||a.get("length")===0){return this}a=a.copy().removeObjects(b).freeze();this.set("selection",a.freeze());return this},deselectObject:function(a){if(!a){return this}else{return this.deselectObjects([a])}},updateSelectionAfterContentChange:function(){var a=this.get("arrangedObjects");var b=this.get("selection");var d=this.get("allowsEmptySelection");var c;if(!b){return this}c=b.indexSetForSource(a);if((c&&(c.get("length")!==b.get("length")))||(!c&&(b.get("length")>0))){if(a){b=b.copy().constrain(a).freeze()}else{b=SC.SelectionSet.EMPTY}this.set("selection",b)}if((b.get("length")===0)&&a&&(a.get("length")>0)&&!d){this.selectObject(this.get("firstSelectableObject"),NO)}return this}};sc_require("controllers/controller");sc_require("mixins/selection_support");SC.ArrayController=SC.Controller.extend(SC.Array,SC.SelectionSupport,{content:null,isEditable:YES,orderBy:null,allowsSingleContent:YES,destroyOnRemoval:NO,arrangedObjects:function(){return this}.property().cacheable(),canRemoveContent:function(){var b=this.get("content"),a;a=!!b&&this.get("isEditable")&&this.get("hasContent");if(a){return !b.isEnumerable||(SC.typeOf(b.removeObject)===SC.T_FUNCTION)}else{return NO}}.property("content","isEditable","hasContent"),canReorderContent:function(){var b=this.get("content"),a;a=!!b&&this.get("isEditable")&&!this.get("orderBy");return a&&!!b.isSCArray}.property("content","isEditable","orderBy"),canAddContent:function(){var b=this.get("content"),a;a=b&&this.get("isEditable")&&b.isEnumerable;if(a){return(SC.typeOf(b.addObject)===SC.T_FUNCTION)||(SC.typeOf(b.pushObject)===SC.T_FUNCTION)}else{return NO}}.property("content","isEditable"),hasContent:function(){var a=this.get("content");return !!a&&(!!a.isEnumerable||!!this.get("allowsSingleContent"))}.property("content","allowSingleContent"),status:function(){var b=this.get("content"),a=b?b.get("status"):null;return a?a:SC.Record.READY}.property().cacheable(),addObject:function(a){if(!this.get("canAddContent")){throw new Error("%@ cannot add content".fmt(this))}var b=this.get("content");if(b.isSCArray){b.pushObject(a)}else{if(b.addObject){b.addObject(a)}else{throw new Error("%@.content does not support addObject".fmt(this))}}return this},removeObject:function(a){if(!this.get("canRemoveContent")){throw new Error("%@ cannot remove content".fmt(this))}var b=this.get("content");if(b.isEnumerable){b.removeObject(a)}else{this.set("content",null)}if(this.get("destroyOnRemoval")&&a.destroy){a.destroy()}return this},length:function(){var a=this._scac_observableContent();return a?a.get("length"):0}.property().cacheable(),objectAt:function(a){var b=this._scac_observableContent();return b?b.objectAt(a):undefined},replace:function(g,f,d){if(!d||d.get("length")===0){if(!this.get("canRemoveContent")){throw new Error("%@ cannot remove objects from the current content".fmt(this))}}else{if(!this.get("canReorderContent")){throw new Error("%@ cannot add or reorder the current content".fmt(this))}}var c=this.get("content");var b=[],a,e;if(this.get("destroyOnRemoval")){for(a=0;a<f;a++){b.push(c.objectAt(a+g))}}if(c){c.replace(g,f,d)}for(a=0,e=b.length;a<e;a++){b[a].destroy()}b=null;return this},indexOf:function(b,a){var c=this._scac_observableContent();return c?c.indexOf(b,a):-1},init:function(){arguments.callee.base.apply(this,arguments);this._scac_contentDidChange()},_scac_cached:NO,_scac_observableContent:function(){var b=this._scac_cached;if(b){return b}var e=this.get("content"),d,a;if(SC.none(e)){return(this._scac_cached=[])}if(!e.isEnumerable){b=this.get("allowsSingleContent")?[e]:[];return(this._scac_cached=b)}var f=this.get("orderBy");if(!f){if(e.isSCArray){return(this._scac_cached=e)}else{throw new Error("%@.orderBy is required for unordered content".fmt(this))}}var c=SC.typeOf(f);if(c===SC.T_STRING){f=[f]}else{if(c===SC.T_FUNCTION){d=f}else{if(c!==SC.T_ARRAY){throw new Error("%@.orderBy must be Array, String, or Function".fmt(this))}}}d=d||function(o,n){var j,p,m,g,q;for(var k=0,h=f.get("length");k<h&&!j;k++){p=f.objectAt(k);if(p.search(/(ASC|DESC)/)===0){m=p.match(/^(ASC )?(DESC )?(.*)$/);p=m[3]}else{m=p.match(/^(\S*)\s*(DESC)?(?:ASC)?$/);p=m[1]}a=m[2]?-1:1;if(o){g=o.isObservable?o.get(p):o[p]}if(n){q=n.isObservable?n.get(p):n[p]}j=SC.compare(g,q)*a}return j};return(this._scac_cached=e.toArray().sort(d))},propertyWillChange:function(a){if(a==="content"){this.arrayContentWillChange(0,this.get("length"),0)}else{return arguments.callee.base.apply(this,arguments)}},_scac_arrayContentWillChange:function(e,d,b){if(this.get("orderBy")){var a=this.get("length");e=0;b=a+b-d;d=a}this.arrayContentWillChange(e,d,b);if(this._kvo_enumerable_property_chains){var c=this.slice(e,e+d);this.teardownEnumerablePropertyChains(c)}},_scac_arrayContentDidChange:function(e,d,b){this._scac_cached=NO;if(this.get("orderBy")){var a=this.get("length");e=0;b=a+b-d;d=a}this.arrayContentDidChange(e,d,b);if(this._kvo_enumerable_property_chains){var c=this.slice(e,e+b);this.setupEnumerablePropertyChains(c)}this.updateSelectionAfterContentChange()},_scac_contentDidChange:function(){this._scac_cached=NO;var d=this.get("content"),b=this._scac_content,f=this._scac_arrayContentDidChange,a=this._scac_arrayContentWillChange,c=this._scac_contentStatusDidChange,e=this._scac_enumerableDidChange,g;if(d===b){return this}if(b){if(b.isSCArray){b.removeArrayObservers({target:this,didChange:f,willChange:a})}else{if(b.isEnumerable){b.removeObserver("[]",this,e)}}b.removeObserver("status",this,c);this.teardownEnumerablePropertyChains(b)}this._scac_cached=NO;this._scac_content=d;if(d){if(d.isSCArray){d.addArrayObservers({target:this,didChange:f,willChange:a});g=d.get("length")}else{if(d.isEnumerable){d.addObserver("[]",this,e);g=d.get("length")}else{g=1}}d.addObserver("status",this,c);this.setupEnumerablePropertyChains(d)}else{g=SC.none(d)?0:1}this._scac_length=g;this._scac_contentStatusDidChange();this.arrayContentDidChange(0,0,g);this.updateSelectionAfterContentChange()}.observes("content"),_scac_enumerableDidChange:function(){var a=this.get("content"),c=a?a.get("length"):0,b=this._scac_length;this._scac_length=c;this._scac_cached=NO;this.arrayContentWillChange(0,b,c);this.arrayContentDidChange(0,b,c);this.updateSelectionAfterContentChange()}.observes("orderBy"),_scac_contentStatusDidChange:function(){this.notifyPropertyChange("status")}});sc_require("controllers/controller");SC.ObjectController=SC.Controller.extend({content:null,allowsMultipleContent:NO,hasContent:function(){return !SC.none(this.get("observableContent"))}.property("observableContent"),isEditable:YES,observableContent:function(){var b=this.get("content"),a,c;if(b&&b.isEnumerable){a=b.get("length");c=this.get("allowsMultipleContent");if(a===1){b=b.firstObject()}else{if(a===0||!c){b=null}}if(b&&!c&&b.isEnumerable){b=null}}return b}.property("content","allowsMultipleContent").cacheable(),destroy:function(){var a=this.get("observableContent");if(a&&SC.typeOf(a.destroy)===SC.T_FUNCTION){a.destroy()}this.set("content",null);return this},contentPropertyDidChange:function(b,a){if(a==="*"){this.allPropertiesDidChange()}else{this.notifyPropertyChange(a)}},unknownProperty:function(b,d){if(b==="content"){if(d!==undefined){this.content=d}return this.content}var c=this.get("observableContent"),f,e,a;if(c===null||c===undefined){return undefined}if(d===undefined){if(c.isEnumerable){d=c.getEach(b);f=d.get("length");if(f>0){a=YES;e=d.objectAt(0);while((--f>0)&&a){if(e!==d.objectAt(f)){a=NO}}if(a){d=e}}else{d=undefined}}else{d=(c.isObservable)?c.get(b):c[b]}}else{if(!this.get("isEditable")){throw new Error("%@.%@ is not editable".fmt(this,b))}if(c.isEnumerable){c.setEach(b,d)}else{if(c.isObservable){c.set(b,d)}else{c[b]=d}}}return d},init:function(){arguments.callee.base.apply(this,arguments);if(this.get("content")){this._scoc_contentDidChange()}if(this.get("observableContent")){this._scoc_observableContentDidChange()}},_scoc_contentDidChange:function(){var b=this._scoc_content,c=this.get("content");if(b!==c){this._scoc_content=c;var a=this._scoc_enumerableContentDidChange;if(b&&b.isEnumerable){b.removeObserver("[]",this,a)}if(c&&c.isEnumerable){c.addObserver("[]",this,a)}}}.observes("content"),_scoc_observableContentDidChange:function(){var b=this._scoc_observableContent,d=this.get("observableContent"),a=this.contentPropertyDidChange,c=this._scoc_enumerableContentDidChange;if(b===d){return this}this._scoc_observableContent=d;if(b){if(b.isEnumerable){b.removeObserver("[]",this,c)}else{if(b.isObservable){b.removeObserver("*",this,a)}}}if(d){if(d.isEnumerable){d.addObserver("[]",this,c)}else{if(d.isObservable){d.addObserver("*",this,a)}}}if((b&&b.isEnumerable)||(d&&d.isEnumerable)){this._scoc_enumerableContentDidChange()}else{this.contentPropertyDidChange(d,"*")}}.observes("observableContent"),_scoc_enumerableContentDidChange:function(){var b=this.get("observableContent"),c=this._scoc_observableContentItems,a=this.contentPropertyDidChange;if(c){c.forEach(function(d){if(d.isObservable){d.removeObserver("*",this,a)}},this);c.clear()}if(b&&b.isEnumerable){if(!c){c=SC.Set.create()}b.forEach(function(d){if(c.contains(d)){return}c.add(d);if(d.isObservable){d.addObserver("*",this,a)}},this)}else{c=null}this._scoc_observableContentItems=c;this.contentPropertyDidChange(b,"*");return this}});SC.mixin(Function.prototype,{invokeLater:function(e,a){if(a===undefined){a=1}var d=this;if(arguments.length>2){var b=SC.$A(arguments).slice(2,arguments.length);b.unshift(e);var c=d;d=function(){return c.apply(this,b.slice(1))}}return SC.Timer.schedule({target:e,action:d,interval:a})}});SC.mixin(SC.Object.prototype,{invokeLater:function(d,a){var c,b;if(SC.typeOf(d)===SC.T_STRING){d=this[d]}if(a===undefined){a=1}if(arguments.length>2){b=SC.$A(arguments).slice(2);c=function(){return d.apply(this,b)}}else{c=d}return SC.Timer.schedule({target:this,action:c,interval:a})},invokeOnceLater:function(i,c){var d,g,b,e=this._sc_invokeOnceLaterTimers,h,a;if(SC.typeOf(i)===SC.T_STRING){i=this[i]}if(c===undefined){c=1}if(!e){e=this._sc_invokeOnceLaterTimers={}}b=SC.guidFor(i);h=e[b];if(h){h.invalidate()}if(arguments.length>2){d=SC.$A(arguments).slice(2)}else{d=arguments}g=function(){delete e[b];return i.apply(this,d)};a=SC.Timer.schedule({target:this,action:g,interval:c});e[b]=a;return a},invokeWith:function(b,c,d){if(d===undefined){d=c;c=this}if(!c){c=this}if(SC.typeOf(d)===SC.T_STRING){d=c[d]}var a=this.getPath(b);d.call(c,a,this);return this}});SC.RunLoop=SC.RunLoop.extend({startTime:function(){if(!this._start){this._start=Date.now()}return this._start}.property(),endRunLoop:function(){this.fireExpiredTimers();var a=arguments.callee.base.apply(this,arguments);this.scheduleNextTimeout();return a},scheduleTimer:function(b,a){this._timerQueue=b.removeFromTimerQueue(this._timerQueue);this._timerQueue=b.scheduleInTimerQueue(this._timerQueue,a);return this},cancelTimer:function(a){this._timerQueue=a.removeFromTimerQueue(this._timerQueue);return this},TIMER_ARRAY:[],fireExpiredTimers:function(){if(!this._timerQueue||this._firing){return NO}var d=this.get("startTime"),e=this.TIMER_ARRAY,c,b,a;this._firing=YES;this._timerQueue=this._timerQueue.collectExpiredTimers(e,d);b=e.length;for(c=0;c<b;c++){e[c].fire()}a=e.length>0;e.length=0;this._firing=NO;return a},scheduleNextTimeout:function(){var a=NO,c=this._timerQueue;if(!c){if(this._timerTimeout){this.unscheduleRunLoop()}this._timerTimeout=null}else{var b=c._timerQueueRunTime;this._timerTimeout=this.scheduleRunLoop(b);a=YES}return a}});SC.RunLoop.currentRunLoop=SC.RunLoop.create();SC.RunLoop.runLoopClass=SC.RunLoop;sc_require("system/string");SC.supplement(String.prototype,{capitalize:function(){return SC.String.capitalize(this,arguments)},camelize:function(){return SC.String.camelize(this,arguments)},decamelize:function(){return SC.String.decamelize(this,arguments)},dasherize:function(){return SC.String.dasherize(this,arguments)},escapeCssIdForSelector:function(){return SC.String.escapeCssIdForSelector(this)},loc:function(){var a=SC.$A(arguments);a.unshift(this);return SC.String.loc.apply(SC.String,a)},locWithDefault:function(b){var a=SC.$A(arguments);a.unshift(this);return SC.String.locWithDefault.apply(SC.String,a)},mult:function(a){return SC.String.mult(this,a)}});SC.ActionSupport={target:null,action:null,actionContext:null,fireAction:function(b){var c=this.get("target")||null,a=this.getPath("pane.rootResponder");if(b===undefined){b=this.get("action")}if(b&&a){return a.sendAction(b,c,this,this.get("pane"),this.get("actionContext"),this)}return false}};sc_require("system/responder");SC.ResponderContext={isResponderContext:YES,trace:NO,defaultResponder:null,nextResponder:function(){return this.get("defaultResponder")}.property("defaultResponder").cacheable(),firstResponder:null,nextResponderFor:function(a){var b=a.get("nextResponder");if(typeof b===SC.T_STRING){b=SC.objectForPropertyPath(b,this)}else{if(!b&&(a!==this)){b=this}}return b},responderNameFor:function(a){if(!a){return"(No Responder)"}else{if(a._scrc_name){return a._scrc_name}}var b=this.NAMESPACE;this._findResponderNamesFor(this,3,b?[this.NAMESPACE]:[]);return a._scrc_name||a.toString()},_findResponderNamesFor:function(a,e,d){var b,c;for(b in a){if(b==="nextResponder"){continue}c=a[b];if(c&&c.isResponder){if(c._scrc_name){continue}d.push(b);c._scrc_name=d.join(".");if(e>0){this._findResponderNamesFor(c,e-1,d)}d.pop()}}},makeFirstResponder:function(b,a){var f=this.get("firstResponder"),d=this.get("nextResponder"),e=this.get("trace"),c;if(this._locked){if(e){SC.Logger.log("%@: AFTER ACTION: makeFirstResponder => %@".fmt(this,this.responderNameFor(b)))}this._pendingResponder=b;return}if(e){SC.Logger.log("%@: makeFirstResponder => %@".fmt(this,this.responderNameFor(b)))}if(b){b.set("becomingFirstResponder",YES)}this._locked=YES;this._pendingResponder=null;c=b?b:null;while(c){if(c.get("hasFirstResponder")){break}c=(c===d)?null:this.nextResponderFor(c)}if(!c){c=d}this._notifyWillLoseFirstResponder(f,f,c,a);if(f){f.set("isFirstResponder",NO)}this.beginPropertyChanges();this.set("firstResponder",b);if(b){b.set("isFirstResponder",YES)}this._notifyDidBecomeFirstResponder(b,b,c);this.endPropertyChanges();this._locked=NO;if(this._pendingResponder){this.makeFirstResponder(this._pendingResponder);this._pendingResponder=null}if(b){b.set("becomingFirstResponder",NO)}return this},_notifyWillLoseFirstResponder:function(c,e,b,a){if(!e||e===b){return}e.willLoseFirstResponder(c,a);e.set("hasFirstResponder",NO);var d=this.nextResponderFor(e);if(d){this._notifyWillLoseFirstResponder(c,d,b)}},_notifyDidBecomeFirstResponder:function(b,d,a){if(!d||d===a){return}var c=this.nextResponderFor(d);if(c){this._notifyDidBecomeFirstResponder(b,c,a)}d.set("hasFirstResponder",YES);d.didBecomeFirstResponder(b)},resetFirstResponder:function(){var a=this.get("firstResponder");if(!a){return}a.willLoseFirstResponder();a.didBecomeFirstResponder()},sendAction:function(g,d,c){var a=this.get("firstResponder"),e=this.get("nextResponder"),f=this.get("trace"),h=NO,b;this._locked=YES;if(f){SC.Logger.log("%@: begin action '%@' (%@, %@)".fmt(this,g,d,c))}if(!h&&!a&&this.tryToPerform){h=this.tryToPerform(g,d,c)}while(!h&&a){if(a.tryToPerform){h=a.tryToPerform(g,d,c)}if(!h){a=(a===e)?null:this.nextResponderFor(a)}}if(f){if(!h){SC.Logger.log("%@:  action '%@' NOT HANDLED".fmt(this,g))}else{SC.Logger.log("%@: action '%@' handled by %@".fmt(this,g,this.responderNameFor(a)))}}this._locked=NO;if(b=this._pendingResponder){this._pendingResponder=null;this.makeFirstResponder(b)}return a}};SC.bodyOverflowArbitrator=SC.Object.create({requestHidden:function(b,a){this._makeRequest(b,-1-9*!!a)},requestVisible:function(b,a){this._makeRequest(b,1+9*!!a)},withdrawRequest:function(c){if(!c){return}var a=SC.guidFor(c),b=this._requests[a];if(b){delete this._requests[a];this.setOverflow()}},setOverflow:function(){var a=this._decideOverflow();if(a!==undefined){document.body.style.overflow=a?"auto":"hidden"}},_makeRequest:function(d,c){if(!d){return}var a=SC.guidFor(d),b=this._requests[a];if(b!=c){this._requests[a]=c;this.setOverflow()}},_requests:{},_decideOverflow:function(){var a,e,c,f,b=this._requests,g;for(var d in b){if((g=b[d])<0){a=YES}if(g<-1){c=YES}if(g>0){e=YES}if(g>1){f=YES}}if(f){return YES}if(e&&c){return NO}if(e){return YES}if(a){return NO}return undefined}});sc_require("views/view");SC.ANIMATABLE_PROPERTIES={top:YES,left:YES,bottom:YES,right:YES,width:YES,height:YES,centerX:YES,centerY:YES,opacity:YES,scale:YES,rotate:YES,rotateX:YES,rotateY:YES,rotateZ:YES};SC.LayoutState={START:1,CURRENT:2,END:3};SC.View.reopen({_activeAnimations:null,_activeAnimationsLength:null,_animateLayout:null,_pendingAnimations:null,_prevLayout:null,animate:function(m,j,o,i,a){var l,e,c=NO,n=NO,f,h,d,g=this._pendingAnimations,b;if(typeof m===SC.T_STRING){f={};f[m]=j}else{a=i;i=o;o=j;f=m}d=SC.typeOf(o);if(d===SC.T_NUMBER){o={duration:o}}else{if(d!==SC.T_HASH){throw new Error("Must provide options hash!")}}if(o.callback){a=o.callback;delete o.callback}if(a===undefined){a=i;i=this}if(!i){i=this}if(a){if(typeof a==="string"){a=i[a]}o.target=i;o.method=a}if(o.duration===0){this.invokeNext(function(){this.adjust(f);this.runAnimationCallback(o,null,false)});return this}if(!this.get("isVisibleInWindow")){this.invokeNext(function(){this.adjust(f);this.runAnimationCallback(o,null)});return this}b=o.timing;if(b){if(typeof b!==SC.T_STRING){o.timing="cubic-bezier("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+")"}}else{o.timing="ease"}if(SC.none(o.delay)){o.delay=0}if(!this._prevLayout){this._prevLayout=SC.clone(this.get("layout"))}if(!g){g=this._pendingAnimations={}}h=this._animateLayout||SC.clone(this.get("layout"));if(!SC.none(f.rotate)){if(SC.none(f.rotateZ)){f.rotateZ=f.rotate}delete f.rotate}for(var k in f){if(!f.hasOwnProperty(k)||!SC.ANIMATABLE_PROPERTIES[k]){continue}j=f[k];l=h[k];e=g[k];if(SC.none(j)){throw new Error("Can only animate to an actual value!")}if(e&&(e.duration!==o.duration||e.timing!==o.timing||e.delay!==o.delay)){n=YES;this.runAnimationCallback(e,null,YES)}if(l!==j||n){c=YES;h[k]=j;g[k]=o}}if(c){if(!SC.none(g.height)&&!SC.none(h.centerY)&&SC.none(g.centerY)){if(Math.abs(f.height-this.get("layout").height)>=2){g.centerY=o}}if(!SC.none(g.width)&&!SC.none(h.centerX)&&SC.none(g.centerX)){if(Math.abs(f.width-this.get("layout").width)>=2){g.centerX=o}}this._animateLayout=h;this.invokeNext("_animate");if(this.get("viewState")===SC.CoreView.ATTACHED_SHOWN){this.set("viewState",SC.CoreView.ATTACHED_SHOWN_ANIMATING)}}else{if(!n){this.invokeNext(function(){this.runAnimationCallback(o,null,false)})}}return this},_animate:function(){var a=this._animateLayout;if(a){this.willRenderAnimations();this._animateLayout=null;this.set("layout",a)}},_animateFrames:function(d,e,b,a){if(SC.none(a)){a=0}var c=d[a];this.animate(c.value,{delay:b,duration:c.duration,timing:c.timing},function(f){a+=1;if(!f.isCancelled&&a<d.length){this._animateFrames(d,e,0,a)}else{if(e){e(f)}}});return this},cancelAnimation:function(d){var a=this._activeAnimations,f=this._pendingAnimations,g,c,e,b=NO;switch(d){case SC.LayoutState.START:e=this._prevLayout;break;case SC.LayoutState.CURRENT:e=this.get("liveAdjustments");break;default:e=this._animateLayout}if(this.get("viewState")===SC.CoreView.ATTACHED_SHOWN_ANIMATING){this.set("viewState",SC.CoreView.ATTACHED_SHOWN)}for(c in f){g=f[c];b=YES;delete f[c];this.runAnimationCallback(g,null,YES)}for(c in a){g=a[c];b=YES;delete a[c];this.removeAnimationFromLayout(c,YES);this.runAnimationCallback(g,null,YES)}if(b&&!!e){this.adjust(e)}this._prevLayout=this._activeAnimations=this._pendingAnimations=this._animateLayout=null;return this},didRenderAnimations:function(){if(!SC.platform.supportsCSSTransitions||document.hidden){var b=this._pendingAnimations;for(var a in b){this.removeAnimationFromLayout(a,NO);this.runAnimationCallback(b[a],null,NO)}if(this.get("viewState")===SC.CoreView.ATTACHED_SHOWN_ANIMATING){this.set("viewState",SC.CoreView.ATTACHED_SHOWN)}this._activeAnimations=this._pendingAnimations=null}},liveAdjustments:function(){var a=this._activeAnimations,f=this.$(),d={},c=SC.browser.experimentalCSSNameFor("transform");if(a){for(var e in a){if(e===c){var b=f.css(e),g=SC.browser.experimentalNameFor(window,"CSSMatrix");if(g!==SC.UNSUPPORTED){b=new window[g](b);d.rotateX=Math.atan2(b.m32,b.m33)*(180/Math.PI);d.rotateY=Math.atan2(-b.m31,Math.sqrt(Math.pow(b.m32,2)+Math.pow(b.m33,2)))*(180/Math.PI);d.rotateZ=-Math.atan2(b.m21,b.m11)*(180/Math.PI);d.scale=Math.sqrt(Math.pow(b.m11,2)+Math.pow(b.m12,2)+Math.pow(b.m13,2));if(b.m11<0){d.scale=d.scale*-1}d.left=b.e;d.top=b.f}else{b=b.match(/^matrix\((.*)\)$/)[1].split(/,\s*/);if(b){d.left=parseInt(b[4],10);d.top=parseInt(b[5],10)}}}else{d[e]=parseInt(f.css(e),10)}}}return d}.property(),removeAnimationFromLayout:function(b,c){var a=this._activeAnimations,e=this.get("layer");if(!!e&&c){var f=[];for(var d in a){if(d!==b){f.push(a[d].css)}}e.style[SC.browser.experimentalStyleNameFor("transition")]=f.join(", ")}},resetAnimation:function(){return this.cancelAnimation()},runAnimationCallback:function(c,a,b){var e=c.method,d=c.target;if(e){e.call(d,{event:a,view:this,isCancelled:b});delete c.method;delete c.target}},transitionDidEnd:function(b){var c=b.originalEvent.propertyName,a=this._activeAnimations,d;if(c==="margin-left"){c="centerX"}if(c==="margin-top"){c="centerY"}d=a?a[c]:null;if(d){delete a[c];this.removeAnimationFromLayout(c,YES);this._activeAnimationsLength-=1;if(this._activeAnimationsLength===0){if(this.get("viewState")===SC.CoreView.ATTACHED_SHOWN_ANIMATING){this.set("viewState",SC.CoreView.ATTACHED_SHOWN)}this._activeAnimations=this._prevLayout=null}this.runAnimationCallback(d,b,NO)}},willRenderAnimations:function(){if(SC.platform.supportsCSSTransitions&&!document.hidden){var e=this._pendingAnimations;if(e){var b=this._activeAnimations;if(!b){this._activeAnimationsLength=0;b={}}for(var d in e){if(!e.hasOwnProperty(d)){continue}var a=b[d],c=e[d];if(a){this.runAnimationCallback(a,null,YES)}b[d]=c;this._activeAnimationsLength+=1}this._activeAnimations=b;this._pendingAnimations=null}}}});sc_require("ext/string");sc_require("views/view");sc_require("views/view/animation");SC.CSS_TRANSFORM_NAMES=["rotateX","rotateY","rotateZ","scale"];SC.CSS_TRANSFORM_MAP={rotate:function(){return null},rotateX:function(a){if(SC.typeOf(a)===SC.T_NUMBER){a+="deg"}return"rotateX("+a+")"},rotateY:function(a){if(SC.typeOf(a)===SC.T_NUMBER){a+="deg"}return"rotateY("+a+")"},rotateZ:function(a){if(SC.typeOf(a)===SC.T_NUMBER){a+="deg"}return"rotateZ("+a+")"},scale:function(a){if(SC.typeOf(a)===SC.T_ARRAY){a=a.join(", ")}return"scale("+a+")"}};SC.View.LayoutStyleCalculator={_valueOrNull:function(a){return a===undefined?null:a},_prepareStyle:function(d){var f=this._valueOrNull(d.border),b={marginLeft:null,marginTop:null};b.bottom=d.bottom;b.right=d.right;b.left=d.left;b.top=d.top;b.centerX=d.centerX;b.centerY=d.centerY;b.height=d.height;b.width=d.width;b.borderTopWidth=d.borderTop!==undefined?d.borderTop:f;b.borderRightWidth=d.borderRight!==undefined?d.borderRight:f;b.borderBottomWidth=d.borderBottom!==undefined?d.borderBottom:f;b.borderLeftWidth=d.borderLeft!==undefined?d.borderLeft:f;b.maxHeight=this._valueOrNull(d.maxHeight);b.maxWidth=this._valueOrNull(d.maxWidth);b.minWidth=this._valueOrNull(d.minWidth);b.minHeight=this._valueOrNull(d.minHeight);b.zIndex=(d.zIndex!=null)?d.zIndex.toString():null;b.opacity=(d.opacity!=null)?d.opacity.toString():null;b.backgroundPosition=this._valueOrNull(d.backgroundPosition);if(SC.platform.supportsCSSTransforms){var a=SC.browser.experimentalStyleNameFor("transform"),g=[],l=SC.CSS_TRANSFORM_MAP;for(var c=0,e=SC.CSS_TRANSFORM_NAMES.length;c<e;c++){var h=SC.CSS_TRANSFORM_NAMES[c],j=d[h];if(j!=null){g.push(l[h](j))}}b[a]=g.length>0?g.join(" "):null;var n=SC.browser.experimentalStyleNameFor("transformOrigin"),m=d.transformOriginX,k=d.transformOriginY;if(m==null&&k==null){b[n]=null}else{if(m==null){m=0.5}if(k==null){k=0.5}b[n]=(m*100)+"% "+(k*100)+"%"}}if(SC.platform.supportsCSSTransitions){b[SC.browser.experimentalStyleNameFor("transition")]=null}return b},_prepareState:function(a){var b={};b.hasBottom=(a.bottom!=null);b.hasRight=(a.right!=null);b.hasLeft=(a.left!=null);b.hasTop=(a.top!=null);b.hasCenterX=(a.centerX!=null);b.hasCenterY=(a.centerY!=null);b.hasHeight=(a.height!=null);b.hasWidth=(a.width!=null);b.hasMaxWidth=(a.maxWidth!=null);b.hasMaxHeight=(a.maxHeight!=null);return b},_invalidAutoValue:function(a,c){var b=SC.Error.desc("%@.layout() you cannot use %@:auto if staticLayout is disabled".fmt(a,c),"%@".fmt(a),-1);SC.Logger.error(b.toString());throw b},_calculatePosition:function(c,b,l){var d,m,o,e,n,i,h,g,k;if(l==="X"){d="left";m="right";o="width";g="borderLeftWidth";k="borderRightWidth";e=b.hasLeft;n=b.hasRight;i=b.hasWidth;h=b.hasMaxWidth}else{d="top";m="bottom";o="height";g="borderTopWidth";k="borderBottomWidth";e=b.hasTop;n=b.hasBottom;i=b.hasHeight;h=b.hasMaxHeight}c[d]=this._cssNumber(c[d]);c[m]=this._cssNumber(c[m]);var j=this._cssNumber(c[g]),f=this._cssNumber(c[k]),a=c[o];c[g]=j;c[k]=f;if(a>=1){a-=(j+f)}c[o]=this._cssNumber(a);if(e){if(n&&i){c[m]=null}}else{if(!n||(n&&!i&&!h)){c[d]=0}}if(!i&&!n){c[m]=0}},_calculateCenter:function(b,l){var o,a,c,m,e,f,k;if(l==="X"){o="width";a="centerX";c="left";m="right";e="marginLeft";f="borderLeftWidth";k="borderRightWidth"}else{o="height";a="centerY";c="top";m="bottom";e="marginTop";f="borderTopWidth";k="borderBottomWidth"}b[c]="50%";var j=this._cssNumber(b[f]),d=this._cssNumber(b[k]),i=b[o],h=b[a],g=SC.isPercentage(i),n;b[f]=j;b[k]=d;if(SC.none(i)){b[e]="50%"}else{n=h-i/2;b[e]=(g)?Math.floor(n*100)+"%":Math.floor(n)}if(i>1){i-=(j+d)}b[o]=this._cssNumber(i)||0;b[m]=b[a]=null},_cssNumber:function(a){if(a==null){return null}else{if(a===SC.LAYOUT_AUTO){return SC.LAYOUT_AUTO}else{if(SC.isPercentage(a)){return(a*100)+"%"}else{return Math.floor(a)}}}},calculate:function(a){var d=a.get("layout"),h=a._activeAnimations,f,g=a.get("useStaticLayout"),c;if(g&&d===SC.View.prototype.layout){return{}}c=this._prepareStyle(d);f=this._prepareState(c);if(!g){if(c.width===SC.LAYOUT_AUTO){this._invalidAutoValue(a,"width")}if(c.height===SC.LAYOUT_AUTO){this._invalidAutoValue(a,"height")}}if(f.hasLeft||f.hasRight||!f.hasCenterX){this._calculatePosition(c,f,"X")}else{this._calculateCenter(c,"X")}if(f.hasTop||f.hasBottom||!f.hasCenterY){this._calculatePosition(c,f,"Y")}else{this._calculateCenter(c,"Y")}this._calculateAnimations(c,h,a.get("hasAcceleratedLayer"));for(var b in c){var e=c[b];if(typeof e===SC.T_NUMBER){c[b]=(e+"px")}}return c},_calculateAnimations:function(b,k,e){var j,d;if(e){d=YES;if(k&&(k.top||k.left)){for(j in k){if(SC.CSS_TRANSFORM_MAP[j]&&((k.top&&k.top.duration!==k[j].duration)||(k.left&&k.left.duration!==k[j].duration))){d=NO}}}if(d){var a=SC.browser.experimentalStyleNameFor("transform"),g=b[a];if(g){g+=" "}else{g=""}b[a]=g+"translateX("+b.left+"px) translateY("+b.top+"px)";b.left=0;b.top=0;if(SC.platform.supportsCSS3DTransforms){b[a]+=" translateZ(0px)"}}}if(k){if(SC.platform.supportsCSSTransitions){var h=[];for(j in k){var f=k[j],l=!!SC.CSS_TRANSFORM_MAP[j],c=d&&(j==="top"||j==="left");if(SC.platform.supportsCSSTransforms&&(c||l)){delete k[j];j=SC.browser.experimentalCSSNameFor("transform");var i=k[j];if(i){f=i}else{k[j]=f}}if(j==="centerX"){j="margin-left"}if(j==="centerY"){j="margin-top"}f.css=j+" "+f.duration+"s "+f.timing+" "+f.delay+"s";if(h.indexOf(f.css)<0){h.push(f.css)}}b[SC.browser.experimentalStyleNameFor("transition")]=h.join(", ")}else{}}}};SC.View.reopen({layoutStyle:function(){return SC.View.LayoutStyleCalculator.calculate(this)}.property("hasAcceleratedLayer","useStaticLayout").cacheable()});sc_require("views/view");sc_require("views/view/layout_style");SC.LAYOUT_HORIZONTAL="sc-layout-horizontal";SC.LAYOUT_VERTICAL="sc-layout-vertical";SC.FULL_WIDTH={left:0,right:0};SC.FULL_HEIGHT={top:0,bottom:0};SC.ANCHOR_CENTER={centerX:0,centerY:0};SC.LAYOUT_AUTO="auto";SC._ROTATION_VALUE_REGEX=/^\-?\d+(\.\d*)?(rad|deg)$/;SC._SCALE_VALUE_REGEX=/^\d+(,\d+){0,2}$/;SC.View.reopen({hasLayout:YES,backgroundColor:null,_previousLayout:null,useStaticLayout:NO,init:function(a){a();this._previousLayout=this.get("layout");var b=this.childViewLayout;if(b){this.set("childViewsNeedLayout",true);this.layoutChildViewsIfNeeded();if(this.get("isChildViewLayoutLive")){this.addObserver("childViews.[]",this,this._cvl_childViewsDidChange);this.addObserver("childViewLayoutOptions",this,this._cvl_childViewLayoutDidChange);this._cvl_setupChildViewsLiveLayout();if(!this.get("isFixedSize")&&b.layoutDependsOnSize&&b.layoutDependsOnSize(this)){this.addObserver("frame",this,this._cvl_childViewLayoutDidChange)}}}}.enhance(),destroy:function(a){this._previousLayout=null;return a()}.enhance(),propertyDidChange:function(b,d,c){var a=false;if(typeof this.layout==="function"&&this._kvo_dependents){var e=this._kvo_dependents[b];if(e&&e.indexOf("layout")!=-1){a=true}}if(b==="layout"||a){this.layoutDidChange()}arguments.callee.base.apply(this,arguments)},adjust:function(b,f){if(b===undefined){return this}var c=this.get("layout"),e=NO,d=this._animateLayout,h,g;if(SC.typeOf(b)===SC.T_STRING){g={};g[b]=f}else{g=b}for(b in g){if(!g.hasOwnProperty(b)){continue}f=g[b];h=c[b];if(d){if(f===null){delete d[b]}else{d[b]=f}if(this._pendingAnimations[b]){delete this._pendingAnimations[b]}}if(f===undefined||h==f){continue}if(!e){c=SC.clone(c)}if(f===null){delete c[b]}else{c[b]=f}e=YES}if(e){var a=this.get("transitionAdjust");if(this.get("viewState")&SC.CoreView.IS_SHOWN&&a){this._transitionAdjust(c)}else{this.set("layout",c)}}return this},_transitionAdjust:function(c){var b=this.get("transitionAdjust"),a=this.get("transitionAdjustOptions")||{};b.run(this,a,c)},didTransitionAdjust:function(){},layout:{top:0,left:0,bottom:0,right:0},isFixedLayout:function(){return this.get("isFixedPosition")&&this.get("isFixedSize")}.property("isFixedPosition","isFixedSize").cacheable(),isFixedPosition:function(){var c=this.get("layout"),b,d,a;b=c.left!==undefined;if(!b){b=c.width===undefined||(c.width!==undefined&&c.right===undefined&&c.centerX===undefined)}d=c.top!==undefined;if(!d){d=c.height===undefined||(c.height!==undefined&&c.bottom===undefined&&c.centerY===undefined)}a=(b&&d&&c.left!==SC.LAYOUT_AUTO&&c.top!==SC.LAYOUT_AUTO);if(a){a=(!SC.isPercentage(c.top)&&!SC.isPercentage(c.left))}return a}.property("layout").cacheable(),isFixedSize:function(){return this.get("isFixedHeight")&&this.get("isFixedWidth")}.property("isFixedWidth","isFixedHeight").cacheable(),isFixedHeight:function(){var a=this.get("layout");return(a.height!==undefined)&&(a.height!==SC.LAYOUT_AUTO)&&!SC.isPercentage(a.height)}.property("layout").cacheable(),isFixedWidth:function(){var a=this.get("layout");return(a.width!==undefined)&&(a.width!==SC.LAYOUT_AUTO)&&!SC.isPercentage(a.width)}.property("layout").cacheable(),convertFrameToView:function(b,a){return this._convertFrameFromViewHelper(b,this,a)},convertFrameFromView:function(b,a){return this._convertFrameFromViewHelper(b,a,this)},_convertFrameFromViewHelper:function(d,e,a){var l=d.x,j=d.y,b=d.width,c=d.height,k,h;if(e){k=e;while(k&&(h=k.get("frame"))){if(h.scale&&h.scale!=1){l*=h.scale;j*=h.scale;b*=h.scale;c*=h.scale}l+=h.x;j+=h.y;k=k.get("layoutView")}}if(a){var m=[];k=a;while(k&&k.get("frame")){m.unshift(k);k=k.get("layoutView")}for(var g=0;g<m.length;g++){k=m[g];h=k.get("frame");l-=h.x;j-=h.y;if(h.scale&&h.scale!=1){l/=h.scale;j/=h.scale;b/=h.scale;c/=h.scale}}}return{x:l,y:j,width:b,height:c}},scrollToVisible:function(){var a=this.get("parentView");while(a&&!a.get("isScrollable")){a=a.get("parentView")}if(a){a.scrollToVisible();return a.scrollToVisible(this)}else{return NO}},_effectiveBorderFor:function(a,b){return((b[a]!==undefined)?b[a]:b.border)||0},_adjustForBorder:function(e,c){var f=this._effectiveBorderFor("borderTop",c),d=this._effectiveBorderFor("borderLeft",c),b=this._effectiveBorderFor("borderBottom",c),a=this._effectiveBorderFor("borderRight",c);e.x+=d;e.y+=f;e.width-=(d+a);e.height-=(f+b);return e},_adjustForScale:function(f,c,e,b,a){var g=f.width;var d=f.height;if(d<0){d=0}if(g<0){g=0}if(!SC.platform.supportsCSSTransforms){f.scale=1;f.transformOriginX=f.transformOriginY=0.5;f.originalWidth=g;f.originalHeight=d;return f}e=e==null?c.scale:e;b=b==null?c.transformOriginX:b;a=a==null?c.transformOriginY:a;if(e==null){e=1}if(b==null){b=0.5}if(a==null){a=0.5}if(e!==1){f=SC.scaleRect(f,e,b,a)}f.scale=e;f.transformOriginX=b;f.transformOriginY=a;f.originalWidth=g;f.originalHeight=d;if(f.height<0){f.height=0}if(f.width<0){f.width=0}return f},computeFrameWithParentFrame:function(m,g){var o,p=this.get("layout");if(this.get("useStaticLayout")){o=m();o=o?this._adjustForBorder(o,p):null;o=o?this._adjustForScale(o,p):null;return o}o={};var n,v,l=SC.LAYOUT_AUTO,k=this.get("parentView"),w,s,q,h,c,a=p.right,b=p.left,u=p.top,e=p.bottom,r=p.width,d=p.height,j=p.centerX,i=p.centerY;if(r===l){n=SC.Error.desc(("%@.layout() cannot use width:auto if staticLayout is disabled").fmt(this),"%@".fmt(this),-1);SC.Logger.error(n.toString());throw n}if(d===l){n=SC.Error.desc(("%@.layout() cannot use height:auto if staticLayout is disabled").fmt(this),"%@".fmt(this),-1);SC.Logger.error(n.toString());throw n}if(!g){g=this.computeParentDimensions(p)}h=g.height;c=g.width;if(!SC.none(b)){if(SC.isPercentage(b)){o.x=c*b}else{o.x=b}if(r!==undefined){if(r===l){o.width=l}else{if(SC.isPercentage(r)){o.width=c*r}else{o.width=r}}}else{o.width=c-o.x;if(a&&SC.isPercentage(a)){o.width=o.width-(a*c)}else{o.width=o.width-(a||0)}}}else{if(!SC.none(a)){if(SC.none(r)){if(SC.isPercentage(a)){o.width=c-(c*a)}else{o.width=c-a}o.x=0}else{if(r===l){o.width=l}else{if(SC.isPercentage(r)){o.width=c*r}else{o.width=(r||0)}}if(SC.isPercentage(r)){o.x=c-(a*c)-o.width}else{o.x=c-a-o.width}}}else{if(!SC.none(j)){if(r===l){o.width=l}else{if(SC.isPercentage(r)){o.width=r*c}else{o.width=(r||0)}}if(SC.isPercentage(j)){o.x=(c-o.width)/2+(j*c)}else{o.x=(c-o.width)/2+j}}else{o.x=0;if(SC.none(r)){o.width=c}else{if(r===l){o.width=l}if(SC.isPercentage(r)){o.width=r*c}else{o.width=(r||0)}}}}}if(!SC.none(u)){if(SC.isPercentage(u)){o.y=u*h}else{o.y=u}if(d!==undefined){if(d===l){o.height=l}else{if(SC.isPercentage(d)){o.height=d*h}else{o.height=d}}}else{if(e&&SC.isPercentage(e)){o.height=h-o.y-(e*h)}else{o.height=h-o.y-(e||0)}}}else{if(!SC.none(e)){if(SC.none(d)){if(SC.isPercentage(e)){o.height=h-(e*h)}else{o.height=h-e}o.y=0}else{if(d===l){o.height=l}if(d&&SC.isPercentage(d)){o.height=d*h}else{o.height=(d||0)}if(SC.isPercentage(e)){o.y=h-(e*h)-o.height}else{o.y=h-e-o.height}}}else{if(!SC.none(i)){if(d===l){o.height=l}if(d&&SC.isPercentage(d)){o.height=d*h}else{o.height=(d||0)}if(SC.isPercentage(i)){o.y=(h-o.height)/2+(i*h)}else{o.y=(h-o.height)/2+i}}else{o.y=0;if(SC.none(d)){o.height=h}else{if(d===l){o.height=l}if(SC.isPercentage(d)){o.height=d*h}else{o.height=d||0}}}}}o.x=Math.floor(o.x);o.y=Math.floor(o.y);if(o.height!==l){o.height=Math.floor(o.height)}if(o.width!==l){o.width=Math.floor(o.width)}if(o.height===l||o.width===l){v=this.get("layer");if(o.height===l){o.height=v?v.clientHeight:0}if(o.width===l){o.width=v?v.clientWidth:0}}o=this._adjustForBorder(o,p);if((p.maxHeight!=null)&&(o.height>p.maxHeight)){o.height=p.maxHeight}if((p.minHeight!=null)&&(o.height<p.minHeight)){o.height=p.minHeight}if((p.maxWidth!=null)&&(o.width>p.maxWidth)){o.width=p.maxWidth}if((p.minWidth!=null)&&(o.width<p.minWidth)){o.width=p.minWidth}if(k&&k.isScrollContainer){k=k.get("parentView");o.x-=k.get("horizontalScrollOffset");o.y-=k.get("verticalScrollOffset");w=k.get("scale");s=q=0}o=this._adjustForScale(o,p,w,s,q);return o}.enhance(),computeParentDimensions:function(e){var b,c=this.get("parentView"),a=(c)?c.get("frame"):null;if(a){b={width:a.width,height:a.height}}else{var d=e||{};b={width:(d.left||0)+(d.width||0)+(d.right||0),height:(d.top||0)+(d.height||0)+(d.bottom||0)}}return b},borderFrame:function(){var f=this.get("layout"),a=this.get("frame"),c=(a&&!SC.none(a.scale))?a.scale:1,d=this._effectiveBorderFor("borderTop",f),b=d*c,k=this._effectiveBorderFor("borderRight",f),e=k*c,i=this._effectiveBorderFor("borderBottom",f),g=i*c,h=this._effectiveBorderFor("borderLeft",f),j=h*c;return a?{x:a.x-j,y:a.y-b,width:a.width+j+e,height:a.height+b+g,scale:c,originalWidth:a.originalWidth+h+k,originalHeight:a.originalHeight+d+i,transformOriginX:a.transformOriginX,transformOriginY:a.transformOriginY}:null}.property("frame").cacheable(),parentViewDidResize:function(k){var c=!this.get("isFixedPosition");var i=this.get("useStaticLayout"),f=k?k.height:0,a=f!==this._scv_parentHeight,b=this.get("isFixedHeight"),h=i||(a&&!b),j=k?k.width:0,e=j!==this._scv_parentWidth,g=this.get("isFixedWidth"),d=i||(e&&!g);this._scv_parentHeight=f;this._scv_parentWidth=j;if(h||d){this.viewDidResize()}else{if(c){this._viewFrameDidChange()}}},viewDidResize:function(){this._viewFrameDidChange();var d=this.childViews,e=this.get("frame"),b,a,c;for(a=0;a<(b=d.length);++a){c=d[a];c.tryToPerform("parentViewDidResize",e)}},_viewFrameDidChange:function(){this.notifyPropertyChange("frame");this._callOnChildViews("_sc_view_clippingFrameDidChange")},beginLiveResize:function(){if(this.willBeginLiveResize){this.willBeginLiveResize()}var d=this.get("childViews"),b=d.length,a,c;for(a=0;a<b;++a){c=d[a];if(c.beginLiveResize){c.beginLiveResize()}}return this},endLiveResize:function(){var d=this.get("childViews"),b=d.length,a,c;for(a=b-1;a>=0;--a){c=d[a];if(c.endLiveResize){c.endLiveResize()}}if(this.didEndLiveResize){this.didEndLiveResize()}return this},layoutView:function(){return this.get("parentView")}.property("parentView").cacheable(),layoutDidChange:function(){var b=this.get("layout");if(!SC.none(b.rotate)){if(SC.none(b.rotateZ)){b.rotateZ=b.rotate}delete b.rotate}this._checkForResize();var a=this.get("layoutView");if(a){a.set("childViewsNeedLayout",YES);a.layoutDidChangeFor(this);if(a.get("childViewsNeedLayout")){a.invokeOnce(a.layoutChildViewsIfNeeded)}}else{this.invokeOnce(this.updateLayout)}return this},_checkForResize:function(){var b=this._previousLayout,c=this.get("layout"),a=true;if(b&&!SC.none(b.width)&&!SC.none(b.height)&&b!==c){var e,d;d=this._adjustForBorder({x:0,y:0,width:b.width,height:b.height},b);e=this._adjustForBorder({x:0,y:0,width:c.width||0,height:c.height||0},c);if(d.width===e.width&&d.height===e.height){a=false}}if(a){this.viewDidResize()}else{this._viewFrameDidChange()}this._previousLayout=c},childViewsNeedLayout:NO,layoutDidChangeFor:function(b){var a=this._needLayoutViews;if(!a){a=this._needLayoutViews=SC.CoreSet.create()}a.add(b)},layoutChildViewsIfNeeded:function(a){if(this.get("childViewsNeedLayout")){this.layoutChildViews(a);this.set("childViewsNeedLayout",NO)}return this},layoutChildViews:function(d){var c=this.childViewLayout,e,a,b;if(c){c.layoutChildViews(this)}e=this._needLayoutViews;if(e){for(b=0,a=e.length;b<a;++b){e[b].updateLayout(d)}e.clear()}},_cvl_childViewLayoutDidChange:function(){this.set("childViewsNeedLayout",true);this.invokeOnce(this.layoutChildViewsIfNeeded)},_cvl_childViewsDidChange:function(){this._cvl_teardownChildViewsLiveLayout();this._cvl_setupChildViewsLiveLayout();this.set("childViewsNeedLayout",true);this.invokeOnce(this.layoutChildViewsIfNeeded)},_cvl_setupChildViewsLiveLayout:function(){var a=this.childViewLayout,h,b=a.childLayoutProperties||[];h=this._cvl_childViews=this.get("childViews");for(var d=0,g=b.length;d<g;d++){var f=b[d];for(var c=0,k=h.get("length");c<k;c++){var e=h.objectAt(c);if(!e.get("useAbsoluteLayout")&&!e.get("useStaticLayout")){e.addObserver(f,this,this._cvl_childViewLayoutDidChange)}}}},_cvl_teardownChildViewsLiveLayout:function(){var a=this.childViewLayout,h=this._cvl_childViews||[],b=a.childLayoutProperties||[];for(var d=0,g=b.length;d<g;d++){var f=b[d];for(var c=0,k=h.get("length");c<k;c++){var e=h.objectAt(c);if(!e.get("useAbsoluteLayout")&&!e.get("useStaticLayout")){e.removeObserver(f,this,this._cvl_childViewLayoutDidChange)}}}},updateLayout:function(a){this._doUpdateLayout(a);return this},renderLayout:function(a){a.setStyle(this.get("layoutStyle"))},applyAttributesToContext:function(c,b){c(b);this.renderLayout(b,true);if(this.get("useStaticLayout")){b.addClass("sc-static-layout")}var a=this.get("backgroundColor");if(!SC.none(a)||this._scv_hasBackgroundColor){this._scv_hasBackgroundColor=YES;if(a){b.setStyle("backgroundColor",a)}else{b.removeStyle("backgroundColor")}}}.enhance(),childViewLayout:null,childViewLayoutOptions:null,isChildViewLayoutLive:true,_doUpdateLayout:function(b){var d=this.get("_isRendered"),a=this.get("isVisibleInWindow"),c=true;if(d){if(a||b){this._doUpdateLayoutStyle()}else{this._layoutStyleNeedsUpdate=true}}else{c=false}return c},_doUpdateLayoutStyle:function(){var a;a=this.renderContext(this.get("layer"));a.setStyle(this.get("layoutStyle"));a.update();this._layoutStyleNeedsUpdate=false;this._updatedLayout()},_executeQueuedUpdates:function(a){a();if(this._layoutStyleNeedsUpdate){this._doUpdateLayoutStyle()}}.enhance(),_notifyDidAttach:function(){if(this.get("useStaticLayout")){this.viewDidResize()}if(this.didAppendToDocument){this.didAppendToDocument()}},_adopted:function(a){this._checkForResize();this._callOnChildViews("_ancestorDidChangeParent")},_orphaned:function(a){arguments.callee.base.apply(this,arguments);if(!this.isDestroyed){this._checkForResize();this._callOnChildViews("_ancestorDidChangeParent")}},_updatedContent:function(){arguments.callee.base.apply(this,arguments);if(this.get("useStaticLayout")){this.viewDidResize()}},_updatedLayout:function(){this.didRenderAnimations()},transitionAdjust:null,transitionAdjustOptions:null});SC.View.mixin({convertLayoutToAnchoredLayout:function(f,m){var h={top:0,left:0,width:m.width,height:m.height},d=m.width,k=m.height,l=f.right,a=f.left,j=f.top,g=f.bottom,i=f.width,e=f.height,c=f.centerX,b=f.centerY;if(!SC.none(a)){if(SC.isPercentage(a)){h.left=a*d}else{h.left=a}if(i!==undefined){if(i===SC.LAYOUT_AUTO){h.width=SC.LAYOUT_AUTO}else{if(SC.isPercentage(i)){h.width=i*d}else{h.width=i}}}else{if(l&&SC.isPercentage(l)){h.width=d-h.left-(l*d)}else{h.width=d-h.left-(l||0)}}}else{if(!SC.none(l)){if(SC.none(i)){h.left=0;if(l&&SC.isPercentage(l)){h.width=d-(l*d)}else{h.width=d-(l||0)}}else{if(i===SC.LAYOUT_AUTO){h.width=SC.LAYOUT_AUTO}else{if(SC.isPercentage(i)){h.width=i*d}else{h.width=i}if(SC.isPercentage(l)){h.left=d-(h.width+l)}else{h.left=d-(h.width+l)}}}}else{if(!SC.none(c)){if(i&&SC.isPercentage(i)){h.width=(i*d)}else{h.width=(i||0)}h.left=((d-h.width)/2);if(SC.isPercentage(c)){h.left=h.left+c*d}else{h.left=h.left+c}}else{if(!SC.none(i)){h.left=0;if(i===SC.LAYOUT_AUTO){h.width=SC.LAYOUT_AUTO}else{if(SC.isPercentage(i)){h.width=i*d}else{h.width=i}}}else{h.left=0;h.width=0}}}}if(f.minWidth!==undefined){h.minWidth=f.minWidth}if(f.maxWidth!==undefined){h.maxWidth=f.maxWidth}if(!SC.none(j)){if(SC.isPercentage(j)){h.top=j*k}else{h.top=j}if(e!==undefined){if(e===SC.LAYOUT_AUTO){h.height=SC.LAYOUT_AUTO}else{if(SC.isPercentage(e)){h.height=e*k}else{h.height=e}}}else{h.height=k-h.top;if(g&&SC.isPercentage(g)){h.height=h.height-(g*k)}else{h.height=h.height-(g||0)}}}else{if(!SC.none(g)){if(SC.none(e)){h.top=0;if(g&&SC.isPercentage(g)){h.height=k-(g*k)}else{h.height=k-(g||0)}}else{if(e===SC.LAYOUT_AUTO){h.height=SC.LAYOUT_AUTO}else{if(SC.isPercentage(e)){h.height=e*k}else{h.height=e}h.top=k-h.height;if(SC.isPercentage(g)){h.top=h.top-(g*k)}else{h.top=h.top-g}}}}else{if(!SC.none(b)){if(e&&SC.isPercentage(e)){h.height=(e*k)}else{h.height=(e||0)}h.top=((k-h.height)/2);if(SC.isPercentage(b)){h.top=h.top+b*k}else{h.top=h.top+b}}else{if(!SC.none(e)){h.top=0;if(e===SC.LAYOUT_AUTO){h.height=SC.LAYOUT_AUTO}else{if(SC.isPercentage(e)){h.height=e*k}else{h.height=e}}}else{h.top=0;h.height=0}}}}if(h.top){h.top=Math.floor(h.top)}if(h.bottom){h.bottom=Math.floor(h.bottom)}if(h.left){h.left=Math.floor(h.left)}if(h.right){h.right=Math.floor(h.right)}if(h.width!==SC.LAYOUT_AUTO){h.width=Math.floor(h.width)}if(h.height!==SC.LAYOUT_AUTO){h.height=Math.floor(h.height)}if(f.minHeight!==undefined){h.minHeight=f.minHeight}if(f.maxHeight!==undefined){h.maxHeight=f.maxHeight}return h},convertLayoutToCustomLayout:function(b,a,c){}});sc_require("views/view");sc_require("views/view/layout");sc_require("views/view/layout_style");SC.View.reopen({wantsAcceleratedLayer:NO,hasAcceleratedLayer:function(){return(SC.platform.supportsCSSTransforms&&this.get("wantsAcceleratedLayer")&&this.get("isFixedLayout"))}.property("wantsAcceleratedLayer","isFixedLayout").cacheable()});sc_require("views/view");SC.View.reopen({cursor:function(a,c){var b;if(c){this._setCursor=c}if(this._setCursor!==undefined){return this._setCursor}b=this.get("parentView");if(this.get("shouldInheritCursor")&&b){return b.get("cursor")}return null}.property("parentView","shouldInheritCursor").cacheable(),applyAttributesToContext:function(b,a){var c=this.get("cursor");if(c){a.addClass(c.get("className"))}b(a)}.enhance(),shouldInheritCursor:YES});sc_require("views/view");SC.CoreView.mixin({ENABLED:8,IS_DISABLED:16,DISABLED:17,DISABLED_BY_PARENT:18,DISABLED_AND_BY_PARENT:19});SC.View.reopen({enabledState:SC.CoreView.ENABLED,isEnabled:YES,isEnabledBindingDefault:SC.Binding.oneWay().bool(),isEnabledInPane:function(){return this.get("enabledState")===SC.CoreView.ENABLED}.property("enabledState").cacheable(),shouldInheritEnabled:true,_doEnable:function(){var b=true,a=this.get("enabledState");if(a===SC.CoreView.DISABLED){this._callOnChildViews("_parentDidEnableInPane");this._gotoEnabledState()}else{if(a===SC.CoreView.DISABLED_AND_BY_PARENT){this._gotoDisabledByParentState()}else{b=false}}return b},_doDisable:function(){var b=true,a=this.get("enabledState");if(a===SC.CoreView.ENABLED){if(this.get("isFirstResponder")){this.resignFirstResponder()}this._callOnChildViews("_parentDidDisableInPane");this._gotoDisabledState()}else{if(a===SC.CoreView.DISABLED_BY_PARENT){this._gotoDisabledAndByParentState()}else{b=false}}return b},init:function(a){a();if(!this.get("isEnabled")){this._doDisable()}}.enhance(),_sc_view_isEnabledDidChange:function(){this.invokeOnce(this._doUpdateEnabled)}.observes("isEnabled"),_doUpdateEnabled:function(){var a=this.get("viewState");if(this.get("isEnabled")){this._doEnable()}else{this._doDisable()}switch(a){case SC.CoreView.ATTACHED_SHOWN:case SC.CoreView.ATTACHED_SHOWING:case SC.CoreView.ATTACHED_BUILDING_IN:this._doUpdateEnabledStyle();break;default:this._enabledStyleNeedsUpdate=true}},_executeQueuedUpdates:function(a){a();if(this._enabledStyleNeedsUpdate){this._doUpdateEnabledStyle()}}.enhance(),_doUpdateEnabledStyle:function(){var a=this.get("isEnabled");this.$().toggleClass("disabled",!a);this.$().attr("aria-disabled",!a?true:null);this._enabledStyleNeedsUpdate=false},_parentDidEnableInPane:function(){var a=this.get("enabledState");if(this.get("shouldInheritEnabled")){if(a===SC.CoreView.DISABLED_BY_PARENT){this._gotoEnabledState()}else{if(a===SC.CoreView.DISABLED_AND_BY_PARENT){this._gotoDisabledState();return false}}}else{return false}},_parentDidDisableInPane:function(){var a=this.get("enabledState");if(this.get("shouldInheritEnabled")){if(a===SC.CoreView.ENABLED){this._gotoDisabledByParentState()}else{if(a===SC.CoreView.DISABLED){this._gotoDisabledAndByParentState()}else{return false}}}else{return false}},applyAttributesToContext:function(b,a){b(a);if(!this.get("isEnabled")){a.addClass("disabled");a.setAttr("aria-disabled","true")}}.enhance(),_gotoEnabledState:function(){this.set("enabledState",SC.CoreView.ENABLED)},_gotoDisabledState:function(){this.set("enabledState",SC.CoreView.DISABLED)},_gotoDisabledAndByParentState:function(){this.set("enabledState",SC.CoreView.DISABLED_AND_BY_PARENT)},_gotoDisabledByParentState:function(){this.set("enabledState",SC.CoreView.DISABLED_BY_PARENT)}});sc_require("views/view");SC.View.reopen({isKeyResponder:NO,willLoseKeyResponderTo:function(a){},willBecomeKeyResponderFrom:function(a){},didLoseKeyResponderTo:function(a){},didBecomeKeyResponderFrom:function(a){},interpretKeyEvents:function(b){var a=b.commandCodes(),d=a[0],e=a[1],h,f,i,g,c,j;if(!d&&!e){return null}if(d){f=d.match(/[^_]+$/);i=SC.MODIFIED_KEY_BINDINGS[d];if(!i&&f&&f.length>0){i=SC.BASE_KEY_BINDINGS[f[0]]}if(i){g=this;c=this.get("pane");j=null;while(g&&!(j=g.tryToPerform(i,b))){g=(g===c)?null:g.get("nextResponder")}return j}}if(e&&this.respondsTo("insertText")){h=this.insertText(e,b);return h?(h===YES?this:h):null}return null},insertText:function(a){return NO},performKeyEquivalent:function(f,d){var e=NO,g=this.get("childViews"),b=g.length,a=-1,c;while(!e&&(++a<b)){c=g[a];e=c.tryToPerform("performKeyEquivalent",f,d)}return e},firstKeyView:null,_getFirstKeyView:function(){var a=this.get("firstKeyView");if(a){return a}var b=this.get("childViews");if(b){return b[0]}},lastKeyView:null,_getLastKeyView:function(){var d=this.get("lastKeyView");if(d){return d}var a,b=this.get("firstKeyView");if(b){while(a=b._getNextKeyView()){b=a}return b}else{var c=this.get("childViews");if(c){return c[c.length-1]}}},nextKeyView:undefined,_getNextKeyView:function(){var b=this.get("parentView"),a=this.get("nextKeyView");if(b&&b.get("lastKeyView")===this){return null}if(a!==undefined){return a}if(b){var c=b.get("childViews");return c[c.indexOf(this)+1]}},nextValidKeyView:function(){var b=this,a;while(a!==this){a=null;if(b.get("isVisibleInWindow")){a=b._getFirstKeyView()}if(!a){a=b._getNextKeyView()}if(!a){while(b=b.get("parentView")){if(a=b._getNextKeyView()){break}}}if(!a){if(!SC.TABBING_ONLY_INSIDE_DOCUMENT){break}else{a=this.get("pane")}}if(a.get("isVisibleInWindow")&&a.get("acceptsFirstResponder")){return a}b=a}return null}.property("nextKeyView"),previousKeyView:undefined,_getPreviousKeyView:function(){var b=this.get("parentView"),a=this.get("previousKeyView");if(b&&b.get("firstKeyView")===this){return null}if(a!==undefined){return a}if(b){var c=b.get("childViews");return c[c.indexOf(this)-1]}},previousValidKeyView:function(){var b=this,a;while(a!==this){if(b.get("parentView")){a=b._getPreviousKeyView()}else{if(!SC.TABBING_ONLY_INSIDE_DOCUMENT){break}else{a=b}}if(a){do{b=a;a=a._getLastKeyView()}while(a&&a.get("isVisibleInWindow"));if(!a){a=b}}else{a=b.get("parentView")}if(a.get("isVisibleInWindow")&&a.get("acceptsFirstResponder")){return a}b=a}return null}.property("previousKeyView")});sc_require("views/view");SC.View.reopen({layerIdDidChange:function(){var a=this.get("layer"),b=this.get("layerId"),c=this._lastLayerId;if(b!==c){if(c&&SC.View.views[c]===this){delete SC.View.views[c]}this._lastLayerId=b;SC.View.views[b]=this;if(a){a.id=b}}}.observes("layerId"),insertBefore:function(a,b){a.beginPropertyChanges();if(a.resetBuildState){a.resetBuildState()}a._doAdopt(this,b);a.endPropertyChanges();return this},removeChild:function(b,a){if(!a){return this}if(a.parentView!==this){throw new Error("%@.removeChild(%@) must belong to parent".fmt(this,a))}if(a.willRemoveFromParent){a.willRemoveFromParent()}if(this.willRemoveChild){this.willRemoveChild(a)}b(a);return this}.enhance(),replaceChild:function(a,b){a.beginPropertyChanges();b.beginPropertyChanges();this.beginPropertyChanges();this.insertBefore(a,b).removeChild(b);this.endPropertyChanges();b.endPropertyChanges();a.endPropertyChanges();return this},replaceAllChildren:function(c){this.beginPropertyChanges();this.removeAllChildren(true);for(var b=0,a=c.get("length");b<a;b++){this.appendChild(c.objectAt(b))}this.endPropertyChanges();return this},appendChild:function(a){return this.insertBefore(a,null)},buildInChild:function(a){a.willBuildInToView(this);this.appendChild(a);a.buildInToView(this)},buildOutChild:function(a){a.buildOutFromView(this)},buildInDidFinishFor:function(a){},buildOutDidFinishFor:function(a){this.removeChild(a)},isBuildingIn:NO,isBuildingOut:NO,buildIn:function(){this.buildInDidFinish()},buildOut:function(){this.buildOutDidFinish()},resetBuild:function(){},buildOutDidCancel:function(){},buildInDidCancel:function(){},buildInDidFinish:function(){this.isBuildingIn=NO;this._buildingInTo.buildInDidFinishFor(this);this._buildingInTo=null},buildOutDidFinish:function(){this.isBuildingOut=NO;this._buildingOutFrom.buildOutDidFinishFor(this);this._buildingOutFrom=null},resetBuildState:function(){if(this.isBuildingIn){this.buildInDidCancel();this.isBuildingIn=NO}if(this.isBuildingOut){this.buildOutDidCancel();this.isBuildingOut=NO}this.buildingInTo=null;this.buildingOutFrom=null;this.resetBuild()},willBuildInToView:function(a){if(this.isBuildingOut){this.buildOutDidCancel()}},buildInToView:function(a){if(this.isBuildingIn){return}this._buildingInTo=a;this.isBuildingOut=NO;this.isBuildingIn=YES;this.buildIn()},buildOutFromView:function(a){if(this.isBuildingOut){return}if(this.isBuildingIn){this.buildInDidCancel()}this.isBuildingOut=YES;this.isBuildingIn=NO;this._buildingOutFrom=a;this.buildOut()}});sc_require("views/view");SC.View.reopen({init:function(a){a();this._lastTheme=this.get("theme")}.enhance(),themeName:null,baseThemeName:null,theme:function(){var b=this.get("baseTheme"),a=this.get("themeName");if(a){var c;if(b){c=b.find(a);if(c){return c}}c=SC.Theme.find(a);if(c){return c}return b.invisibleSubtheme(a)}return b}.property("baseTheme","themeName").cacheable(),_sc_view_themeDidChange:function(){if(this._lastTheme===this.get("theme")){return}this._lastTheme=this.get("theme");var c=this.childViews,b=c.length,a;for(a=0;a<b;a++){c[a].notifyPropertyChange("baseTheme")}if(this.get("layer")){this.replaceLayer()}}.observes("theme"),baseTheme:function(){var b;var a=this.get("baseThemeName");if(a){return SC.Theme.find(a)}else{b=this.get("parentView");var c=b&&b.get("theme");return c||SC.Theme.find(SC.defaultTheme)}}.property("baseThemeName","parentView").cacheable(),renderDelegate:function(c,d){if(d){this._setRenderDelegate=d}if(this._setRenderDelegate){return this._setRenderDelegate}var a=this.get("renderDelegateName"),b;if(a){b=this.get("theme")[a];if(!b){throw new Error('%@: Unable to locate render delegate "%@" in theme.'.fmt(this,a))}return b}return null}.property("renderDelegateName","theme"),renderDelegateName:null,renderDelegateProxy:function(){return SC.View._RenderDelegateProxy.createForView(this)}.property("renderDelegate").cacheable(),render:function(b,c){var a=this.get("renderDelegate");if(a){if(c){a.render(this.get("renderDelegateProxy"),b)}else{a.update(this.get("renderDelegateProxy"),b.$())}}},applyAttributesToContext:function(f,e){var g=this.get("theme");var c=g.classNames,b,a=c.length;for(b=0;b<a;b++){e.addClass(c[b])}f(e);var d=this.get("renderDelegate");if(d&&d.className){e.addClass(d.className)}}.enhance(),invokeRenderDelegateMethod:function(c,b){var a=this.get("renderDelegate");if(!a){return undefined}if(SC.typeOf(a[c])!==SC.T_FUNCTION){return undefined}b=SC.$A(arguments);b.shift();b.unshift(this.get("renderDelegateProxy"));return a[c].apply(a,b)}});SC.View._RenderDelegateProxy={createForView:function(c){var d=SC.beget(this);var f=c.get("displayProperties"),e={};for(var b=0,a=f.length;b<a;b++){e[f[b]]=YES}e.theme=YES;d._displayPropertiesLookup=e;d.renderState={};d._view=c;return d},get:function(b){if(this[b]!==undefined){return this[b]}var a="display"+b.capitalize();if(this._displayPropertiesLookup[a]){return this._view.get(a)}else{return this._view.get(b)}},didChangeFor:function(d){var b=arguments.length,a;for(a=1;a<b;a++){var e=arguments[a],c="display"+e.capitalize();if(this._displayPropertiesLookup[c]){if(this._view.didChangeFor(d,c)){return YES}}else{if(this._view.didChangeFor(d,e)){return YES}}}return NO}};SC.propertyFromRenderDelegate=function(a,b){return function(f,g){if(g!==undefined){this["_set_rd_"+f]=g}var d=this["_set_rd_"+f];if(d!==undefined){return d}var c=this.get("renderDelegate");if(c&&c.get){var e=this.get("renderDelegateProxy");d=c.getPropertyFor(e,a)}if(d!==undefined){return d}return b}.property("renderDelegate").cacheable()};sc_require("views/view");SC.View.reopen({acceptsMultitouch:NO,hasTouch:NO,touchBoundary:{left:25,right:25,top:25,bottom:25},_touchBoundaryFrame:function(){var b=this.get("touchBoundary"),a;a=this.get("parentView").convertFrameToView(this.get("frame"),null);a.x-=b.left;a.y-=b.top;a.width+=b.left+b.right;a.height+=b.top+b.bottom;return a}.property("touchBoundary","clippingFrame").cacheable(),touchIsInBoundary:function(a){return SC.pointInRect({x:a.pageX,y:a.pageY},this.get("_touchBoundaryFrame"))}});sc_require("views/view");SC.View.reopen({hasVisibility:YES,isContextMenuEnabled:function(){return SC.CONTEXT_MENU_ENABLED}.property(),recomputeIsVisibleInWindow:function(){return this}});sc_require("views/view");sc_require("views/view/acceleration");sc_require("views/view/cursor");sc_require("views/view/enabled");sc_require("views/view/keyboard");sc_require("views/view/layout");sc_require("views/view/manipulation");sc_require("views/view/theming");sc_require("views/view/touch");sc_require("views/view/visibility");sc_require("mixins/responder_context");SC.MIXED_STATE="__MIXED__";SC.Pane=SC.View.extend(SC.ResponderContext,{isPane:YES,page:null,rootResponder:null,sendEvent:function(c,a,d){var b;if(!d){d=this.get("firstResponder")}while(d){if(c==="touchStart"){if(a.touchResponder===d){d=null;break}if(!d.get("hasTouch")||d.get("acceptsMultitouch")){if(d.tryToPerform("touchStart",a)){break}}}else{if(c==="touchEnd"&&!d.get("acceptsMultitouch")){if(!d.get("hasTouch")){if(d.tryToPerform("touchEnd",a)){break}}}else{if(d.tryToPerform(c,a)){break}}}d=(d===this)?null:d.get("nextResponder")}if(!d&&(d=this.get("defaultResponder"))){if(typeof d===SC.T_STRING){d=SC.objectForPropertyPath(d)}if(!d){d=null}else{d=d.tryToPerform(c,a)?d:null}}else{if(!d&&!(d=this.get("defaultResponder"))){d=this.tryToPerform(c,a)?this:null}}return(a&&a.mouseHandler)||d},nextResponder:function(){return null}.property().cacheable(),firstResponder:null,acceptsKeyPane:YES,isKeyPane:NO,becomeKeyPane:function(){if(this.get("isKeyPane")){return this}if(this.rootResponder){this.rootResponder.makeKeyPane(this)}return this},resignKeyPane:function(){if(!this.get("isKeyPane")){return this}if(this.rootResponder){this.rootResponder.makeKeyPane(null)}return this},makeFirstResponder:function(c,b,a){if(!b){b=this}var e=this.get("firstResponder"),d=this.get("isKeyPane");if(e===b){return this}if(d){if(e){e.tryToPerform("willLoseKeyResponderTo",b)}if(b){b.tryToPerform("willBecomeKeyResponderFrom",e)}}if(e){e.beginPropertyChanges();e.set("isKeyResponder",NO)}if(b){b.beginPropertyChanges();b.set("isKeyResponder",d)}c(b,a);if(e){e.endPropertyChanges()}if(b){b.endPropertyChanges()}if(d){if(b){b.tryToPerform("didBecomeKeyResponderFrom",e)}if(e){e.tryToPerform("didLoseKeyResponderTo",b)}}return this}.enhance(),willLoseKeyPaneTo:function(a){this._forwardKeyChange(this.get("isKeyPane"),"willLoseKeyResponderTo",a,NO);return this},willBecomeKeyPaneFrom:function(a){this._forwardKeyChange(!this.get("isKeyPane"),"willBecomeKeyResponderFrom",a,YES);return this},didBecomeKeyResponderFrom:function(a){},didLoseKeyPaneTo:function(b){var a=this.get("isKeyPane");this.set("isKeyPane",NO);this._forwardKeyChange(a,"didLoseKeyResponderTo",b);return this},didBecomeKeyPaneFrom:function(b){var a=this.get("isKeyPane");this.set("isKeyPane",YES);this._forwardKeyChange(!a,"didBecomeKeyResponderFrom",b,YES);return this},isMainPane:NO,focusFrom:function(a){},blurTo:function(a){},blurMainTo:function(a){this.set("isMainPane",NO)},focusMainFrom:function(a){this.set("isMainPane",YES)},append:function(){return this.appendTo(document.body)},remove:function(){this._doDetach();return this},insert:function(b){this.createLayer();var a=this.get("layer");b(a);return this},appendTo:function(b){var a=this;return this.insert(function(){a._doAttach(jQuery(b)[0])})},paneDidAttach:function(){},recomputeDependentProperties:function(){},isPaneAttached:NO,wantsTouchIntercept:NO,hasTouchIntercept:function(){return this.get("wantsTouchIntercept")&&SC.platform.touch}.property("wantsTouchIntercept").cacheable(),zIndex:0,touchZ:99,_addIntercept:function(){if(this.get("hasTouchIntercept")){var b=document.createElement("div");var a=b.style;a.position="absolute";a.left="0px";a.top="0px";a.right="0px";a.bottom="0px";a[SC.browser.experimentalStyleNameFor("transform")]="translateZ(0px)";a.zIndex=this.get("zIndex")+this.get("touchZ");b.className="touch-intercept";b.id="touch-intercept-"+SC.guidFor(this);this._touchIntercept=b;document.body.appendChild(b)}},_removeIntercept:function(){if(this._touchIntercept){document.body.removeChild(this._touchIntercept);this._touchIntercept=null}},hideTouchIntercept:function(){if(this._touchIntercept){this._touchIntercept.style.display="none"}},showTouchIntercept:function(){if(this._touchIntercept){this._touchIntercept.style.display="block"}},init:function(){if(this.hasTouchIntercept===YES){SC.Logger.warn("Do not set hasTouchIntercept directly. Use wantsTouchIntercept instead.");this.hasTouchIntercept=SC.platform.touch}var a=!!this.get("layer");arguments.callee.base.apply(this,arguments);if(a){this._attached()}},classNames:["sc-pane"]});sc_require("panes/pane");SC.Pane.reopen({performKeyEquivalent:function(c,a){var b=arguments.callee.base.apply(this,arguments);if(!b){var d=this.get("defaultResponder");if(d){if(d.performKeyEquivalent){b=d.performKeyEquivalent(c,a)}if(!b&&d.tryToPerform){b=d.tryToPerform(c,a)}}}return b},keyDown:function(a){var b;if(a.keyCode===9&&!this.get("firstResponder")){if(a.shiftKey){b=this.get("previousValidKeyView")}else{b=this.get("nextValidKeyView")}if(b){this.makeFirstResponder(b);return YES}else{if(!SC.TABBING_ONLY_INSIDE_DOCUMENT){a.allowDefault()}}}return NO},_forwardKeyChange:function(d,b,g,f){var c,a,e;if(d&&(a=this.get("firstResponder"))){e=(g)?g.get("firstResponder"):null;c=this.get("firstResponder");if(c&&c[b]){c[b](e)}if((f!==undefined)&&a){a.set("isKeyResponder",f)}}}});sc_require("panes/pane");SC.Pane.reopen({currentWindowSize:null,computeParentDimensions:function(c){if(this.get("designer")&&SC.suppressMain){return arguments.callee.base.apply(this,arguments)}var d={x:0,y:0,width:1000,height:1000},b=this.get("layout");if(document&&document.body){d.width=document.body.clientWidth;d.height=document.body.clientHeight;if(SC.browser.name===SC.BROWSER.ie&&SC.browser.compare(SC.browser.version,"7")===0){var a=SC.platform.get("scrollbarSize");if(document.body.scrollWidth>d.width){d.width-=a}if(document.body.scrollHeight>d.height){d.height-=a}}}if(b.minHeight||b.minWidth){if(b.minHeight){d.height=Math.max(d.height,b.minHeight)}if(b.minWidth){d.width=Math.max(d.width,b.minWidth)}}return d},frame:function(){if(this.get("designer")&&SC.suppressMain){return arguments.callee.base.apply(this,arguments)}return this.computeFrameWithParentFrame(null)}.property(),windowSizeDidChange:function(b,a){this.set("currentWindowSize",a);this.setBodyOverflowIfNeeded();this.parentViewDidResize(a);return this},setBodyOverflowIfNeeded:function(e){var d=this.get("layout"),b=this.get("currentWindowSize");if(!d||!b||!b.width||!b.height){return}var a=d.minWidth,c=d.minHeight;if(e===true||a||c){if((c&&b.height<c)||(a&&b.width<a)){SC.bodyOverflowArbitrator.requestVisible(this)}else{SC.bodyOverflowArbitrator.requestHidden(this)}}},unsetBodyOverflowIfNeeded:function(){SC.bodyOverflowArbitrator.withdrawRequest(this)},recomputeDependentProperties:function(a){this.set("currentWindowSize",this.rootResponder.computeWindowSize());a()}.enhance()});sc_require("panes/pane");SC.Pane.reopen({prependTo:function(b){var a=this;return this.insert(function(){var c=jQuery(b)[0];a._doAttach(c,c.firstChild)})},removeFromParent:function(){throw SC.Error.desc("SC.Pane cannot be removed from its parent, since it's the root. Did you mean remove()?")}});sc_require("panes/pane");SC.Pane.reopen({_notifyDidAttach:function(){var a=(this.rootResponder=SC.RootResponder.responder);a.panes.add(this);this.set("isPaneAttached",YES);this.paneDidAttach();this.recomputeDependentProperties();this.set("currentWindowSize",a.currentWindowSize);this.updateDesignMode(this.get("designMode"),a.get("currentDesignMode"));this._addIntercept();if(!this.get("isFixedSize")){this.viewDidResize()}arguments.callee.base.apply(this,arguments)},_notifyWillDetach:function(){arguments.callee.base.apply(this,arguments);this.set("isPaneAttached",NO);this._removeIntercept();var a=this.rootResponder;a.panes.remove(this);this.rootResponder=null}});sc_require("panes/pane");SC.Pane.reopen({});SC.BENCHMARK_LOG_READY=YES;sc_require("system/event");SC.mixin({isReady:NO,suppressOnReady:SC.suppressOnReady?YES:NO,suppressMain:SC.suppressMain?YES:NO,ready:function(b,c){var a=SC._readyQueue;if(c===undefined){c=b;b=null}else{if(SC.typeOf(c)===SC.T_STRING){c=b[c]}}if(SC.isReady){jQuery(document).ready(function(){c.call(b)})}else{if(!a){SC._readyQueue=[]}SC._readyQueue.push(function(){c.call(b)})}return this},onReady:{done:function(){if(SC.isReady){return}SC.isReady=true;SC.RunLoop.begin();SC.Locale.createCurrentLocale();var d=SC.Locale.currentLanguage.toLowerCase();jQuery("body").addClass(d);jQuery("html").attr("lang",d);jQuery("#loading").remove();var c=SC._readyQueue,b,a;if(c){for(b=0,a=c.length;b<a;b++){c[b].call()}SC._readyQueue=null}if(window.main&&!SC.suppressMain&&(SC.mode===SC.APP_MODE)){window.main()}SC.RunLoop.end()}}});if(!SC.suppressOnReady){$(document).ready(SC.onReady.done)}SC.APP_MODE="APP_MODE";SC.TEST_MODE="TEST_MODE";SC.mode=SC.APP_MODE;SC.UNSUPPORTED="_sc_unsupported";SC.platform=SC.Object.create({scrollbarSize:function(){var a=document.createElement("DIV"),d;a.innerHTML="<div style='height:1px;'></div>";a.style.cssText="position:absolute;width:100px;height:100px;overflow-y:visible;";d=a.childNodes[0];document.body.appendChild(a);var b=d.innerWidth||d.clientWidth;a.style.overflowY="scroll";var c=d.innerWidth||d.clientWidth;document.body.removeChild(a);return b-c}.property().cacheable(),touch:(!SC.none(window.ontouchstart)||SC.browser.name===SC.BROWSER.android||"ontouchstart" in document.documentElement)&&SC.none(window._phantom),bounceOnScroll:SC.browser.os===SC.OS.ios,pinchToZoom:SC.browser.os===SC.OS.ios,a:function(){var a=document.createElement("a");return{download:!!("download" in a),media:!!("media" in a),ping:!!("ping" in a),}}(),input:function(d){var e={},c=d.length,f=document.createElement("input"),b,a;for(a=0;a<c;a++){b=d[a];e[b]=!!(b in f)}return e}(["autocomplete","readonly","list","size","required","multiple","maxlength","pattern","min","max","step","placeholder","selectionStart","selectionEnd","selectionDirection"]),standalone:!!navigator.standalone,cssPrefix:SC.browser.cssPrefix,domCSSPrefix:SC.browser.domPrefix,simulateTouchEvents:function(){if(this.touch){return}SC.Logger.log("Simulating touch events");SC.platform.touch=YES;SC.platform.bounceOnScroll=YES;document.body.className=document.body.className+" touch";this._simtouch_counter=1;this.removeEvents(["click","dblclick","mouseout","mouseover","mousewheel"]);this.replaceEvent("mousemove",this._simtouch_mousemove);this.replaceEvent("mousedown",this._simtouch_mousedown);this.replaceEvent("mouseup",this._simtouch_mouseup);SC.platform.windowSizeDeterminesOrientation=YES;SC.device.orientationHandlingShouldChange()},removeEvents:function(d){var b,a=d.length,c;for(b=0;b<a;b++){c=d[b];SC.Event.remove(document,c,SC.RootResponder.responder,SC.RootResponder.responder[c])}},replaceEvent:function(a,b){SC.Event.remove(document,a,SC.RootResponder.responder,SC.RootResponder.responder[a]);SC.Event.add(document,a,this,b)},_simtouch_mousemove:function(a){if(!this._mousedown){if(a.altKey&&this._pinchCenter===null){this._pinchCenter={pageX:a.pageX,pageY:a.pageY,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY}}else{if(!a.altKey&&this._pinchCenter!==null){this._pinchCenter=null}}return NO}var b=this.manufactureTouchEvent(a,"touchmove");return SC.RootResponder.responder.touchmove(b)},_simtouch_mousedown:function(a){this._mousedown=YES;var b=this.manufactureTouchEvent(a,"touchstart");return SC.RootResponder.responder.touchstart(b)},_simtouch_mouseup:function(a){var c=this.manufactureTouchEvent(a,"touchend"),b=SC.RootResponder.responder.touchend(c);this._mousedown=NO;this._simtouch_counter++;return b},manufactureTouchEvent:function(k,j){var c,l,f=this._simtouch_counter;c={type:j,target:k.target,identifier:f,pageX:k.pageX,pageY:k.pageY,screenX:k.screenX,screenY:k.screenY,clientX:k.clientX,clientY:k.clientY};k.touches=[c];if(k.altKey&&this._pinchCenter!==null){var h=this._pinchCenter.pageX+this._pinchCenter.pageX-k.pageX,g=this._pinchCenter.pageY+this._pinchCenter.pageY-k.pageY,e=this._pinchCenter.screenX+this._pinchCenter.screenX-k.screenX,d=this._pinchCenter.screenY+this._pinchCenter.screenY-k.screenY,b=this._pinchCenter.clientX+this._pinchCenter.clientX-k.clientX,a=this._pinchCenter.clientY+this._pinchCenter.clientY-k.clientY,i=this._simtouch_counter+1;l={type:j,target:k.target,identifier:i,pageX:h,pageY:g,screenX:e,screenY:d,clientX:b,clientY:a};k.touches=[c,l]}k.changedTouches=k.touches;return k},supportsCSSAnimations:SC.browser.experimentalStyleNameFor("animation")!==SC.UNSUPPORTED,supportsCSSTransitions:SC.browser.experimentalStyleNameFor("transition")!==SC.UNSUPPORTED,supportsCSSTransforms:SC.browser.experimentalStyleNameFor("transform")!==SC.UNSUPPORTED,supportsCSS3DTransforms:SC.browser.experimentalStyleNameFor("perspective")!==SC.UNSUPPORTED,supportsApplicationCache:("applicationCache" in window),supportsHashChange:function(){return("onhashchange" in window)&&(document.documentMode===undefined||document.documentMode>7)}(),supportsHistory:function(){return !!(window.history&&window.history.pushState)}(),supportsIndexedDB:function(){return !!(window.indexedDB||window[SC.browser.domPrefix+"IndexedDB"])}(),supportsCanvas:function(){return !!document.createElement("canvas").getContext}(),supportsXHR2ProgressEvent:("ProgressEvent" in window),supportsXHR2FormData:("FormData" in window),supportsXHR2LoadEndEvent:function(){return(new XMLHttpRequest).onloadend===null}(),supportsOrientationChange:("onorientationchange" in window),supportsWebSQL:("openDatabase" in window),windowSizeDeterminesOrientation:SC.browser.os===SC.OS.ios||!("onorientationchange" in window),cordova:(typeof window.cordova!=="undefined")});SC.ready(function(){var a=function(j,h,m,i){var l=SC.browser.domPrefix,g=l.toLowerCase(),k=h+"EventName",n=function(o){var r=SC.browser.domPrefix,p=r.toLowerCase(),q=h+"EventName";j.removeEventListener(h,n,NO);j.removeEventListener(p+h,n,NO);j.removeEventListener(p+m,n,NO);j.removeEventListener(r+m,n,NO);if(o){SC.platform[q]=o.type;o.stopPropagation()}if(i){i(!!o)}};SC.platform[k]=SC.UNSUPPORTED;j.addEventListener(h,n,NO);j.addEventListener(g+h,n,NO);j.addEventListener(g+m,n,NO);j.addEventListener(l+m,n,NO)};if(SC.platform.supportsCSSTransitions){var e=document.createElement("div"),d=SC.browser.experimentalStyleNameFor("transition","all 1ms linear");e.style[d]="all 1ms linear";a(e,"transitionend","TransitionEnd",function(g){if(g){SC.RootResponder.responder.cleanUpTransitionListeners()}else{SC.platform.supportsCSSTransitions=NO}e.parentNode.removeChild(e);e=null});document.documentElement.appendChild(e);setTimeout(function(){e.style.opacity="0"});if(SC.platform.supportsCSSAnimations){var c=document.createElement("div"),f,b;f="@keyframes _sc_animation_test { from { opacity: 1; } to { opacity: 0; } }";b="@"+SC.browser.cssPrefix+"keyframes _sc_prefixed_animation_test { from { opacity: 1; } to { opacity: 0; } }";c.innerHTML="<style>"+f+"\n"+b+"</style>";c.style.animation="_sc_animation_test 1ms linear";c.style[SC.browser.domPrefix+"Animation"]="_sc_prefixed_animation_test 5ms linear";a(c,"animationend","AnimationEnd",function(j){if(j){var i=SC.browser.domPrefix,g=i.toLowerCase(),h=SC.platform.animationendEventName;switch(h){case g+"animationend":SC.platform.animationstartEventName=g+"animationstart";SC.platform.animationiterationEventName=g+"animationiteration";break;case g+"AnimationEnd":SC.platform.animationstartEventName=g+"AnimationStart";SC.platform.animationiterationEventName=g+"AnimationIteration";break;case i+"AnimationEnd":SC.platform.animationstartEventName=i+"AnimationStart";SC.platform.animationiterationEventName=i+"AnimationIteration";break;default:SC.platform.animationstartEventName="animationstart";SC.platform.animationiterationEventName="animationiteration"}SC.RootResponder.responder.cleanUpAnimationListeners()}else{SC.platform.supportsCSSAnimations=NO}c.parentNode.removeChild(c);c=null});document.documentElement.appendChild(c)}}});SC.Touch=function(d,a){this.touchContext=a;this.identifier=d.identifier;var c=d.target,b;if(c&&SC.$(c).hasClass("touch-intercept")){d.target.style[SC.browser.experimentalStyleNameFor("transform")]="translate3d(0px,-5000px,0px)";c=document.elementFromPoint(d.pageX,d.pageY);if(c){b=SC.$(c).view()[0]}this.hidesTouchIntercept=NO;if(c.tagName==="INPUT"){this.hidesTouchIntercept=d.target}else{d.target.style[SC.browser.experimentalStyleNameFor("transform")]="translate3d(0px,0px,0px)"}}else{b=d.target?SC.$(d.target).view()[0]:null}this.targetView=b;this.target=c;this.hasEnded=NO;this.type=d.type;this.clickCount=1;this.view=undefined;this.touchResponder=this.nextTouchResponder=undefined;this.touchResponders=[];this.candidateTouchResponders=null;this.startX=this.pageX=d.pageX;this.startY=this.pageY=d.pageY;this.clientX=d.clientX;this.clientY=d.clientY;this.screenX=d.screenX;this.screenY=d.screenY};SC.Touch.prototype={unhideTouchIntercept:function(){var a=this.hidesTouchIntercept;if(a){setTimeout(function(){a.style[SC.browser.experimentalStyleNameFor("transform")]="translate3d(0px,0px,0px)"},500)}},allowDefault:function(){if(this.event){this.event.hasCustomEventHandling=YES}},preventDefault:function(){if(this.event){this.event.preventDefault()}},stopPropagation:function(){if(this.event){this.event.stopPropagation()}},stop:function(){if(this.event){this.event.stop()}},end:function(){this.touchContext.endTouch(this)},nextTouchResponder:null,stackNextTouchResponder:function(a,b){this.makeTouchResponder(a,YES,b)},restoreLastTouchResponder:function(){if(this.nextTouchResponder){this.makeTouchResponder(this.nextTouchResponder)}else{var b=this.candidateTouchResponders,a=b?b.pop():null;if(a){this.makeTouchResponder(a)}}},makeTouchResponder:function(b,c,a){this.touchContext.makeTouchResponder(this,b,c,a)},stackCandidateTouchResponder:function(a){if(!this.candidateTouchResponders){this.candidateTouchResponders=[a]}else{if(a!==this.candidateTouchResponders[this.candidateTouchResponders.length-1]){this.candidateTouchResponders.push(a)}}},captureTouch:function(a,b){this.touchContext.captureTouch(this,a,b)},touchesForView:function(a){return this.touchContext.touchesForView(a)},touchesForResponder:function(a){return this.touchContext.touchesForView(a)},averagedTouchesForView:function(a,b){return this.touchContext.averagedTouchesForView(a,(b?this:null))}};SC.mixin(SC.Touch,{create:function(b,a){return new SC.Touch(b,a)}});sc_require("system/ready");sc_require("system/platform");sc_require("system/touch");SC.CAPTURE_BACKSPACE_KEY=NO;SC.RootResponder=SC.Object.extend({panes:null,init:function(){arguments.callee.base.apply(this,arguments);this.panes=SC.Set.create()},mainPane:null,makeMainPane:function(b){var a=this.get("mainPane");if(a===b){return this}this.beginPropertyChanges();if(this.get("keyPane")===a){this.makeKeyPane(b)}this.set("mainPane",b);if(a){a.blurMainTo(b)}if(b){b.focusMainFrom(a)}this.endPropertyChanges();return this},menuPane:null,makeMenuPane:function(b){if(b&&!b.get("acceptsMenuPane")){return this}else{var a=this.get("menuPane");if(a===b){return this}this.set("menuPane",b)}return this},keyPane:null,previousKeyPanes:[],makeKeyPane:function(f){var e,a,d;if(f){if(!f.get("acceptsKeyPane")){return this}else{a=this.get("keyPane");if(a===f){return this}else{if(a){d=this.get("previousKeyPanes");d.push(a)}e=f}}}else{a=this.get("keyPane");d=this.get("previousKeyPanes");e=null;var c;while(d.length>0){c=d.pop();if(c.get("isPaneAttached")&&c.get("acceptsKeyPane")){e=c;break}}}if(!e){var b=this.get("mainPane");if(b&&b.get("acceptsKeyPane")){e=b}}if(a){a.willLoseKeyPaneTo(e)}if(e){e.willBecomeKeyPaneFrom(a)}this.set("keyPane",e);if(e){e.didBecomeKeyPaneFrom(a)}if(a){a.didLoseKeyPaneTo(e)}return this},currentWindowSize:null,computeWindowSize:function(){var c,b,a;if(!this._bod||!this._docElement){b=document.body;a=document.documentElement;this._bod=b;this._docElement=a}else{b=this._bod;a=this._docElement}if(window.innerHeight){c={width:window.innerWidth,height:window.innerHeight}}else{if(a&&a.clientHeight){c={width:a.clientWidth,height:a.clientHeight}}else{if(b){c={width:b.clientWidth,height:b.clientHeight}}}}return c},resize:function(){this._resize();this._assignDesignMode();return YES},_resize:function(){var a=this.computeWindowSize(),b=this.get("currentWindowSize");this.set("currentWindowSize",a);if(!SC.rectsEqual(a,b)){SC.run(function(){SC.device.windowSizeDidChange(a);if(this.panes){if(b!==a){this.panes.invoke("windowSizeDidChange",b,a)}}},this)}},_assignDesignMode:function(){var a=this.computeDesignMode(),b=this.get("currentDesignMode");if(b!==a){this.set("currentDesignMode",a);if(this.panes){SC.run(function(){this.panes.invoke("updateDesignMode",b,a)},this)}}},hasFocus:NO,focus:function(a){if(!this.get("hasFocus")){SC.$("body").addClass("sc-focus").removeClass("sc-blur");SC.run(function(){if(!SC.TABBING_ONLY_INSIDE_DOCUMENT&&!SC.browser.isIE8OrLower){var b=SC.RootResponder.responder.get("keyPane");if(b){var c=b.get("nextValidKeyView");if(c){b.makeFirstResponder(c)}}}this.set("hasFocus",YES)},this)}return YES},focusin:function(a){if(this._focusTimeout){clearTimeout(this._focusTimeout)}this.focus(a)},focusout:function(a){var b=this;this._focusTimeout=setTimeout(function(){b.blur(a)},300)},blur:function(a){if(this.get("hasFocus")){SC.$("body").addClass("sc-blur").removeClass("sc-focus");SC.run(function(){this.set("hasFocus",NO)},this)}return YES},dragDidStart:function(a){this._mouseDownView=a;this._drag=a},currentDesignMode:null,designModes:function(a,b){if(SC.none(b)){if(this._designModeNames){delete this._designModeNames;delete this._designModeThresholds}b=null}else{this._prepOrderedArrays(b)}this._assignDesignMode();return b}.property().cacheable(),computeDesignMode:function(){var e=null,c=this._designModeNames,h=this._designModeThresholds,g,f;if(!c){return null}g=this.get("currentWindowSize");f=(g.width*g.height);var d,a;for(d=0,a=h.get("length");d<a;d++){var b=h.objectAt(d);if(f<b){e=c.objectAt(d);break}}if(SC.none(e)&&c&&c.get("length")>0){e=c.objectAt(d)}return SC.device.orientation===SC.PORTRAIT_ORIENTATION?e+"_p":e+"_l"},fallbackDesignMode:function(d){var c=this._designModeNames,b,a=null;b=c.indexOf(d);if(b>=0){a=c[b-1]}return a},_prepOrderedArrays:function(e){var a,f;if(e){a=this._designModeNames=[];f=this._designModeThresholds=[];var c;outer:for(c in e){var b,d;d=e[c];inner:for(b=f.length-1;b>=0;b--){if(f[b]<d){break inner}}b+=1;a.splice(b,0,c);f.splice(b,0,d)}}},defaultResponder:null,sendAction:function(d,e,c,f,b,a){e=this.targetForAction(d,e,c,f,a);if(e&&e.isResponderContext){return !!e.sendAction(d,c,b,a)}else{return e&&e.tryToPerform(d,c)}},_responderFor:function(d,b,a){var c=d?d.get("defaultResponder"):null;if(d){d=a||d.get("firstResponder")||d;do{if(d.respondsTo(b)){return d}}while((d=d.get("nextResponder")))}if(typeof c===SC.T_STRING){c=SC.objectForPropertyPath(c)}if(!c){return null}else{if(c.isResponderContext){return c}else{if(c.respondsTo(b)){return c}else{return null}}}},targetForAction:function(c,f,e,g,a){if(!c||(SC.typeOf(c)!==SC.T_STRING)){return null}if(f){if(SC.typeOf(f)===SC.T_STRING){f=SC.objectForPropertyPath(f)||SC.objectForPropertyPath(f,e)}if(f&&!f.isResponderContext){if(f.respondsTo&&!f.respondsTo(c)){f=null}else{if(SC.typeOf(f[c])!==SC.T_FUNCTION){f=null}}}return f}if(g){f=this._responderFor(g,c,a);if(f){return f}}var b=this.get("keyPane"),d=this.get("mainPane");if(b&&(b!==g)){f=this._responderFor(b,c)}if(!f&&d&&(d!==b)){f=this._responderFor(d,c)}if(!f&&(f=this.get("defaultResponder"))){if(SC.typeOf(f)===SC.T_STRING){f=SC.objectForPropertyPath(f);if(f){this.set("defaultResponder",f)}}if(f&&!f.isResponderContext){if(f.respondsTo&&!f.respondsTo(c)){f=null}else{if(SC.typeOf(f[c])!==SC.T_FUNCTION){f=null}}}}return f},targetViewForEvent:function(a){return a.target?SC.$(a.target).view()[0]:null},sendEvent:function(c,a,d){var e,b;SC.run(function(){if(d){e=d.get("pane")}else{e=this.get("menuPane")||this.get("keyPane")||this.get("mainPane")}b=(e)?e.sendEvent(c,a,d):null},this);return b},listenFor:function(d,c,b,a){b=b?b:this;d.forEach(function(e){var f=b[e];if(f){SC.Event.add(c,e,b,f,null,a)}},this);c=null;return b},setup:function(){this.listenFor(["touchstart","touchmove","touchend","touchcancel","keydown","keyup","beforedeactivate","mousedown","mouseup","dragenter","dragover","dragleave","drop","click","dblclick","mousemove","contextmenu"],document).listenFor(["resize"],window);if(SC.browser.isIE8OrLower){this.listenFor(["focusin","focusout"],document)}else{this.listenFor(["focus","blur"],window)}if(this.keypress){if(SC.CAPTURE_BACKSPACE_KEY&&SC.browser.isMozilla){var d=this;document.onkeypress=function(f){f=SC.Event.normalizeEvent(f);return d.keypress.call(d,f)}}else{SC.Event.add(document,"keypress",this,this.keypress)}}if(SC.platform.supportsCSSTransitions){var c=SC.browser.domPrefix,a=c.toLowerCase(),j=a+"transitionend",h=a+"TransitionEnd",g=c+"TransitionEnd";this[j]=this[h]=this[g]=this.transitionend;this.listenFor(["transitionend",j,h,g],document);if(SC.platform.supportsCSSAnimations){j=a+"animationstart";h=a+"AnimationStart";g=c+"AnimationStart";this[j]=this[h]=this[g]=this.animationstart;this.listenFor(["animationstart",j,h,g],document);j=a+"animationiteration";h=a+"AnimationIteration";g=c+"AnimationIteration";this[j]=this[h]=this[g]=this.animationiteration;this.listenFor(["animationiteration",j,h,g],document);j=a+"animationend";h=a+"AnimationEnd";g=c+"AnimationEnd";this[j]=this[h]=this[g]=this.animationend;this.listenFor(["animationend",j,h,g],document)}}["drag","selectstart"].forEach(function(k){var l=this[k];if(l){if(SC.browser.isIE){var f=this;document.body["on"+k]=function(m){return l.call(f,SC.Event.normalizeEvent(event||window.event))};SC.Event.add(window,"unload",this,function(){document.body["on"+k]=null})}else{SC.Event.add(document,k,this,l)}}},this);var i="mousewheel";if(SC.browser.isMozilla){if(SC.browser.compare(SC.browser.engineVersion,"1.9.1")<0){i="DOMMouseScroll"}else{i="MozMousePixelScroll"}}SC.Event.add(document,i,this,this.mousewheel);this.set("currentWindowSize",this.computeWindowSize());if(SC.browser.os===SC.OS.ios&&SC.browser.name===SC.BROWSER.safari){if(SC.platform&&!SC.platform.touch){SC.platform.simulateTouchEvents()}var e=SC.RunLoop.prototype.endRunLoop,b;b=function(){if(e){e.apply(this,arguments)}var n=SC.RootResponder.responder._touches,p,k,m,l=NO;if(n){for(p in n){if(n[p]._rescuedElement){continue}m=k=n[p].target;while(k&&(k=k.parentNode)&&!l){l=(k===document.body)}if(!l&&m){if(m.parentNode&&m.cloneNode){var o=m.cloneNode(true);m.parentNode.replaceChild(o,m);m.swapNode=o}var f=SC.touchHoldingPen;if(!f){f=SC.touchHoldingPen=document.createElement("div");f.style.display="none";document.body.appendChild(f)}f.appendChild(m);n[p]._rescuedElement=m}}}};SC.RunLoop.prototype.endRunLoop=b}},cleanUpTransitionListeners:function(){var a=SC.platform.transitionendEventName,c=SC.browser.domPrefix,b=c.toLowerCase(),f=b+"transitionend",e=b+"TransitionEnd",d=c+"TransitionEnd";["transitionend",f,e,d].forEach(function(g){if(g!=a){SC.Event.remove(document,g,this,this[g]);this[g]=null}})},cleanUpAnimationListeners:function(){var c=SC.browser.domPrefix,b=c.toLowerCase(),a=SC.platform.animationendEventName,f=b+"animationend",e=b+"AnimationEnd",d=c+"AnimationEnd";["animationend",f,e,d].forEach(function(g){if(g!=a){SC.Event.remove(document,g,this,this[g]);this[g]=null}});a=SC.platform.animationiterationEventName;f=b+"animationiteration";e=b+"AnimationIteration";d=c+"AnimationIteration";["animationiteration",f,e,d].forEach(function(g){if(g!=a){SC.Event.remove(document,g,this,this[g]);this[g]=null}});a=SC.platform.animationstartEventName;f=b+"animationstart";e=b+"AnimationStart";d=c+"AnimationStart";["animationstart",f,e,d].forEach(function(g){if(g!=a){SC.Event.remove(document,g,this,this[g]);this[g]=null}})},_touchedViews:{},_touches:{},touchesForView:function(a){if(this._touchedViews[SC.guidFor(a)]){return this._touchedViews[SC.guidFor(a)].touches}},averagedTouchesForView:function(h,g){var f,m=this.touchesForView(h),b=h._scrr_averagedTouches||(h._scrr_averagedTouches={});if((!m||m.length===0)&&!g){b.x=0;b.y=0;b.d=0;b.touchCount=0}else{var e=this._averagedTouches_touches||(this._averagedTouches_touches=[]);e.length=0;if(m){var d;f=m.length;for(d=0;d<f;d++){e.push(m[d])}}if(g){e.push(g)}var j,c,a=0,o=0,n,l,k=0;f=e.length;for(j=0;j<f;j++){c=e[j];a+=c.pageX;o+=c.pageY}a/=f;o/=f;for(j=0;j<f;j++){c=e[j];n=Math.abs(c.pageX-a);l=Math.abs(c.pageY-o);k+=Math.pow(n*n+l*l,0.5)}k/=f;b.x=a;b.y=o;b.d=k;b.touchCount=f}return b},assignTouch:function(b,a){if(b.hasEnded){throw new Error("Attempt to assign a touch that is already finished.")}if(b.view===a){return}if(b.view){this.unassignTouch(b)}if(!this._touchedViews[SC.guidFor(a)]){this._touchedViews[SC.guidFor(a)]={view:a,touches:SC.CoreSet.create([]),touchCount:0};a.set("hasTouch",YES)}b.view=a;this._touchedViews[SC.guidFor(a)].touches.add(b);this._touchedViews[SC.guidFor(a)].touchCount++},unassignTouch:function(c){var a,b;if(!c.view){return}a=c.view;b=this._touchedViews[SC.guidFor(a)];b.touches.remove(c);b.touchCount--;if(b.touchCount<1){a.set("hasTouch",NO);b.view=null;delete this._touchedViews[SC.guidFor(a)]}c.view=undefined},_flushQueuedTouchResponder:function(){if(this._queuedTouchResponder){var a=this._queuedTouchResponder;this._queuedTouchResponder=null;this.makeTouchResponder.apply(this,a)}},makeTouchResponder:function(f,d,c,k){if(this._isMakingTouchResponder){this._queuedTouchResponder=[f,d,c,k];return}this._isMakingTouchResponder=YES;var h=f.touchResponders,b;if(f.touchResponder===d){this._isMakingTouchResponder=NO;this._flushQueuedTouchResponder();return}var a;if(d){a=d.get("pane")}else{a=this.get("keyPane")||this.get("mainPane")}if(h.indexOf(d)<0){if(k){try{d=(a)?a.sendEvent("touchStart",f,d):null}catch(g){SC.Logger.error("Error in touchStart: "+g);d=null}}else{if(d&&((d.get?d.get("acceptsMultitouch"):d.acceptsMultitouch)||!d.hasTouch)){if(!d.respondsTo("touchStart")){d=null}else{if(d.touchStart(f)===NO){d=null}}}}}if(!c||(h.indexOf(d)>-1&&h[h.length-1]!==d)){this.unassignTouch(f);var i=h.length-1,j=h[i];while(j&&j!==d){b=this.touchesForView(j);if((j.get?j.get("acceptsMultitouch"):j.acceptsMultitouch)||!b){if(j.touchCancelled){j.touchCancelled(f)}}i--;j=h[i];h.pop();f.touchResponder=h[i];f.nextTouchResponder=h[i-1]}}if(d){this.assignTouch(f,d);if(d!==f.touchResponder){h.push(d);f.touchResponder=d;f.nextTouchResponder=h[h.length-2]}}this._isMakingTouchResponder=NO;this._flushQueuedTouchResponder()},captureTouch:function(h,e,g){if(!e){e=this}var f=h.targetView,c=f,d=[],b,a;while(c&&(c!==e)){d.unshift(c);c=c.get("nextResponder")}for(a=d.length,b=0;b<a;b++){c=d[b];if(c.tryToPerform("captureTouch",h)){this.makeTouchResponder(h,c,g,YES);return}}this.makeTouchResponder(h,f,g,YES)},endMissingTouches:function(e){var b,a=e.length,d={},c=[];for(b=0;b<a;b++){d[e[b].identifier]=YES}for(b in this._touches){var f=this._touches[b].identifier;if(!d[f]){c.push(this._touches[b])}}for(b=0,a=c.length;b<a;b++){this.endTouch(c[b]);this.finishTouch(c[b])}},_touchCount:0,endTouch:function(b,g,c){if(!g){g="touchEnd"}var a,f,d,e;this.unassignTouch(b);if(b.touchResponder){e=b.touchResponder;f=b.touchResponders;a=f.length-1;d=f[a];while(d){if(d[g]){d[g](b,c)}if(b.touchResponder!==e){break}a--;d=f[a];g="touchCancelled"}}},finishTouch:function(b){var a;this.unassignTouch(b);if(a=b._rescuedElement){if(a.swapNode&&a.swapNode.parentNode){a.swapNode.parentNode.replaceChild(a,a.swapNode)}else{if(a.parentNode===SC.touchHoldingPen){SC.touchHoldingPen.removeChild(a)}}delete b._rescuedElement;a.swapNode=null;a=null}b.touchResponders=null;b.touchResponder=null;b.nextTouchResponder=null;b.hasEnded=YES;if(this._touches[b.identifier]){delete this._touches[b.identifier]}},touchstart:function(a){if(this.ignoreTouchHandle(a)){return YES}var b=NO;SC.run(function(){this.endMissingTouches(a.touches);var e,f=a.changedTouches,d=f.length,g,c;a.touchContext=this;for(e=0;e<d;e++){g=f[e];c=SC.Touch.create(g,this);if(!c.targetView){continue}if(c.hidesTouchIntercept){b=YES}c.timeStamp=a.timeStamp;this._touches[g.identifier]=c;c.event=a;this.captureTouch(c,this);c.event=null}},this);if(b){return YES}return a.hasCustomEventHandling},touchmove:function(a){if(this.ignoreTouchHandle(a)){return YES}SC.run(function(){var c=a.changedTouches,b,m,k,e=c.length,j,i,h,l,f={},g,d=NO;if(this._drag){b=SC.Touch.create(a.changedTouches[0],this);this._drag.tryToPerform("mouseDragged",b)}for(k=0;k<e;k++){b=c[k];m=this._touches[b.identifier];if(!m){continue}if(m.hidesTouchIntercept){d=YES}m.pageX=b.pageX;m.pageY=b.pageY;m.clientX=b.clientX;m.clientY=b.clientY;m.screenX=b.screenX;m.screenY=b.screenY;m.timeStamp=a.timeStamp;m.event=a;if(m.touchResponder){j=m.touchResponder;g=SC.guidFor(j);if(!f[g]){f[g]={view:j,touches:[]}}f[g].touches.push(m)}}if(d){a.allowDefault();return YES}for(k in f){j=f[k].view;i=f[k].touches;a.viewChangedTouches=i;h=this.touchesForView(j);l=h.firstObject();a.pageX=l.pageX;a.pageY=l.pageY;a.clientX=l.clientX;a.clientY=l.clientY;a.screenX=l.screenX;a.screenY=l.screenY;a.startX=l.startX;a.startY=l.startY;a.touchContext=this;j.tryToPerform("touchesDragged",a,h)}c=a.changedTouches;e=c.length;for(k=0;k<e;k++){b=c[k];m=this._touches[b.identifier];if(m){m.event=null}}},this);return a.hasCustomEventHandling},touchend:function(a){var b=NO;if(this.ignoreTouchHandle(a)){return YES}SC.run(function(){var g=a.changedTouches,h,e,d,c=g.length,f=a.isCancel?"touchCancelled":"touchEnd";for(d=0;d<c;d++){h=g[d];h.type="touchend";e=this._touches[h.identifier];if(!e){continue}e.timeStamp=a.timeStamp;e.pageX=h.pageX;e.pageY=h.pageY;e.clientX=h.clientX;e.clientY=h.clientY;e.screenX=h.screenX;e.screenY=h.screenY;e.type="touchend";e.event=a;if(e.hidesTouchIntercept){e.unhideTouchIntercept();b=YES}if(this._drag){this._drag.tryToPerform("mouseUp",h);this._drag=null}this.endTouch(e,f,a);this.finishTouch(e)}},this);if(b){return YES}return a.hasCustomEventHandling},touchcancel:function(a){a.isCancel=YES;this.touchend(a)},ignoreTouchHandle:function(b){if(SC.browser.isMobileSafari){var a=b.target.tagName;if(a==="INPUT"||a==="TEXTAREA"||a==="A"||a==="SELECT"){b.allowDefault();return YES}}return NO},attemptKeyEquivalent:function(b){var d=null;var c=b.commandCodes()[0];if(!c){return NO}var f=this.get("menuPane"),a=this.get("keyPane"),e=this.get("mainPane");if(f){d=f.performKeyEquivalent(c,b);if(d){return d}}if(a){d=a.performKeyEquivalent(c,b);if(d||a.get("isModal")){return d}}if(!d&&e&&(e!==a)){d=e.performKeyEquivalent(c,b);if(d||e.get("isModal")){return d}}return d},_lastModifiers:null,_handleModifierChanges:function(b){var a;a=this._lastModifiers=(this._lastModifiers||{alt:false,ctrl:false,shift:false});var c=false;if(b.altKey!==a.alt){a.alt=b.altKey;c=true}if(b.ctrlKey!==a.ctrl){a.ctrl=b.ctrlKey;c=true}if(b.shiftKey!==a.shift){a.shift=b.shiftKey;c=true}b.modifiers=a;return(c)?(this.sendEvent("flagsChanged",b)?b.hasCustomEventHandling:YES):YES},_isFunctionOrNonPrintableKey:function(a){return !!(a.altKey||a.ctrlKey||a.metaKey||SC.FUNCTION_KEYS[a.which])},_isModifierKey:function(a){return !!SC.MODIFIER_KEYS[a.charCode]},_isPrintableKey:function(a){return((a.originalEvent.which===undefined||a.originalEvent.which>0)&&!(a.which===8||a.which===9||a.which===13||a.which===27))},keydown:function(a){if(SC.none(a)){return YES}var e=a.keyCode;if(SC.browser.isMozilla&&a.keyCode===9){this.keydownCounter=1}if(e===229){this._IMEInputON=YES;return this.sendEvent("keyDown",a)}if(e===27&&this._drag){this._drag.cancelDrag(a);this._drag=null;this._mouseDownView=null;return YES}if(SC.browser.isMozilla&&(a.which===8)){return true}var b=this._handleModifierChanges(a),d=a.target||a.srcElement,c=(a.which===8)&&!SC.allowsBackspaceToPreviousPage&&(d===document.body);if(this._isModifierKey(a)){return(c?NO:b)}b=YES;if(this._isFunctionOrNonPrintableKey(a)){if(e>=37&&e<=40&&SC.browser.isMozilla){return YES}b=this.sendEvent("keyDown",a);if(!b){SC.run(function(){b=!this.attemptKeyEquivalent(a)},this)}else{b=a.hasCustomEventHandling;if(b){c=NO}}}return c?NO:b},keypress:function(b){var c,e=b.keyCode,f=SC.browser.isMozilla;if(f&&b.keyCode===9){this.keydownCounter++;if(this.keydownCounter==2){return YES}}if(f&&(b.which===8)){b.which=e;c=this.sendEvent("keyDown",b);return c?(SC.allowsBackspaceToPreviousPage||b.hasCustomEventHandling):YES}else{var d=(e>=37&&e<=40&&f),a=b.charCode;if((a!==undefined&&a===0&&b.keyCode!==9)&&!d){return YES}if(d){b.which=e}if(d||this._isPrintableKey(b)){return this.sendEvent("keyDown",b)?b.hasCustomEventHandling:YES}}},keyup:function(a){if(this._ffevt){this._ffevt=null}var b=this._handleModifierChanges(a);if(this._isModifierKey(a)){return b}if(this._IMEInputON&&a.keyCode===13){a.isIMEInput=YES;this.sendEvent("keyDown",a);this._IMEInputON=NO}return this.sendEvent("keyUp",a)?a.hasCustomEventHandling:YES},beforedeactivate:function(c){var b=c.toElement;if(b&&b.tagName&&b.tagName!=="IFRAME"){var a=SC.$(b).view()[0];if(a&&a.get("blocksIEDeactivate")){return NO}}return YES},mousedown:function(d){this._clickCount+=1;if(!this._lastMouseUpAt||this._lastClickWhich!==d.which||((Date.now()-this._lastMouseUpAt)>250)){this._clickCount=1}else{var c=this._lastMouseDownX-d.clientX,a=this._lastMouseDownY-d.clientY,f=Math.sqrt(c*c+a*a);if(f>8){this._clickCount=1}}d.clickCount=this._clickCount;this._lastClickWhich=d.which;this._lastMouseDownX=d.clientX;this._lastMouseDownY=d.clientY;var b=this.targetViewForEvent(d);b=this._mouseDownView=this.sendEvent("mouseDown",d,b);if(b&&b.respondsTo("mouseDragged")){this._mouseCanDrag=YES}var e=b?d.hasCustomEventHandling:YES;this._lastMouseDownCustomHandling=e;return e},mouseup:function(b){var g=NO,c=this._drag,f=null;if(c){SC.run(function(){c.tryToPerform("mouseUp",b)})}else{var a=this._mouseDownView,e=this.targetViewForEvent(b);b.clickCount=this._clickCount;if(a){f=this.sendEvent("mouseUp",b,a);if(!f&&(this._clickCount===2)){f=this.sendEvent("doubleClick",b,a);g=YES}if(!f){f=this.sendEvent("click",b,a);g=YES}}if(!f&&!g){if(this._clickCount===2){f=this.sendEvent("doubleClick",b,e)}if(!f){f=this.sendEvent("click",b,e)}}}this._mouseCanDrag=NO;this._mouseDownView=this._drag=null;this._lastMouseUpAt=Date.now();var d=f?b.hasCustomEventHandling:YES;this._lastMouseUpCustomHandling=d;return d},click:function(a){if(!this._lastMouseUpCustomHandling||!this._lastMouseDownCustomHandling){a.preventDefault();a.stopPropagation();return NO}return YES},dblclick:function(a){if(SC.browser.isIE8OrLower){this._clickCount=2;this.mouseup(a)}},mousewheel:function(b){var a=this.targetViewForEvent(b),c=this.sendEvent("mouseWheel",b,a);return(c)?b.hasCustomEventHandling:YES},_lastHovered:null,mousemove:function(a){if(SC.browser.isIE){if(this._lastMoveX===a.clientX&&this._lastMoveY===a.clientY){return}}this._lastMoveX=a.clientX;this._lastMoveY=a.clientY;SC.run(function(){var e=this._drag;if(e){if(SC.browser.isIE){if(this._lastMouseDownX!==a.clientX||this._lastMouseDownY!==a.clientY){e.tryToPerform("mouseDragged",a)}}else{e.tryToPerform("mouseDragged",a)}}else{var d=this._lastHovered||[],f=[],g,b,c=this.targetViewForEvent(a);while(c&&(c!==this)){f.push(c);c=c.get("nextResponder")}for(g=0,b=d.length;g<b;g++){c=d[g];if(f.indexOf(c)===-1&&!c.isDestroyed){c.tryToPerform("mouseExited",a)}}for(g=0,b=f.length;g<b;g++){c=f[g];if(d.indexOf(c)!==-1){c.tryToPerform("mouseMoved",a)}else{c.tryToPerform("mouseEntered",a)}}this._lastHovered=f;if(this._mouseDownView){if(SC.browser.isIE){if(this._lastMouseDownX!==a.clientX&&this._lastMouseDownY!==a.clientY){this._mouseDownView.tryToPerform("mouseDragged",a)}}else{this._mouseDownView.tryToPerform("mouseDragged",a)}}}},this)},dragenter:function(a){SC.run(function(){this._dragenter(a)},this)},_dragenter:function(a){if(!this._dragCounter){this._dragCounter=1}else{this._dragCounter++}return this._dragover(a)},dragleave:function(a){SC.run(function(){this._dragleave(a)},this)},_dragleave:function(a){this._dragCounter--;var b=this._dragover(a);return b},_forceDragLeave:function(){this.invokeLast(function(){if(this._dragCounter===0){return}this._dragCounter=0;var a=this._lastDraggedEvt;this._dragover(a)})},dragover:function(a){SC.run(function(){this._dragover(a)},this)},_dragover:function(c){if(c.dataTransfer.types&&(c.dataTransfer.types.contains("Files")||c.dataTransfer.types.contains("text/uri-list"))){c.preventDefault();c.stopPropagation();c.dataTransfer.dropEffect="none"}var d=this._lastDraggedOver||[],f=[],e,a,b=this.targetViewForEvent(c);while(b&&(b!==this)){f.push(b);b=b.get("nextResponder")}if(this._dragLeaveTimer){this._dragLeaveTimer.invalidate()}if(this._dragCounter===0){for(e=0,a=f.length;e<a;e++){b=f[e];b.tryToPerform("dataDragExited",c)}this._lastDraggedOver=this._lastDraggedEvt=this._dragLeaveTimer=null}else{if(c.type!=="dragleave"){for(e=0,a=d.length;e<a;e++){b=d[e];if(f.indexOf(b)===-1){b.tryToPerform("dataDragExited",c)}}for(e=f.length-1;e>=0;e--){b=f[e];if(d.indexOf(b)===-1){b.tryToPerform("dataDragEntered",c)}}for(e=0,a=f.length;e<a;e++){b=f[e];b.tryToPerform("dataDragHovered",c)}this._lastDraggedOver=f;this._lastDraggedEvt=c;this._dragLeaveTimer=SC.Timer.schedule({target:this,action:"_forceDragLeave",interval:300})}}},drop:function(a){SC.run(function(){this._drop(a)},this)},_drop:function(c){if(c.dataTransfer.types&&(c.dataTransfer.types.contains("Files")||c.dataTransfer.types.contains("text/uri-list"))){c.preventDefault();c.stopPropagation();c.dataTransfer.dropEffect="none"}var d=this._lastDraggedOver||[],f=[],e,a,b=this.targetViewForEvent(c);while(b&&(b!==this)){f.push(b);b=b.get("nextResponder")}for(e=0,a=d.length;e<a;e++){b=d[e];if(f.indexOf(b)===-1){b.tryToPerform("dataDragExited",c)}}for(e=0,a=f.length;e<a;e++){b=f[e];if(b.tryToPerform("dataDragDropped",c)){break}}for(e=0,a=f.length;e<a;e++){b=f[e];b.tryToPerform("dataDragExited",c)}this._lastDraggedOver=null;this._lastDraggedAt=null;this._dragCounter=0;if(this._dragLeaveTimer){this._dragLeaveTimer.invalidate()}this._dragLeaveTimer=null},_mouseCanDrag:YES,selectstart:function(b){var c=this.targetViewForEvent(b),a=this.sendEvent("selectStart",b,c);if(c&&c.respondsTo("mouseDragged")){return(a!==null?YES:NO)&&!this._mouseCanDrag}else{return(a!==null?YES:NO)}},drag:function(){return false},contextmenu:function(b){var a=this.targetViewForEvent(b),c;a=this.sendEvent("contextMenu",b,a);c=a?b.hasCustomEventHandling:YES;return c},animationstart:function(b){var a=this.targetViewForEvent(b);this.sendEvent("animationDidStart",b,a);return a?b.hasCustomEventHandling:YES},animationiteration:function(b){var a=this.targetViewForEvent(b);this.sendEvent("animationDidIterate",b,a);return a?b.hasCustomEventHandling:YES},animationend:function(b){var a=this.targetViewForEvent(b);this.sendEvent("animationDidEnd",b,a);return a?b.hasCustomEventHandling:YES},transitionend:function(b){var a=this.targetViewForEvent(b);this.sendEvent("transitionDidEnd",b,a);return a?b.hasCustomEventHandling:YES}});SC.ready(SC.RootResponder,SC.RootResponder.ready=function(){var a;a=SC.RootResponder.responder=SC.RootResponder.create();a.setup()});sc_require("system/root_responder");SC.Application=SC.Responder.extend(SC.ResponderContext,{designModes:{s:500000,m:2000000,l:Infinity},init:function(){arguments.callee.base.apply(this,arguments);SC.ready(this,"_setDesignModes")},_setDesignModes:function(){var b=this.get("designModes"),a=SC.RootResponder.responder;if(b){a.set("designModes",b)}}});SC.Color=SC.Object.extend(SC.Copyable,{original:null,isError:NO,errorValue:null,a:function(a,b){if(b===undefined){return this._a}else{if(this.get("isError")){b=this._a}this._a=b;return b}}.property().cacheable(),_a:1,r:function(a,b){if(b===undefined){return this._r}else{if(this.get("isError")){b=this._r}this._r=b;return b}}.property().cacheable(),_r:0,g:function(a,b){if(b===undefined){return this._g}else{if(this.get("isError")){b=this._g}this._g=b;return b}}.property().cacheable(),_g:0,b:function(a,b){if(b===undefined){return this._b}else{if(this.get("isError")){b=this._b}this._b=b;return b}}.property().cacheable(),_b:0,hue:function(c,d){var e=SC.Color.clampToDeviceGamut,a=SC.Color.rgbToHsl(e(this.get("r")),e(this.get("g")),e(this.get("b"))),b;if(d!==undefined){a[0]=(d%360+360)%360;b=SC.Color.hslToRgb(a[0],a[1],a[2]);this.beginPropertyChanges();this.set("r",b[0]);this.set("g",b[1]);this.set("b",b[2]);this.endPropertyChanges()}return a[0]}.property("r","g","b").cacheable(),saturation:function(c,d){var e=SC.Color.clampToDeviceGamut,a=SC.Color.rgbToHsl(e(this.get("r")),e(this.get("g")),e(this.get("b"))),b;if(d!==undefined){a[1]=SC.Color.clamp(d,0,1);b=SC.Color.hslToRgb(a[0],a[1],a[2]);this.beginPropertyChanges();this.set("r",b[0]);this.set("g",b[1]);this.set("b",b[2]);this.endPropertyChanges()}return a[1]}.property("r","g","b").cacheable(),luminosity:function(c,d){var e=SC.Color.clampToDeviceGamut,a=SC.Color.rgbToHsl(e(this.get("r")),e(this.get("g")),e(this.get("b"))),b;if(d!==undefined){a[2]=SC.Color.clamp(d,0,1);b=SC.Color.hslToRgb(a[0],a[1],a[2]);this.beginPropertyChanges();this.set("r",b[0]);this.set("g",b[1]);this.set("b",b[2]);this.endPropertyChanges()}return a[2]}.property("r","g","b").cacheable(),isEqualTo:function(a){return this.get("r")===a.get("r")&&this.get("g")===a.get("g")&&this.get("b")===a.get("b")&&this.get("a")===a.get("a")},toArgb:function(){var a=SC.Color.clampToDeviceGamut;return"#"+[a(255*this.get("a")),a(this.get("r")),a(this.get("g")),a(this.get("b"))].map(function(b){b=b.toString(16);return b.length===1?"0"+b:b}).join("")},toHex:function(){var a=SC.Color.clampToDeviceGamut;return"#"+[a(this.get("r")),a(this.get("g")),a(this.get("b"))].map(function(b){b=b.toString(16);return b.length===1?"0"+b:b}).join("")},toRgb:function(){var a=SC.Color.clampToDeviceGamut;return"rgb("+a(this.get("r"))+","+a(this.get("g"))+","+a(this.get("b"))+")"},toRgba:function(){var a=SC.Color.clampToDeviceGamut;return"rgba("+a(this.get("r"))+","+a(this.get("g"))+","+a(this.get("b"))+","+this.get("a")+")"},toHsl:function(){var a=Math.round;return"hsl("+a(this.get("hue"))+","+a(this.get("saturation")*100)+"%,"+a(this.get("luminosity")*100)+"%)"},toHsla:function(){var a=Math.round;return"hsla("+a(this.get("hue"))+","+a(this.get("saturation")*100)+"%,"+a(this.get("luminosity")*100)+"%,"+this.get("a")+")"},cssText:function(a,c){if(c===undefined){if(this.get("isError")){return this.get("errorValue")}if(this.get("a")===0){return"transparent"}var b=SC.Color.supportsRgba||SC.Color.supportsArgb;return(this.get("a")===1||!b)?this.toHex():SC.Color.supportsRgba?this.toRgba():this.toArgb()}else{var d=SC.Color._parse(c);this.beginPropertyChanges();if(!d){this._lastValidHash={r:this._r,g:this._g,b:this._b,a:this._a};this.set("r",0);this.set("g",0);this.set("b",0);this.set("a",0);this.set("errorValue",c);this.set("isError",YES)}else{this.setIfChanged("isError",NO);this.setIfChanged("errorValue",null);this.set("r",d.r);this.set("g",d.g);this.set("b",d.b);this.set("a",d.a)}this.endPropertyChanges();return c}}.property("r","g","b","a").cacheable(),validCssText:function(){if(this.get("isError")){return"transparent"}else{return this.get("cssText")}}.property("cssText","isError").cacheable(),reset:function(){if(!this.get("isError")){return this}var a=this._lastValidHash||{r:0,g:0,b:0,a:1};this.beginPropertyChanges();this.set("isError",NO);this.set("errorValue",null);this.set("r",a.r);this.set("g",a.g);this.set("b",a.b);this.set("a",a.a);this.endPropertyChanges();return this},copy:function(){return SC.Color.create({original:this.get("original"),r:this.get("r"),g:this.get("g"),b:this.get("b"),a:this.get("a"),isError:this.get("isError"),errorValue:this.get("errorValue")})},sub:function(a){return SC.Color.create({r:this.get("r")-a.get("r"),g:this.get("g")-a.get("g"),b:this.get("b")-a.get("b"),a:this.get("a")-a.get("a"),isError:this.get("isError")||a.get("isError")})},add:function(a){return SC.Color.create({r:this.get("r")+a.get("r"),g:this.get("g")+a.get("g"),b:this.get("b")+a.get("b"),a:this.get("a")+a.get("a"),isError:this.get("isError")})},mult:function(b){var a=Math.round;return SC.Color.create({r:a(this.get("r")*b),g:a(this.get("g")*b),b:a(this.get("b")*b),a:this.get("a")*b,isError:this.get("isError")})}});SC.Color.mixin({create:function(){var f=SC.A(arguments),e=f.length,g={},a=NO,j=["a","r","g","b"],c,d,b,h;for(d=0;d<e;d++){c=f[d];if(SC.typeOf(c.a)===SC.T_NUMBER||SC.typeOf(c.r)===SC.T_NUMBER||SC.typeOf(c.g)===SC.T_NUMBER||SC.typeOf(c.b)===SC.T_NUMBER){a=YES;c=f[d]=SC.clone(c);for(b=0;b<4;b++){h=j[b];if(SC.typeOf(c[h])===SC.T_NUMBER){g["_"+h]=c[h];delete c[h]}}}}if(a){f.push(g)}return SC.Object.create.apply(this,f)},supportsRgba:(function(){var c=document.getElementsByTagName("script")[0].style,b=c.cssText,a;c.cssText="background-color:rgba(5,2,1,.5)";a=c.backgroundColor.indexOf("rgba")!==-1;c.cssText=b;return a}()),supportsArgb:(function(){var c=document.getElementsByTagName("script")[0].style,b=c.cssText,a;c.cssText='filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#55000000", endColorstr="#55000000");';a=c.backgroundColor.indexOf("#55000000")!==-1;c.cssText=b;return a}()),clamp:function(c,b,a){return Math.max(Math.min(c,a),b)},clampInt:function(c,b,a){return Math.round(SC.Color.clamp(c,b,a))},clampToDeviceGamut:function(a){return SC.Color.clampInt(a,0,255)},hsvToRgb:function(j,x,u){j/=360;var a,l,o,e=Math.floor(j*6),m=j*6-e,d=u*(1-x),c=u*(1-(x*m)),w=u*(1-(x*(1-m))),n=[[u,w,d],[c,u,d],[d,u,w],[d,c,u],[w,d,u],[u,d,c]],k=SC.Color.clampToDeviceGamut;e=e%6;a=k(n[e][0]*255);l=k(n[e][1]*255);o=k(n[e][2]*255);return[a,l,o]},rgbToHsv:function(a,f,j){a/=255;f/=255;j/=255;var k=Math.max(a,f,j),c=Math.min(a,f,j),i=k-c,e,m=k===0?0:i/k,l=k;if(k===c){e=0}else{switch(k){case a:e=(f-j)/i+(f<j?6:0);break;case f:e=(j-a)/i+2;break;case j:e=(a-f)/i+4;break}e/=6}e*=360;return[e,m,l]},hslToRgb:function(f,e,b){f/=360;var d,c,a=SC.Color.hueToRgb,g=SC.Color.clampToDeviceGamut;c=b<=0.5?b*(e+1):b+e-b*e;d=b*2-c;return[g(a(d,c,f+1/3)*255),g(a(d,c,f)*255),g(a(d,c,f-1/3)*255)]},hueToRgb:function(b,a,c){if(c<0){c++}if(c>1){c--}if(c<1/6){return b+(a-b)*c*6}if(c<1/2){return a}if(c<2/3){return b+(a-b)*(2/3-c)*6}return b},rgbToHsl:function(a,i,k){a/=255;i/=255;k/=255;var m=Math.max(a,i,k),e=Math.min(a,i,k),f,n,c=(m+e)/2,j=m-e;if(m===e){f=n=0}else{n=c>0.5?j/(2-m-e):j/(m+e);switch(m){case a:f=(i-k)/j+(i<k?6:0);break;case i:f=(k-a)/j+2;break;case k:f=(a-i)/j+4;break}f/=6}f*=360;return[f,n,c]},PARSE_RGBA:/^rgba\(\s*([\d]+%?)\s*,\s*([\d]+%?)\s*,\s*([\d]+%?)\s*,\s*([.\d]+)\s*\)$/,PARSE_RGB:/^rgb\(\s*([\d]+%?)\s*,\s*([\d]+%?)\s*,\s*([\d]+%?)\s*\)$/,PARSE_HSLA:/^hsla\(\s*(-?[\d]+)\s*\s*,\s*([\d]+)%\s*,\s*([\d]+)%\s*,\s*([.\d]+)\s*\)$/,PARSE_HSL:/^hsl\(\s*(-?[\d]+)\s*,\s*([\d]+)%\s*,\s*([\d]+)%\s*\)$/,PARSE_HEX:/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,PARSE_ARGB:/^#[0-9a-fA-F]{8}$/,KEYWORDS:{aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},from:function(a){if(SC.kindOf(a,SC.Color)){return a.copy()}var b=SC.Color._parse(a),c=SC.Color;if(!b){return SC.Color.create({original:a,isError:YES})}return c.create({original:a,r:c.clampInt(b.r,0,255),g:c.clampInt(b.g,0,255),b:c.clampInt(b.b,0,255),a:c.clamp(b.a,0,1)})},_parse:function(f){var k=SC.Color,j=f,i,h,c,d=1,e=function(b){var a=parseInt(b,10);return b.slice(-1)==="%"?k.clampInt(a*2.55,0,255):k.clampInt(a,0,255)};if(k.KEYWORDS.hasOwnProperty(f)){f=k.KEYWORDS[f]}else{if(SC.none(f)||f===""){f="transparent"}}if(k.PARSE_RGB.test(f)){f=f.match(k.PARSE_RGB);i=e(f[1]);h=e(f[2]);c=e(f[3])}else{if(k.PARSE_RGBA.test(f)){f=f.match(k.PARSE_RGBA);i=e(f[1]);h=e(f[2]);c=e(f[3]);d=parseFloat(f[4],10)}else{if(k.PARSE_HEX.test(f)){if(f.length===4){f="#"+f.charAt(1)+f.charAt(1)+f.charAt(2)+f.charAt(2)+f.charAt(3)+f.charAt(3)}i=parseInt(f.slice(1,3),16);h=parseInt(f.slice(3,5),16);c=parseInt(f.slice(5,7),16)}else{if(k.PARSE_ARGB.test(f)){i=parseInt(f.slice(3,5),16);h=parseInt(f.slice(5,7),16);c=parseInt(f.slice(7,9),16);d=parseInt(f.slice(1,3),16)/255}else{if(k.PARSE_HSL.test(f)){f=f.match(k.PARSE_HSL);f=k.hslToRgb(((parseInt(f[1],10)%360+360)%360),k.clamp(parseInt(f[2],10)/100,0,1),k.clamp(parseInt(f[3],10)/100,0,1));i=f[0];h=f[1];c=f[2]}else{if(k.PARSE_HSLA.test(f)){f=f.match(k.PARSE_HSLA);d=parseFloat(f[4],10);f=k.hslToRgb(((parseInt(f[1],10)%360+360)%360),k.clamp(parseInt(f[2],10)/100,0,1),k.clamp(parseInt(f[3],10)/100,0,1));i=f[0];h=f[1];c=f[2]}else{if(f==="transparent"){i=h=c=0;d=0}else{return null}}}}}}}return{r:i,g:h,b:c,a:d}}});sc_require("system/core_query");sc_require("system/ready");sc_require("system/root_responder");sc_require("system/platform");SC.PORTRAIT_ORIENTATION="portrait";SC.LANDSCAPE_ORIENTATION="landscape";SC.NO_ORIENTATION="desktop";SC.device=SC.Object.create({orientation:SC.PORTRAIT_ORIENTATION,isOffline:NO,mouseLocation:function(){var a=SC.RootResponder.responder,c=a._lastMoveX,b=a._lastMoveY;if(SC.empty(c)||SC.empty(b)){return null}return{x:c,y:b}}.property(),init:function(){arguments.callee.base.apply(this,arguments);if(navigator&&navigator.onLine===false){this.set("isOffline",YES)}},setup:function(){var a=SC.RootResponder.responder;a.listenFor(["online","offline"],window,this);this.orientationHandlingShouldChange()},orientationHandlingShouldChange:function(){if(SC.platform.windowSizeDeterminesOrientation){SC.Event.remove(window,"orientationchange",this,this.orientationchange);this.windowSizeDidChange(SC.RootResponder.responder.get("currentWindowSize"))}else{if(SC.platform.supportsOrientationChange){SC.Event.add(window,"orientationchange",this,this.orientationchange);this.orientationchange()}}},windowSizeDidChange:function(a){if(SC.platform.windowSizeDeterminesOrientation){if(a.height>=a.width){SC.device.set("orientation",SC.PORTRAIT_ORIENTATION)}else{SC.device.set("orientation",SC.LANDSCAPE_ORIENTATION)}return YES}return NO},orientationchange:function(a){SC.run(function(){if(window.orientation===0||window.orientation===180){SC.device.set("orientation",SC.PORTRAIT_ORIENTATION)}else{SC.device.set("orientation",SC.LANDSCAPE_ORIENTATION)}})},orientationObserver:function(){var a=SC.$(document.body),b=this.get("orientation");if(b===SC.PORTRAIT_ORIENTATION){a.addClass("sc-portrait")}else{a.removeClass("sc-portrait")}if(b===SC.LANDSCAPE_ORIENTATION){a.addClass("sc-landscape")}else{a.removeClass("sc-landscape")}}.observes("orientation"),online:function(a){SC.run(function(){this.set("isOffline",NO)},this)},offline:function(a){SC.run(function(){this.set("isOffline",YES)},this)}});SC.ready(function(){SC.device.setup()});SC.MODIFIED_KEY_BINDINGS={"ctrl_.":"cancel",shift_tab:"insertBacktab",shift_left:"moveLeftAndModifySelection",shift_right:"moveRightAndModifySelection",shift_up:"moveUpAndModifySelection",shift_down:"moveDownAndModifySelection",alt_left:"moveLeftAndModifySelection",alt_right:"moveRightAndModifySelection",alt_up:"moveUpAndModifySelection",alt_down:"moveDownAndModifySelection",ctrl_a:"selectAll"};SC.BASE_KEY_BINDINGS={escape:"cancel",backspace:"deleteBackward","delete":"deleteForward","return":"insertNewline",tab:"insertTab",left:"moveLeft",right:"moveRight",up:"moveUp",down:"moveDown",home:"moveToBeginningOfDocument",end:"moveToEndOfDocument",pagedown:"pageDown",pageup:"pageUp"};SC.Page=SC.Object.extend({owner:null,get:function(a){var b=this[a];if(b&&b.isClass){this[a]=b=b.create({page:this});if(!this.get("inDesignMode")){b.awake()}return b}else{return arguments.callee.base.apply(this,arguments)}},awake:function(){var b,a;for(a in this){if(!this.hasOwnProperty(a)){continue}b=this[a];if(b&&b.isViewClass){this[a]=b=b.create({page:this})}}return this},getIfConfigured:function(b){var a=this[b];return(a&&a.isViewClass)?null:this.get(b)},loc:function(c){var a,b;for(b in c){if(!c.hasOwnProperty(b)){continue}a=this[b];if(!a||!a.isViewClass){continue}a.loc(c[b])}return this}});SC.Page.design=SC.Page.create;SC.Page.localization=function(a){return a};sc_require("system/builder");SC.MODE_REPLACE="replace";SC.MODE_APPEND="append";SC.MODE_PREPEND="prepend";SC.NON_PIXEL_PROPERTIES=["zIndex","opacity"];SC.COMBO_STYLES={WebkitTransition:["WebkitTransitionProperty","WebkitTransitionDuration","WebkitTransitionDelay","WebkitTransitionTimingFunction"]};SC.RenderContext=SC.Builder.create({SELF_CLOSING:SC.CoreSet.create().addEach(["area","base","basefront","br","hr","input","img","link","meta"]),init:function(d,b){var a;if(b){this.prevObject=b;this.strings=b.strings;this.offset=b.length+b.offset}if(!this.strings){this.strings=[]}if(d===undefined){d="div";a=YES}else{if(d==="div"||d==="label"||d==="a"){a=YES}else{if(SC.typeOf(d)===SC.T_STRING){d=d.toLowerCase();a=YES}}}if(a){this._tagName=d;this._needsTag=YES;this.needsContent=YES;var e=this;while(e){e.length++;e=e.prevObject}this.strings.push(null);this._selfClosing=this.SELF_CLOSING.contains(d)}else{this._elem=d;this._needsTag=NO;this.length=0;this.needsContent=NO}return this},strings:null,offset:0,length:0,updateMode:SC.MODE_REPLACE,needsContent:NO,get:function(b){var a=this.strings||[];return(b===undefined)?a.slice(this.offset,this.length):a[b+this.offset]},html:function(a){return this.push(a)},push:function(d){var b=this.strings,a=arguments.length;if(!b){this.strings=b=[]}if(a>1){b.push.apply(b,arguments)}else{b.push(d)}var e=this;while(e){e.length+=a;e=e.prevObject}this.needsContent=YES;return this},text:function(){var b=arguments.length,a=0;for(a=0;a<b;a++){this.push(SC.RenderContext.escapeHTML(arguments[a]))}return this},join:function(b){if(this._needsTag){this.end()}var a=this.strings;return a?a.join(b||""):""},begin:function(a){return SC.RenderContext(a,this)},element:function(){return this._elem?this._elem:SC.$(this.join())[0]},remove:function(a){if(!a){return}var b,c=this._elem;if(!c||!c.removeChild){return}b=document.getElementById(a);if(b){b=c.removeChild(b);b=null}},update:function(){var c=this._elem,g=this.updateMode,e,d,a,f,b;if(!c){return}e=this.$();if(this.length>0){if(g===SC.MODE_REPLACE){e.html(this.join())}else{a=c.cloneNode(false);a.innerHTML=this.join();f=a.firstChild;while(f){b=f.nextSibling;c.insertBefore(f,b);f=b}f=b=a=null}}if(this._idDidChange&&(d=this._id)){e.attr("id",d)}c=this._elem=null;return this.prevObject||this},_DEFAULT_ATTRS:{},end:function(){var l="",b="",i,g,j=this._attrs,d=this._classes,a=this._id,k=this._styles,h,f;l="<"+this._tagName;if(j||d||k||a){if(!j){j=this._DEFAULT_ATTRS}if(a){j.id=a}if(d){j["class"]=d.join(" ")}if(k){for(i in k){if(!k.hasOwnProperty(i)){continue}g=k[i];if(g===null){continue}if(typeof g===SC.T_NUMBER&&!SC.NON_PIXEL_PROPERTIES.contains(i)){g+="px"}b=b+this._dasherizeStyleName(i)+": "+g+"; "}j.style=b}l=l+" ";for(i in j){if(!j.hasOwnProperty(i)){continue}g=j[i];if(g===null){continue}l=l+i+'="'+g+'" '}if(j===this._DEFAULT_ATTRS){delete j.style;delete j["class"];delete j.id}}h=this.strings;f=(this._selfClosing===NO)?NO:(this.length===1);l=l+(f?" />":">");h[this.offset]=l;if(!f){h.push("</"+this._tagName+">");var e=this;while(e){e.length++;e=e.prevObject}}this._elem=null;return this.prevObject||this},tag:function(a,b){return this.begin(a,b).end()},tagName:function(a){if(a===undefined){if(!this._tagName&&this._elem){this._tagName=this._elem.tagName}return this._tagName}else{this._tagName=a;this._tagNameDidChange=YES;return this}},id:function(a){if(a===undefined){if(!this._id&&this._elem){this._id=this._elem.id}return this._id}else{this._id=a;this._idDidChange=YES;return this}},classNames:function(a){if(a){return this.setClass(a)}else{return this.classes()}},classes:function(){if(!this._classes){if(this._elem){var a=this.$().attr("class");if(a&&(a=a.toString()).length>0){this._classes=a.split(/\s/)}else{this._classes=[]}}else{this._classes=[]}}return this._classes},addClass:function(b){if(SC.typeOf(b)===SC.T_ARRAY){for(var a=0,c=b.length,d={};a<c;a++){d[b[a]]=YES}b=d}return this.setClass(b,YES)},removeClass:function(a){return this.setClass(a,NO)},setClass:function(d,e){var g=NO,c=this.classes();if(SC.typeOf(d)===SC.T_ARRAY){this.resetClasses();c=this.classes();for(var b=0,f=d.length;b<f;b++){g=this._setClass(c,d[b],YES)||g}}else{if(SC.typeOf(d)===SC.T_HASH){for(var a in d){if(!d.hasOwnProperty(a)){continue}e=d[a];g=this._setClass(c,a,e)||g}}else{g=this._setClass(c,d,e)}}if(g){this._classesDidChange=YES;if(this._elem){this.$().attr("class",c.join(" "))}}return this},_setClass:function(c,b,d){var e=NO,a;a=c.indexOf(b);if(a>=0&&!d){c.splice(a,1);e=YES}else{if(a<0&&d){c.push(b);e=YES}}return e},hasClass:function(a){if(this._elem){return this.$().hasClass(a)}return this.classes().indexOf(a)>=0},resetClassNames:function(){return this.resetClasses()},resetClasses:function(){var b=NO,a=this.classes();b=a.length;this._classes=[];if(b){this._classesDidChange=YES;if(this._elem){this.$().attr("class","")}}return this},_STYLE_REGEX:/-?\s*([^:\s]+)\s*:\s*([^;]+)\s*;?/g,styles:function(e){if(e){return this.setStyle(e)}if(!this._styles){if(this._elem){var a=this.$().attr("style");if(a&&(a=a.toString()).length>0){if(SC.browser.name===SC.BROWSER.ie){a=a.toLowerCase()}var d={},b,c=this._STYLE_REGEX;c.lastIndex=0;while(b=c.exec(a)){d[this._camelizeStyleName(b[1])]=b[2]}this._styles=d}else{this._styles={}}}else{this._styles={}}}return this._styles},addStyle:function(a,b){return this.setStyle(a,b)},removeStyle:function(a){return this.setStyle(a)},css:function(a,b){return this.setStyle(a,b)},setStyle:function(a,e){var d=NO,c=this.styles();if(SC.typeOf(a)===SC.T_HASH){for(var b in a){if(!a.hasOwnProperty(b)){continue}e=a[b];d=this._deleteComboStyles(c,b)||d;d=this._setOnHash(c,b,e)||d}}else{d=this._deleteComboStyles(c,a);d=this._setOnHash(c,a,e)||d}if(d){if(this._elem){this.$().css(c)}}return this},_deleteComboStyles:function(e,d){var g=SC.COMBO_STYLES[d],f=NO,c;if(g){for(var a=0,b=g.length;a<b;a++){c=g[a];if(e[c]){delete e[c];f=YES}}}return f},_setOnHash:function(d,a,c){var e=d[a],b=true;if(e==null&&c!=null){d[a]=c}else{if(e!=null&&c==null){d[a]=""}else{if(e!=c){d[a]=c}else{b=false}}}return b},resetStyles:function(){var c=NO,b=this.styles();for(var a in b){if(!b.hasOwnProperty(a)){continue}c=YES}this._styles={};if(c){if(this._elem){this.$().attr("style","")}}return this},attrs:function(){if(!this._attrs){if(this._elem){var d={},b=this._elem.attributes,f=b.length;for(var e=0,a,c;e<f;e++){a=b.item(e);c=a.nodeName;if(c.match(/^(?!class|style).*$/i)){d[c]=a.value}}this._attrs=d}else{this._attrs={}}}return this._attrs},attr:function(a,b){if(a){if(SC.typeOf(a)===SC.T_HASH||b!==undefined){return this.setAttr(a,b)}else{return this.attrs()[a]}}return this.attrs()},addAttr:function(a,b){return this.setAttr(a,b)},removeAttr:function(a){return this.setAttr(a)},setAttr:function(a,e){var d=NO,b=this.attrs(),c;if(SC.typeOf(a)===SC.T_HASH){for(c in a){if(!a.hasOwnProperty(c)){continue}e=a[c];d=this._setOnHash(b,c,e)||d}}else{d=this._setOnHash(b,a,e)}if(d){this._attrsDidChange=YES;if(this._elem){this.$().attr(a,e)}}return this},$:function(c){var a,b=this._elem;a=!b?SC.$([]):(c===undefined)?SC.$(b):SC.$(c,b);b=null;return a},_camelizeStyleName:function(a){var b=a.match(/^-(webkit|moz|o)-/),c=SC.String.camelize(a);if(b){return c.substr(0,1).toUpperCase()+c.substr(1)}else{return c}},_dasherizeStyleName:function(a){var b=SC.String.dasherize(a);if(b.match(/^(webkit|moz|ms|o)-/)){b="-"+b}return b}});(function(){var b=/[<>]|&(?![\d\w#]{1,7};)/g,a=function(c){switch(c){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;"}};SC.RenderContext.escapeHTML=function(c){if(!c){return""}if(SC.typeOf(c)===SC.T_NUMBER){c=c.toString()}return c.replace(b,a)}})();(function(){var b=0;var c=["ms","moz","webkit","o"];for(var a=0;a<c.length&&!window.requestAnimationFrame;++a){window.requestAnimationFrame=window[c[a]+"RequestAnimationFrame"];window.cancelRequestAnimationFrame=window[c[a]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(h,e){var d=new Date().getTime();var f=Math.max(0,16-(d-b));var g=window.setTimeout(function(){h(d+f)},f);b=d+f;return g}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(d){clearTimeout(d)}}}());SC.SelectionSet=SC.Object.extend(SC.Enumerable,SC.Freezable,SC.Copyable,{isSelectionSet:YES,length:function(){var a=0,b=this._sets,c=this._objects;if(c){a+=c.get("length")}if(b){b.forEach(function(d){a+=d.get("length")})}return a}.property().cacheable(),sources:function(){var c=[],d=this._sets,b=d?d.length:0,a,f,e;for(a=0;a<b;a++){f=d[a];if(f&&f.get("length")>0&&f.source){c.push(f.source)}}return c}.property().cacheable(),indexSetForSource:function(e){if(!e||!e.isSCArray){return null}var b=this._indexSetCache,d=this._objects,c,a;if(!b){b=this._indexSetCache={}}c=b[SC.guidFor(e)];if(c&&c._sourceRevision&&(c._sourceRevision!==e.propertyRevision)){c=null}if(!c){c=this._indexSetForSource(e,NO);if(c&&c.get("length")===0){c=null}if(d){if(c){c=c.copy()}d.forEach(function(f){if((a=e.indexOf(f))>=0){if(!c){c=SC.IndexSet.create()}c.add(a)}},this)}if(c){c=b[SC.guidFor(e)]=c.frozenCopy();c._sourceRevision=e.propertyRevision}}return c},_indexSetForSource:function(f,g){if(g===undefined){g=YES}var d=SC.guidFor(f),c=this[d],e=this._sets,a=e?e.length:0,b=null;if(c>=a){c=null}if(SC.none(c)){if(g&&!this.isFrozen){this.propertyWillChange("sources");if(!e){e=this._sets=[]}b=e[a]=SC.IndexSet.create();b.source=f;this[d]=a;this.propertyDidChange("sources")}}else{b=e?e[c]:null}return b},add:function(a,b,d){if(this.isFrozen){throw SC.FROZEN_ERROR}var g,f,j,i,c,e,h,k;if(b===undefined&&d===undefined){if(!a){throw new Error("Must pass params to SC.SelectionSet.add()")}if(a.isIndexSet){return this.add(a.source,a)}if(a.isSelectionSet){g=a._sets;k=a._objects;f=g?g.length:0;this.beginPropertyChanges();for(j=0;j<f;j++){i=g[j];if(i&&i.get("length")>0){this.add(i.source,i)}}if(k){this.addObjects(k)}this.endPropertyChanges();return this}}i=this._indexSetForSource(a,YES);c=this.get("length");h=i.get("length");e=c-h;i.add(b,d);this._indexSetCache=null;e+=i.get("length");if(e!==c){this.propertyDidChange("length");this.enumerableContentDidChange();if(h===0){this.notifyPropertyChange("sources")}}return this},remove:function(a,c,d){if(this.isFrozen){throw SC.FROZEN_ERROR}var j,h,m,f,l,b,g,k,n,e;if(c===undefined&&d===undefined){if(!a){throw new Error("Must pass params to SC.SelectionSet.remove()")}if(a.isIndexSet){return this.remove(a.source,a)}if(a.isSelectionSet){j=a._sets;n=a._objects;h=j?j.length:0;this.beginPropertyChanges();for(m=0;m<h;m++){l=j[m];if(l&&l.get("length")>0){this.remove(l.source,l)}}if(n){this.removeObjects(n)}this.endPropertyChanges();return this}}l=this._indexSetForSource(a,YES);b=this.get("length");g=b-l.get("length");if(l&&(n=this._objects)){if(d!==undefined){c=SC.IndexSet.create(c,d);d=undefined}for(f=n.get("length")-1;f>=0;--f){e=n[f];m=a.indexOf(e);if(c.contains(m)){n.remove(e);g--}}}l.remove(c,d);k=l.get("length");g+=k;this._indexSetCache=null;if(g!==b){this.propertyDidChange("length");this.enumerableContentDidChange();if(k===0){this.notifyPropertyChange("sources")}}return this},contains:function(b,d,a){if(d===undefined&&a===undefined){return this.containsObject(b)}var c=this.indexSetForSource(b);if(!c){return NO}return c.contains(d,a)},intersects:function(b,d,a){var c=this.indexSetForSource(b,NO);if(!c){return NO}return c.intersects(d,a)},_TMP_ARY:[],addObject:function(b){var c=this._TMP_ARY,a;c[0]=b;a=this.addObjects(c);c.length=0;return a},addObjects:function(a){var d=this._objects,b,c;if(!d){d=this._objects=SC.CoreSet.create()}b=d.get("length");d.addEach(a);c=d.get("length");this._indexSetCache=null;if(c!==b){this.propertyDidChange("length");this.enumerableContentDidChange()}return this},removeObject:function(b){var c=this._TMP_ARY,a;c[0]=b;a=this.removeObjects(c);c.length=0;return a},removeObjects:function(b){var e=this._objects,c,d,a;if(!e){return this}c=e.get("length");e.removeEach(b);d=e.get("length");if(a=this._sets){a.forEach(function(f){c+=f.get("length");f.removeObjects(b);d+=f.get("length")},this)}this._indexSetCache=null;if(d!==c){this.propertyDidChange("length");this.enumerableContentDidChange()}return this},containsObject:function(c){var e=this._objects;if(e&&e.contains(c)){return YES}var d=this._sets,b=d?d.length:0,a,f;for(a=0;a<b;a++){f=d[a];if(f&&f.indexOf(c)>=0){return YES}}return NO},constrain:function(e){var g,b,a,d;this.beginPropertyChanges();this.get("sources").forEach(function(h){if(h===e){return}var i=this._indexSetForSource(e,NO);if(i){this.remove(e,i)}},this);g=this._indexSetForSource(e,NO);if(g&&((a=g.get("max"))>(b=e.get("length")))){this.remove(e,b,a-b)}if(d=this._objects){var c,f;for(c=d.length-1;c>=0;c--){f=d[c];if(e.indexOf(f)<0){this.removeObject(f)}}}this.endPropertyChanges();return this},isEqual:function(g){var f,d,b,a,c,e;if(!g||!g.isSelectionSet){return NO}if(g===this){return YES}if((this._sets===g._sets)&&(this._objects===g._objects)){return YES}if(this.get("length")!==g.get("length")){return NO}f=this._objects;d=g._objects;if(f||d){if((f?f.get("length"):0)!==(d?d.get("length"):0)){return NO}if(f&&!f.isEqual(d)){return NO}}c=this.get("sources");a=c.get("length");for(b=0;b<a;b++){e=c.objectAt(b);f=this._indexSetForSource(e,NO);d=this._indexSetForSource(e,NO);if(!!d!==!!f){return NO}if(f&&!f.isEqual(d)){return NO}}return YES},clear:function(){if(this.isFrozen){throw SC.FROZEN_ERROR}if(this._sets){this._sets.length=0}if(this._objects){this._objects=null}this._indexSetCache=null;this.propertyDidChange("length");this.enumerableContentDidChange();this.notifyPropertyChange("sources");return this},copy:function(){var c=this.constructor.create(),d=this._sets,b=d?d.length:0,a,e;if(d&&b>0){d=c._sets=d.slice();for(a=0;a<b;a++){if(!(e=d[a])){continue}e=d[a]=e.copy();c[SC.guidFor(e.source)]=a}}if(this._objects){c._objects=this._objects.copy()}return c},freeze:function(){if(this.get("isFrozen")){return this}var a=this._sets,b=a?a.length:0,c;while(--b>=0){c=a[b];if(c){c.freeze()}}if(this._objects){this._objects.freeze()}this.set("isFrozen",YES);return this},toString:function(){var a=this._sets||[];a=a.map(function(b){return b.toString().replace("SC.IndexSet",SC.guidFor(b.source))},this);if(this._objects){a.push(this._objects.toString())}return"SC.SelectionSet:%@<%@>".fmt(SC.guidFor(this),a.join(","))},firstObject:function(){var b=this._sets,c=this._objects;if(b&&b.get("length")>0){var e=b?b[0]:null,d=e?e.source:null,a=e?e.firstObject():-1;if(d&&a>=0){return d.objectAt(a)}}return c?c.firstObject():undefined}.property(),nextObject:function(c,e,b){var d,a;if(c===0){d=b.objects=[];this.forEach(function(f){d.push(f)},this);b.max=d.length}d=b.objects;a=d[c];if(c+1>=b.max){b.objects=b.max=null}return a},forEach:function(g,e){var c=this._sets,d=this._objects,b=c?c.length:0,f,a;for(a=0;a<b;a++){f=c[a];if(f){f.forEachObject(g,e)}}if(d){d.forEach(g,e)}return this}});SC.SelectionSet.prototype.clone=SC.SelectionSet.prototype.copy;SC.SelectionSet.EMPTY=SC.SelectionSet.create().freeze();sc_require("mixins/delegate_support");SC.SparseArray=SC.Object.extend(SC.Observable,SC.Enumerable,SC.Array,SC.DelegateSupport,{_requestingLength:0,_requestingIndex:0,length:function(){var a=this.delegate;if(a&&SC.none(this._length)&&a.sparseArrayDidRequestLength){this._requestingLength++;a.sparseArrayDidRequestLength(this);this._requestingLength--}return this._length||0}.property().cacheable(),provideLength:function(b){var a;if(SC.none(b)){this._sa_content=null}if(b!==this._length){a=this._length;this._length=b;if(this._requestingLength<=0){this.arrayContentDidChange(0,a||0,b||0)}}return this},rangeWindowSize:1,requestedRangeIndex:null,init:function(){arguments.callee.base.apply(this,arguments);this.requestedRangeIndex=[];this._TMP_PROVIDE_ARRAY=[];this._TMP_PROVIDE_RANGE={length:1};this._TMP_RANGE={}},objectAt:function(a,d){var c=this._sa_content,b;if(a>=this.get("length")){return undefined}if(!c){c=this._sa_content=[]}if((b=c[a])===undefined){if(!d){this.requestIndex(a)}b=c[a]}return b},definedIndexes:function(d){var c=SC.IndexSet.create(),e=this._sa_content,b,a;if(!e){return c.freeze()}if(d){d.forEach(function(f){if(e[f]!==undefined){c.add(f)}})}else{a=e.length;for(b=0;b<a;b++){if(e[b]!==undefined){c.add(b)}}}return c.freeze()},_TMP_RANGE:{},requestIndex:function(b){var c=this.delegate;if(!c){return this}var a=this.get("rangeWindowSize"),e=b;if(a>1){e=e-Math.floor(e%a)}if(a<1){a=1}this._requestingIndex++;if(c.sparseArrayDidRequestRange){var d=this._TMP_RANGE;if(this.wasRangeRequested(e)===-1){d.start=e;d.length=a;this.requestedRangeIndex.push(e);c.sparseArrayDidRequestRange(this,d)}}else{if(c.sparseArrayDidRequestIndex){while(--a>=0){c.sparseArrayDidRequestIndex(this,e+a)}}}this._requestingIndex--;return this},wasRangeRequested:function(c){var b,a;for(b=0,a=this.requestedRangeIndex.length;b<a;b++){if(this.requestedRangeIndex[b]===c){return b}}return -1},rangeRequestCompleted:function(b){var a=this.wasRangeRequested(b);if(a>=0){this.requestedRangeIndex.removeAt(a,1);return YES}return NO},provideObjectsInRange:function(b,e){var c=this._sa_content;if(!c){c=this._sa_content=[]}var d=b.start,a=b.length;while(--a>=0){c[d+a]=e.objectAt(a)}if(this._requestingIndex<=0){this.arrayContentDidChange(b.start,b.length,b.length)}return this},provideObjectAtIndex:function(c,b){var d=this._TMP_PROVIDE_ARRAY,a=this._TMP_PROVIDE_RANGE;d[0]=b;a.start=c;return this.provideObjectsInRange(a,d)},objectsDidChangeInRange:function(a){var b=this._sa_content;if(b){if(a.start===0&&SC.maxRange(a)>=b.length){this._sa_content=null}else{var d=a.start,c=Math.min(d+a.length,b.length);while(--c>=d){b[c]=undefined}}}this.arrayContentDidChange(a.start,a.length,a.length);return this},indexOf:function(d){var e,b,a=this.delegate;if(a&&a.sparseArrayDidRequestIndexOf){b=a.sparseArrayDidRequestIndexOf(this,d)}if(SC.none(b)){e=this._sa_content;if(!e){e=this._sa_content=[]}b=e.indexOf(d)}return b},replace:function(b,g,e){e=e||[];var c=this.delegate;if(c){if(!c.sparseArrayShouldReplace||!c.sparseArrayShouldReplace(this,b,g,e)){return this}}var d=this._sa_content;if(!d){d=this._sa_content=[]}d.replace(b,g,e);var a=e?(e.get?e.get("length"):e.length):0;var f=a-g;this.arrayContentWillChange(b,g,a);if(!SC.none(this._length)){this.propertyWillChange("length");this._length+=f;this.propertyDidChange("length")}this.arrayContentDidChange(b,g,a);return this},reset:function(){var a;this._sa_content=null;a=this._length;this._length=null;this.arrayContentDidChange(0,a,0);this.invokeDelegateMethod(this.delegate,"sparseArrayDidReset",this);return this}});SC.SparseArray.array=function(a){return this.create({_length:a||0})};SC.Timer=SC.Object.extend({target:null,action:null,isPooled:NO,interval:0,startTime:null,repeats:NO,until:null,isPaused:NO,isScheduled:NO,isValid:YES,lastFireTime:0,fireTime:function(){if(!this.get("isValid")){return -1}var e=this.get("startTime");if(!e||e===0){return -1}var a=this.get("interval"),c=this.get("lastFireTime");if(c<e){c=e}var b;if(this.get("repeats")){if(a===0){b=c}else{b=e+(Math.floor((c-e)/a)+1)*a}}else{b=e+a}var d=this.get("until");if(d&&d>0&&b>d){b=d}return b}.property("interval","startTime","repeats","until","isValid","lastFireTime").cacheable(),schedule:function(){if(!this.get("isValid")){return this}this.beginPropertyChanges();if(!this.startTime){this.set("startTime",SC.RunLoop.currentRunLoop.get("startTime"))}var a=this.get("fireTime"),b=this.get("lastFireTime");if(a>=b){this.set("isScheduled",YES);SC.RunLoop.currentRunLoop.scheduleTimer(this,a)}this.endPropertyChanges();return this},invalidate:function(){this.beginPropertyChanges();this.set("isValid",NO);var a=SC.RunLoop.currentRunLoop;if(a){a.cancelTimer(this)}this.action=this.target=null;this.endPropertyChanges();if(this.get("isPooled")){SC.Timer.returnTimerToPool(this)}return this},fire:function(){var b=Date.now();this.set("lastFireTime",b);var a=this.get("fireTime");if(!this.get("isPaused")){this.performAction()}if(a>b){this.schedule()}else{this.invalidate()}},performAction:function(){var a=SC.typeOf(this.action);if(a==SC.T_FUNCTION){this.action.call((this.target||this),this)}else{if(a===SC.T_STRING){if(this.action.indexOf(".")>=0){var e=this.action.split(".");var c=e.pop();var d=SC.objectForPropertyPath(e,window);var b=d.get?d.get(c):d[c];if(b&&SC.typeOf(b)==SC.T_FUNCTION){b.call(d,this)}else{throw new Error("%@: Timer could not find a function at %@".fmt(this,this.action))}}else{SC.RootResponder.responder.sendAction(this.action,this.target,this)}}}},init:function(){arguments.callee.base.apply(this,arguments);if(this.startTime instanceof Date){this.startTime=this.startTime.getTime()}if(this.until instanceof Date){this.until=this.until.getTime()}},RESET_DEFAULTS:{target:null,action:null,isPooled:NO,isPaused:NO,isScheduled:NO,isValid:YES,interval:0,repeats:NO,until:null,startTime:null,lastFireTime:0},reset:function(b){if(!b){b=SC.EMPTY_HASH}this.propertyWillChange("fireTime");var c=this.RESET_DEFAULTS;for(var a in c){if(!c.hasOwnProperty(a)){continue}this[a]=SC.none(b[a])?c[a]:b[a]}this.propertyDidChange("fireTime");return this},removeFromTimerQueue:function(c){var b=this._timerQueuePrevious,a=this._timerQueueNext;if(!b&&!a&&c!==this){return c}if(b){b._timerQueueNext=a}if(a){a._timerQueuePrevious=b}this._timerQueuePrevious=this._timerQueueNext=null;return(c===this)?a:c},scheduleInTimerQueue:function(c,b){this._timerQueueRunTime=b;var a=c;var d=null;while(a&&a._timerQueueRunTime<b){d=a;a=a._timerQueueNext}if(d){d._timerQueueNext=this;this._timerQueuePrevious=d}if(a){a._timerQueuePrevious=this;this._timerQueueNext=a}return(a===c)?this:c},collectExpiredTimers:function(c,a){if(this._timerQueueRunTime>a){return this}c.push(this);var b=this._timerQueueNext;this._timerQueueNext=null;if(b){b._timerQueuePrevious=null}return b?b.collectExpiredTimers(c,a):null}});SC.Timer.schedule=function(a){var b;if(!a||SC.none(a.isPooled)||a.isPooled){b=this.timerFromPool(a)}else{b=this.create(a)}return b.schedule()};SC.Timer.timerFromPool=function(a){var b=this._timerPool;if(!b){b=this._timerPool=[]}var c=b.pop();if(!c){c=this.create()}return c.reset(a)};SC.Timer.returnTimerToPool=function(a){if(!this._timerPool){this._timerPool=[]}this._timerPool.push(a);return this};sc_require("system/browser");SC.mixin({normalizeURL:function(a){if(a.slice(0,1)=="/"){a=window.location.protocol+"//"+window.location.host+a}else{if((a.slice(0,5)=="http:")||(a.slice(0,6)=="https:")){}else{a=window.location.href+"/"+a}}return a},isPercentage:function(a){return(a<1&&a>0)},minX:function(a){return a.x||0},maxX:function(a){return(a.x||0)+(a.width||0)},midX:function(a){return(a.x||0)+((a.width||0)/2)},minY:function(a){return a.y||0},maxY:function(a){return(a.y||0)+(a.height||0)},midY:function(a){return(a.y||0)+((a.height||0)/2)},centerX:function(b,a){return(a.width-b.width)/2},centerY:function(b,a){return(a.height-b.height)/2},offset:function(d,c){var f,b,h,a;c=c||"document";if(c==="parent"){a=jQuery(d).position()}else{a=jQuery(d).offset();if(SC.browser.isMobileSafari){f=navigator.userAgent;b=f.indexOf("Mobile/");h=f.substring(b+7,b+9);if(parseInt(SC.browser.mobileSafari,0)<=532||(h<="8A")){a.left-=window.pageXOffset;a.top-=window.pageYOffset}}if(c==="viewport"){if(SC.browser.isIE8OrLower){a.left-=$(window).scrollLeft();a.top-=$(window).scrollTop()}else{a.left-=window.pageXOffset;a.top-=window.pageYOffset}}}try{a.x=a.left;a.y=a.top}catch(g){a={x:a.left,y:a.top}}delete a.left;delete a.top;return a},viewportOffset:function(b){var a=SC.offset(b,"viewport");return{x:a.left,y:a.top}}});SC.mixin({ZERO_POINT:{x:0,y:0},pointInRect:function(a,b){return(a.x>=SC.minX(b))&&(a.y>=SC.minY(b))&&(a.x<=SC.maxX(b))&&(a.y<=SC.maxY(b))},rectsEqual:function(b,a,c){if(!b||!a){return(b==a)}if(!c&&c!==0){c=0.1}if((b.y!=a.y)&&(Math.abs(b.y-a.y)>c)){return NO}if((b.x!=a.x)&&(Math.abs(b.x-a.x)>c)){return NO}if((b.width!=a.width)&&(Math.abs(b.width-a.width)>c)){return NO}if((b.height!=a.height)&&(Math.abs(b.height-a.height)>c)){return NO}return YES},intersectRects:function(b,a){var c={x:Math.max(SC.minX(b),SC.minX(a)),y:Math.max(SC.minY(b),SC.minY(a)),width:Math.min(SC.maxX(b),SC.maxX(a)),height:Math.min(SC.maxY(b),SC.maxY(a))};c.width=Math.max(0,c.width-c.x);c.height=Math.max(0,c.height-c.y);return c},unionRects:function(b,a){var c={x:Math.min(SC.minX(b),SC.minX(a)),y:Math.min(SC.minY(b),SC.minY(a)),width:Math.max(SC.maxX(b),SC.maxX(a)),height:Math.max(SC.maxY(b),SC.maxY(a))};c.width=Math.max(0,c.width-c.x);c.height=Math.max(0,c.height-c.y);return c},scaleRect:function(h,a,l,k){if(a==null){a=1}if(l==null){l=0.5}if(k==null){k=0.5}if(a===1){return SC.cloneRect(h)}var j,i;switch(SC.typeOf(a)){case SC.T_ARRAY:j=a[0];i=a[1];break;case SC.T_HASH:j=a.x;i=a.y;break;default:j=a;i=a;break}var g=h.height*i,e=h.width*j,c=g-h.height,f=e-h.width;var d=h.x-(f*l),b=h.y-(c*k);return{height:g,width:e,x:d,y:b}},cloneRect:function(a){return{x:a.x,y:a.y,width:a.width,height:a.height}},stringFromRect:function(a){if(!a){return"(null)"}else{return"{ x:"+a.x+", y:"+a.y+", width:"+a.width+", height:"+a.height+" }"}}});sc_require("views/view");SC.DESIGN_MODE_CLASS_NAMES={s:"sc-small",m:"sc-medium",l:"sc-large",xl:"sc-xlarge"};SC.View.reopen({designMode:null,modeAdjust:null,adjustChildDesignModes:function(b,d){var e=this.get("childViews");var c,a=e.get("length");for(c=0;c<a;c++){var f=e.objectAt(c);f.updateDesignMode(b,d)}},updateDesignMode:function(c,h){if(c===h){return}var a=this.get("classNames"),g,d,i,f,e,b,k;this.set("designMode",h);if(h){k=h.split("_")[0]}g=this.get("modeAdjust");if(g){this.beginPropertyChanges();b=this._originalProperties;if(b){for(i in b){this.set(i,b[i])}this._originalProperties=null}if(h){if(g[k]||g[h]){e=SC.merge(g[k],g[h]);this._originalProperties={};for(i in e){this._originalProperties[i]=this.get(i);if(i==="layout"){this.adjust(e[i])}else{this.set(i,e[i])}}}}this.endPropertyChanges()}var j;f=this.get("layer");if(f){d=this.$();if(c){j=SC.DESIGN_MODE_CLASS_NAMES[c.split("_")[0]];d.removeClass(j);a.removeObject(j)}if(h){j=SC.DESIGN_MODE_CLASS_NAMES[k];d.addClass(j);a.push(j)}}else{if(h){j=SC.DESIGN_MODE_CLASS_NAMES[k];a.push(j)}}this.adjustChildDesignModes(c,h)}});sc_require("panes/pane");sc_require("panes/keyboard");sc_require("panes/layout");sc_require("panes/manipulation");sc_require("panes/visibility");sc_require("panes/pane_statechart");SC.MainPane=SC.Pane.extend({layout:{minHeight:200,minWidth:200},didAppendToDocument:function(){var a=this.rootResponder;a.makeMainPane(this);this.becomeKeyPane();this.setBodyOverflowIfNeeded()},willRemoveFromDocument:function(){var a=this.rootResponder;this.unsetBodyOverflowIfNeeded();a.makeMainPane(null);this.resignKeyPane()},_updatedLayout:function(){arguments.callee.base.apply(this,arguments);this.setBodyOverflowIfNeeded()},acceptsKeyPane:YES,classNames:["sc-main"]});SC.routes=SC.Object.create({wantsHistory:NO,usesHistory:null,baseURI:document.baseURI,_didSetup:NO,_location:null,_firstRoute:null,_extractParametersAndRoute:function(d,b){var a={},j=d.route||"",f,c,e,h,g,k;f=(j.indexOf("?")<0&&j.indexOf("&")>=0)?"&":"?";c=j.split(f);j=c.shift();a=this.deparam(c.join("&"),b||false);for(k in d){if(d.hasOwnProperty(k)&&k!=="route"){a[k]=""+d[k]}}a.params=f+$.param(a);a.route=j;return a},location:function(a,b){var c;this._skipRoute=NO;if(b!==undefined){c=this.informLocation.lastSetValueKey;if(c&&this._kvo_cache){this._kvo_cache[c]=b}}return this._extractLocation(a,b)}.property(),informLocation:function(a,b){var c;this._skipRoute=YES;if(b!==undefined){c=this.location.lastSetValueKey;if(c&&this._kvo_cache){this._kvo_cache[c]=b}}return this._extractLocation(a,b)}.property(),_extractLocation:function(c,d){var a,b;if(d!==undefined){if(d===null){d=""}if(typeof(d)==="object"){a=this._extractParametersAndRoute(d);d=a.route+a.params}if(!this._exogenous){if(!SC.empty(d)||(this._location&&this._location!==d)){b=encodeURI(d);if(this.usesHistory){if(b.length>0){b="/"+b}window.history.pushState(null,null,this.get("baseURI")+b)}else{window.location.hash=b}}}this._location=d}return this._location},ping:function(){var a;if(!this._didSetup){this._didSetup=YES;if(this.get("wantsHistory")&&SC.platform.supportsHistory){this.usesHistory=YES;this.popState();SC.Event.add(window,"popstate",this,this.popState)}else{this.usesHistory=NO;if(SC.platform.supportsHashChange){this.hashChange();SC.Event.add(window,"hashchange",this,this.hashChange)}else{a=this;this._invokeHashChange=function(){a.hashChange();setTimeout(a._invokeHashChange,100)};this._invokeHashChange()}}}},hashChange:function(a){this._exogenous=YES;var b=window.location.hash;b=(b&&b.length>0)?b.slice(1,b.length):"";if(!SC.browser.isMozilla){b=decodeURI(b)}if(this.get("location")!==b&&!this._skipRoute){SC.run(function(){this.set("location",b)},this)}this._skipRoute=NO;this._exogenous=NO},popState:function(a){this._exogenous=YES;var b=this.get("baseURI"),c=document.location.href;if(c.slice(0,b.length)===b){c=c.slice(b.length+1,c.length);if(this.get("location")!==c&&!this._skipRoute){SC.run(function(){this.set("location",c)},this)}}this._skipRoute=NO;this._exogenous=NO},add:function(a,b,c){if(!this._didSetup){this.invokeNext(this.ping)}if(c===undefined&&SC.typeOf(b)===SC.T_FUNCTION){c=b;b=null}else{if(SC.typeOf(c)===SC.T_STRING){c=b[c]}}if(!this._firstRoute){this._firstRoute=this._Route.create()}this._firstRoute.add(a.split("/"),b,c);return this},locationDidChange:function(){this.trigger()}.observes("location"),trigger:function(){var a=this._firstRoute,b=this.get("location"),d,c;if(a){d=this._extractParametersAndRoute({route:b});b=d.route;delete d.route;delete d.params;c=a.routeForParts(b.split("/"),d);if(c&&c.method){c.method.call(c.target||this,d)}}},deparam:function(k,g){var j={},b={"true":!0,"false":!1,"null":null},f,l,n,d,p,c,o,h,q,m,e=decodeURIComponent,a=Object.prototype.toString;if(k.indexOf("?")>=0){k=k.split("?")[1];if(k.indexOf("#")>=0){k=k.split("#")[0]}}else{if(k.indexOf("#")>=0){k=k.split("#")[1]}}f=k.replace(/\+/g," ").split("&");l=f.length;for(n=0;n<l;++n){d=f[n].split("="),p=e(d[0]),o=j,q=p.split("]["),m=p.length-1;if(/\[/.test(q[0])&&/\]$/.test(q[m])){q[m]=q[m].replace(/\]$/,"");q=q.shift().split("[").concat(q);m=q.length-1}else{m=0}if(d.length===2){c=e(d[1]);if(g){c=c&&!isNaN(c)?+c:c==="undefined"?undefined:b[c]!==undefined?b[c]:c}if(m){for(h=0;h<m;++h){p=q[h]===""?o.length:q[h];o=o[p]=h<m?o[p]||(q[h+1]&&isNaN(q[h+1])?{}:[]):c}}else{if(a.apply(j[p])==="[object Array]"){j[p].push(c)}else{if(j[p]!==undefined){j[p]=[j[p],c]}else{j[p]=c}}}}else{if(p){j[p]=g?undefined:""}}}return j},_Route:SC.Object.extend({target:null,method:null,staticRoutes:null,dynamicRoutes:null,wildcardRoutes:null,add:function(c,b,e){var a,d;c=SC.clone(c);if(!c||c.length===0){this.target=b;this.method=e}else{a=c.shift();switch(a.slice(0,1)){case":":a=a.slice(1,a.length);if(!this.dynamicRoutes){this.dynamicRoutes={}}if(!this.dynamicRoutes[a]){this.dynamicRoutes[a]=this.constructor.create()}d=this.dynamicRoutes[a];break;case"*":a=a.slice(1,a.length);if(!this.wildcardRoutes){this.wildcardRoutes={}}d=this.wildcardRoutes[a]=this.constructor.create();break;default:if(!this.staticRoutes){this.staticRoutes={}}if(!this.staticRoutes[a]){this.staticRoutes[a]=this.constructor.create()}d=this.staticRoutes[a]}if(d){d.add(c,b,e)}}},routeForParts:function(d,e){var b,c,a;d=SC.clone(d);if(!d||d.length===0){return this.method?this:null}else{b=d.shift();if(this.staticRoutes&&this.staticRoutes[b]){return this.staticRoutes[b].routeForParts(d,e)}else{for(c in this.dynamicRoutes){a=this.dynamicRoutes[c].routeForParts(d,e);if(a){e[c]=b;return a}}for(c in this.wildcardRoutes){d.unshift(b);e[c]=d.join("/");return this.wildcardRoutes[c].routeForParts(null,e)}return null}}}})});SC.SCANNER_OUT_OF_BOUNDS_ERROR=new Error("Out of bounds.");SC.SCANNER_INT_ERROR=new Error("Not an int.");SC.SCANNER_SKIP_ERROR=new Error("Did not find the string to skip.");SC.SCANNER_SCAN_ARRAY_ERROR=new Error("Did not find any string of the given array to scan.");SC.DATETIME_COMPAREDATE_TIMEZONE_ERROR=new Error("Can't compare the dates of two DateTimes that don't have the same timezone.");SC.DATETIME_ISO8601="%Y-%m-%dT%H:%M:%S%Z";SC.Scanner=SC.Object.extend({string:null,scanLocation:0,scan:function(a){if(this.scanLocation+a>this.length){throw SC.SCANNER_OUT_OF_BOUNDS_ERROR}var b=this.string.substr(this.scanLocation,a);this.scanLocation+=a;return b},scanInt:function(c,e){if(e===undefined){e=c}var d=this.scan(e);var b=new RegExp("^\\d{"+c+","+e+"}");var a=d.match(b);if(!a){throw SC.SCANNER_INT_ERROR}if(a[0].length<e){this.scanLocation+=a[0].length-e}return parseInt(a[0],10)},skipString:function(a){if(this.scan(a.length)!==a){throw SC.SCANNER_SKIP_ERROR}return YES},scanArray:function(c){for(var b=0,a=c.length;b<a;b++){if(this.scan(c[b].length)===c[b]){return b}this.scanLocation-=c[b].length}throw SC.SCANNER_SCAN_ARRAY_ERROR}});SC.DateTime=SC.Object.extend(SC.Freezable,SC.Copyable,{_ms:0,timezone:0,isFrozen:YES,adjust:function(b,a){var c;b=b?SC.clone(b):{};c=(b.timezone!==undefined)?b.timezone:(this.timezone!==undefined)?this.timezone:0;return this.constructor._adjust(b,this._ms,c,a)._createFromCurrentState()},advance:function(a){return this.constructor._advance(a,this._ms,this.timezone)._createFromCurrentState()},unknownProperty:function(a){return this.constructor._get(a,this._ms,this.timezone)},toFormattedString:function(a){return this.constructor._toFormattedString(a,this._ms,this.timezone)},toISO8601:function(){return this.constructor._toFormattedString(SC.DATETIME_ISO8601,this._ms,this.timezone)},dayOrdinal:function(){return this.get("day").ordinal()}.property(),toString:function(){return"UTC: "+new Date(this._ms).toUTCString()+", timezone: "+this.timezone},isEqual:function(a){return this.constructor.compare(this,a)===0},copy:function(){return this},toTimezone:function(a){if(a===undefined){a=0}return this.advance({timezone:a-this.timezone})}});SC.DateTime.mixin(SC.Comparable,{recordFormat:SC.DATETIME_ISO8601,dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],_englishDayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],AMPMNames:["AM","PM"],_date:new Date(),_tz:0,timezone:new Date().getTimezoneOffset(),_dt_cache:{},_dt_cache_index:-1,_DT_CACHE_MAX_LENGTH:1000,_setCalcState:function(a,c){var b={milliseconds:this._date.getTime(),timezone:this._tz};if(a!==undefined){this._date.setTime(a)}if(c!==undefined){this._tz=c}return b},_setCalcStateFromHash:function(c,b){var d=(b!==undefined)?b:this._tz;var a=this._toMilliseconds(c,this._ms,d);return this._setCalcState(a,d)},_get:function(w,b,n){var l,s,h,o,e,j,k,f,p,a;var c,i;var r=this._date;var q,g=null;q=this._setCalcState(b,n);if(w==="milliseconds"){g=r.getTime()}else{if(w==="timezone"){g=this._tz}}if(g===null){p=w.slice(0,4);a=w.slice(4);if(p==="last"||p==="next"){c=this._get("dayOfWeek",b,n);i=this._englishDayNames.indexOf(a);if(i>=0){var u=i-c;if(p==="last"&&u>=0){u-=7}if(p==="next"&&u<0){u+=7}this._advance({day:u},b,n);g=this._createFromCurrentState()}}}if(g===null){if(n!==undefined){this._setCalcState(r.getTime()-(n*60000),0)}switch(w){case"year":g=r.getUTCFullYear();break;case"month":g=r.getUTCMonth()+1;break;case"day":g=r.getUTCDate();break;case"dayOfWeek":g=r.getUTCDay();break;case"hour":g=r.getUTCHours();break;case"minute":g=r.getUTCMinutes();break;case"second":g=r.getUTCSeconds();break;case"millisecond":g=r.getUTCMilliseconds();break;case"elapsed":g=+new Date()-r.getTime()-(n*60000);break}if((g===null)&&(w==="isLeapYear")){e=this._get("year");g=(e%4===0&&e%100!==0)||e%400===0}if((g===null)&&(w==="daysInMonth")){switch(this._get("month")){case 4:case 6:case 9:case 11:g=30;break;case 2:g=this._get("isLeapYear")?29:28;break;default:g=31;break}}if((g===null)&&(w==="dayOfYear")){l=r.getTime();h=this._get("day");this._setCalcStateFromHash({day:1});for(o=this._get("month")-1;o>0;o--){this._setCalcStateFromHash({month:o});h+=this._get("daysInMonth")}r.setTime(l);g=h}if((g===null)&&(w.slice(0,4)==="week")){j=w.length===4?1:parseInt(w.slice("4"),10);k=this._get("dayOfWeek");f=this._get("dayOfYear")-1;if(j===0){g=parseInt((f-k+7)/7,10)}else{g=parseInt((f-(k-1+7)%7+7)/7,10)}}}this._setCalcState(q.milliseconds,q.timezone);return g},_adjust:function(c,f,e,a){var d=c?SC.clone(c):{};var b=this._toMilliseconds(c,f,e,a);this._setCalcState(b,e);return this},_advance:function(a,f,d){var c=a?SC.clone(a):{};var e;for(var b in c){c[b]+=this._get(b,f,d)}e=(c.timezone!==undefined)?c.timezone:d;return this._adjust(c,f,e,NO)},_toMilliseconds:function(j,c,h,f){var a=j?SC.clone(j):{};var i=this._date;var g=i.getTime();var b,e;if(!SC.none(c)){i.setTime(c)}e=(h!==undefined)?h:(this.timezone!==undefined)?this.timezone:0;i.setTime(i.getTime()-(e*60000));if(f===undefined||f===YES){if(!SC.none(a.hour)&&SC.none(a.minute)){a.minute=0}if(!(SC.none(a.hour)&&SC.none(a.minute))&&SC.none(a.second)){a.second=0}if(!(SC.none(a.hour)&&SC.none(a.minute)&&SC.none(a.second))&&SC.none(a.millisecond)){a.millisecond=0}}if(SC.none(a.year)){a.year=i.getUTCFullYear()}if(SC.none(a.month)){a.month=i.getUTCMonth()+1}if(SC.none(a.day)){a.day=i.getUTCDate()}if(SC.none(a.hour)){a.hour=i.getUTCHours()}if(SC.none(a.minute)){a.minute=i.getUTCMinutes()}if(SC.none(a.second)){a.second=i.getUTCSeconds()}if(SC.none(a.millisecond)){a.millisecond=i.getUTCMilliseconds()}b=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);i.setTime(b+(e*60000));b=i.getTime();i.setTime(g);return b},create:function(){var i=arguments.length===0?{}:arguments[0];var d;if(SC.typeOf(i)===SC.T_NUMBER){i={milliseconds:i}}d=(i.timezone!==undefined)?i.timezone:this.timezone;if(d===undefined){d=0}if(!SC.none(i.milliseconds)){var h="nu"+i.milliseconds+d,a=this._dt_cache;var e=a[h];if(!e){var f,g=this._dt_cache_index,b=this;e=a[h]=new b([{_ms:i.milliseconds,timezone:d}]);g=this._dt_cache_index=(g+1)%this._DT_CACHE_MAX_LENGTH;f=a[g];if(f!==undefined&&a[f]){delete a[f]}a[g]=h}return e}else{var c=new Date();return this.create({milliseconds:this._toMilliseconds(i,c.getTime(),d,i.resetCascadingly),timezone:d})}},_createFromCurrentState:function(){return this.create({milliseconds:this._date.getTime(),timezone:this._tz})},parse:function(o,c){var p=new RegExp("(?:%([aAbBcdDhHiIjmMpsSUWwxXyYZ%])|(.))","g");var n,j,a={},b={},i=SC.Scanner.create({string:o});if(SC.none(c)){c=SC.DATETIME_ISO8601}try{while((j=p.exec(c))!==null){switch(j[1]){case"a":b.dayOfWeek=i.scanArray(this.abbreviatedDayNames);break;case"A":b.dayOfWeek=i.scanArray(this.dayNames);break;case"b":a.month=i.scanArray(this.abbreviatedMonthNames)+1;break;case"B":a.month=i.scanArray(this.monthNames)+1;break;case"c":throw new Error("%c is not implemented");case"d":case"D":a.day=i.scanInt(1,2);break;case"e":throw new Error("%e is not implemented");case"E":throw new Error("%E is not implemented");case"h":case"H":a.hour=i.scanInt(1,2);break;case"i":case"I":a.hour=i.scanInt(1,2);break;case"j":throw new Error("%j is not implemented");case"m":a.month=i.scanInt(1,2);break;case"M":a.minute=i.scanInt(1,2);break;case"p":a.meridian=i.scanArray(this.AMPMNames);break;case"S":a.second=i.scanInt(1,2);break;case"s":a.millisecond=i.scanInt(1,3);break;case"U":throw new Error("%U is not implemented");case"W":throw new Error("%W is not implemented");case"w":throw new Error("%w is not implemented");case"x":throw new Error("%x is not implemented");case"X":throw new Error("%X is not implemented");case"y":a.year=i.scanInt(2);a.year+=(a.year>70?1900:2000);break;case"Y":a.year=i.scanInt(4);break;case"Z":var g=i.scan(1);if(g==="Z"){a.timezone=0}else{if(g==="+"||g==="-"){var k=i.scanInt(2);if(i.scan(1)!==":"){i.scan(-1)}var f=i.scanInt(2);a.timezone=(g==="+"?-1:1)*(k*60+f)}}break;case"%":i.skipString("%");break;default:i.skipString(j[0]);break}}}catch(l){SC.Logger.log("SC.DateTime.createFromString "+l.toString());return null}if(!SC.none(a.meridian)&&!SC.none(a.hour)){if((a.meridian===1&&a.hour!==12)||(a.meridian===0&&a.hour===12)){a.hour=(a.hour+12)%24}delete a.meridian}n=this.create(a);if(!SC.none(b.dayOfWeek)&&n.get("dayOfWeek")!==b.dayOfWeek){return null}return n},_pad:function(b,a){var c=""+b;if(a===undefined){a=2}while(c.length<a){c="0"+c}return c},__toFormattedString:function(b,e,c){var a,d;switch(b[1]){case"a":return this.abbreviatedDayNames[this._get("dayOfWeek")];case"A":return this.dayNames[this._get("dayOfWeek")];case"b":return this.abbreviatedMonthNames[this._get("month")-1];case"B":return this.monthNames[this._get("month")-1];case"c":return this._date.toString();case"d":return this._pad(this._get("day"));case"D":return this._get("day");case"E":return this._toFormattedString(this.__getElapsedStringFormat(e,c),e,c);case"h":return this._get("hour");case"H":return this._pad(this._get("hour"));case"i":a=this._get("hour");return(a===12||a===0)?12:(a+12)%12;case"I":a=this._get("hour");return this._pad((a===12||a===0)?12:(a+12)%12);case"j":return this._pad(this._get("dayOfYear"),3);case"m":return this._pad(this._get("month"));case"M":return this._pad(this._get("minute"));case"o":return this._get("day").ordinal();case"p":return this._get("hour")>11?this.AMPMNames[1]:this.AMPMNames[0];case"S":return this._pad(this._get("second"));case"s":return this._pad(this._get("millisecond"),3);case"u":return this._pad(this._get("utc"));case"U":return this._pad(this._get("week0"));case"W":return this._pad(this._get("week1"));case"w":return this._get("dayOfWeek");case"x":return this._date.toDateString();case"X":return this._date.toTimeString();case"y":return this._pad(this._get("year")%100);case"Y":return this._get("year");case"Z":d=-1*c;return(d>=0?"+":"-")+this._pad(parseInt(Math.abs(d)/60,10))+":"+this._pad(Math.abs(d)%60);case"%":return"%"}},_toFormattedString:function(c,e,b){var a=this;var d=(b!==undefined)?b:(this.timezone!==undefined)?this.timezone:0;this._setCalcState(e-(b*60000),0);return c.replace(/\%([aAbBcdeEDhHiIjmMopsSUWwxXyYZ\%])/g,function(){var f=a.__toFormattedString.call(a,arguments,e,b);return f})},__getElapsedStringFormat:function(b,a){return""},compare:function(d,c){if(SC.none(d)||SC.none(c)){throw new Error("You must pass two valid dates to compare()")}var f=d.get("milliseconds");var e=c.get("milliseconds");return f<e?-1:f===e?0:1},compareDate:function(d,c){if(SC.none(d)||SC.none(c)){throw new Error("You must pass two valid dates to compareDate()")}if(d.get("timezone")!==c.get("timezone")){throw SC.DATETIME_COMPAREDATE_TIMEZONE_ERROR}var f=d.adjust({hour:0}).get("milliseconds");var e=c.adjust({hour:0}).get("milliseconds");return f<e?-1:f===e?0:1},difference:function(d,c,h){if(SC.none(d)||SC.none(c)){throw new Error("You must pass two valid dates to difference()")}var j=d.get("milliseconds"),i=c.get("milliseconds"),g=i-j,f;switch(h){case"d":case"D":f=86400000;break;case"h":case"H":f=3600000;break;case"M":f=60000;break;case"S":f=1000;break;case"s":f=1;break;case"W":f=604800000;break;default:throw h+" is not supported";break}var e=g/f;return Math.round(e)}});SC.Binding.dateTime=function(a){return this.transform(function(b,c){return b?b.toFormattedString(a):null})};SC.stringsFor("English",{"_SC.DateTime.dayNames":"Sunday Monday Tuesday Wednesday Thursday Friday Saturday","_SC.DateTime.abbreviatedDayNames":"Sun Mon Tue Wed Thu Fri Sat","_SC.DateTime.monthNames":"January February March April May June July August September October November December","_SC.DateTime.abbreviatedMonthNames":"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec","_SC.DateTime.AMPMNames":"AM PM","_SC.DateTime.now":"Right now","_SC.DateTime.secondIn":"In a moment","_SC.DateTime.secondsIn":"In %e seconds","_SC.DateTime.minuteIn":"In a minute","_SC.DateTime.minutesIn":"In %e minutes","_SC.DateTime.hourIn":"An hour from now","_SC.DateTime.hoursIn":"In about %e hours","_SC.DateTime.dayIn":"Tomorrow at %i:%M %p","_SC.DateTime.daysIn":"%A at %i:%M %p","_SC.DateTime.weekIn":"Next week","_SC.DateTime.weeksIn":"In %e weeks","_SC.DateTime.monthIn":"Next month","_SC.DateTime.monthsIn":"In %e months","_SC.DateTime.yearIn":"Next year","_SC.DateTime.yearsIn":"In %e years","_SC.DateTime.secondAgo":"A moment ago","_SC.DateTime.secondsAgo":"%e seconds ago","_SC.DateTime.minuteAgo":"A minute ago","_SC.DateTime.minutesAgo":"%e minutes ago","_SC.DateTime.hourAgo":"An hour ago","_SC.DateTime.hoursAgo":"About %e hours ago","_SC.DateTime.dayAgo":"Yesterday at %i:%M %p","_SC.DateTime.daysAgo":"%A at %i:%M %p","_SC.DateTime.weekAgo":"About a week ago","_SC.DateTime.weeksAgo":"%e weeks ago","_SC.DateTime.monthAgo":"About a month ago","_SC.DateTime.monthsAgo":"%e months ago","_SC.DateTime.yearAgo":"Last year","_SC.DateTime.yearsAgo":"%e years ago"});SC.DateTime.mixin({_setup:function(){SC.DateTime.dayNames=SC.String.w(SC.String.loc("_SC.DateTime.dayNames"));SC.DateTime.abbreviatedDayNames=SC.String.w(SC.String.loc("_SC.DateTime.abbreviatedDayNames"));SC.DateTime.monthNames=SC.String.w(SC.String.loc("_SC.DateTime.monthNames"));SC.DateTime.abbreviatedMonthNames=SC.String.w(SC.String.loc("_SC.DateTime.abbreviatedMonthNames"));SC.DateTime.AMPMNames=SC.String.w(SC.String.loc("_SC.DateTime.AMPMNames"))},__getElapsedStringFormat:function(g,e){var c=Math.floor((+new Date()-this._date.getTime()-(e*60000))/1000);var b=!!(c<0)?"In":"Ago";var d=0;var f="now";if(Math.abs(c)>31536000){d=Math.floor(Math.abs(c/31536000));f="year"}else{if(Math.abs(c)>2678400){d=Math.floor(Math.abs(c/2678400));f="month"}else{if(Math.abs(c)>604800){d=Math.floor(Math.abs(c/604800));f="week"}else{if(Math.abs(c)>86400){d=Math.floor(Math.abs(c/86400));f="day"}else{if(Math.abs(c)>3600){d=Math.floor(Math.abs(c/3600));f="hour"}else{if(Math.abs(c)>60){d=Math.floor(Math.abs(c/60));f="minute"}else{if(Math.abs(c)>0){d=Math.abs(c);f="second"}}}}}}}var a="_SC.DateTime.now";if(f!=="now"){a="_SC.DateTime.%@%@%@".fmt(f,d>1?"s":"",b)}return a.loc().replace("%e",d)},});jQuery(document).ready(function(){SC.DateTime._setup()});SC.WebSocketDelegate={isWebSocketDelegate:true,webSocketDidOpen:function(a,b){},webSocketDidReceiveMessage:function(a,b){switch(b){case"ping":return true;break}if(this.get("isJSON")){try{JSON.parse(b)}catch(c){return true}}},webSocketDidClose:function(a,b){},webSocketDidError:function(a,b){},};SC.Response=SC.Object.extend({isResponse:YES,isError:NO,errorValue:function(){return this}.property().cacheable(),errorObject:null,request:null,originalRequest:function(){var a=this.get("request");while(a.get("source")){a=a.get("source")}return a}.property("request").cacheable(),type:function(){return this.getPath("request.type")}.property("request").cacheable(),address:function(){return this.getPath("request.address")}.property("request").cacheable(),isJSON:function(){return this.getPath("request.isJSON")||NO}.property("request").cacheable(),isXML:function(){return this.getPath("request.isXML")||NO}.property("request").cacheable(),listeners:function(){return this.getPath("request.listeners")}.property("request").cacheable(),status:-100,headers:null,body:function(){var a=this.get("encodedBody");if(a&&this.get("isJSON")){try{a=SC.json.decode(a)}catch(b){return SC.Error.create({message:b.name+": "+b.message,label:"Response",errorValue:this})}}return a}.property("encodedBody").cacheable(),response:function(){return this.get("body")}.property("body").cacheable(),isCancelled:NO,timedOut:null,timeoutTimer:null,fire:function(){var a=this.get("request"),c=a?a.get("source"):null;if(c&&c.willSend){c.willSend(a,this)}a.freeze();if(!this.get("isCancelled")){this.invokeTransport()}var b=a.get("timeout");if(b){var d=SC.Timer.schedule({target:this,action:"timeoutReached",interval:b,repeats:NO});this.set("timeoutTimer",d)}if(!this.get("isCancelled")&&c&&c.didSend){c.didSend(a,this)}},invokeTransport:function(){this.receive(function(a){this.set("status",200)},this)},receive:function(e,a){if(!this.get("timedOut")){var d=this.get("timeoutTimer");if(d){d.invalidate()}this.set("timedOut",NO)}var b=this.get("request");var c=b?b.get("source"):null;SC.run(function(){if(c&&c.willReceive){c.willReceive(b,this)}e.call(a,!this.get("isCancelled"));if(!this.get("isCancelled")&&c&&c.didReceive){c.didReceive(b,this)}if(!this.get("isCancelled")){this.notify()}},this);SC.Request.manager.transportDidClose(this);return this},cancel:function(){if(!this.get("isCancelled")){this.set("isCancelled",YES);this.cancelTransport();SC.Request.manager.transportDidClose(this)}},timeoutReached:function(){if(this.get("timedOut")===null){this.set("timedOut",YES);this.cancelTransport();this.receive(function(b){if(!b){return}var a=SC.$error("HTTP Request timed out","Request",0);a.set("errorValue",this);this.set("isError",YES);this.set("errorObject",a);this.set("status",0)},this);return YES}return NO},cancelTransport:function(){},_notifyListeners:function(h,b){var j=h[b],g,f,a;if(!j){return NO}var d=NO;var e=j.length;for(var c=0;c<e;c++){var k=j[c];g=(k.args||[]).copy();g.unshift(this);f=k.target;a=k.action;if(SC.typeOf(a)===SC.T_STRING){a=f[a]}d=a.apply(f,g)}return d},notify:function(){var b=this.get("listeners"),a=this.get("status"),c=Math.floor(a/100)*100,d=NO;if(!b){return this}d=this._notifyListeners(b,a);if(!d&&c!==a){d=this._notifyListeners(b,c)}if(!d&&a!==0){d=this._notifyListeners(b,0)}return this},toString:function(){var a=arguments.callee.base.apply(this,arguments);return"%@<%@ %@, status=%@".fmt(a,this.get("type"),this.get("address"),this.get("status"))}});SC.XHRResponse=SC.Response.extend({headers:function(){var c=this.get("rawRequest"),b=c?c.getAllResponseHeaders():null,a={};if(!b){return a}b.split("\n").forEach(function(g){var d=g.indexOf(":"),e,f;if(d>=0){e=g.slice(0,d);f=g.slice(d+1).trim();a[e]=f}},this);return a}.property("status").cacheable(),header:function(a){var b=this.get("rawRequest");return b?b.getResponseHeader(a):null},encodedBody:function(){var a=this.get("rawRequest");if(!a){return null}if(this.get("isXML")){return a.responseXML}return a.responseText}.property("status").cacheable(),cancelTransport:function(){var a=this.get("rawRequest");if(a){a.abort()}this.set("rawRequest",null)},invokeTransport:function(){var d,n,b,g,h=this.get("request"),e,a,f,c;g=this.createRequest();this.set("rawRequest",g);f=!!h.get("isAsynchronous");if(f){if(SC.platform.get("supportsXHR2ProgressEvent")){n=h.get("listeners");if(n){for(var o in n){if(isNaN(parseInt(o,10))){b=n[o];for(var k=0,l=b.length;k<l;k++){d=b[k];var m=o.split(".");if(SC.none(m[1])){SC.Event.add(g,m[0],d.target,d.action,d.args)}else{SC.Event.add(g[m[0]],m[1],d.target,d.action,d.args)}}}}}if(SC.platform.get("supportsXHR2LoadEndEvent")){SC.Event.add(g,"loadend",this,this.finishRequest)}else{SC.Event.add(g,"load",this,this.finishRequest);SC.Event.add(g,"error",this,this.finishRequest);SC.Event.add(g,"abort",this,this.finishRequest)}}else{if(window.XMLHttpRequest&&g.addEventListener){SC.Event.add(g,"readystatechange",this,this.finishRequest)}else{e=this;a=function(){if(!e){return null}var i=e.finishRequest();if(i){e=null}return i};g.onreadystatechange=a}}}g.open(this.get("type"),this.get("address"),f);c=this.getPath("request.headers");for(var j in c){g.setRequestHeader(j,c[j])}if(!this.getPath("request.isSameDomain")&&this.getPath("request.allowCredentials")){g.withCredentials=true}g.send(this.getPath("request.encodedBody"));if(!f){this.finishRequest()}return g},createRequest:function(){var a;if(window.XMLHttpRequest){a=new XMLHttpRequest()}else{try{a=new ActiveXObject("MSXML2.XMLHTTP.6.0")}catch(b){}try{if(!a){a=new ActiveXObject("MSXML2.XMLHTTP")}}catch(b){}}return a},finishRequest:function(o){var c,l,a,e=this.get("rawRequest"),h=e.readyState,f,m,d,b;if(h===4&&!this.get("timedOut")){this.receive(function(i){if(!i){return}d=-1;try{d=e.status||0;d=d===1223?204:d}catch(q){}if((d<200)||(d>=300)){try{b=e.statusText||""}catch(p){b=""}m=SC.$error(b||"HTTP Request failed","Request",d);m.set("errorValue",this);this.set("isError",YES);this.set("errorObject",m)}this.set("status",d)},this);if(SC.platform.get("supportsXHR2ProgressEvent")){if(SC.platform.get("supportsXHR2LoadEndEvent")){SC.Event.remove(e,"loadend",this,this.finishRequest)}else{SC.Event.remove(e,"load",this,this.finishRequest);SC.Event.remove(e,"error",this,this.finishRequest);SC.Event.remove(e,"abort",this,this.finishRequest)}f=this.get("request");l=f.get("listeners");if(l){for(var n in l){if(isNaN(parseInt(n,10))){a=l[n];for(var g=0,j=a.length;g<j;g++){c=a[g];var k=n.split(".");if(SC.none(k[1])){SC.Event.remove(e,k[0],c.target,c.action,c.args)}else{SC.Event.remove(e[k[0]],k[1],c.target,c.action,c.args)}}}}}}else{if(window.XMLHttpRequest&&e.addEventListener){SC.Event.remove(e,"readystatechange",this,this.finishRequest)}else{e.onreadystatechange=null}}return YES}return NO}});sc_require("system/response");SC.Request=SC.Object.extend(SC.Copyable,SC.Freezable,{allowCredentials:YES,isAsynchronous:YES,isJSON:NO,isXML:NO,attachIdentifyingHeaders:YES,headers:function(){var a=this._headers;if(!a){a=this._headers={}}return a}.property().cacheable(),isSameDomain:function(){var b=this.get("address"),e=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,a=window.location,d,c;d=e.exec(b.toLowerCase());c=e.exec(window.location.origin.toLowerCase());return SC.none(d)||(d[1]===c[1]&&d[2]===c[2]&&(d[3]||(d[1]==="http:"?80:443))===(c[3]||(c[1]==="http:"?80:443)))}.property("address").cacheable(),responseClass:SC.XHRResponse,source:null,address:null,type:"GET",timeout:null,body:null,encodedBody:function(){var a=this.get("body");if(a&&this.get("isJSON")){a=SC.json.encode(a)}return a}.property("isJSON","isXML","body").cacheable(),willSend:function(b,a){},didSend:function(b,a){},willReceive:function(b,a){},didReceive:function(b,a){},concatenatedProperties:"COPY_KEYS",COPY_KEYS:["attachIdentifyingHeaders","allowCredentials","isAsynchronous","isJSON","isXML","address","type","timeout","body","responseClass","willSend","didSend","willReceive","didReceive"],copy:function(){var a={},d=this.COPY_KEYS,f=d.length,b,c,e;while(--f>=0){b=d[f];if(this.hasOwnProperty(b)){a[b]=this.get(b)}}if(this.hasOwnProperty("listeners")){a.listeners=SC.copy(this.get("listeners"))}if(this.hasOwnProperty("_headers")){a._headers=SC.copy(this._headers)}a.source=this.get("source")||this;return this.constructor.create(a)},header:function(a,b){var d,c;if(SC.typeOf(a)===SC.T_STRING){c=this._headers;if(arguments.length===1){return c?c[a]:null}else{this.propertyWillChange("headers");if(!c){c=this._headers={}}c[a]=b;this.propertyDidChange("headers");return this}}else{if(b===undefined){c=a;this.beginPropertyChanges();for(d in c){if(!c.hasOwnProperty(d)){continue}this.header(d,c[d])}this.endPropertyChanges();return this}}return this},clearHeaders:function(){this.propertyWillChange("headers");this._headers={};this.propertyDidChange("headers")},async:function(a){if(a===undefined){a=YES}return this.set("isAsynchronous",a)},credentials:function(a){if(a===undefined){a=YES}return this.set("allowCredentials",a)},timeoutAfter:function(a){return this.set("timeout",a)},json:function(a){if(a===undefined){a=YES}if(a){this.set("isXML",NO)}return this.set("isJSON",a)},xml:function(a){if(a===undefined){a=YES}if(a){this.set("isJSON",NO)}return this.set("isXML",a)},_prep:function(){var a=!!this.header("Content-Type");if(this.get("attachIdentifyingHeaders")){this.header("X-Requested-With","XMLHttpRequest");this.header("X-SproutCore-Version",SC.VERSION)}if(!a&&!!this.get("body")){if(this.get("isJSON")){this.header("Content-Type","application/json")}else{if(this.get("isXML")){this.header("Content-Type","text/xml")}}}return this},send:function(a){var b=this.get("timeout");if(b&&!this.get("isAsynchronous")){throw new Error("Timeout values cannot be used with synchronous requests")}else{if(b===0){throw new Error("The timeout value must either not be specified or must be greater than 0")}}if(a){this.set("body",a)}return SC.Request.manager.sendRequest(this.copy()._prep())},resend:function(){var a=this.get("source")?this:this.copy()._prep();return SC.Request.manager.sendRequest(a)},notify:function(e,d,c){var a;if(SC.typeOf(e)!==SC.T_NUMBER&&SC.typeOf(e)!==SC.T_STRING){a=SC.A(arguments).slice(2);c=d;d=e;e=0}else{a=SC.A(arguments).slice(3)}var b=this.get("listeners");if(!b){this.set("listeners",b={})}if(!b[e]){b[e]=[]}b[e].push({target:d,action:c,args:a});return this}});SC.Request.mixin({getUrl:function(a){return this.create().set("address",a).set("type","GET")},postUrl:function(b,a){var c=this.create().set("address",b).set("type","POST");if(a){c.set("body",a)}return c},deleteUrl:function(a){return this.create().set("address",a).set("type","DELETE")},putUrl:function(b,a){var c=this.create().set("address",b).set("type","PUT");if(a){c.set("body",a)}return c},patchUrl:function(b,a){var c=this.create().set("address",b).set("type","PATCH");if(a){c.set("body",a)}return c}});SC.Request.WARN_ON_LOADEND=YES;SC.Request.manager=SC.Object.create({maxRequests:6,inflight:[],pending:[],sendRequest:function(b){if(!b){return null}var a=b.get("responseClass").create({request:b});this.get("pending").pushObject(a);this.fireRequestIfNeeded();return a},cancel:function(b){var d=this.get("pending"),c=this.get("inflight"),a;if(d.indexOf(b)>=0){this.propertyWillChange("pending");d.removeObject(b);this.propertyDidChange("pending");return YES}else{if(c.indexOf(b)>=0){b.cancel();c.removeObject(b);this.fireRequestIfNeeded();return YES}}return NO},cancelAll:function(){var a=this.getPath("pending.length"),c=this.getPath("inflight.length"),e=this.get("inflight"),f=this.get("pending");if(a||c){for(var b=c-1;b>=0;b--){var d=e.objectAt(b);d.cancel()}f.replace(0,a);e.replace(0,c);return YES}return NO},fireRequestIfNeeded:function(){var d=this.get("pending"),c=this.get("inflight"),a=this.get("maxRequests"),b;if((d.length>0)&&(c.length<a)){b=d.shiftObject();c.pushObject(b);b.fire()}},transportDidClose:function(a){this.get("pending").removeObject(a);this.get("inflight").removeObject(a);this.fireRequestIfNeeded()},isPending:function(a){return this.get("pending").contains(a)},isInFlight:function(a){return this.get("inflight").contains(a)}});sc_require("mixins/websocket_delegate");SC.WebSocket=SC.Object.extend(SC.DelegateSupport,SC.WebSocketDelegate,{server:null,isSupported:null,isConnected:false,isAuth:null,isJSON:true,delegate:null,autoReconnect:true,reconnectInterval:10000,connect:function(){var b=this;if(this.isSupported===null){this.set("isSupported",!!window.WebSocket)}if(!this.isSupported||this.socket){return this}try{var a=this.socket=new WebSocket(this.get("server"));a.onopen=function(){SC.RunLoop.begin();b.onOpen.apply(b,arguments);SC.RunLoop.end()};a.onmessage=function(){SC.RunLoop.begin();b.onMessage.apply(b,arguments);SC.RunLoop.end()};a.onclose=function(){SC.RunLoop.begin();b.onClose.apply(b,arguments);SC.RunLoop.end()};a.onerror=function(){SC.RunLoop.begin();b.onError.apply(b,arguments);SC.RunLoop.end()}}catch(c){SC.error("An error has occurred while connnecting to the websocket server: "+c)}return this},close:function(b,c){var a=this.socket;if(a&&a.readyState===SC.WebSocket.OPEN){this.socket.close(b,c)}return this},notify:function(c,e,d){var a;if(SC.typeOf(c)!==SC.T_STRING){a=SC.A(arguments).slice(2);d=e;e=c;c="onmessage"}else{a=SC.A(arguments).slice(3)}var b=this.get("listeners");if(!b){this.set("listeners",b={})}if(!b[c]){b[c]=[]}b[c].push({target:e,action:d,args:a});return this},send:function(a){if(this.isConnected===true&&this.isAuth!==false){if(this.isJSON){var a=JSON.stringify(a)}this.socket.send(a)}else{this.addToQueue(a)}return this},onOpen:function(c){var a=this.get("objectDelegate");this.set("isConnected",true);var b=a.webSocketDidOpen(this,c);if(b!==true){this._notifyListeners("onopen",c)}this.fireQueue()},onMessage:function(a){if(a){var d=data=a.data,b=this.get("objectDelegate"),c=b.webSocketDidReceiveMessage(this,data);if(c!==true){if(this.isJSON){d=JSON.parse(data)}this._notifyListeners("onmessage",d)}}this.fireQueue()},onClose:function(c){var a=this.get("objectDelegate");this.set("isConnected",false);this.set("isAuth",null);this.socket=null;var b=a.webSocketDidClose(this,c);if(b!==true){this._notifyListeners("onclose",c);this.tryReconnect()}},onError:function(c){var a=this.get("objectDelegate"),b=a.webSocketDidError(this,c);if(b!==true){this._notifyListeners("onerror",c)}},addToQueue:function(b){var a=this.queue;if(!a){this.queue=a=[]}a.push(b)},fireQueue:function(){var b=this.queue;if(!b||b.length===0){return}b=SC.A(b);this.queue=null;for(var c=0,a=b.length;c<a;c++){var d=b[c];this.send(d)}},tryReconnect:function(){if(!this.get("autoReconnect")){return}var a=this;setTimeout(function(){a.connect()},this.get("reconnectInterval"))},_notifyListeners:function(a,j){var h=(this.listeners||{})[a],k,f,b,g;if(!h){return NO}var e=NO,d=h.length;for(var c=0;c<d;c++){k=h[c];g=(k.args||[]).copy();g.unshift(j);g.unshift(this);f=k.target;b=k.action;if(SC.typeOf(b)===SC.T_STRING){b=f[b]}e=b.apply(f,g);if(e===true){return e}}return e},objectDelegate:function(){var a=this.get("delegate");return this.delegateFor("isWebSocketDelegate",a,this)}.property("delegate").cacheable(),socket:null,listeners:null,queue:null,});SC.WebSocket.mixin({CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3,});SC.FOCUS_ALL_CONTROLS=false;SC.TreeItemContent={isTreeItemContent:YES,treeItemChildren:null,treeItemIsExpanded:YES,treeItemIsGrouped:NO,treeItemDisclosureState:function(b,a){return this.get("treeItemIsExpanded")?SC.BRANCH_OPEN:SC.BRANCH_CLOSED},treeItemCollapse:function(b,a){this.setIfChanged("treeItemIsExpanded",NO)},treeItemExpand:function(b,a){this.setIfChanged("treeItemIsExpanded",YES)},treeItemBranchIndexes:function(e,c){var d=this.get("treeItemChildren"),b,g,a,f;if(!d){return null}b=SC.IndexSet.create();g=d.get("length");for(a=0;a<g;a++){if(!(f=d.objectAt(a))){continue}if(!f.get("treeItemChildren")){continue}if(f.treeItemDisclosureState(this,a)!==SC.LEAF_NODE){b.add(a)}}return b.get("length")>0?b:null}};SC.BRANCH_OPEN=17;SC.BRANCH_CLOSED=18;SC.LEAF_NODE=32;SC.CollectionContent={isCollectionContent:YES,contentIndexIsSelected:function(d,b,a){var c=d.get("selection");return c?c.contains(b,a):NO},contentIndexIsEnabled:function(c,b,a){return c.get("isEnabled")},contentGroupIndexes:function(b,a){return null},contentIndexIsGroup:function(c,b,a){return NO},contentIndexOutlineLevel:function(c,b,a){return -1},contentIndexDisclosureState:function(c,b,a){return SC.LEAF_NODE},contentIndexExpand:function(c,b,a){SC.Logger.log("contentIndexExpand(%@, %@, %@)".fmt(c,b,a))},contentIndexCollapse:function(c,b,a){SC.Logger.log("contentIndexCollapse(%@, %@, %@)".fmt(c,b,a))}};sc_require("mixins/tree_item_content");sc_require("mixins/collection_content");SC.TreeItemObserver=SC.Object.extend(SC.Array,SC.CollectionContent,{_cachedItem:null,_cachedDelegate:null,item:null,delegate:null,treeItemChildrenKey:"treeItemChildren",treeItemIsExpandedKey:"treeItemIsExpanded",parentObserver:null,parentItem:function(){var a=this.get("parentObserver");return a?a.get("item"):null}.property("parentObserver").cacheable(),index:null,outlineLevel:0,children:null,disclosureState:SC.BRANCH_OPEN,branchIndexes:function(){var e=this.get("item"),b,f,a,d,c;if(!e){return SC.IndexSet.EMPTY}else{if(e.isTreeItemContent){f=this.get("parentItem");a=this.get("index");return e.treeItemBranchIndexes(f,a)}else{d=this.get("children");if(!d){return null}c=SC.IndexSet.create();b=d.get("length");f=e;for(a=0;a<b;a++){e=d.objectAt(a);if(!e){continue}if(!this._computeChildren(e,f,a)){continue}if(this._computeDisclosureState(e,f,a)!==SC.LEAF_NODE){c.add(a)}}return c.get("length")>0?c:null}}}.property("children").cacheable(),isHeaderVisible:function(){return !!this.get("parentObserver")}.property("parentObserver").cacheable(),length:0,objectAt:function(d,g){var a=this.get("length"),f=this.get("item"),b=this._objectAtCache,h=d,c,e;if(d>=a){return undefined}if(this.get("isHeaderVisible")){if(d===0){return f}else{h--}}f=null;if(!b){b=this._objectAtCache=[]}if((f=b[d])!==undefined){return f}e=this.get("children");if(!e){return undefined}c=this.get("branchIndexes");if(c){c.forEach(function(l){if(f||(l>h)){return}var k=this.branchObserverAt(l),j;if(!k){return}j=k.get("length");if(l+j>h){f=k.objectAt(h-l,g);h=-1}else{h=h-(j-1)}},this)}if(h>=0){f=e.objectAt(h,g)}b[d]=f;return f},replace:function(a,b,j,d){var i=a,g=null,e,f,h;if(d===undefined){d=SC.DROP_BEFORE}if(this.get("isHeaderVisible")){i--}if(i<0){throw new Error("Tree Item cannot replace itself")}e=this.get("branchIndexes");if(e){e.forEach(function(k){if(g||(k>=i)){return}g=this.branchObserverAt(k);if(!g){return}f=g.get("length");if((k+f===i)&&d===SC.DROP_AFTER){i=i-k}else{if(k+f>i){i=i-k}else{i=i-(f-1);g=null}}},this)}if(g){g.replace(i,b,j,d);return this}h=i+b;if(b>1&&e){e.forEachIn(i,e.get("max")-i,function(k){if(k>h){return}if(!(g=this.branchObserverAt(k))){return}f=g.get("length");h=h-(f-1)},this)}b=h-i;var c=this.get("children");if(!c){throw new Error("cannot replace() tree item with no children")}if((b<0)||(h>c.get("length"))){throw new Error("replace() range must lie within a single tree item")}c.replace(i,b,j,d);return this},observerContentDidChange:function(b,c,i){this.invalidateBranchObserversAt(b);this._objectAtCache=this._outlineLevelCache=null;this._disclosureStateCache=null;this.notifyPropertyChange("branchIndexes");var d=this.get("length"),e=this._computeLength(),g=this.get("parentObserver"),f;if(d!==e){this.set("length",e)}if(!this._notifyParent){return this}if(g){f=SC.IndexSet.create(this.get("index"));g._childrenRangeDidChange(g.get("children"),null,"[]",f)}else{if(d===e){c=this.expandChildIndex(b+c);b=this.expandChildIndex(b);c=c-b;i=0}else{b=this.expandChildIndex(b);c=e-b;i=e-d}var h=c;var a=i+h;this.arrayContentDidChange(b,h,a)}},expandChildIndex:function(c){var b=c;if(this.get("isHeaderVisible")){c++}var a=this.get("branchIndexes");if(!a||a.get("length")===0){return b}a.forEachIn(0,c,function(d){b+=this.branchObserverAt(d).get("length")-1},this);return b},contentGroupIndexes:function(a,e){var c;if(e!==this){return null}if(this.get("parentObserver")){return null}var d=this.get("item"),g,b,h,f;if(d&&d.isTreeItemContent){g=d.get("treeItemIsGrouped")}else{g=!!this.delegate.get("treeItemIsGrouped")}if(g){c=SC.IndexSet.create();b=this.get("branchIndexes");if(b){h=b.min();f=0;b.forEach(function(k){c.add(k+f,1);var j=this.branchObserverAt(k);if(j){f+=j.get("length")-1;h+=f}},this)}}else{c=null}return c},contentIndexIsGroup:function(b,d,a){var c=this.contentGroupIndexes(b,d);return c?c.contains(a):NO},contentIndexOutlineLevel:function(b,g,f){if(g!==this){return -1}var c=this._outlineLevelCache;if(c&&(c[f]!==undefined)){return c[f]}if(!c){c=this._outlineLevelCache=[]}var a=this.get("length"),h=f,e=null,d;if(f>=a){return -1}if(this.get("isHeaderVisible")){if(f===0){c[0]=this.get("outlineLevel")-1;return c[0]}else{h--}}d=this.get("branchIndexes");if(d){d.forEach(function(l){if((e!==null)||(l>h)){return}var k=this.branchObserverAt(l),j;if(!k){return}j=k.get("length");if(l+j>h){e=k.contentIndexOutlineLevel(b,k,h-l);h=-1}else{h=h-(j-1)}},this)}if(h>=0){e=this.get("outlineLevel")}c[f]=e;return e},contentIndexDisclosureState:function(b,g,f){if(g!==this){return -1}var c=this._disclosureStateCache;if(c&&(c[f]!==undefined)){return c[f]}if(!c){c=this._disclosureStateCache=[]}var a=this.get("length"),h=f,e=null,d;if(f>=a){return SC.LEAF_NODE}if(this.get("isHeaderVisible")){if(f===0){c[0]=this.get("disclosureState");return c[0]}else{h--}}d=this.get("branchIndexes");if(d){d.forEach(function(l){if((e!==null)||(l>h)){return}var k=this.branchObserverAt(l),j;if(!k){return}j=k.get("length");if(l+j>h){e=k.contentIndexDisclosureState(b,k,h-l);h=-1}else{h=h-(j-1)}},this)}if(h>=0){e=SC.LEAF_NODE}c[f]=e;return e},contentIndexExpand:function(b,f,a){var c,g=a,d,e;if(f!==this){return}if(this.get("isHeaderVisible")){if(a===0){this._expand(this.get("item"));return}else{g--}}c=this.get("branchIndexes");if(c){c.forEach(function(k){if(k>=g){return}var j=this.branchObserverAt(k),h;if(!j){return}h=j.get("length");if(k+h>g){j.contentIndexExpand(b,j,g-k);g=-1}else{g=g-(h-1)}},this)}if(g>=0){d=this.get("children");e=d?d.objectAt(g):null;if(e){this._expand(e,this.get("item"),g)}}},contentIndexCollapse:function(b,f,a){var c,d,e,g=a;if(f!==this){return}if(this.get("isHeaderVisible")){if(a===0){this._collapse(this.get("item"));return}else{g--}}c=this.get("branchIndexes");if(c){c.forEach(function(k){if(k>=g){return}var j=this.branchObserverAt(k),h;if(!j){return}h=j.get("length");if(k+h>g){j.contentIndexCollapse(b,j,g-k);g=-1}else{g=g-(h-1)}},this)}if(g>=0){d=this.get("children");e=d?d.objectAt(g):null;if(e){this._collapse(e,this.get("item"),g)}}},branchObserverAt:function(d){var c=this._branchObserversByIndex,b=this._branchObserverIndexes,a,f,e;if(!c){c=this._branchObserversByIndex=[]}if(!b){b=this._branchObserverIndexes=SC.IndexSet.create()}a=c[d];if(a){return a}e=this.get("children");f=e?e.objectAt(d):null;if(!f){return null}c[d]=a=SC.TreeItemObserver.create({item:f,delegate:this.get("delegate"),parentObserver:this,index:d,outlineLevel:this.get("outlineLevel")+1});b.add(d);return a},invalidateBranchObserversAt:function(c){var b=this._branchObserversByIndex,a=this._branchObserverIndexes;if(!b||b.length<=c){return this}if(c<0){c=0}a.forEachIn(c,a.get("max")-c,function(e){var d=b[e];if(d){d.destroy()}},this);b.length=c;return this},_cleanUpCachedDelegate:function(){var a=this._cachedDelegate;if(a){a.removeObserver("treeItemIsExpandedKey",this,this.treeItemIsExpandedKeyDidChange);a.removeObserver("treeItemChildrenKey",this,this.treeItemChildrenKeyDidChange);a.removeObserver("treeItemIsGrouped",this,this.treeItemIsGroupedDidChange);this._cleanUpCachedItem();this.set("treeItemChildrenKey","treeItemChildren");this.set("treeItemIsExpandedKey","treeItemIsExpanded");this._cachedDelegate=null}},_cleanUpCachedItem:function(){var b=this._cachedItem,c=this.get("treeItemIsExpandedKey"),a=this.get("treeItemChildrenKey");if(b){b.removeObserver(c,this,this._itemIsExpandedDidChange);b.removeObserver(a,this,this._itemChildrenDidChange);this._cachedItem=null}},init:function(){arguments.callee.base.apply(this,arguments);this._delegateDidChange();this._itemDidChange();this._notifyParent=YES},destroy:function(){this.invalidateBranchObserversAt(0);this._objectAtCache=null;this._notifyParent=NO;this._cleanUpCachedItem();this._cleanUpCachedDelegate();var a=this._children,b=this._childrenRangeObserver;if(a&&b){a.removeRangeObserver(b)}this.set("length",0);arguments.callee.base.apply(this,arguments)},_itemDidChange:function(){var b=this.get("item"),a,c;c=this.get("treeItemIsExpandedKey");a=this.get("treeItemChildrenKey");this._cleanUpCachedItem();b.addObserver(c,this,this._itemIsExpandedDidChange);b.addObserver(a,this,this._itemChildrenDidChange);this.beginPropertyChanges();this._itemIsExpandedDidChange();this._itemChildrenDidChange();this.endPropertyChanges();this._cachedItem=b}.observes("item"),_itemIsExpandedDidChange:function(){var c=this.get("disclosureState"),b=this.get("item"),a;a=this._computeDisclosureState(b);if(c!==a){this.set("disclosureState",a)}},_itemChildrenDidChange:function(){var a=this.get("children"),c=this.get("item"),b;b=this._computeChildren(c);if(a!==b){this.set("children",b)}},_childrenDidChange:function(){var c=this.get("disclosureState"),d=c===SC.BRANCH_OPEN?this.get("children"):null,b=this._children,a=this._childrenRangeObserver;if(b===d){return this}if(a){b.removeRangeObserver(a)}if(d){this._childrenRangeObserver=d.addRangeObserver(null,this,this._childrenRangeDidChange)}else{this._childrenRangeObserver=null}this._children=d;this._childrenRangeDidChange(d,null,"[]",null)}.observes("children","disclosureState"),_childrenRangeDidChange:function(f,i,h,d){var a=this.get("children"),e=a?a.get("length"):0,c=d?d.get("min"):0,g=d?d.get("max"):e,b=this._childrenLen||0;this._childrenLen=e;this.observerContentDidChange(c,g-c,e-b)},_computeDisclosureState:function(c,d,a){var b;if(!c||!this._computeChildren(c)){return SC.LEAF_NODE}else{if(c.isTreeItemContent){if(d===undefined){d=this.get("parentItem")}if(a===undefined){a=this.get("index")}return c.treeItemDisclosureState(d,a)}else{b=this.get("treeItemIsExpandedKey");return c.get(b)?SC.BRANCH_OPEN:SC.BRANCH_CLOSED}}},_collapse:function(c,d,a){var b;if(!c||!this._computeChildren(c)){return this}else{if(c.isTreeItemContent){if(d===undefined){d=this.get("parentItem")}if(a===undefined){a=this.get("index")}c.treeItemCollapse(d,a)}else{b=this.get("treeItemIsExpandedKey");c.setIfChanged(b,NO)}}return this},_delegateDidChange:function(){var a=this.get("delegate");this._cleanUpCachedDelegate();if(a){a.addObserver("treeItemChildrenKey",this,this.treeItemChildrenKeyDidChange);a.addObserver("treeItemIsExpandedKey",this,this.treeItemIsExpandedKeyDidChange);a.addObserver("treeItemIsGrouped",this,this.treeItemIsGroupedDidChange);this.treeItemChildrenKeyDidChange();this.treeItemIsExpandedKeyDidChange();this.treeItemIsGroupedDidChange()}this._itemDidChange();this._cachedDelegate=a}.observes("delegate"),_expand:function(c,d,a){var b;if(!c||!this._computeChildren(c)){return this}else{if(c.isTreeItemContent){if(d===undefined){d=this.get("parentItem")}if(a===undefined){a=this.get("index")}c.treeItemExpand(d,a)}else{b=this.get("treeItemIsExpandedKey");c.setIfChanged(b,YES)}}return this},_computeChildren:function(b){var a;if(!b){return null}else{if(b.isTreeItemContent){return b.get("treeItemChildren")}else{a=this.get("treeItemChildrenKey");return b.get(a)}}},_computeLength:function(){var b=this.get("isHeaderVisible")?1:0,d=this.get("disclosureState"),c=this.get("children"),a;if((d===SC.BRANCH_OPEN)&&c){b+=c.get("length");a=this.get("branchIndexes");if(a){a.forEach(function(e){var f=this.branchObserverAt(e);b+=f.get("length")-1},this)}}return b},treeItemChildrenKeyDidChange:function(){var a=this.get("delegate"),b;b=a?a.get("treeItemChildrenKey"):"treeItemChildren";this.set("treeItemChildrenKey",b?b:"treeItemChildren")},treeItemIsExpandedKeyDidChange:function(){var a=this.get("delegate"),b;b=a?a.get("treeItemIsExpandedKey"):"treeItemIsExpanded";this.set("treeItemIsExpandedKey",b?b:"treeItemIsExpanded")},treeItemIsGroupedDidChange:function(){this.notifyPropertyChange("branchIndexes")}});sc_require("private/tree_item_observer");SC.TreeController=SC.ObjectController.extend(SC.SelectionSupport,{treeItemIsGrouped:NO,treeItemIsExpandedKey:"treeItemIsExpanded",treeItemChildrenKey:"treeItemChildren",arrangedObjects:null,init:function(){arguments.callee.base.apply(this,arguments);this._contentDidChange()},_contentDidChange:function(){var a=this.get("arrangedObjects"),b=this.get("content");if(b){if(a){a.set("item",b)}else{a=SC.TreeItemObserver.create({item:b,delegate:this});a.bind("allowsSelection",this,"allowsSelection");a.bind("allowsMultipleSelection",this,"allowsMultipleSelection");a.bind("allowsEmptySelection",this,"allowsEmptySelection");a.addObserver("[]",this,this._sctc_arrangedObjectsContentDidChange);this.set("arrangedObjects",a)}}else{if(a){a.destroy();this.set("arrangedObjects",null);this._sctc_arrangedObjectsContentDidChange()}}}.observes("content"),_sctc_arrangedObjectsContentDidChange:function(){this.updateSelectionAfterContentChange()}.observes(),canSelectGroups:NO,firstSelectableObject:function(){var d=this.get("arrangedObjects"),c,b,a=0;if(!d){return null}if(this.get("canSelectGroups")){return d.get("firstObject")}c=d.contentGroupIndexes(null,d);b=d.get("length");while(c.contains(a)&&(a<b)){a++}return a>=b?null:d.objectAt(a)}.property()});SC.InlineTextFieldDelegate={editor:null,acquireEditor:function(a){var b=this.editor;if(b){if(b.get("isEditing")&&!b.commitEditing()&&!b.discardEditing()){return null}this.releaseEditor(b)}var d=a.exampleEditor?a.exampleEditor:SC.InlineTextFieldView,c=a.get("parentView");b=this.editor=c.createChildView(d,{inlineEditorDelegate:this});c.appendChild(b);return b},releaseEditor:function(a){a.destroy();this.editor=null;return YES}};SC.STRING_TITLEIZE_REGEXP=(/([\s|\-|\_|\n])([^\s|\-|\_|\n]?)/g);SC.STRING_HUMANIZE_REGEXP=(/[\-_]/g);SC.STRING_REGEXP_ESCAPED_REGEXP=(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g);SC.STRING_DASHERIZE_CACHE={top:"top",left:"left",right:"right",bottom:"bottom",width:"width",height:"height",minWidth:"min-width",maxWidth:"max-width"};SC.INFLECTION_CONSTANTS={PLURAL:[[/(quiz)$/i,"$1zes"],[/^(ox)$/i,"$1en"],[/([m|l])ouse$/i,"$1ice"],[/(matr|vert|ind)ix|ex$/i,"$1ices"],[/(x|ch|ss|sh)$/i,"$1es"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/(hive)$/i,"$1s"],[/(?:([^f])fe|([lr])f)$/i,"$1$2ves"],[/sis$/i,"ses"],[/([ti])um$/i,"$1a"],[/(buffal|tomat)o$/i,"$1oes"],[/(bu)s$/i,"$1ses"],[/(alias|status)$/i,"$1es"],[/(octop|vir)us$/i,"$1i"],[/(ax|test)is$/i,"$1es"],[/s$/i,"s"],[/$/,"s"]],SINGULAR:[[/(quiz)zes$/i,"$1"],[/(matr)ices$/i,"$1ix"],[/(vert|ind)ices$/i,"$1ex"],[/^(ox)en/i,"$1"],[/(alias|status)es$/i,"$1"],[/(octop|vir)i$/i,"$1us"],[/(cris|ax|test)es$/i,"$1is"],[/(shoe)s$/i,"$1"],[/(o)es$/i,"$1"],[/(bus)es$/i,"$1"],[/([m|l])ice$/i,"$1ouse"],[/(x|ch|ss|sh)es$/i,"$1"],[/(m)ovies$/i,"$1ovie"],[/(s)eries$/i,"$1eries"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/([lr])ves$/i,"$1f"],[/(tive)s$/i,"$1"],[/(hive)s$/i,"$1"],[/([^f])ves$/i,"$1fe"],[/(^analy)ses$/i,"$1sis"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i,"$1$2sis"],[/([ti])a$/i,"$1um"],[/(n)ews$/i,"$1ews"],[/s$/i,""]],IRREGULAR:[["move","moves"],["sex","sexes"],["child","children"],["man","men"],["person","people"]],UNCOUNTABLE:["sheep","fish","series","species","money","rice","information","info","equipment"]};SC.mixin(SC.String,{capitalizeEach:function(a){return a.replace(SC.STRING_TITLEIZE_REGEXP,function(c,b,d){return(d)?(b+d.toUpperCase()):b}).capitalize()},titleize:function(b){var a=b.replace(SC.STRING_DECAMELIZE_REGEXP,"$1_$2");return a.replace(SC.STRING_TITLEIZE_REGEXP,function(c,e,d){return d?" "+d.toUpperCase():" "}).capitalize()},classify:function(d){var a=d.replace(SC.STRING_TITLEIZE_REGEXP,function(e,g,f){return f?f.toUpperCase():""});var c=a.charAt(0),b=c.toUpperCase();return c!==b?b+a.slice(1):a},humanize:function(a){return SC.String.decamelize(a).replace(SC.STRING_HUMANIZE_REGEXP," ")},escapeForRegExp:function(a){return a.replace(SC.STRING_REGEXP_ESCAPED_REGEXP,"\\$1")},removeDiacritics:function(g){var a=SC.diacriticMappingTable;if(!a){SC.diacriticMappingTable={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Ā":"A","Ă":"A","Ą":"A","Ǎ":"A","Ǟ":"A","Ǡ":"A","Ǻ":"A","Ȁ":"A","Ȃ":"A","Ȧ":"A","Ḁ":"A","Ạ":"A","Ả":"A","Ấ":"A","Ầ":"A","Ẩ":"A","Ẫ":"A","Ậ":"A","Ắ":"A","Ằ":"A","Ẳ":"A","Ẵ":"A","Ặ":"A","Å":"A","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ç":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ḉ":"C","Ď":"D","Ḋ":"D","Ḍ":"D","Ḏ":"D","Ḑ":"D","Ḓ":"D","È":"E","É":"E","Ê":"E","Ë":"E","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ȩ":"E","Ḕ":"E","Ḗ":"E","Ḙ":"E","Ḛ":"E","Ḝ":"E","Ẹ":"E","Ẻ":"E","Ẽ":"E","Ế":"E","Ề":"E","Ể":"E","Ễ":"E","Ệ":"E","Ḟ":"F","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","Ǧ":"G","Ǵ":"G","Ḡ":"G","Ĥ":"H","Ȟ":"H","Ḣ":"H","Ḥ":"H","Ḧ":"H","Ḩ":"H","Ḫ":"H","Ì":"I","Í":"I","Î":"I","Ï":"I","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ḭ":"I","Ḯ":"I","Ỉ":"I","Ị":"I","Ĵ":"J","Ķ":"K","Ǩ":"K","Ḱ":"K","Ḳ":"K","Ḵ":"K","Ĺ":"L","Ļ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ḻ":"L","Ḽ":"L","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ñ":"N","Ń":"N","Ņ":"N","Ň":"N","Ǹ":"N","Ṅ":"N","Ṇ":"N","Ṉ":"N","Ṋ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ō":"O","Ŏ":"O","Ő":"O","Ơ":"O","Ǒ":"O","Ǫ":"O","Ǭ":"O","Ȍ":"O","Ȏ":"O","Ȫ":"O","Ȭ":"O","Ȯ":"O","Ȱ":"O","Ṍ":"O","Ṏ":"O","Ṑ":"O","Ṓ":"O","Ọ":"O","Ỏ":"O","Ố":"O","Ồ":"O","Ổ":"O","Ỗ":"O","Ộ":"O","Ớ":"O","Ờ":"O","Ở":"O","Ỡ":"O","Ợ":"O","Ṕ":"P","Ṗ":"P","Ŕ":"R","Ŗ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṙ":"R","Ṛ":"R","Ṝ":"R","Ṟ":"R","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","Ș":"S","Ṡ":"S","Ṣ":"S","Ṥ":"S","Ṧ":"S","Ṩ":"S","Ţ":"T","Ť":"T","Ț":"T","Ṫ":"T","Ṭ":"T","Ṯ":"T","Ṱ":"T","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","Ư":"U","Ǔ":"U","Ǖ":"U","Ǘ":"U","Ǚ":"U","Ǜ":"U","Ȕ":"U","Ȗ":"U","Ṳ":"U","Ṵ":"U","Ṷ":"U","Ṹ":"U","Ṻ":"U","Ụ":"U","Ủ":"U","Ứ":"U","Ừ":"U","Ử":"U","Ữ":"U","Ự":"U","Ṽ":"V","Ṿ":"V","Ŵ":"W","Ẁ":"W","Ẃ":"W","Ẅ":"W","Ẇ":"W","Ẉ":"W","Ẋ":"X","Ẍ":"X","Ý":"Y","Ŷ":"Y","Ÿ":"Y","Ȳ":"Y","Ẏ":"Y","Ỳ":"Y","Ỵ":"Y","Ỷ":"Y","Ỹ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","Ẑ":"Z","Ẓ":"Z","Ẕ":"Z","`":"`","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","ā":"a","ă":"a","ą":"a","ǎ":"a","ǟ":"a","ǡ":"a","ǻ":"a","ȁ":"a","ȃ":"a","ȧ":"a","ḁ":"a","ạ":"a","ả":"a","ấ":"a","ầ":"a","ẩ":"a","ẫ":"a","ậ":"a","ắ":"a","ằ":"a","ẳ":"a","ẵ":"a","ặ":"a","ḃ":"b","ḅ":"b","ḇ":"b","ç":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ḉ":"c","ď":"d","ḋ":"d","ḍ":"d","ḏ":"d","ḑ":"d","ḓ":"d","è":"e","é":"e","ê":"e","ë":"e","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","ȅ":"e","ȇ":"e","ȩ":"e","ḕ":"e","ḗ":"e","ḙ":"e","ḛ":"e","ḝ":"e","ẹ":"e","ẻ":"e","ẽ":"e","ế":"e","ề":"e","ể":"e","ễ":"e","ệ":"e","ḟ":"f","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","ǧ":"g","ǵ":"g","ḡ":"g","ĥ":"h","ȟ":"h","ḣ":"h","ḥ":"h","ḧ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ì":"i","í":"i","î":"i","ï":"i","ĩ":"i","ī":"i","ĭ":"i","į":"i","ǐ":"i","ȉ":"i","ȋ":"i","ḭ":"i","ḯ":"i","ỉ":"i","ị":"i","ĵ":"j","ǰ":"j","ķ":"k","ǩ":"k","ḱ":"k","ḳ":"k","ḵ":"k","ĺ":"l","ļ":"l","ľ":"l","ḷ":"l","ḹ":"l","ḻ":"l","ḽ":"l","ḿ":"m","ṁ":"m","ṃ":"m","ñ":"n","ń":"n","ņ":"n","ň":"n","ǹ":"n","ṅ":"n","ṇ":"n","ṉ":"n","ṋ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ō":"o","ŏ":"o","ő":"o","ơ":"o","ǒ":"o","ǫ":"o","ǭ":"o","ȍ":"o","ȏ":"o","ȫ":"o","ȭ":"o","ȯ":"o","ȱ":"o","ṍ":"o","ṏ":"o","ṑ":"o","ṓ":"o","ọ":"o","ỏ":"o","ố":"o","ồ":"o","ổ":"o","ỗ":"o","ộ":"o","ớ":"o","ờ":"o","ở":"o","ỡ":"o","ợ":"o","ṕ":"p","ṗ":"p","ŕ":"r","ŗ":"r","ř":"r","ȑ":"r","ȓ":"r","ṙ":"r","ṛ":"r","ṝ":"r","ṟ":"r","ś":"s","ŝ":"s","ş":"s","š":"s","ș":"s","ṡ":"s","ṣ":"s","ṥ":"s","ṧ":"s","ṩ":"s","ţ":"t","ť":"t","ț":"t","ṫ":"t","ṭ":"t","ṯ":"t","ṱ":"t","ẗ":"t","ù":"u","ú":"u","û":"u","ü":"u","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","ư":"u","ǔ":"u","ǖ":"u","ǘ":"u","ǚ":"u","ǜ":"u","ȕ":"u","ȗ":"u","ṳ":"u","ṵ":"u","ṷ":"u","ṹ":"u","ṻ":"u","ụ":"u","ủ":"u","ứ":"u","ừ":"u","ử":"u","ữ":"u","ự":"u","ṽ":"v","ṿ":"v","ŵ":"w","ẁ":"w","ẃ":"w","ẅ":"w","ẇ":"w","ẉ":"w","ẘ":"w","ẋ":"x","ẍ":"x","ý":"y","ÿ":"y","ŷ":"y","ȳ":"y","ẏ":"y","ẙ":"y","ỳ":"y","ỵ":"y","ỷ":"y","ỹ":"y","ź":"z","ż":"z","ž":"z","ẑ":"z","ẓ":"z","ẕ":"z"};a=SC.diacriticMappingTable}var d,e,b="",f=g.length;for(var c=0;c<=f;++c){d=g.charAt(c);e=a[d];b+=e||d}return b},pluralize:function(g){var k,e,b=g.split(/\s/).pop(),h=g.replace(b,""),a=b.charAt(0).match(/[A-Z]/)?true:false;b=b.toLowerCase();for(k=0,e=SC.INFLECTION_CONSTANTS.UNCOUNTABLE.length;k<e;k++){var f=SC.INFLECTION_CONSTANTS.UNCOUNTABLE[k];if(b==f){return g.toString()}}for(k=0,e=SC.INFLECTION_CONSTANTS.IRREGULAR.length;k<e;k++){var c=SC.INFLECTION_CONSTANTS.IRREGULAR[k][0],j=SC.INFLECTION_CONSTANTS.IRREGULAR[k][1];if((b==c)||(b==j)){if(a){j=j.capitalize()}return h+j}}for(k=0,e=SC.INFLECTION_CONSTANTS.PLURAL.length;k<e;k++){var i=SC.INFLECTION_CONSTANTS.PLURAL[k][0],d=SC.INFLECTION_CONSTANTS.PLURAL[k][1];if(i.test(b)){return g.replace(i,d)}}},singularize:function(g){var k,e,b=g.split(/\s/).pop(),h=g.replace(b,""),a=b.charAt(0).match(/[A-Z]/)?true:false;b=b.toLowerCase();for(k=0,e=SC.INFLECTION_CONSTANTS.UNCOUNTABLE.length;k<e;k++){var f=SC.INFLECTION_CONSTANTS.UNCOUNTABLE[k];if(b==f){return g.toString()}}for(k=0,e=SC.INFLECTION_CONSTANTS.IRREGULAR.length;k<e;k++){var c=SC.INFLECTION_CONSTANTS.IRREGULAR[k][0],j=SC.INFLECTION_CONSTANTS.IRREGULAR[k][1];if((b==c)||(b==j)){if(a){c=c.capitalize()}return h+c}}for(k=0,e=SC.INFLECTION_CONSTANTS.SINGULAR.length;k<e;k++){var i=SC.INFLECTION_CONSTANTS.SINGULAR[k][0],d=SC.INFLECTION_CONSTANTS.SINGULAR[k][1];if(i.test(b)){return g.replace(i,d)}}}});SC.String.strip=SC.String.trim;sc_require("system/string");SC.supplement(String.prototype,{capitalizeEach:function(){return SC.String.capitalizeEach(this,arguments)},titleize:function(a){return SC.String.titleize(this,arguments)},classify:function(a){return SC.String.classify(this,arguments)},humanize:function(a){return SC.String.humanize(this,arguments)},escapeForRegExp:function(a){return SC.String.escapeForRegExp(this,arguments)},removeDiacritics:function(a){return SC.String.removeDiacritics(this,arguments)},trim:function(a){return SC.String.trim(this,arguments)},trimLeft:function(a){return SC.String.trimLeft(this,arguments)},trimRight:function(a){return SC.String.trimRight(this,arguments)},pluralize:function(a){return SC.String.pluralize(this,arguments)},singularize:function(a){return SC.String.singularize(this,arguments)}});SC.Gesture=SC.Object.extend({name:"gesture",touchIsInGesture:function(b,a){return NO},touchStart:function(a){},touchesDragged:function(a,b){},touchEnd:function(a){},start:function(){if(!this.get("isActive")){this.set("isActive",YES);var b=SC.$A(arguments);b.unshift(this);var a=this.name+"Start";if(this.view[a]){this.view[a].apply(this.view,b)}}},end:function(){if(this.get("isActive")){this.set("isActive",NO);var b=SC.$A(arguments);b.unshift(this);var a=this.name+"End";if(this.view[a]){this.view[a].apply(this.view,b)}}},change:function(){if(this.get("isActive")){var b=SC.$A(arguments);b.unshift(this);var a=this.name+"Changed";if(this.view[a]){this.view[a].apply(this.view,b)}}},cancel:function(){if(this.get("isActive")){this.set("isActive",NO);var b=SC.$A(arguments);b.unshift(this);var a=this.name+"Cancelled";if(this.view[a]){this.view[a].apply(this.view,b)}}},trigger:function(){var b=SC.$A(arguments);b.unshift(this);var a=this.name;if(this.view[a]){this.view[a].apply(this.view,b)}},take:function(a){a.isTaken=YES;if(SC.none(a.touchResponder)||a.touchResponder!==this){a.makeTouchResponder(this,YES)}},release:function(a){a.isTaken=NO;if(a.nextTouchResponder){a.makeTouchResponder(a.nextTouchResponder)}},discardTouch:function(a){a.isTaken=YES;a.makeTouchResponder(null)},statusForTouch:function(c){var b=SC.guidFor(c.view)+this.name;var a=c[b];if(!a){a=c[b]={}}return a},unassignedTouchDidStart:function(a){if(a.isTaken){return}if(this.touchIsInGesture(a,this.statusForTouch(a))){this.take(a)}},unassignedTouchesDidChange:function(a,b){b.forEach(function(c){if(c.isTaken){return}if(this.touchIsInGesture(c,this.statusForTouch(c))){this.take(c)}},this)},unassignedTouchDidEnd:function(a){},interestedInTouch:function(b){var a=this.statusForTouch(b);if(a.isInterested){return}a.isInterested=YES;b.isInteresting++},uninterestedInTouch:function(b){var a=this.statusForTouch(b);if(!a.isInterested){return}a.isInterested=NO;b.isInteresting--}});sc_require("system/gesture");SC.PinchGesture=SC.Gesture.extend({name:"pinch",acceptsMultitouch:YES,scale:1,unassignedTouchesDidChange:function(a,b){if(b.length==2){this.take(b[0]);this.take(b[1])}},touchStart:function(b){var a=b.touchesForResponder(this);if(!a||a.length===0){return YES}else{if(a.length==1){this.start([a[0],b]);return YES}else{return NO}}},touchesDragged:function(a,c){var d=c.firstObject(),b=d.averagedTouchesForView(this);if(b.touchCount==2){if(!this._startDistance){this._startDistance=b.d}this.scale=b.d/this._startDistance;this.change(c,this.scale)}},touchEnd:function(b){this._startDistance=null;var a=b.touchesForResponder(this);this.trigger(a,this.scale);this.end(a,this.scale);if(a){a.forEach(function(c){this.release(c)},this)}}});sc_require("system/gesture");SC.SWIPE_HORIZONTAL="X";SC.SWIPE_VERTICAL="Y";SC.SWIPE_ANY="XY";SC.SWIPE_LEFT="LEFT";SC.SWIPE_RIGHT="RIGHT";SC.SWIPE_UP="UP";SC.SWIPE_DOWN="DOWN";SC.SwipeGesture=SC.Gesture.extend({name:"swipe",acceptsMultitouch:YES,direction:SC.SWIPE_HORIZONTAL,currentDirection:null,startDistance:5,swipeDistance:40,tolerance:0.5,touchIsInGesture:function(i,g){if(!g.flunked){var j=this.get("direction"),e=this.get("currentDirection"),a=this.get("startDistance"),h=i.pageX-i.startX,f=i.pageY-i.startY,c=Math.abs(h),b=Math.abs(f);if(Math.abs(h)>a||Math.abs(f)>a){if(!e){if(j==SC.SWIPE_ANY){if(c>b){e=SC.SWIPE_HORIZONTAL}else{if(b>c){e=SC.SWIPE_VERTICAL}else{return NO}}}else{e=j}this.set("currentDirection",e)}var l=(e==SC.SWIPE_HORIZONTAL)?h:f,k=(e==SC.SWIPE_HORIZONTAL)?f:h;if(Math.abs(l)*this.get("tolerance")>Math.abs(k)){return YES}}}return NO},touchStart:function(e){var b=this.get("currentDirection"),c=e["page"+b]-e["start"+b],a;if(c<0){a=(b===SC.SWIPE_HORIZONTAL)?SC.SWIPE_LEFT:SC.SWIPE_UP}else{a=(b===SC.SWIPE_HORIZONTAL)?SC.SWIPE_RIGHT:SC.SWIPE_DOWN}this.start(e,a,c);return YES},touchesDragged:function(j,e){var c=e.firstObject();var f=this.get("currentDirection"),a=(f===SC.SWIPE_HORIZONTAL?"Y":"X"),i=c["page"+f]-c["start"+f],g=c["page"+a]-c["start"+a],h;if(i<0){h=(f===SC.SWIPE_HORIZONTAL)?SC.SWIPE_LEFT:SC.SWIPE_UP}else{h=(f===SC.SWIPE_HORIZONTAL)?SC.SWIPE_RIGHT:SC.SWIPE_DOWN}if(Math.abs(i)<this.get("startDistance")||Math.abs(i)*this.get("tolerance")<Math.abs(g)){this.release(c);var b=c.touchesForResponder(this);if(!b||b.length===0){this.cancel(c,h,i)}}else{this.change(c,h,i)}},touchEnd:function(h){var f=this.get("currentDirection"),e=(f===SC.SWIPE_HORIZONTAL?"Y":"X"),g=h["page"+f]-h["start"+f],b=h["page"+e]-h["start"+e],a;if(g<0){a=(f===SC.SWIPE_HORIZONTAL)?SC.SWIPE_LEFT:SC.SWIPE_UP}else{a=(f===SC.SWIPE_HORIZONTAL)?SC.SWIPE_RIGHT:SC.SWIPE_DOWN}if(Math.abs(g)>this.get("swipeDistance")||Math.abs(g)*this.get("tolerance")<Math.abs(b)){this.trigger(h,a)}this.end(h,a,g);this.set("currentDirection",null);var c=h.touchesForResponder(this);if(c){c.forEach(function(d){this.release(d)},this)}},cancel:function(){arguments.callee.base.apply(this,arguments);this.set("currentDirection",null)}});sc_require("system/gesture");SC.TapGesture=SC.Gesture.extend({name:"tap",acceptsMultitouch:NO,_tapCount:null,_candidateTouch:null,_eventTimer:null,tapWiggle:10,tapDelay:200,touchIsInGesture:function(b,a){return !b.tapFlunked},touchStart:function(a){if(this._eventTimer){this._eventTimer.invalidate()}if(this._candidateTouch&&this._candidateTouch.touch.identifier!==a.identifier){this._cancelTap(a);return NO}this._candidateTouch={startTime:Date.now(),touch:a};this.start(a);return YES},touchesDragged:function(a,c){var e=c[0];var b=(c.length>1||!this._candidateTouch||e.identifier!==this._candidateTouch.touch.identifier);var d=this._calculateDragDistance(e)>this.get("tapWiggle");if(b||d){this._cancelTap(e)}},touchEnd:function(a){if(this._calculateDragDistance(a)>this.get("tapWiggle")||Date.now()-this._candidateTouch.startTime>this.get("tapDelay")){this._cancelTap(a)}else{this._addTap(a)}},_addTap:function(b){var a=this;if(this._eventTimer){this._eventTimer.invalidate()}this._tapCount=(this._tapCount||0)+1;this._candidateTouch=null;this._eventTimer=SC.Timer.schedule({target:a,action:function(){this._triggerTap(b)},interval:this.get("tapDelay")});this.change(b,this._tapCount);this.trigger(b,this._tapCount)},_cancelTap:function(a){a.tapFlunked=YES;this.release(a);this.cancel(a,this._tapCount);if(this._eventTimer){this._eventTimer.invalidate()}this._tapCount=null;this._candidateTouch=null;this._eventTimer=null},_triggerTap:function(a){this.end(a,this._tapCount);this._tapCount=null;this._candidateTouch=null;this._eventTimer=null},_calculateDragDistance:function(a){return Math.sqrt(Math.pow(a.pageX-a.startX,2)+Math.pow(a.pageY-a.startY,2))}});SC.AutoMixin={autoMixins:[],createChildView:function(b,c){if(!b.isClass){c=b}else{if(!c){c={}}else{c=SC.clone(c)}}c.owner=c.parentView=this;if(!c.page){c.page=this.page}if(b.isClass){c.createdByParent=true;var a=SC.clone(this.get("autoMixins"));a.push(c);b=b.create.apply(b,a)}return b}};SC.mixin({_copy_computed_props:["maxWidth","maxHeight","paddingLeft","paddingRight","paddingTop","paddingBottom","fontFamily","fontSize","fontStyle","fontWeight","fontVariant","lineHeight","whiteSpace","letterSpacing","wordWrap"],stringFromLayout:function(e){var d=["maxHeight","maxWidth","minHeight","minWidth","centerY","centerX","width","height","bottom","right","top","left","zIndex","opacity","border","borderLeft","borderRight","borderTop","borderBottom","rotateX","rotateY","rotateZ","scale"],a=[],c,b=d.length;while(--b>=0){c=d[b];if(e.hasOwnProperty(c)){a.push(c+":"+e[c])}}return"{ "+a.join(", ")+" }"},heightForString:function(h,c,b,a,g){var e=this._heightCalcElement,f,i;if(!g){h=SC.RenderContext.escapeHTML(h)}f=(a&&SC.typeOf(a)===SC.T_ARRAY)?a.join(" "):"";if(!c){c=100}if(!e){e=this._heightCalcElement=document.createElement("div");document.body.insertBefore(e,null)}b=b+"; width: "+c+"px; left: "+(-1*c)+"px; position: absolute";var d=SC.$(e);d.attr("style",b);if(f!==""){d.attr("class",f)}e.innerHTML=h;i=e.clientHeight;e=null;return i},prepareStringMeasurement:function(o,a){var k=this._metricsCalculationElement,h,p,c,d;h=SC.A(a).join(" ");if(!k){var n=document.createElement("div");n.style.cssText="position:absolute; left:-10010px; top:-10px;width:10000px; height:0px; overflow:hidden;visibility:hidden;";k=this._metricsCalculationElement=document.createElement("div");n.appendChild(k);document.body.insertBefore(n,null)}d=SC.$(k);if(SC.typeOf(o)!=SC.T_STRING){var g=null;if(document.defaultView&&document.defaultView.getComputedStyle){g=document.defaultView.getComputedStyle(o,null)}else{g=o.currentStyle}var m=this._copy_computed_props;for(var j=0;j<m.length;j++){var b=m[j],f=g[b];k.style[b]=f}var l=k.style;if(l.font===""){var e="";if(l.fontStyle){e+=l.fontStyle+" "}if(l.fontVariant){e+=l.fontVariant+" "}if(l.fontWeight){e+=l.fontWeight+" "}if(l.fontSize){e+=l.fontSize}else{e+="10px"}if(l.lineHeight){e+="/"+l.lineHeight}e+=" ";if(l.fontFamily){e+=l.fontFamily}else{l+="sans-serif"}k.style.font=e}SC.mixin(k.style,{left:"0px",top:"0px",position:"absolute",bottom:"auto",right:"auto",width:"auto",height:"auto"});g=null}else{c=o;d.attr("style",c+"; position:absolute; left: 0px; top: 0px; bottom: auto; right: auto; width: auto; height: auto;")}k.className=h;k=null},teardownStringMeasurement:function(){var a=this._metricsCalculationElement;a.innerHTML="";a.className="";a.setAttribute("style","");a=null},measureString:function(c,b){var d=this._metricsCalculationElement,e=0;if(!d){throw new Error("measureString requires a string measurement environment to be set up. Did you mean metricsForString?")}if(b){d.innerHTML=c}else{if(typeof d.innerText!="undefined"){d.innerText=c}else{d.textContent=c}}if(SC.browser.isIE){e=1}var a={width:d.clientWidth+e,height:d.clientHeight};if(SC.browser.isMozilla){a.width+=1}d=null;return a},metricsForString:function(c,d,e,b){SC.prepareStringMeasurement(d,e);var a=SC.measureString(c,b);SC.teardownStringMeasurement();return a}});sc_require("system/utils/string_measurement");SC.AutoResize={shouldAutoResize:YES,shouldMeasureSize:YES,shouldCacheSizes:NO,shouldResizeWidth:YES,shouldResizeHeight:NO,measuredSize:{width:0,height:0},maxWidth:null,maxHeight:null,shouldAutoFitText:NO,autoFitDiscreteFontSizes:NO,minFontSize:12,maxFontSize:20,calculatedFontSize:20,fontPropertyDidChange:function(){if(this.get("shouldAutoFitText")){this.invokeLast(this.fitTextToFrame)}}.observes("shouldAutoFitText","minFontSize","maxFontSize","measuredSize"),measuredSizeDidChange:function(){var c=this.get("measuredSize"),b=c.width,h=c.height,g,a,d=this.get("autoResizePadding")||0,f=this.get("maxWidth"),e=this.get("maxHeight");if(SC.typeOf(d)===SC.T_NUMBER){g=a=d}else{g=d.height;a=d.width}h+=g;b+=a;if(this.get("shouldAutoResize")){if(this.get("shouldResizeWidth")){if(f&&b>f){b=f}this.set("calculatedWidth",b);this.adjust("width",b)}if(this.get("shouldResizeHeight")){if(e&&h>e){h=e}this.set("calculatedHeight",h);this.adjust("height",h)}}}.observes("shouldAutoResize","measuredSize","autoResizePadding","maxWidth","maxHeight","shouldResizeWidth","shouldResizeHeight"),initMixin:function(){},batchResizeId:null,scheduleMeasurement:function(){var a=this.get("batchResizeId");if(!this.get("shouldMeasureSize")||!this.get("isVisibleInWindow")||(this.get("autoResizeText")===this._lastMeasuredText&&a===this._lastMeasuredId)){return}SC.AutoResizeManager.scheduleMeasurementForView(this,a)}.observes("isVisibleInWindow","shouldMeasureSize","autoResizeText","batchResizeId"),_lastMeasuredText:null,_cachedMetrics:function(c,d){if(!this.get("shouldCacheSizes")){return}var b=SC.cacheSlotFor(this.get("batchResizeId")||this),a=this.get("autoResizeText");if(d){b[a]=d}else{d=b[a]}return d}.property("shouldCacheSizes","autoResizeText","batchResizeId").cacheable(),measureSize:function(d){var h,e=this.get("autoResizeLayer"),c=this.get("autoResizeText"),b=!this.get("escapeHTML"),g=this.get("batchResizeId"),a=this.get("_cachedMetrics"),f=this.get("maxFontSize");if(!e){return}if(a){h=a}else{if(SC.none(c)||c===""){h={width:0,height:0}}else{if(d){h=SC.measureString(c,b)}else{this.prepareLayerForStringMeasurement(e);h=SC.metricsForString(c,e,this.get("classNames"),b)}}}this.set("measuredSize",h);if(this.get("shouldCacheSizes")){this.setIfChanged("_cachedMetrics",h)}this._lastMeasuredText=c;this._lastMeasuredId=g;return h},prepareLayerForStringMeasurement:function(a){var b=this.get("maxFontSize");if(this.get("shouldAutoFitText")&&this.get("calculatedFontSize")!==b){a.style.fontSize=b+"px"}if(!this.get("shouldResizeWidth")){a.style.maxWidth=$(a).outerWidth()+"px"}},viewDidResize:function(a){a();this.fontPropertyDidChange()}.enhance(),fitTextToFrame:function(){var q=this.get("autoResizeLayer");if(!q){return}var c=this.get("maxFontSize"),d=this.get("minFontSize");this.prepareLayerForStringMeasurement(q);var e=this.get("frame"),f=this.get("autoResizePadding")||0,j=e.width-1,g=e.height-1,p=this.get("measuredSize"),a=p.width,r=p.height;if(SC.typeOf(f)===SC.T_NUMBER){j-=f;g-=f}else{j-=f.width;g-=f.height}if(a<=j&&r<=g){return}if(this.get("autoFitDiscreteFontSizes")){h=d}else{var b=j/a,i=g/r,l=Math.floor(c*Math.min(b,i)),h,o=this.get("classNames"),n=!this.get("escapeHTML"),k=this.get("autoResizeText"),m;l=h=Math.min(c,Math.max(d,l));q.style.fontSize=l+"px";m=SC.metricsForString(k,q,o,n);if(m.width>j||m.height>g){for(l=l-1;l>=d;l--){q.style.fontSize=l+"px";m=SC.metricsForString(k,q,o,n);h=l;if(m.width<=j&&m.height<=g){break}}}else{if(m.width<j||m.height<g){for(l=l+1;l<=c;l++){q.style.fontSize=l+"px";m=SC.metricsForString(k,q,o,n);if(m.width<=j&&m.height<=g){h=l}if(m.width>=j||m.height>=g){break}}}}}q.style.fontSize=h+"px";this.set("calculatedFontSize",h)},applyAttributesToContext:function(b,a){b(a);if(this.get("shouldAutoFitText")){a.setStyle("font-size",this.get("calculatedFontSize")+"px")}}.enhance(),didCreateLayer:function(a){a();this.scheduleMeasurement()}.enhance(),_transitionIn:function(b){var a=this.get("layout").opacity||1;this.adjust("opacity",0);this.invokeNext(function(){this.adjust("opacity",a);b()})}.enhance()};SC.AutoResizeManager={measurementQueue:SC.CoreSet.create(),scheduleMeasurementForView:function(a){this.measurementQueue.add(a);SC.RunLoop.currentRunLoop.invokeLast(this.doBatchResize)},cancelMeasurementForView:function(a,b){this.measurementQueue.remove(a)},doBatchResize:function(){if(this!==SC.AutoResizeManager){return SC.AutoResizeManager.doBatchResize()}var b,d,f,g=this.measurementQueue,h,c,e,a;while((a=g.get("length"))>0){h=NO;b=g[a-1].get("batchResizeId");for(e=a-1;e>=0;--e){d=g[e];if(d.get("batchResizeId")!==b){continue}if(d.get("isVisibleInWindow")&&d.get("shouldMeasureSize")&&(f=d.get("autoResizeLayer"))){c=d.get("autoResizeText");if(!SC.none(c)&&c!==""&&!d.get("_cachedMetrics")&&!h){d.prepareLayerForStringMeasurement(f);SC.prepareStringMeasurement(f,d.get("classNames"));h=YES}d.measureSize(YES)}g.remove(d);if(!b){break}}if(h){SC.teardownStringMeasurement()}}}};if(SC.Button){SC.Button.initMixin=function(){throw new Error("SC.Button is deprecated as a mixin and is now a subclass of SC.TemplateView. Subclass SC.ButtonView instead.")}}SC.ContentDisplay={concatenatedProperties:"contentDisplayProperties",contentDisplayProperties:[],initMixin:function(){this._display_contentDidChange()},destroyMixin:function(){if(!this._display_content){return}this._display_stopObservingContent(this._display_content);this._display_content=null},_display_beginObservingContent:function(a){var b=this._display_contentPropertyDidChange;if(SC.isArray(a)){a.invoke("addObserver","*",this,b)}else{if(a.addObserver){a.addObserver("*",this,b)}}},_display_stopObservingContent:function(a){var b=this._display_contentPropertyDidChange;if(SC.isArray(a)){a.invoke("removeObserver","*",this,b)}else{if(a.removeObserver){a.removeObserver("*",this,b)}}},_display_contentDidChange:function(d,a,c){if((c=this.get("content"))===this._display_content){return}var b=this._display_content;if(b){this._display_stopObservingContent(b)}b=this._display_content=c;if(b){this._display_beginObservingContent(b)}this.displayDidChange()}.observes("content"),_display_contentPropertyDidChange:function(e,c,d,b){if(c==="*"){this.displayDidChange()}else{var a=this.get("contentDisplayProperties");if(a&&a.indexOf(c)>=0){this.displayDidChange()}}}};SC.ContentValueSupport={hasContentValueSupport:YES,initMixin:function(){this._control_contentKeysDidChange()},destroyMixin:function(){this._cleanup_old_observers();this._cleanup_old_content_observers()},value:null,content:null,contentKeys:null,_default_contentKeys:{contentValueKey:"value"},contentValueKey:null,contentPropertyDidChange:function(c,b){var a=this.get("contentKeys");if(a){var d;for(d in a){if(b===this.getDelegateProperty(d,this,this.get("displayDelegate"),a)){return this.updatePropertyFromContent(a[d],b,d,c)}else{if(b==="*"){this.updatePropertyFromContent(a[d],b,d,c)}}}}else{return this.updatePropertyFromContent("value",b,"contentValueKey",c)}},updatePropertyFromContent:function(f,c,e,d){var a,b;if(e===undefined){e="content"+f.capitalize()+"Key"}if(this[e]){e=this.get(e)}else{if((a=this.get("displayDelegate"))&&(b=a[e])){e=a.get?a.get(e):b}else{return this}}if(c==="*"||c===e){if(d===undefined){d=this.get("content")}if(d){b=d.get?d.get(e):d[e]}else{b=null}this.setIfChanged(f,b)}return this},updateContentWithValueObserver:function(d,a){var f=this._reverseContentKeys;if(!a||a==="*"){for(a in f){this.updateContentWithValueObserver(this,a)}}var c=this.get(a);var b=this.get("content"),e=this.getDelegateProperty(f[a],this,this.displayDelegate);if(!e||!b){return this}if(typeof b.setIfChanged===SC.T_FUNCTION){b.setIfChanged(e,c)}else{if(b[e]!==c){b[e]=c}}},_control_content:null,_old_contentValueKeys:null,_old_contentKeys:null,_control_contentDidChange:function(g,b){this._cleanup_old_content_observers();var c=this.get("content"),a=this.get("contentKeys"),h,e=this._old_contentValueKeys,d=this.contentPropertyDidChange;if(c&&c.addObserver){if(a){if(!e){e=SC.CoreSet.create()}for(h in a){h=this.getDelegateProperty(h,this,this.get("displayDelegate"));if(h){c.addObserver(h,this,d);e.add(h)}}}else{h=this.getDelegateProperty("contentValueKey",this,this.get("displayDelegate"));if(h){c.addObserver(h,this,d);if(e){e.add(h)}else{e=h}}}}b=(!b||b==="content")?"*":this.get(b);if(b){this.contentPropertyDidChange(c,b)}this._control_content=c;this._old_contentValueKeys=e}.observes("content"),_control_contentKeysDidChange:function(){var c,b={},a=this.get("contentKeys")||this._default_contentKeys,g,e=this._control_contentDidChange,d=this.updateContentWithValueObserver;this._cleanup_old_observers();for(c in a){g=a[c];b[g]=c;this.addObserver(g,this,d);this.addObserver(c,this,e)}this._reverseContentKeys=b;this._old_contentKeys=a;this._control_contentDidChange()}.observes("contentKeys"),_cleanup_old_content_observers:function(){var b=this._control_content,g=this._old_contentValueKeys,e=SC.typeOf(g),d=this.contentPropertyDidChange,h;if(b&&b.removeObserver&&g){if(e===SC.T_STRING){b.removeObserver(g,this,d);this._old_contentValueKeys=g=null}else{var c,a=g.get("length");for(c=0;c<a;c++){h=g[c];b.removeObserver(h,this,d)}g.clear()}}},_cleanup_old_observers:function(){var a=this._old_contentKeys,d=this._control_contentDidChange,c=this.updateContentWithValueObserver,e,b;for(b in a){e=a[b];this.removeObserver(e,this,c);this.removeObserver(b,this,d)}}};sc_require("mixins/content_value_support");sc_require("system/string");SC.AUTO_CONTROL_SIZE="__AUTO__";SC.JUMBO_CONTROL_SIZE="sc-jumbo-size";SC.HUGE_CONTROL_SIZE="sc-huge-size";SC.LARGE_CONTROL_SIZE="sc-large-size";SC.REGULAR_CONTROL_SIZE="sc-regular-size";SC.SMALL_CONTROL_SIZE="sc-small-size";SC.TINY_CONTROL_SIZE="sc-tiny-size";SC.Control=SC.mixin(SC.clone(SC.ContentValueSupport),{isControl:YES,isSelected:NO,isSelectedBindingDefault:SC.Binding.oneWay().bool(),isActive:NO,isActiveBindingDefault:SC.Binding.oneWay().bool(),fieldKey:null,fieldLabel:null,errorLabel:function(){var a=this.get("fieldLabel"),d,c,b;if(a){return a}d=this.get("fieldKey")||this.constructor.toString();c=d?SC.String.capitalize(SC.String.humanize(d)):"";b=SC.String.locWithDefault("FieldKey."+d,c);return SC.String.locWithDefault("ErrorLabel."+d,b)}.property("fieldLabel","fieldKey").cacheable(),controlSize:SC.REGULAR_CONTROL_SIZE,displayProperties:["isSelected","isActive","controlSize"],_CONTROL_TMP_CLASSNAMES:{},renderMixin:function(b,g){var d=this.get("isSelected"),c=!this.get("isEnabledInPane"),e=this._CONTROL_TMP_CLASSNAMES;e.mixed=d===SC.MIXED_STATE;e.sel=d&&(d!==SC.MIXED_STATE);e.active=this.get("isActive");var f=this.get("controlSize");if(!f){f=SC.REGULAR_CONTROL_SIZE}if(g){b.setClass(e);if(!this.get("renderDelegate")){b.addClass(f)}}else{b.$().setClass(e);if(!this.get("renderDelegate")){b.$().addClass(f)}}if(!g&&this.$input){var a=this.$input();if(a.attr("type")!=="radio"){this.$input().attr("disabled",c)}}}});SC.Editable={isEditable:NO,isEditing:NO,beginEditing:function(){if(!this.get("isEditable")){return NO}if(this.get("isEditing")){return YES}this.beginPropertyChanges();this.set("isEditing",YES);this.becomeFirstResponder();this.endPropertyChanges();return YES},discardEditing:function(){return !this.get("isEditing")},commitEditing:function(){if(!this.get("isEditing")){return YES}this.set("isEditing",NO);this.resignFirstResponder();return YES}};SC.ALIGN_JUSTIFY="justify";SC.FlowedLayout={isFlowedLayout:YES,layoutDirection:SC.LAYOUT_HORIZONTAL,autoResize:YES,shouldResizeWidth:YES,shouldResizeHeight:YES,align:SC.ALIGN_LEFT,canWrap:YES,defaultFlowSpacing:{left:0,bottom:0,top:0,right:0},flowPadding:{left:0,bottom:0,right:0,top:0},_scfl_validFlowPadding:function(){var b=this.get("flowPadding")||{},a={};a.left=b.left||0;a.top=b.top||0;a.bottom=b.bottom||0;a.right=b.right||0;return a}.property("flowPadding").cacheable(),concatenatedProperties:["childMixins"],initMixin:function(){this._scfl_tileOnce();this.addObserver("childViews.[]",this,this._scfl_childViewsDidChange)},_scfl_childViewsDidChange:function(a){this._scfl_tileOnce()},_scfl_layoutPropertyDidChange:function(a){this._scfl_tileOnce()}.observes("layoutDirection","align","flowPadding","canWrap","defaultFlowSpacing","isVisibleInWindow"),layoutDidChangeFor:function(g){var b=g._scfl_lastLayout,a=g.get("layout"),d=g.get("frame");if(!b){return arguments.callee.base.apply(this,arguments)}var e=YES;if(b.left&&b.left!==a.left){e=NO}else{if(b.top&&b.top!==a.top){e=NO}else{if(!g.get("fillWidth")&&b.width&&b.width!==a.width){e=NO}else{if(!b.width&&!g.get("fillWidth")&&d.width!==g._scfl_lastFrame.width){e=NO}else{if(!g.get("fillHeight")&&b.height&&b.height!==a.height){e=NO}else{if(!b.height&&!g.get("fillHeight")&&d.height!==g._scfl_lastFrame.height){e=NO}}}}}}if(e){return arguments.callee.base.apply(this,arguments)}this._scfl_tileOnce();arguments.callee.base.apply(this,arguments)},observeChildLayout:function(a){if(a._scfl_isBeingObserved){return}a._scfl_isBeingObserved=YES;a.addObserver("flowSpacing",this,"_scfl_tileOnce");a.addObserver("isVisible",this,"_scfl_tileOnce");a.addObserver("useAbsoluteLayout",this,"_scfl_tileOnce");a.addObserver("calculatedWidth",this,"_scfl_tileOnce");a.addObserver("calculatedHeight",this,"_scfl_tileOnce");a.addObserver("startsNewRow",this,"_scfl_tileOnce");a.addObserver("isSpacer",this,"_scfl_tileOnce");a.addObserver("maxSpacerLength",this,"_scfl_tileOnce");a.addObserver("fillWidth",this,"_scfl_tileOnce");a.addObserver("fillHeight",this,"_scfl_tileOnce")},unobserveChildLayout:function(a){a._scfl_isBeingObserved=NO;a.removeObserver("flowSpacing",this,"_scfl_tileOnce");a.removeObserver("isVisible",this,"_scfl_tileOnce");a.removeObserver("useAbsoluteLayout",this,"_scfl_tileOnce");a.removeObserver("calculatedWidth",this,"_scfl_tileOnce");a.removeObserver("calculatedHeight",this,"_scfl_tileOnce");a.removeObserver("startsNewRow",this,"_scfl_tileOnce");a.removeObserver("isSpacer",this,"_scfl_tileOnce");a.removeObserver("maxSpacerLength",this,"_scfl_tileOnce");a.removeObserver("fillWidth",this,"_scfl_tileOnce");a.removeObserver("fillHeight",this,"_scfl_tileOnce")},shouldIncludeChildInFlow:function(a,b){return b.get("isVisible")&&!b.get("useAbsoluteLayout")},flowSpacingForChild:function(a,b){var c=b.get("flowSpacing");if(SC.none(c)){c=this.get("defaultFlowSpacing")}if(SC.none(c)){c=0}if(SC.typeOf(c)===SC.T_NUMBER){c={left:c,right:c,bottom:c,top:c}}else{c.left=c.left||0;c.right=c.right||0;c.top=c.top||0;c.bottom=c.bottom||0}return c},flowSizeForChild:function(a,d){var c=d.get("calculatedWidth"),g=d.get("calculatedHeight"),i=this.get("layoutDirection"),e={},h=d.get("frame"),b=d.get("layout");d._scfl_lastFrame=h;if(c){e.width=c}else{e.width=b.width||h.width}if(g){e.height=g}else{e.height=b.height||h.height}if(d.get("isSpacer")){e.maxSpacerLength=d.get("maxSpacerLength");if(i===SC.LAYOUT_HORIZONTAL){e.width=b.minWidth||0}else{e.height=b.minHeight||0}}if(i===SC.LAYOUT_HORIZONTAL&&d.get("fillHeight")){e.height=b.minHeight||0}else{if(i===SC.LAYOUT_VERTICAL&&d.get("fillWidth")){e.width=b.minWidth||0}}return e},clippingFrame:function(){return{left:0,top:0,width:this.get("calculatedWidth"),height:this.get("calculatedHeight")}}.property("calculatedWidth","calculatedHeight"),_scfl_maxCollapsedRowLength:0,_scfl_totalCollapsedRowSize:0,_scfl_calculatedSizeDidChange:function(){if(this.get("autoResize")){if(this.get("layoutDirection")==SC.LAYOUT_VERTICAL){if(this.get("shouldResizeHeight")){this.adjust("minHeight",this.get("_scfl_maximumCollapsedRowLength"))}if(this.get("shouldResizeWidth")){this.adjust("minWidth",this.get("_scfl_totalCollapsedRowSize"))}}else{if(this.get("shouldResizeWidth")){this.adjust("minWidth",this.get("_scfl_maximumCollapsedRowLength"))}if(this.get("shouldResizeHeight")){this.adjust("minHeight",this.get("_scfl_totalCollapsedRowSize"))}}}}.observes("autoResize","shouldResizeWidth","_scfl_maximumCollapsedRowLength","_scfl_totalCollapsedRowSize","shouldResizeHeight"),_scfl_createPlan:function(){var e=this.get("layoutDirection"),a=this.get("_scfl_validFlowPadding"),d=this.get("frame");var c=(e===SC.LAYOUT_VERTICAL);var b={rows:undefined,maximumCollapsedRowLength:0,totalCollapsedRowSize:0,isVertical:e===SC.LAYOUT_VERTICAL,isHorizontal:e===SC.LAYOUT_HORIZONTAL,flowPadding:a,planStartPadding:a[c?"left":"top"],planEndPadding:a[c?"right":"bottom"],rowStartPadding:a[c?"top":"left"],rowEndPadding:a[c?"bottom":"right"],maximumRowLength:undefined,fitToPlanSize:undefined,align:this.get("align")};if(c){b.maximumRowLength=d.height-b.rowStartPadding-b.rowEndPadding;b.fitToPlanSize=d.width-b.planStartPadding-b.planEndPadding}else{b.maximumRowLength=d.width-b.rowStartPadding-b.rowEndPadding;b.fitToPlanSize=d.height-b.planStartPadding-b.planEndPadding}return b},_scfl_distributeChildrenIntoRows:function(d){var b=this.get("childViews"),a,g,c=b.length,e=d.isVertical,i=[],f;f=-1;g=0;while(g<c&&g!==f){f=g;var h={plan:d,rowLength:undefined,rowSize:undefined,shouldExpand:undefined,items:undefined,position:undefined};g=this._scfl_distributeChildrenIntoRow(b,g,h);i.push(h)}d.rows=i},_scfl_distributeChildrenIntoRow:function(e,m,i){var o,u=e.length,b=i.plan,g,a,d,p=[],k=0,l=b.isVertical,j,f,c,n=this.get("canWrap"),h=NO,q=0,s=i.plan.maximumRowLength;for(o=m;o<u;o++){g=e[o];h=h||(p.length>0&&g.get("startsNewRow"));if(!this.shouldIncludeChildInFlow(o,g)){continue}a=this.flowSizeForChild(o,g);d=this.flowSpacingForChild(o,g);a.width+=d.left+d.right;a.height+=d.top+d.bottom;f=a[l?"height":"width"];if(!SC.none(a.maxSpacerLength)){c=a.maxSpacerLength+(l?d.top+d.bottom:d.left+d.right)}j=a[l?"width":"height"];if((h||(n&&k+f>s))&&p.length>0){break}var v={child:g,itemLength:f,maxSpacerLength:c,itemSize:j,spacing:d,position:undefined,fillRow:l?g.get("fillWidth"):g.get("fillHeight"),isSpacer:g.get("isSpacer"),left:undefined,top:undefined,width:undefined,height:undefined};p.push(v);k+=f;q=Math.max(f,q)}i.rowLength=k;var r=n?q:i.rowLength;i.plan.maximumCollapsedRowLength=Math.max(r,i.plan.maximumCollapsedRowLength);i.items=p;return o},_scfl_positionChildrenInRows:function(d){var c=d.rows,b=c.length,a;for(a=0;a<b;a++){this._scfl_positionChildrenInRow(c[a])}},_scfl_positionChildrenInRow:function(m){var g=m.items,e=g.length,j,l,d,k=0,a=0,c,f=m.plan.align,i=YES,b=0,h=NO;for(j=0;j<e;j++){l=g[j];if(l.isSpacer){a+=l.child.get("spaceUnits")||1}}if(f===SC.ALIGN_JUSTIFY){a+=e-1}c=Math.max(0,m.plan.maximumRowLength-m.rowLength)/a;while(c>0){for(j=0;j<e;j++){l=g[j];if(l.isSpacer){l.itemLength+=c*(l.child.get("spaceUnits")||1);if(l.itemLength>l.maxSpacerLength){b+=l.itemLength-l.maxSpacerLength;l.itemLength=l.maxSpacerLength}else{h=YES}}}if(!h){break}c=Math.round(b/a);b=0}d=0;if(a===0&&(f===SC.ALIGN_RIGHT||f===SC.ALIGN_BOTTOM)){d=m.plan.maximumRowLength-m.rowLength}else{if(a===0&&(f===SC.ALIGN_CENTER||f===SC.ALIGN_MIDDLE)){d=(m.plan.maximumRowLength/2)-(m.rowLength/2)}}d+=m.plan.rowStartPadding;for(j=0;j<e;j++){l=g[j];if(!l.fillRow){i=NO}k=Math.max(l.itemSize,k);l.position=d;d+=l.itemLength;if(f===SC.ALIGN_JUSTIFY&&j<e-1){d+=c}}m.shouldExpand=e>0?i:NO;m.rowLength=d-m.plan.rowStartPadding;m.rowSize=k;m.plan.totalCollapsedRowSize+=m.rowSize},_scfl_positionRows:function(d){var i=d.rows,c=i.length,f,h,b,a=0,g=0,e;for(f=0;f<c;f++){if(i[f].shouldExpand){a++}g+=i[f].rowSize}e=d.fitToPlanSize-g;b=d.planStartPadding;for(f=0;f<c;f++){h=i[f];if(h.shouldExpand&&e>0){h.rowSize+=e/a;a--}h.position=b;b+=h.rowSize}},_scfl_applyPlan:function(h){var n=h.rows,b,c,m,e=0,j=0,g,a,d,l,f,k,i=h.isVertical;c=n.length;for(b=0;b<c;b++){m=n[b];e=Math.max(e,m.rowLength);j+=m.rowSize;g=m.items;d=g.length;for(a=0;a<d;a++){l=g[a];l.child.beginPropertyChanges();k=l.fillRow?m.rowSize:l.itemSize;f={left:l.spacing.left+(i?m.position:l.position),top:l.spacing.top+(i?l.position:m.position),width:i?k:l.itemLength,height:i?l.itemLength:k};f.width-=l.spacing.left+l.spacing.right;f.height-=l.spacing.top+l.spacing.bottom;this.applyPlanToView(l.child,f);l.child._scfl_lastLayout=f;l.child.endPropertyChanges()}}j+=h.planStartPadding+h.planEndPadding;e+=h.rowStartPadding+h.rowEndPadding;this.beginPropertyChanges();this.set("calculatedHeight",i?e:j);this.set("calculatedWidth",i?j:e);this.set("_scfl_maximumCollapsedRowLength",h.maximumCollapsedRowLength);this.set("_scfl_totalCollapsedRowSize",h.totalCollapsedRowSize);this.endPropertyChanges()},applyPlanToView:function(a,b){a.adjust(b)},_scfl_tileOnce:function(){this.invokeLast(this._scfl_tile)},_scfl_tile:function(){if(!this.get("isVisibleInWindow")){return}var f=this._scfl_createPlan();this._scfl_distributeChildrenIntoRows(f);this._scfl_positionChildrenInRows(f);this._scfl_positionRows(f);this._scfl_applyPlan(f);this.setIfChanged("numberOfRows",f.rows.length);var d=this._scfl_isObserving||SC.CoreSet.create(),c=this._scfl_isObserving=SC.CoreSet.create();var e=this.get("childViews"),b=e.length,a,g;for(a=0;a<b;a++){g=e[a];if(!d.contains(g)){this.observeChildLayout(g)}else{d.remove(g)}c.add(g)}b=d.length;for(a=0;a<b;a++){this.unobserveChildLayout(d[a])}},_scfl_frameDidChange:function(){var b=this.get("frame"),a=this._scfl_lastFrameSize||{};this._scfl_lastFrameSize=SC.clone(b);if(a.width==b.width&&a.height==b.height){return}this._scfl_tileOnce()}.observes("frame"),destroyMixin:function(){this.removeObserver("childViews.[]",this,this._scfl_childViewsDidChange);var c=this._scfl_isObserving;if(!c){return}var b=c.length,a;for(a=0;a<b;a++){this.unobserveChildLayout(c[a])}},reorder:function(b){if(!SC.typeOf(b)===SC.T_ARRAY){b=arguments}var c=b.length,d=this.childViews,a;this.beginPropertyChanges();while(c-->0){a=b[c];if(SC.typeOf(a)===SC.T_STRING){a=this.get(a)}d.removeObject(a);d.unshiftObject(a)}this.endPropertyChanges();this._scfl_childViewsDidChange();return this}};SC.Gesturable={concatenatedProperties:["gestures"],gestures:[],initMixin:function(){this.createGestures()},createGestures:function(){var e=this.get("gestures"),b,a=e.length,c,d=[];for(b=0;b<a;b++){if(SC.typeOf(e[b])===SC.T_STRING){c=this.get(e[b])}else{c=e[b]}if(!c){throw new Error("Could not find gesture named '"+e[b]+"' on view.")}if(c.isClass){c=c.create({view:this})}if(SC.typeOf(e[b])===SC.T_STRING){this[e[b]]=c}d.push(c)}this.set("gestures",d)},touchStart:function(a){this.gestureTouchStart(a)},touchesDragged:function(a,b){this.gestureTouchesDragged(a,b)},touchEnd:function(a){this.gestureTouchEnd(a)},gestureTouchStart:function(e){e.isInteresting=0;var d=this.get("gestures"),b,a=d.length,c;for(b=0;b<a;b++){c=d[b];c.unassignedTouchDidStart(e)}},gestureTouchesDragged:function(c,e){var f=this.get("gestures"),b,a=f.length,d;for(b=0;b<a;b++){d=f[b];d.unassignedTouchesDidChange(c,e)}},gestureTouchEnd:function(e){var d=this.get("gestures"),b,a=d.length,c;for(b=0;b<a;b++){c=d[b];c.unassignedTouchDidEnd(e)}}};SC.InlineEditable={isInlineEditable:YES,isEditable:YES,exampleEditor:SC.InlineTextFieldView,isEditing:NO,inlineEditorDelegate:SC.InlineTextFieldDelegate,_editor:null,beginEditing:function(){var a;a=this.delegateFor("inlineEditorShouldBeginEditing",this.inlineEditorDelegate);if(a&&!a.inlineEditorShouldBeginEditing(this,this.get("value"))){return NO}this._editor=this.invokeDelegateMethod(this.inlineEditorDelegate,"acquireEditor",this);if(this._editor){return this._editor.beginEditing(this)}else{return NO}},commitEditing:function(){return this._editor?this._editor.commitEditing():NO},discardEditing:function(){return this._editor?this._editor.discardEditing():NO},inlineEditorShouldBeginEditing:function(){return !this.get("isEditing")&&this.get("isEditable")},inlineEditorWillBeginEditing:function(b,c,a){b.set("value",this.get("value"))},inlineEditorDidBeginEditing:function(b,c,a){this.set("isEditing",YES)},inlineEditorWillCommitEditing:function(b,c,a){if(this.inlineEditorWillEndEditing){this.inlineEditorWillEndEditing(b,c)}},inlineEditorDidCommitEditing:function(b,c,a){a.setIfChanged("value",c);if(this.inlineEditorDidEndEditing){this.inlineEditorDidEndEditing(b,c)}this._endEditing()},inlineEditorWillDiscardEditing:function(b,a){if(this.inlineEditorWillEndEditing){this.inlineEditorWillEndEditing(b,this.get("value"))}},inlineEditorDidDiscardEditing:function(b,a){if(this.inlineEditorDidEndEditing){this.inlineEditorDidEndEditing(b,this.get("value"))}this._endEditing()},_endEditing:function(){if(this._editor){this.invokeDelegateMethod(this.inlineEditorDelegate,"releaseEditor",this._editor);this._editor=null}this.set("isEditing",NO)}};SC.InlineEditor={isInlineEditor:YES,isEditing:NO,inlineEditorDelegate:null,_target:null,beginEditing:function(b){if(this.get("isEditing")||!b||!b.isInlineEditable){return NO}var a,c;c=this._target=b;a=this.delegateFor("inlineEditorWillBeginEditing",this.inlineEditorDelegate,c);if(a){a.inlineEditorWillBeginEditing(this,this.get("value"),c)}this.set("isEditing",YES);this.invokeLast(this._callDidBegin);this._didBeginInvoked=YES;return YES},_callDidBegin:function(){if(!this.get("isEditing")){return NO}this._didBeginInvoked=NO;var b=this._target,a;a=this.delegateFor("inlineEditorDidBeginEditing",this.inlineEditorDelegate,b);if(a){a.inlineEditorDidBeginEditing(this,this.get("value"),b)}},commitEditing:function(){if(!this.get("isEditing")){return NO}if(this._didBeginInvoked){this._callDidBegin()}var a,b=this._target;a=this.delegateFor("inlineEditorShouldCommitEditing",this.inlineEditorDelegate,b);if(a&&!a.inlineEditorShouldCommitEditing(this,this.get("value"),b)){return NO}a=this.delegateFor("inlineEditorWillCommitEditing",this.inlineEditorDelegate,b);if(a){a.inlineEditorWillCommitEditing(this,this.get("value"),b)}this._endEditing();a=this.delegateFor("inlineEditorDidCommitEditing",this.inlineEditorDelegate,b);if(a){a.inlineEditorDidCommitEditing(this,this.get("value"),b)}return YES},discardEditing:function(){if(!this.get("isEditing")){return NO}if(this._didBeginInvoked){this._callDidBegin()}var a,b=this._target;a=this.delegateFor("inlineEditorShouldDiscardEditing",this.inlineEditorDelegate,b);if(a&&!a.inlineEditorShouldDiscardEditing(this,b)){return NO}a=this.delegateFor("inlineEditorWillDiscardEditing",this.inlineEditorDelegate,b);if(a){a.inlineEditorWillDiscardEditing(this,b)}this._endEditing();a=this.delegateFor("inlineEditorDidDiscardEditing",this.inlineEditorDelegate,b);if(a){a.inlineEditorDidDiscardEditing(this,b)}return YES},_endEditing:function(){this.set("isEditing",NO);this._target=null}};SC.InlineEditorDelegate={acquireEditor:function(a){},releaseEditor:function(a){},inlineEditorShouldBeginEditing:function(a,b){},inlineEditorWillBeginEditing:function(b,c,a){},inlineEditorDidBeginEditing:function(b,c,a){},inlineEditorShouldCommitEditing:function(b,c,a){},inlineEditorWillCommitEditing:function(b,c,a){},inlineEditorDidCommitEditing:function(b,c,a){},inlineEditorShouldDiscardEditing:function(b,a){},inlineEditorWillDiscardEditing:function(b,a){},inlineEditorDidDiscardEditing:function(b,a){},inlineEditorWillEndEditing:function(b,c,a){},inlineEditorDidEndEditing:function(b,c,a){}};SC.SCALE_NONE="none";SC.FILL="fill";SC.FILL_PROPORTIONALLY=SC.BEST_FILL="best-fill";SC.BEST_FIT="best-fit";SC.BEST_FIT_DOWN_ONLY="best-fit-down";SC.InnerFrame={align:SC.ALIGN_CENTER,innerFrameForSize:function(a,c,h,b){var e=this.get("align"),d=this.get("scale"),g,f,i;i={x:0,y:0,width:h,height:b};if(d===SC.FILL){return i}g=h/a;f=b/c;switch(d){case SC.BEST_FILL:d=g>f?g:f;break;case SC.BEST_FIT:d=g<f?g:f;break;case SC.BEST_FIT_DOWN_ONLY:if((a>h)||(c>b)){d=g<f?g:f}else{d=1}break;case SC.SCALE_NONE:d=1;break;default:if(isNaN(window.parseFloat(d))||(window.parseFloat(d)<=0)){SC.Logger.warn("SC.InnerFrame: The scale '%@' was not understood.  Scale must be one of SC.FILL, SC.BEST_FILL, SC.BEST_FIT, SC.BEST_FIT_DOWN_ONLY or a positive number greater than 0.00.".fmt(d));return i}}a*=d;c*=d;i.width=Math.round(a);i.height=Math.round(c);switch(e){case SC.ALIGN_LEFT:i.x=0;i.y=(b/2)-(c/2);break;case SC.ALIGN_RIGHT:i.x=h-a;i.y=(b/2)-(c/2);break;case SC.ALIGN_TOP:i.x=(h/2)-(a/2);i.y=0;break;case SC.ALIGN_BOTTOM:i.x=(h/2)-(a/2);i.y=b-c;break;case SC.ALIGN_TOP_LEFT:i.x=0;i.y=0;break;case SC.ALIGN_TOP_RIGHT:i.x=h-a;i.y=0;break;case SC.ALIGN_BOTTOM_LEFT:i.x=0;i.y=b-c;break;case SC.ALIGN_BOTTOM_RIGHT:i.x=h-a;i.y=b-c;break;default:i.x=(h/2)-(a/2);i.y=(b/2)-(c/2)}return i},scale:SC.FILL};SC.StaticLayout={hasStaticLayout:YES,initMixin:function(){}};SC.Validatable={initMixin:function(){this._validatable_validatorDidChange()},validator:null,errorLabel:null,isValid:function(){return SC.typeOf(this.get("value"))!==SC.T_ERROR}.property("value"),ownerForm:null,performValidate:function(c){var a=SC.VALIDATE_OK;if(this._validator){var b=this.get("ownerForm");if(c){a=this._validator.validatePartial(b,this);if((a==SC.VALIDATE_NO_CHANGE)&&(this._validator.validateChange(b,this)==SC.VALIDATE_OK)){a=SC.VALIDATE_OK}}else{a=this._validator.validateChange(b,this)}}return a},performValidateSubmit:function(){return this._validator?this._validator.validateSubmit(this.get("ownerForm"),this):SC.VALIDATE_OK},performValidateKeyDown:function(a){var b=a.getCharString();if(!b){return YES}return this._validator?this._validator.validateKeyDown(this.get("ownerForm"),this,b):YES},validatorObject:function(){return this._validator}.property(),validateSubmit:function(){return this.performValidateSubmit()},objectForFieldValue:function(b,a){return this._validator?this._validator.objectForFieldValue(b,this.get("ownerForm"),this):b},fieldValueForObject:function(a){return this._validator?this._validator.fieldValueForObject(a,this.get("ownerForm"),this):a},_validatable_displayObserver:function(){this.displayDidChange()}.observes("isValid"),renderMixin:function(a){a.setClass("invalid",!this.get("isValid"))},_validatable_validatorDidChange:function(){var a=this.get("ownerForm");var b=SC.Validator.findFor(a,this,this.get("validator"));if(b!=this._validator){this.propertyWillChange("validatorObject");if(this._validator){this._validator.detachFrom(a,this)}this._validator=b;if(this._validator){this._validator.attachTo(a,this)}this.propertyDidChange("validatorObject")}}.observes("validator","ownerForm")};SC.RenderDelegate={create:function(){var c=SC.beget(this);var b,a=arguments.length;for(b=0;b<a;b++){c.mixin(arguments[b])}return c},reopen:function(b){var c,a;for(c in b){a=b[c];if(!b.hasOwnProperty(c)){continue}if(typeof a==="function"&&a!==this[c]){a.base=this[c]||SC.K}if(a&&a.isEnhancement&&a!==this[c]){a=SC._enhance(this[c]||SC.K,a)}this[c]=a}},get:function(a){return this[a]},getPropertyFor:function(b,a){if(this[a+"For"]){return this[a+"For"](b,a)}return this[a]},className:undefined,render:function(b,a){},update:function(b,a){}};SC.RenderDelegate.extend=SC.RenderDelegate.create;SC.RenderDelegate.mixin=SC.RenderDelegate.reopen;sc_require("render_delegates/render_delegate");SC.BaseTheme.canvasImageRenderDelegate=SC.RenderDelegate.create({className:"canvasImage",render:function(f,b){var d=f.get("width")||0,a=f.get("height")||0,c=f.get("type")||SC.IMAGE_TYPE_URL,e=f.get("value");if(e&&c===SC.IMAGE_TYPE_CSS_CLASS){b.addClass(e);f.renderState._last_class=e}b.setAttr("width",d);b.setAttr("height",a)},update:function(o,f){var p=f[0],l=o.get("image"),j=o.get("frame"),n=j.width,h=j.height,k=o.get("innerFrame"),e=o.get("backgroundColor"),r=o.get("renderState"),c,a=o.renderState._last_class,d=o.get("type")||SC.IMAGE_TYPE_URL,m=o.get("value");if(a){f.removeClass(a)}if(m&&d===SC.IMAGE_TYPE_CSS_CLASS){f.addClass(m);o.renderState._last_class=m;if(p&&p.getContext){c=p.getContext("2d");c.clearRect(0,0,n,h)}}else{var b=![k.x,k.y,k.width,k.height].isEqual(r._lastInnerFrameValues),g=![p.width,p.height].isEqual(r._lastElemSizeValues),q=o.didChangeFor("canvasImageRenderDelegate","backgroundColor"),i=o.didChangeFor("canvasImageRenderDelegate","image")||(l&&l.complete)!==r._lastImageComplete;if(g||b||q||i){if(p&&p.getContext){p.height=h;p.width=n;c=p.getContext("2d");c.clearRect(0,0,n,h);if(e){c.fillStyle=e;c.fillRect(0,0,n,h)}if(l&&l.complete){c.drawImage(l,Math.floor(k.x),Math.floor(k.y),Math.floor(k.width),Math.floor(k.height))}}r._lastInnerFrameValues=[k.x,k.y,k.width,k.height];r._lastElemSizeValues=[p.width,p.height];r._lastImageComplete=l&&l.complete}}}});sc_require("render_delegates/render_delegate");SC.BaseTheme.containerRenderDelegate=SC.RenderDelegate.create({render:function(b,a){},update:function(){}});sc_require("render_delegates/render_delegate");SC.RenderDelegate.reopen({sizes:[SC.TINY_CONTROL_SIZE,SC.SMALL_CONTROL_SIZE,SC.REGULAR_CONTROL_SIZE,SC.LARGE_CONTROL_SIZE,SC.HUGE_CONTROL_SIZE,SC.JUMBO_CONTROL_SIZE],sizeFor:function(f){var e=f.get("controlSize"),c,b,a;if(e){if(!this[e]){this[e]={}}c=this[e];if(!c.name){c.name=e}return c}var d=f.get("frame");if(!d){c=this["sc-regular-size"];if(!c){c=this["sc-regular-size"]={}}if(!c.name){c.name="sc-regular-size"}return c}for(b=0;b<a;b++){key=sizes[b];c=this[key];if(!c){continue}if((c.width===undefined&&c.height===undefined&&c.minHeight===undefined&&c.minWidth===undefined&&c.maxHeight===undefined&&c.maxWidth===undefined)||(c.width!==undefined&&d.width!==c.width)||(c.minWidth!==undefined&&d.width<c.minWidth)||(c.maxWidth!==undefined&&d.width>c.maxWidth)||(c.height!==undefined&&d.height!==c.height)||(c.minHeight!==undefined&&d.height<c.minHeight)||(c.maxHeight!==undefined&&d.height<c.maxHeight)){continue}if(!c.name){c.name=key}return c}c=this["sc-regular-size"];if(!c){c=this["sc-regular-size"]={}}if(!c.name){c.name="sc-regular-size"}return c},addSizeClassName:function(c,b){var a=this.sizeFor(c);if(a){b.addClass(a.name)}},updateSizeClassName:function(c,a){var b=this.sizeFor(c);if(b){a.addClass(b.name)}},getPropertyFor:function(c,a){var b=this.sizeFor(c);if(b){if(b[a+"For"]){return b[a+"For"](c,a)}else{if(b[a]!==undefined){return b[a]}}}if(this[a+"For"]){return this[a+"For"]}return this[a]}});sc_require("render_delegates/render_delegate");SC.BaseTheme.imageRenderDelegate=SC.RenderDelegate.create({className:"image",render:function(f,b){var e=f.get("image"),d=f.get("value"),c=f.get("type")||SC.IMAGE_TYPE_URL,a=f.get("toolTip");b=b.begin("img");b.setAttr("src",e.src);if(d&&c===SC.IMAGE_TYPE_CSS_CLASS){b.addClass(d);f.renderState._last_class=d}if(a){b.setAttr("title",a);b.setAttr("alt",a)}b.addStyle(this.imageStyles(f));b=b.end()},update:function(g,a){var f=g.get("image"),c=g.renderState._last_class,e=g.get("value"),d=g.get("type")||SC.IMAGE_TYPE_URL,b=g.get("toolTip");a=a.find("img");a.attr("src",f.src);if(c){a.removeClass(c)}if(e&&d===SC.IMAGE_TYPE_CSS_CLASS){a.addClass(e);g.renderState._last_class=e}if(b){a.attr("title",b);a.attr("alt",b)}a.css(this.imageStyles(g))},imageStyles:function(b){var a=b.get("innerFrame");return{position:"absolute",left:Math.round(a.x),top:Math.round(a.y),width:Math.round(a.width),height:Math.round(a.height)}}});sc_require("render_delegates/render_delegate");SC.BaseTheme.labelRenderDelegate=SC.RenderDelegate.create({className:"label",render:function(d,c){var a=d.get("toolTip");this.addSizeClassName(d,c);if(a){c.setAttr("title",a)}c.addStyle({textAlign:d.get("textAlign")||null});c.setClass("ellipsis",d.get("needsEllipsis")||NO);c.setClass("icon",d.get("icon")||NO);var b=this.htmlForTitleAndIcon(d);c.push(b);d.get("renderState")._lastHTMLForTitleAndIcon=b},update:function(d,a){var b=d.get("toolTip");this.updateSizeClassName(d,a);a.css({textAlign:d.get("textAlign")||null});if(b){a.attr("title",b)}else{a.removeAttr("title")}a.setClass("ellipsis",d.get("needsEllipsis")||NO);var c=this.htmlForTitleAndIcon(d);if(d.get("renderState")._lastHTMLForTitleAndIcon!==c){a.html(c);d.get("renderState")._lastHTMLForTitleAndIcon=c}},htmlForTitleAndIcon:function(e){var d=e.get("title"),c=e.get("hint"),b=e.get("escapeHTML"),a=e.get("icon")||"";if(d&&b){d=SC.RenderContext.escapeHTML(d)}if(c&&b){c=SC.RenderContext.escapeHTML(c)}if(c&&!d){d="<span class='sc-hint'>"+c+"</span>"}if(a){if(a.indexOf("/")>=0){a='<img src="'+a+'" alt="" class="icon" />'}else{a='<img src="'+SC.BLANK_IMAGE_URL+'" alt="" class="icon '+a+'" />'}}return a+(SC.none(d)?"":d)}});SC.Task=SC.Object.extend({run:function(a){}});sc_require("tasks/task");SC.AppCacheTask=SC.Task.extend({run:function(){window.applicationCache.update();SC.appCache._appCacheStatusDidChange()}});SC.appCache=SC.Object.create({isNewVersionValid:function(){var c=this.get("hasNewVersion"),b,a=this.get("status");if(SC.platform.supportsApplicationCache){if(c){if(a===window.applicationCache.UPDATEREADY){b=true}else{b=false}}}else{b=false}return b}.property("hasNewVersion").cacheable(),isReadyForOffline:function(){var b,a=this.get("status");if(SC.platform.supportsApplicationCache){if(a===window.applicationCache.IDLE||a===window.applicationCache.UPDATEREADY){b=true}else{if(a===window.applicationCache.UNCACHED||a===window.applicationCache.OBSOLETE){b=false}}}else{b=false}return b}.property("status").cacheable(),hasNewVersion:function(){var b,a=this.get("status");if(SC.platform.supportsApplicationCache){if(a===window.applicationCache.UPDATEREADY||a===window.applicationCache.OBSOLETE){b=true}else{if(a===window.applicationCache.IDLE){b=false}}}else{b=false}return b}.property("status").cacheable(),interval:1800000,progress:0,shouldPoll:function(b,c){if(SC.none(c)){c=false}else{if(c){var a=this.get("status");if(a===window.applicationCache.IDLE){this._timer=SC.Timer.schedule({target:this,action:"_checkForUpdates",interval:this.get("interval"),repeats:YES})}else{}}else{if(this._timer){this._timer.invalidate();this._timer=null;this._task=null}}}return c}.property().cacheable(),status:0,_appCacheDidProgress:function(a){a=a.originalEvent;if(a.lengthComputable){this.set("progress",a.loaded/a.total)}else{this.set("progress",null)}},_appCacheStatusDidChange:function(){var b=window.applicationCache,a;a=b.status;SC.Event.remove(b);switch(a){case b.UNCACHED:break;case b.IDLE:this.set("progress",1);break;case b.CHECKING:SC.Event.add(b,"downloading",this,"_appCacheStatusDidChange");SC.Event.add(b,"noupdate",this,"_appCacheStatusDidChange");SC.Event.add(b,"error",this,"_appCacheStatusDidChange");break;case b.DOWNLOADING:SC.Event.add(b,"progress",this,"_appCacheDidProgress");SC.Event.add(b,"cached",this,"_appCacheStatusDidChange");SC.Event.add(b,"updateready",this,"_appCacheStatusDidChange");SC.Event.add(b,"error",this,"_appCacheStatusDidChange");break;case b.UPDATEREADY:break;case b.OBSOLETE:break;default:SC.error("Unknown application cache status: %@".fmt(b.status));break}this.set("status",a)},_checkForUpdates:function(){var a=this._task;if(this.get("status")===window.applicationCache.IDLE){if(!a){a=this._task=SC.AppCacheTask.create()}SC.backgroundTaskQueue.push(a)}else{this.set("shouldPoll",false)}},init:function(){arguments.callee.base.apply(this,arguments);if(SC.platform.supportsApplicationCache){this._appCacheStatusDidChange()}else{SC.warn("Unable to use SC.appCache, the browser does not support the application cache.")}}});SC.Benchmark={verbose:NO,enabled:YES,events:{},stats:{},globalStartTime:null,addEvent:function(a,b){if(!b){b=new Date().getTime()}this.events[a]=b},start:function(b,a,e,d){if(!this.enabled){return}var f=(e||Date.now()),c;if(a){c=this._subStatFor(b,a)}else{c=this._statFor(b)}if(d&&c._starts.length>0){c._starts.push("ignore")}else{c._starts.push(f)}c._times.push({start:f,_subStats:{}});return b},end:function(c,b,f){var e;if(!this.enabled){return}if(b){e=this._subStatFor(c,b)}else{e=this._statFor(c)}var g=e._starts.pop();if(!g){SC.Logger.log('SC.Benchmark "%@" ended without a matching start.  No information was saved.'.fmt(c));return}if(g=="ignore"){return}var a=(f||Date.now());var d=a-g;e._times[e._times.length-1].end=a;e._times[e._times.length-1].dur=d;e.amt+=d;e.runs++;if(this.verbose){this.log(c)}},setGlobalStartTime:function(a){this.globalStartTime=a},bench:function(e,d,a){if(!d){d="bench%@".fmt(this._benchCount++)}if(!a){a=1}var b;while(--a>=0){var c=SC.Benchmark.start(d);b=e();SC.Benchmark.end(c)}return b},install:function(a,d,b){a["b__"+d]=a[d];var c=a["b__"+d];a[d]=function(){var f="%@(%@)".fmt(d,$A(arguments).join(", "));SC.Benchmark.start(f,b);var e=c.apply(this,arguments);SC.Benchmark.end(f);return e}},restore:function(a,b){a[b]=a["b__"+b]},report:function(c){if(c){return this._genReport(c)}var b=[];for(var a in this.stats){if(!this.stats.hasOwnProperty(a)){continue}b.push(this._genReport(a))}return b.join("\n")},timelineReport:function(a){a=(a)?"SproutCore Application":a;var b=[a,"User-Agent: %@".fmt(navigator.userAgent),"Report Generated: %@ (%@)".fmt(new Date().toString(),Date.now()),""];var d=this._compileChartData(true);for(var c=0;c<d.length;c++){if(d[c][4]){b.push(this._timelineGenSubReport(d[c]))}else{b.push(this._timelineGenReport(d[c]))}}return b.join("\n")},getTimelineChartContent:function(){var l=this._compileChartData(false);var g=l.length;if(g===0){return}var c=this.globalStartTime?this.globalStartTime:l[0][1];var d=l[g-1][2]-c;var n=25+g*30;var q=Math.ceil(d/200)+1;var r=q*50;var m=10,s=300;var o="<div class = 'sc-benchmark-timeline-chart' style = 'position:relative;'>";o+="<div class = 'sc-benchmark-top'></div>";for(var p=0;p<q;p++){o+="<div class = 'sc-benchmark-tick' style = '";o+="left: "+(m+p*50)+"px; ";o+="height: "+n+"px;";o+="'></div>";o+="<div class = 'sc-benchmark-tick-label' style = '";o+="left: "+(m+p*50)+"px; ";o+="'>"+(p*200)+"ms</div>"}for(p=0;p<g;p++){o+="<div class = 'sc-benchmark-row ";o+=(p%2===0)?"even":"odd";o+="' style = '";o+="top: "+(50+(p*30))+"px; ";o+="'></div>";var j=document.createElement("div");var f=l[p][1];var e=l[p][2];var a=l[p][3];o+="<div class = 'sc-benchmark-bar' style = '";o+="left:"+(m+((f-c)/4))+"px; width: "+((a/4))+"px;";o+="top: "+(28+(p*30))+"px;";o+="' title = 'start: "+(f-c)+" ms, end: "+(e-c)+" ms, duration: "+a+" ms'";o+=">";o+="&nbsp;"+l[p][0]+" <span class='sc-benchmark-emphasis'>";o+=a+"ms (start: "+(f-c)+"ms)";o+="</span>";o+="</div>"}var b=this.events,k=0;for(p in b){var h=b[p]-c;o+="<div class = 'sc-benchmark-event idx"+(k%10)+"' style = '";o+="left: "+(m+h/4)+"px; height: "+n+"px; top: 20px;";o+="' title = '"+p+": "+h+"'></div>";k++}o+="</div>";return{html:o,totalCapturedTime:d,pointsCaptured:g,width:r+m+s,height:n}},getTimelineChartView:function(){var a=SC.ScrollView.create({contentView:SC.StaticContentView.extend({}),reload:function(){var b=SC.Benchmark.getTimelineChartContent();this.contentView.set("content",b.html);this.contentView.adjust({width:b.width,height:b.height});this.chartContent=b;SC.RunLoop.invokeLater(SC.Benchmark,function(){this.contentView.notifyPropertyChange("frame")})}});a.reload();return a},timelineChart:function(a){SC.RunLoop.begin();var c=0;this.hideChart();var b=this.getTimelineChartView();var e=b.chartContent.pointsCaptured,d=b.chartContent.totalCapturedTime;this._benchmarkChart=SC.Pane.create({classNames:["sc-benchmark-pane"],layout:{left:20,right:20,bottom:20,top:20},childViews:["title","exit"],exit:SC.ButtonView.extend({layout:{right:20,top:20,width:100,height:30},title:"Hide Chart",target:this,action:"hideChart"}),title:SC.LabelView.extend({classNames:["sc-benchmark-title"],layout:{left:20,top:23,right:200,height:30},value:((a)?a:"SproutCore Application")+(" - Total Captured Time: "+d+" ms - Points Captured: "+e)})}).append();b.set("layout",{left:20,top:60,bottom:20,right:20});this._benchmarkChart.appendChild(b);SC.RunLoop.end()},hideChart:function(){if(this._benchmarkChart){this._benchmarkChart.remove();this._benchmarkChart=null}return YES},tryToPerform:function(b,a){if(this[b]){return this[b](a)}return NO},log:function(d){var c=this.report(d).split("\n"),b=c.length,a;for(a=0;a<b;a++){SC.Logger.log(c[a])}},startProfile:function(a){if(!this.enabled){return}SC.Logger.profile(a)},endProfile:function(a){if(!this.enabled){return}SC.Logger.profileEnd(a)},loadPreloadEvents:function(){var f=SC.benchmarkPreloadEvents,e=[],b,a,c;if(typeof webkitPerformnce!=="undefined"){SC.mixin(f,webkitPerformane.timing)}if(!this.globalStartTime){var d=["navigation","navigationStart","headStart"];a=d.length;for(b=0;b<a;b++){if(f[d[b]]){this.globalStartTime=f[d[b]];break}}}this.javascriptStartTime=f.headStart;SC.mixin(this.events,f);this._hasLoadedPreloadEvents=true},_loadBenchmarksFromEvents:function(){if(!this._hasLoadedPreloadEvents){this.loadPreloadEvents()}var b=this.events;for(var a in b){if(a.substr(-3)!=="End"){continue}var c=a.substr(0,a.length-3);if(!b[c+"Start"]){continue}SC.Benchmark.start(c,undefined,b[c+"Start"]);SC.Benchmark.end(c,undefined,b[c+"End"]);delete b[c+"Start"];delete b[c+"End"]}},_compileChartData:function(g){this._loadBenchmarksFromEvents();var l=[],a;for(var m in this.stats){var e=this.stats[m];for(var f=0;f<e._times.length;f++){var n=e._times[f];a=(e._times.length>1)?(f+1)+" - "+m:m;l.push([a,n.start,n.end,n.dur,false]);if(g){var b=n._subStats;for(var c in b){var h=b[c];for(var d=0;d<h._times.length;d++){var o=h._times[d];a=(h._times.length>1)?(d+1)+" - "+c:c;l.push([a,o.start,o.end,o.dur,true])}}}}}l.sort(function(j,i){if(j[1]<i[1]){return -1}else{if(j[1]==i[1]){if(j[3]&&!i[3]){return -1}if(!j[3]&&i[3]){return 1}return 0}}return 1});return l},_genReport:function(a){var b=this._statFor(a);var d=(b.runs>0)?(Math.floor(b.amt*1000/b.runs)/1000):0;var c=b._times[b._times.length-1];return"BENCH %@ msec: %@ (%@x); latest: %@".fmt(d,(b.name||a),b.runs,c.end-c.start)},_timelineGenReport:function(a){if(this.globalStartTime){return"BENCH start: %@ msec, duration: %@ msec,  %@".fmt((a[1]-this.globalStartTime),a[3],a[0])}else{return"BENCH duration: %@ msec, %@".fmt(a[3],a[0])}},_timelineGenSubReport:function(a){if(this.globalStartTime){return"   CHECKPOINT BENCH start: %@ msec, duration: %@ msec,  %@".fmt((a[1]-this.globalStartTime),a[3],a[0])}else{return"   CHECKPOINT BENCH duration: %@ msec, %@".fmt(a[3],a[0])}},_subStatFor:function(d,c){var e=this.stats[c]._times.length;if(e===0){return}var a=this.stats[c]._times[this.stats[c]._times.length-1]._subStats;var b=a[d];if(!b){a[d]={runs:0,amt:0,name:d,_starts:[],_times:[]};b=a[d]}return b},_statFor:function(b){var a=this.stats[b];if(!a){a=this.stats[b]={runs:0,amt:0,name:b,_starts:[],_times:[]};a=this.stats[b]}return a},reset:function(){this.stats={}},_bench:function(b,a){SC.Benchmark.bench(b,a,1)},_benchCount:1};SC.Benchmark=SC.Benchmark;SC.Cookie=SC.Object.extend({name:null,value:"",expires:null,path:null,domain:null,secure:NO,isCookie:YES,destroy:function(){this.set("expires",-1);this.write();arguments.callee.base.apply(this,arguments)},write:function(){var d=this.get("name"),f=this.get("value"),a=this.get("expires"),h=this.get("path"),e=this.get("domain"),g=this.get("secure"),b="",c;if(a){if(typeof a===SC.T_NUMBER){c=new Date();c.setTime(c.getTime()+(a*24*60*60*1000))}else{if(SC.DateTime&&a.get&&a.get("milliseconds")){c=new Date(a.get("milliseconds"))}else{if(a.toUTCString&&a.toUTCString.apply){c=a}}}if(c){b="; expires="+c.toUTCString()}}if(!SC.none(h)){b+="; path="+h}if(!SC.none(e)){b+="; domain="+e}if(g===YES){b+="; secure"}document.cookie=d+"="+encodeURIComponent(f)+b;return this}});SC.Cookie.mixin({find:function(a){if(document.cookie&&document.cookie!==""){var d=document.cookie.split(";");for(var c=0;c<d.length;c++){var b=SC.String.trim(String(d[c]));if(b.substring(0,a.length+1)===(a+"=")){return SC.Cookie.create({name:a,value:decodeURIComponent(b.substring(a.length+1))})}}}return null}});SC.CookieMonster={nomNomNom:function(b){var a=SC.kindOf(b,SC.Cookie);if(a){SC.Logger.log("YUM!");return b.destroy()}SC.Logger.error("Y U PASS ME NO COOKIE? %@",b);return NO}};SC.mixin(SC.$.fn,{setClass:function(d,c){if(SC.none(d)){return this}var e=SC.typeOf(d)!==SC.T_STRING,a=this._fixupClass,b;this.each(function(){if(this.nodeType!==1){return}var h=this.className.split(/\s+/),g=NO;if(e){for(var f in d){if(d.hasOwnProperty(f)){g=a(h,f,d[f])||g}}}else{g=a(h,d,c)}if(g){this.className=h.join(" ")}});return this},_fixupClass:function(d,a,c){var b=d.indexOf(a);if(c){if(b<0){d.push(a);return YES}}else{if(b>=0){d[b]=null;return YES}}return NO}});SC.ExceptionHandler={enabled:(SC.buildMode!=="debug"),handleException:function(a){if(this.isShowingErrorDialog){return NO}this._displayErrorDialog(a);return NO},_displayErrorDialog:function(b){var a=this._errorDialogHTMLForException(b),c=document.createElement("div");c.style.cssText="left: 0px; right: 0px; top: 0px; bottom: 0px; position: absolute; background-color: white; background-color: rgba(255,255,255,0.6); z-index:100;";c.innerHTML=a;document.body.appendChild(c);this.isShowingErrorDialog=YES},_errorDialogHTMLForException:function(b){var a;a=['<div id="sc-error-dialog" style="position: absolute; width: 500px; left: 50%; top: 50%; margin-left: -250px; background-color: white; border: 1px solid black; font-family: Monaco, monospace; font-size: 9px; letter-spacing: 1px; padding: 10px">',"An error has occurred which prevents the application from running:","<br><br>",b.message,'<div id="sc-error-dialog-reload-button" onclick="window.location.reload();" style="float: right; font-family: Monaco, monospace; font-size: 9px; letter-spacing: 1px; border: 1px solid black; padding: 3px; clear: both; margin-top: 20px; cursor: pointer;">',"Reload","</div>","</div>"];return a.join("")},isShowingErrorDialog:NO};SC.IMAGE_ABORTED_ERROR=SC.$error("SC.Image.AbortedError","Image",-100);SC.IMAGE_FAILED_ERROR=SC.$error("SC.Image.FailedError","Image",-101);SC.imageQueue=SC.Object.create({loadLimit:4,activeRequests:0,loadImage:function(a,e,f,d){var b=SC.typeOf(e);if(SC.none(f)&&SC.typeOf(e)===SC.T_FUNCTION){e=null;f=e}if(SC.typeOf(f)===SC.T_STRING){f=e[f]}if(SC.none(d)){d=SC.none(e)&&SC.none(f)}var c=this._imageEntryFor(a);if(c.status===this.IMAGE_LOADED){if(f){f.call(e||c.image,c.url,c.image)}}else{if(e||f){this._addCallback(c,e,f)}c.retainCount++;this._scheduleImageEntry(c,d)}},releaseImage:function(a,d,e){var c=this._imageEntryFor(a,NO);if(!c){return this}if(--c.retainCount<=0){this._deleteEntry(c)}else{if(d||e){var b=SC.typeOf(d);if(SC.none(e)&&SC.typeOf(d)===SC.T_FUNCTION){d=null;e=d}if(SC.typeOf(e)===SC.T_STRING){e=d[e]}this._removeCallback(c,d,e)}}},reloadImage:function(a){var b=this._imageEntryFor(a,NO);if(b&&b.status===this.IMAGE_LOADED){b.status=this.IMAGE_WAITING}},loadNextImage:function(){var c=null,a;if(this.get("activeRequests")>=this.get("loadLimit")){return}a=this._foregroundQueue;while(a.length>0&&!c){c=a.shift()}if(!c){a=this._backgroundQueue;while(a.length>0&&!c){c=a.shift()}}this.set("isLoading",!!c);if(c){var b=c.image;if(!b){return}$(b).bind("abort",this._imageDidAbort);$(b).bind("error",this._imageDidError);$(b).bind("load",this._imageDidLoad);b.src=c.url;this._loading.push(c);this.incrementProperty("activeRequests");this.loadNextImage()}},_imageEntryFor:function(c,a){if(a===undefined){a=YES}var d=this._images[c];if(!d&&a){var b=new Image();d=this._images[c]={url:c,status:this.IMAGE_WAITING,callbacks:[],retainCount:0,image:b};b.entry=d}else{if(d&&d.image===null){d.image=new Image();d.image.entry=d}}return d},_deleteEntry:function(a){this._unscheduleImageEntry(a);delete this._images[a.url]},_addCallback:function(c,d,e){var b=c.callbacks;var a=b.find(function(f){return f[0]===d&&f[1]===e},this);if(!a){b.push([d,e])}b=null;return this},_removeCallback:function(b,c,d){var a=b.callbacks;a.forEach(function(f,e){if(f[0]===c&&f[1]===d){a[e]=null}},this);a=null;return this},_scheduleImageEntry:function(d,c){var b=this._backgroundQueue;var e=this._foregroundQueue;if(d.status===this.IMAGE_LOADED){return this}if((d.status===this.IMAGE_QUEUED)&&!c&&d.isBackground){b[b.indexOf(d)]=null;d.status=this.IMAGE_WAITING}if(d.status!==this.IMAGE_QUEUED){var a=(c)?b:e;a.push(d);d.status=this.IMAGE_QUEUED;d.isBackground=c}if(!this.isLoading){this.invokeLater(this.loadNextImage,100)}this.set("isLoading",YES);return this},_unscheduleImageEntry:function(b){if(b.status!==this.IMAGE_QUEUED){return this}var a=b.isBackground?this._backgroundQueue:this._foregroundQueue;a[a.indexOf(b)]=null;if(this._loading.indexOf(b)>=0){if(a.image){a.image.abort()}this.imageStatusDidChange(b,this.ABORTED)}return this},_imageDidAbort:function(){SC.run(function(){SC.imageQueue.imageStatusDidChange(this.entry,SC.imageQueue.ABORTED)},this)},_imageDidError:function(){SC.run(function(){SC.imageQueue.imageStatusDidChange(this.entry,SC.imageQueue.ERROR)},this)},_imageDidLoad:function(){SC.run(function(){SC.imageQueue.imageStatusDidChange(this.entry,SC.imageQueue.LOADED)},this)},imageStatusDidChange:function(c,a){if(!c){return}var b=c.url;var d;switch(a){case this.LOADED:d=c.image;break;case this.ABORTED:d=SC.IMAGE_ABORTED_ERROR;break;case this.ERROR:d=SC.IMAGE_FAILED_ERROR;break;default:d=SC.IMAGE_FAILED_ERROR;break}c.callbacks.forEach(function(f){var g=f[0],h=f[1];h.call(g,b,d)},this);c.callbacks=[];c.status=(a===this.LOADED)?this.IMAGE_LOADED:this.IMAGE_WAITING;var e=c.image;if(e){e.onload=e.onerror=e.onabort=null;if(a!==this.LOADED){c.image=null}}this._loading[this._loading.indexOf(c)]=null;if(this._loading.length>this.loadLimit*2){this._loading=this._loading.compact()}this.decrementProperty("activeRequests");this.loadNextImage()},init:function(){arguments.callee.base.apply(this,arguments);this._images={};this._loading=[];this._foregroundQueue=[];this._backgroundQueue=[]},IMAGE_LOADED:"loaded",IMAGE_QUEUED:"queued",IMAGE_WAITING:"waiting",ABORTED:"aborted",ERROR:"error",LOADED:"loaded"});SC.Math=SC.Object.create({near:function(c,b,a){if(!a){a=0.00001}return Math.abs(c-b)<=a},round:function(d,a){if(!a){a=0}var b=Math.pow(10,a);if(a<0){var c=b.toString();b=c.substring(0,c.indexOf("1")+1)}d=d.valueOf();return Math.round(d*b)/b}});sc_require("tasks/task");SC.LOG_MODULE_LOADING=YES;SC.Module=SC.Object.create({isModuleReady:function(a){var b=SC.MODULE_INFO[a];return b?!!b.isReady:NO},loadModule:function(b,g,a){var c=SC.MODULE_INFO[b],h,f,i=SC.A(arguments).slice(3),d=SC.LOG_MODULE_LOADING,j,e;if(a===undefined&&SC.typeOf(g)===SC.T_FUNCTION){a=g;g=null}if(d){SC.debug("SC.Module: Attempting to load '%@'",b)}if(!c){throw new Error("SC.Module: could not find module '%@'".fmt(b))}c.isPrefetching=NO;if(c.isLoaded&&!c.isWaitingForRunLoop){if(d){SC.debug("SC.Module: Module '%@' already loaded.",b)}if(!this._dependenciesMetForModule(b)){this._addCallbackForModule(b,g,a,i);this._loadDependenciesForModule(b);return NO}if(c.source){if(d){SC.debug("SC.Module: Evaluating JavaScript for module '%@'.",b)}this._evaluateStringLoadedModule(c);this._addCallbackForModule(b,g,a,i);this.invokeLast(function(){c.isReady=YES;this._moduleDidBecomeReady(b)});return NO}if(a){if(SC.isReady){SC.Module._invokeCallback(b,g,a,i)}else{SC.ready(SC.Module,function(){SC.Module._invokeCallback(b,g,a,i)})}}return YES}else{if(c.isWaitingForRunLoop){this._addCallbackForModule(b,g,a,i)}else{if(d){SC.debug("SC.Module: Module '%@' is not loaded, loading now.",b)}this._addCallbackForModule(b,g,a,i);if(!c.isLoading){this._loadDependenciesForModule(b);this._loadCSSForModule(b);this._loadJavaScriptForModule(b);c.isLoading=YES}return NO}}},_addCallbackForModule:function(b,e,f,a){var c=SC.MODULE_INFO[b];var d=c.callbacks||[];if(f){d.push(function(){SC.Module._invokeCallback(b,e,f,a)})}c.callbacks=d},prefetchModule:function(a){var b=SC.MODULE_INFO[a];if(b.isLoading||b.isLoaded){return}if(SC.LOG_MODULE_LOADING){SC.debug("SC.Module: Prefetching module '%@'.",a)}this._loadDependenciesForModule(a);this._loadCSSForModule(a);this._loadJavaScriptForModule(a);b.isLoading=YES;b.isPrefetching=YES},_executeLazilyInstantiatedModule:function(b,c,i){var h=SC.LAZY_INSTANTIATION[b];var g;var a;var j,d;if(SC.LOG_MODULE_LOADING){SC.debug("SC.Module: Module '%@' is marked for lazy instantiation, instantiating it now…",b)}d=h.length;for(j=0;j<d;j++){try{h[j]()}catch(f){SC.Logger.error("SC.Module: Failed to lazily instatiate entry for  '%@'".fmt(b))}}delete SC.LAZY_INSTANTIATION[b];g=this._targetForTargetName(c);a=this._methodForMethodNameInTarget(i,g);if(!a){throw new Error("SC.Module: could not find callback for lazily instantiated module '%@'".fmt(b))}},_evaluateStringLoadedModule:function(b){var a=b.source;jQuery.globalEval(a);delete b.source;if(b.cssSource){var c=document.createElement("style");c.setAttribute("type","text/css");if(c.styleSheet){c.styleSheet.cssText=b.cssSource}else{var d=document.createTextNode(b.cssSource);c.appendChild(d)}document.getElementsByTagName("head")[0].appendChild(c)}b.isReady=YES},_loadCSSForModule:function(d){var f=document.getElementsByTagName("head")[0];var e=SC.MODULE_INFO[d];var h=e.styles||[];var b=h.length;var c;var g;var a;if(!f){f=document.documentElement}b=h.length;for(a=0;a<b;a++){c=h[a];if(c.length>0){if(SC.LOG_MODULE_LOADING){SC.debug("SC.Module: Loading CSS file in '%@' -> '%@'",d,c)}if(window.devicePixelRatio>1||window.location.search.indexOf("2x")>-1){c=c.replace(".css","@2x.css")}g=document.createElement("link");g.setAttribute("href",c);g.setAttribute("rel","stylesheet");g.setAttribute("type","text/css");f.appendChild(g)}}g=null},_loadJavaScriptForModule:function(b){var c=SC.MODULE_INFO[b];var d;var a;var e=c.dependencies;var f=YES;if(e&&e.length>0){f=this._dependenciesMetForModule(b)}if(c.isPrefetched){a=c.stringURL}else{if(f){a=c.scriptURL}else{a=c.stringURL}}if(a.length>0){if(SC.LOG_MODULE_LOADING){SC.debug("SC.Module: Loading JavaScript file in '%@' -> '%@'",b,a)}d=document.createElement("script");d.setAttribute("type","text/javascript");d.setAttribute("src",a);if(d.addEventListener){d.addEventListener("load",function(){SC.run(function(){SC.Module._moduleDidLoad(b)})},false)}else{if(d.readyState){d.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded"){SC.run(function(){SC.Module._moduleDidLoad(b)})}}}}document.body.appendChild(d)}},_dependenciesMetForModule:function(c){var e=SC.MODULE_INFO[c].dependencies||[];var b,a=e.length;var f;var d;for(b=0;b<a;b++){f=e[b];d=SC.MODULE_INFO[f];if(!d){throw new Error("SC.loadModule: Unable to find dependency %@ for module %@.".fmt(f,c))}if(!d.isReady){return NO}}return YES},_loadDependenciesForModule:function(a){var b=SC.MODULE_INFO[a];var e=SC.LOG_MODULE_LOADING;var i=b.dependencies||[];var f=YES;var g=i.length;var j;var d;var c;var h;for(j=0;j<g;j++){d=i[j];c=SC.MODULE_INFO[d];if(!c){throw new Error("SC.Module: could not find required module '%@' for module '%@'".fmt(d,a))}else{if(c.isLoading){f=NO;h=c.dependents;if(!h){c.dependents=h=[]}h.push(a)}else{if(c.isReady){continue}else{f=NO;h=c.dependents;if(!h){c.dependents=h=[]}h.push(a);if(e){SC.debug("SC.Module: '%@' depends on '%@', loading dependency…",a,d)}SC.Module.loadModule(d)}}}}},_invokeCallback:function(c,d,a,b){var g;var f;f=this._targetForTargetName(d);g=this._methodForMethodNameInTarget(a,f);if(!g){if(SC.LAZY_INSTANTIATION[c]){this._executeLazilyInstantiatedModule(c,d,a);f=this._targetForTargetName(d);g=this._methodForMethodNameInTarget(a,f)}else{throw new Error("SC.Module: could not find callback for '%@'".fmt(c))}}if(!b){b=[]}b.unshift(c);var e=!!SC.RunLoop.currentRunLoop;if(e){SC.run(function(){g.apply(f,b)})}else{g.apply(f,b)}},_invokeCallbacksForModule:function(c){var e=SC.MODULE_INFO[c],d;if(!e){return}if(SC.LOG_MODULE_LOADING){SC.debug("SC.Module: Module '%@' has completed loading, invoking callbacks.",c)}d=e.callbacks||[];for(var b=0,a=d.length;b<a;++b){d[b]()}},_evaluateAndInvokeCallbacks:function(a){var d=SC.MODULE_INFO;var b=d[a];var c=SC.LOG_MODULE_LOADING;if(c){SC.debug("SC.Module: Evaluating and invoking callbacks for '%@'.",a)}if(b.source){this._evaluateStringLoadedModule(b)}b.isWaitingForRunLoop=YES;this.invokeLast(function(){b.isReady=YES;this._moduleDidBecomeReady(a)})},_moduleDidBecomeReady:function(a){var c=SC.MODULE_INFO;var b=c[a];var d=SC.LOG_MODULE_LOADING;b.isWaitingForRunLoop=NO;if(SC.isReady){SC.Module._invokeCallbacksForModule(a);delete b.callbacks}else{SC.ready(SC,function(){SC.Module._invokeCallbacksForModule(a);delete b.callbacks})}var g=b.dependents||[];var e,i;for(var h=0,f=g.length;h<f;h++){e=g[h];i=c[e];if(i.isLoaded&&this._dependenciesMetForModule(e)){if(d){SC.debug("SC.Module: Now that %@ has loaded, all dependencies for a dependent %@ are met.",a,e)}this._evaluateAndInvokeCallbacks(e)}}},_moduleDidLoad:function(b){var c=SC.MODULE_INFO[b];var e=SC.LOG_MODULE_LOADING;var d;var f,a;if(e){SC.debug("SC.Module: Module '%@' finished loading.",b)}if(!c){if(e){SC.debug("SC._moduleDidLoad() called for unknown module '@'.",b)}c=SC.MODULE_INFO[b]={isLoaded:YES,isReady:YES};return}if(c.isLoaded){if(e){SC.debug("SC._moduleDidLoad() called more than once for module '%@'. Skipping.",b)}return}delete c.isLoading;c.isLoaded=YES;if(!c.isPrefetching){d=this._dependenciesMetForModule(b);if(d){this._evaluateAndInvokeCallbacks(b)}else{if(e){SC.debug("SC.Module: Dependencies for '%@' not met yet, waiting to evaluate.",b)}}}else{delete c.isPrefetching;if(e){SC.debug("SC.Module: Module '%@' was prefetched, not evaluating until needed.",b)}}},_targetForTargetName:function(a){if(SC.typeOf(a)===SC.T_STRING){return SC.objectForPropertyPath(a)}return a},_methodForMethodNameInTarget:function(a,b){if(SC.typeOf(a)===SC.T_STRING){return SC.objectForPropertyPath(a,b)}return a},methodsForSuspend:"loadModule _moduleDidLoad prefetchModule _moduleDidBecomeReady".w(),suspend:function(){this._suspendCount=(this._suspendCount||0)+1;if(this._suspendCount!==1){return}var a=this.get("methodsForSuspend"),e,d,c,b;for(b=0;(c=a[b]);b++){if(!this[e="__replacement_"+c+"__"]){(this[e]=function(){(this._bufferedCalls||(this._bufferedCalls=[])).push({method:arguments.callee.methodName,arguments:arguments})}).methodName=c}if(!this[d="__saved_"+c+"__"]){this[d]=this[c]}this[c]=this[e]}},resume:function(){this._suspendCount=(this._suspendCount||0)-1;if(this._suspendCount<0){SC.warn("SC.Module.resume() was called without SC.Module having been in a suspended state. Call aborted.");this._suspendCount=0;return}if(this._suspendCount>0){return}var a=this.get("methodsForSuspend"),d=this._bufferedCalls,c,b,f,e;for(b=0;(c=a[b]);b++){this[c]=this["__saved_"+c+"__"]}for(b=0;(e=d)&&d[b];b++){this[e.method].apply(this,e.arguments)}if(d){d.length=0}}});SC.ready(function(){var d=SC.MODULE_INFO;var b;var c;var a;for(b in d){c=d[b];if(c.isPrefetched){a=SC.Module.PrefetchModuleTask.create({prefetchedModuleName:b});SC.backgroundTaskQueue.push(a)}}});SC.Module.PrefetchModuleTask=SC.Task.extend({prefetchedModuleName:null,run:function(){SC.Module.prefetchModule(this.prefetchedModuleName)}});sc_require("tasks/task");SC.TaskQueue=SC.Task.extend({init:function(){var a=this;this._doIdleEntry=function(){a._idleEntry()};this._suspendCount=0;this._tasks=[]},runWhenIdle:NO,runLimit:50,interval:50,isRunning:NO,minimumIdleDuration:500,_tasks:null,hasTasks:function(){return this._tasks.length>0}.property("taskCount").cacheable(),taskCount:function(){return this._tasks.length}.property().cacheable(),push:function(a){this._tasks.push(a);this.notifyPropertyChange("taskCount")},next:function(){if(this._tasks.length<1){return null}var a=this._tasks.shift();this.notifyPropertyChange("taskCount");return a},suspend:function(){this._suspendCount++},resume:function(){this._suspendCount--;if(this._suspendCount<=0){this._setupIdle()}},_taskCountDidChange:function(){this._setupIdle()}.observes("taskCount"),_runWhenIdleDidChange:function(){this._setupIdle()}.observes("runWhenIdle"),_setupIdle:function(){if(!this._suspendCount&&this.get("runWhenIdle")&&!this._idleIsScheduled&&this.get("taskCount")>0){setTimeout(this._doIdleEntry,this.get("interval"));this._idleIsScheduled=YES}},_idleEntry:function(){this._idleIsScheduled=NO;var a=SC.RunLoop.lastRunLoopEnd;if(!this.get("runWhenIdle")&&!this._suspendCount){return}if(Date.now()-a>this.get("minimumIdleDuration")){SC.run(this.run,this);SC.RunLoop.lastRunLoopEnd=a}this._setupIdle()},run:function(a){this.set("isRunning",YES);if(!a){a=this.get("runLimit")}var b,c=Date.now();while(b=this.next()){b.run(this);if(Date.now()-c>a){break}}this.set("isRunning",NO)}});SC.backgroundTaskQueue=SC.TaskQueue.create({runWhenIdle:YES});SC.TextSelection=SC.Object.extend(SC.Copyable,SC.Freezable,{start:-1,end:-1,direction:"none",length:function(){var b=this.get("start");var a=this.get("end");if(b===-1||a===-1){return -1}else{return a-b}}.property("start","end").cacheable(),init:function(){arguments.callee.base.apply(this,arguments);this.freeze()},copy:function(){return SC.TextSelection.create({start:this.get("start"),end:this.get("end"),direction:this.get("direction")})},toString:function(){var b=this.get("length"),d=this.get("start"),a=this.get("end"),c=this.get("direction");if(b&&b>0){if(b===1){return"[%@ character selected: {%@, %@}; direction: %@]".fmt(b,d,a,c)}else{return"[%@ characters selected: {%@, %@}; direction: %@]".fmt(b,d,a,c)}}else{return"[no text selected; caret at %@]".fmt(d)}}});SC.UndoManager=SC.Object.extend({undoActionName:function(){return this.undoStack?this.undoStack.name:null}.property("undoStack").cacheable(),undoActionTimestamp:function(){return this.undoStack?this.undoStack.timeStamp:null}.property("undoStack").cacheable(),redoActionName:function(){return this.redoStack?this.redoStack.name:null}.property("redoStack").cacheable(),redoActionTimestamp:function(){return this.redoStack?this.redoStack.timeStamp:null}.property("redoStack").cacheable(),canUndo:function(){return !SC.none(this.undoStack)}.property("undoStack").cacheable(),canRedo:function(){return !SC.none(this.redoStack)}.property("redoStack").cacheable(),undo:function(){this._undoOrRedo("undoStack","isUndoing")},redo:function(){this._undoOrRedo("redoStack","isRedoing")},reset:function(){this._activeGroup=null;this.set("undoStack",null);this.set("redoStack",null)},maxStackLength:0,isUndoing:NO,isRedoing:NO,registerUndoAction:function(d,c,b,a){if(!this.isUndoing&&!this.isRedoing){if(this._activeGroup){this.endUndoGroup()}this.beginUndoGroup(a)}this.registerGroupedUndoAction(d,c,b)},registerGroupedUndoAction:function(d,c,b,a){if(!this._activeGroup){this.registerUndoAction(d,c,b,a)}else{if(a){this._activeGroup.name=a}this._activeGroup.targets.push(d);this._activeGroup.actions.push(c);this._activeGroup.contexts.push(b);this._activeGroup.timeStamp=SC.DateTime.create();if(!this.isUndoing&&!this.isRedoing){this.set("redoStack",null)}}},beginUndoGroup:function(b){if(this._activeGroup){return}var a=this.isUndoing?"redoStack":"undoStack";this._activeGroup={name:b,targets:[],actions:[],contexts:[],prev:this.get(a),timeStamp:SC.DateTime.create()};this.set(a,this._activeGroup)},endUndoGroup:function(){var d=this.get("maxStackLength"),b=this.isUndoing?"redoStack":"undoStack";if(!this._activeGroup){return}this._activeGroup=null;this.notifyPropertyChange(b);if(d>0){var a=this[b],c=1;while(a=a.prev){c++;if(c>=d){a.prev=null}}}},setActionName:function(a){if(!this._activeGroup){return}this._activeGroup.name=a},_activeGroup:null,undoStack:null,redoStack:null,_undoOrRedo:function(b,f){if(this._activeGroup){this.endUndoGroup()}this.set(f,true);var h=this.get(b);if(h){this.set(b,h.prev);this.beginUndoGroup(h.name);var a=h.actions.length,g,e,d,c;for(c=a-1;c>=0;c--){g=h.targets[c];e=h.actions[c];d=h.contexts[c];if(SC.typeOf(g)===SC.T_FUNCTION){e=g;g=null}if(SC.typeOf(g)===SC.T_STRING){g=SC.objectForPropertyPath(g)}if(g&&SC.typeOf(e)===SC.T_STRING&&SC.typeOf(g[e])===SC.T_FUNCTION){e=g[e]}if(SC.typeOf(e)===SC.T_FUNCTION){e.call(g,d)}}this.endUndoGroup()}this.set(f,false)},destroy:function(){this._activeGroup=null;this.set("undoStack",null);this.set("redoStack",null);return arguments.callee.base.apply(this,arguments)},registerUndo:function(b,a){this.registerUndoAction(null,b,null,a)}});SC.UserDefaults=SC.Object.extend({ready:NO,userDomain:null,appDomain:null,_defaults:null,_safari3DB:null,defaults:function(a){this._defaults=a;this.allPropertiesDidChange()},readDefault:function(i){var a,d,b,j,h,k,g;i=this._normalizeKeyName(i);b=this._userKeyName(i);if(this._written){d=this._written[b]}a=SC.browser.isIE&&SC.browser.compare(SC.browser.version,"7")===0;if(a){j=document.body;try{j.load("SC.UserDefaults")}catch(c){SC.Logger.error("Couldn't load userDefaults in IE7: "+c.description)}}else{if(this.HTML5DB_noLocalStorage){g=this._safari3DB}else{j=window.localStorage;if(!j&&window.globalStorage){j=window.globalStorage[window.location.hostname]}}}if(j||g){h=["SC.UserDefaults",b].join("-at-");if(a){d=j.getAttribute(h.replace(/\W/gi,""))}else{if(g){d=this.dataHash[h]}else{d=j[h]}}if(!SC.none(d)){try{d=SC.json.decode(d)}catch(f){}}}k=this.delegate;if(k&&k.userDefaultsNeedsDefault){d=k.userDefaultsNeedsDefault(this,i,b)}if(SC.none(d)&&this._defaults){d=this._defaults[b]||this._defaults[i]}return d},writeDefault:function(k,i){var b,f,c,l,j,m,h;k=this._normalizeKeyName(k);f=this._userKeyName(k);c=this._written;if(!c){c=this._written={}}c[f]=i;b=SC.browser.isIE&&SC.browser.compare(SC.browser.version,"7")===0;if(b){l=document.body}else{if(this.HTML5DB_noLocalStorage){h=this._safari3DB}else{l=window.localStorage;if(!l&&window.globalStorage){l=window.globalStorage[window.location.hostname]}}}j=["SC.UserDefaults",f].join("-at-");if(l||h){var a=SC.json.encode(i);if(b){l.setAttribute(j.replace(/\W/gi,""),a);l.save("SC.UserDefaults")}else{if(h){var d=this;h.transaction(function(e){e.executeSql("delete from SCLocalStorage where key = ?",[j],function(){e.executeSql("insert into SCLocalStorage(key, value) VALUES ('"+j+"', '"+a+"');",[],d._nullDataHandler,d.killTransaction)})});this.dataHash[j]=a}else{try{l[j]=a}catch(g){SC.Logger.error("Failed using localStorage. "+g)}}}}m=this.delegate;if(m&&m.userDefaultsDidChange){m.userDefaultsDidChange(this,k,i,f)}return this},resetDefault:function(j){var b,a,f,c,k,i,h;b=this._normalizeKeyName(j);f=this._userKeyName(b);this.propertyWillChange(j);this.propertyWillChange(b);c=this._written;if(c){delete c[f]}a=SC.browser.isIE&&SC.browser.compare(SC.browser.version,"7")===0;if(a){k=document.body}else{if(this.HTML5DB_noLocalStorage){h=this._safari3DB}else{k=window.localStorage;if(!k&&window.globalStorage){k=window.globalStorage[window.location.hostname]}}}i=["SC.UserDefaults",f].join("-at-");if(k){if(a){k.setAttribute(i.replace(/\W/gi,""),null);k.save("SC.UserDefaults")}else{if(h){var d=this;h.transaction(function(e){e.executeSql("delete from SCLocalStorage where key = ?",[i],null)});delete this.dataHash[i]}else{try{delete k[i]}catch(g){SC.Logger.warn("Deleting local storage encountered a problem. "+g)}}}}this.propertyDidChange(j);this.propertyDidChange(b);return this},unknownProperty:function(a,b){if(b===undefined){return this.readDefault(a)}else{this.writeDefault(a,b);return b}},_normalizeKeyName:function(a){if(a.indexOf(":")<0){var b=this.get("appDomain")||"app";a=[b,a].join(":")}return a},_userKeyName:function(b){var a=this.get("userDomain")||"(anonymous)";return[a,b].join("-at-")},_domainDidChange:function(){var a=NO;if(this.get("userDomain")!==this._scud_userDomain){this._scud_userDomain=this.get("userDomain");a=YES}if(this.get("appDomain")!==this._scud_appDomain){this._scud_appDomain=this.get("appDomain");a=YES}if(a){this.allPropertiesDidChange()}}.observes("userDomain","appDomain"),init:function(){arguments.callee.base.apply(this,arguments);var a;jQuery.readyWait++;if(SC.userDefaults&&SC.userDefaults.get("dataHash")){var g=SC.userDefaults.get("dataHash");if(g){this.dataHash=SC.userDefaults.get("dataHash")}}this._scud_userDomain=this.get("userDomain");this._scud_appDomain=this.get("appDomain");a=SC.browser.isIE&&SC.browser.compare(SC.browser.version,"7")===0;if(a){document.body.addBehavior("#default#userData")}this.HTML5DB_noLocalStorage=SC.browser.isWebkit&&SC.browser.compare(SC.browser.engineVersion,"523")>0&&SC.browser.compare(SC.browser.engineVersion,"528")<0;if(this.HTML5DB_noLocalStorage){var b;try{if(!window.openDatabase){SC.Logger.error("Trying to load a database with safari version 3.1 to get SC.UserDefaults to work. You are either in a previous version or there is a problem with your browser.");return}else{var h="scdb",f="1.0",i="SproutCore database",j=65536;b=openDatabase(h,f,i,j)}}catch(d){SC.Logger.error("Trying to load a database with safari version 3.1 to get SC.UserDefaults to work. You are either in a previous version or there is a problem with your browser.");return}if(b){var c=this;b.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS SCLocalStorage(key TEXT NOT NULL PRIMARY KEY, value TEXT NOT NULL);",[],c._nullDataHandler,c.killTransaction)});b.transaction(function(e){e.parent=c;e.executeSql("SELECT * from SCLocalStorage;",[],function(p,m){var n={},o;for(var l=0,k=m.rows.length;l<k;l++){o=m.rows.item(l);n[o.key]=o.value}p.parent.dataHash=n;SC.run(function(){jQuery.ready(true)})},c.killTransaction)});this._safari3DB=b}}else{jQuery.ready(true)}},_killTransaction:function(b,a){return true},_nullDataHandler:function(b,a){}});SC.userDefaults=SC.UserDefaults.create();SC.mixin({convertHsvToHex:function(d,c,a){var b=SC.Color.hsvToRgb(d,c,a);return SC.Color.create({r:b[0],g:b[1],b:b[2]}).toHex()},convertHexToHsv:function(b){var a=SC.Color.from(b);return a&&SC.Color.rgbToHsv(a.r,a.g,a.b)},PARSE_COLOR_RGBRE:/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i,PARSE_COLOR_HEXRE:/^\#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,expandColor:function(b){var c,e,d,a;c=this.parseColor(b);if(c){e=parseInt(c.slice(1,3),16);d=parseInt(c.slice(3,5),16);a=parseInt(c.slice(5,7),16);return[e,d,a]}},parseColor:function(d){var e=0,a="#",c,b;if(c=this.PARSE_COLOR_RGBRE.exec(d)){for(e=1;e<=3;e++){b=Math.max(0,Math.min(255,parseInt(c[e],0)));a+=this.toColorPart(b)}return a}if(c=this.PARSE_COLOR_HEXRE.exec(d)){if(c[1].length==3){for(e=0;e<3;e++){a+=c[1].charAt(e)+c[1].charAt(e)}return a}return"#"+c[1]}return false},toColorPart:function(a){if(a>255){a=255}var b=a.toString(16);if(a<16){return"0"+b}return b}});SC.mixin({_downloadFrames:0,download:function(d){var a=document.createElement("iframe"),c="DownloadFrame_"+this._downloadFrames;SC.$(a).attr("id",c);a.style.border="10px";a.style.width="0px";a.style.height="0px";a.style.position="absolute";a.style.top="-10000px";a.style.left="-10000px";if(!SC.browser.isSafari){SC.$(a).attr("src",d)}document.getElementsByTagName("body")[0].appendChild(a);if(SC.browser.isSafari){SC.$(a).attr("src",d)}this._downloadFrames=this._downloadFrames+1;if(!SC.browser.isSafari){var b=function(){document.body.removeChild(document.getElementById(c));c=null};b.invokeLater(null,2000)}a=null},getStyle:function(a,b){var c="";if(document.defaultView&&document.defaultView.getComputedStyle){c=document.defaultView.getComputedStyle(a,"").getPropertyValue(b)}else{if(a.currentStyle){b=b.replace(/\-(\w)/g,function(d,e){return e.toUpperCase()});c=a.currentStyle[b]}}return c},uniJapaneseConvert:function(e){var a,c="",b,d;for(b=0,d=e.length;b<d;b++){a=e.charCodeAt(b);a=((a>=65281&&a<=65392)?a-65248:a);a=(a===12540?45:a);c=c+String.fromCharCode(a)}return c},pointInElement:function(b,g,c,f){var h,d,a,e;g=jQuery(g);c=c||"border";h=SC.offset(g,f);if(c==="padding"){d=g.innerWidth();a=g.innerHeight();h.x+=window.parseInt(g.css("border-left-width").replace("px",""));h.y+=window.parseInt(g.css("border-top-width").replace("px",""))}else{d=g.outerWidth(c==="margin");a=g.outerHeight(c==="margin");if(c==="margin"){h.x-=window.parseInt(g.css("margin-left").replace("px",""));h.y-=window.parseInt(g.css("margin-top").replace("px",""))}}e={x:h.x,y:h.y,width:d,height:a};return SC.pointInRect(b,e)},switchScale:function(){$("head meta[name=viewport]").remove();if(window.innerWidth===window.screen.width){$("head").prepend('<meta name="viewport" content="width=device-width, initial-scale=0.5, maximum-scale=0.5, minimum-scale=0.5, user-scalable=0" />')}else{$("head").prepend('<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=0" />')}}});SC.mixin({ZERO_RANGE:{start:0,length:0},RANGE_NOT_FOUND:{start:0,length:-1},valueInRange:function(b,a){return(b>=0)&&(b>=a.start)&&(b<(a.start+a.length))},minRange:function(a){return a.start},maxRange:function(a){return(a.length<0)?-1:(a.start+a.length)},unionRanges:function(c,b){if((c==null)||(c.length<0)){return b}if((b==null)||(b.length<0)){return c}var d=Math.min(c.start,b.start),a=Math.max(SC.maxRange(c),SC.maxRange(b));return{start:d,length:a-d}},intersectRanges:function(c,b){if((c==null)||(b==null)){return SC.RANGE_NOT_FOUND}if((c.length<0)||(b.length<0)){return SC.RANGE_NOT_FOUND}var d=Math.max(SC.minRange(c),SC.minRange(b)),a=Math.min(SC.maxRange(c),SC.maxRange(b));if(a<d){return SC.RANGE_NOT_FOUND}return{start:d,length:a-d}},subtractRanges:function(c,b){if((c==null)||(b==null)){return SC.RANGE_NOT_FOUND}if((c.length<0)||(b.length<0)){return SC.RANGE_NOT_FOUND}var a=Math.max(SC.minRange(c),SC.minRange(b)),d=Math.min(SC.maxRange(c),SC.maxRange(b));if(a<d){return SC.RANGE_NOT_FOUND}return{start:d,length:a-d}},cloneRange:function(a){return{start:a.start,length:a.length}},rangesEqual:function(b,a){if(b===a){return true}if(b==null){return a.length<0}if(a==null){return b.length<0}return(b.start==a.start)&&(b.length==a.length)}});SC.mixin({bestStringMetricsForMaxWidth:function(a,y,n,A,x){if(!y){SC.warn("When calling bestMetricsForWidth, the second argument, maxWidth, is required. There's no reason to call this without a maxWidth.");return undefined}y=Math.ceil(parseFloat(y));var B=arguments.callee,h=SC.typeOf(n||(n=""))!==SC.T_STRING,m=h?n.style.maxWidth:undefined,o=(!h||n.cacheableForMetrics)?SC.cacheSlotFor(n,A,x,a):undefined,r=h?(B._applyMaxToEl||(B._applyMaxToEl=function(l,i){l.style.maxWidth=i+"px";return l})):(B._applyMaxToStr||(B._applyMaxToStr=function(l,i){return l.replace(/max-width:[^;]*;/g,"")+" max-width:"+i+"px"})),v=h?(B._removeMaxFromEl||(B._removeMaxFromEl=function(i){i.style.maxWidth="none";return i})):(B._removeMaxFromStr||(B._removeMaxFromStr=function(i){return i.replace(/max-width:[^;]*;/g,"")+" max-width:none"})),p=false;if(o){o.list||(o.list=[{width:Infinity,height:0}]);for(var w=1,u=o.list.length,D,b,E;w<u&&!E;w++){D=o.list[w];b=o.list[w-1];if(!D||!D.width){continue}if(y>=D.width){if((b&&b.width)||(y<=D.maxWidth)){return D}E=D}}}var q=r(n,y),s=SC.metricsForString(a,q,A,x),z=s.height,d=o?o.parent.height||(o.parent.height=SC.metricsForString("W",q,A).height):SC.metricsForString("W",q,A).height,c=Math.round(z/d);if(p){c--;z=c*d}if(z>d){var g=p?Math.ceil(s.width*2.5):s.width,k=p?s.width:Math.floor(s.width/2.5),C,f=new Date()*1,j=0;while(g-k>1||(s.height>z&&!p)||(s.height<z&&p)){j++;C=(g+k)/2;q=r(q,C);s=SC.metricsForString(a,q,A,x);if(s.height>z){k=C}else{g=C}}s.width=Math.ceil(C);s.height=z;s.maxWidth=y;s.lineHeight=d;s.lines=c;s.searchPerformed=true;s.searchTime=new Date()*1-f;s.searchCount=j}else{if(p){s=SC.metricsForString(a,q=v(q),A,x)}s.maxWidth=y;s.lineHeight=d;s.lines=c;s.searchPerformed=false}s.browserCorrection=0;if(SC.browser.isIE){s.browserCorrection=1}if(SC.browser.isMozilla){s.browserCorrection=1}s.width=Math.min(y,s.width+s.browserCorrection);if(o){var e=o.list[c];if(e&&e.maxWidth<y){e.maxWidth=y}if(!e){e=o.list[c]=s}}if(h){q.style.maxWidth=m}E=p?E:s;return E},cacheSlotFor:function(){var e=arguments.callee.caller,f=e.cache||(e.cache={});if(!arguments[0]){return f}var b=(arguments[0] instanceof Array||arguments[0].callee)?arguments[0]:arguments,d=b.length,a,c;for(c=0;c<d;c++){if(typeof(a=b[c])==="object"){a=SC.guidFor(a)}f=f[a]||(f[a]={parent:f})}return f},cachedVersionOf:function(){var a=function(c){var b=function(){var d=SC.cacheSlotFor(arguments);return d.result||(d.result=arguments.callee.func.apply(this,arguments))};b.func=c;return b};return a(a)}()});SC.mixin(SC.View,{BOUNCE_ADJUST:{run:function(h,o,j){var l=o.bounces||2,e=o.bounciness||0.25,f=h.get("layout"),g=[],b=(l*2)+1,c,d;c=o.duration||0.4;c=c/b;for(d=0;d<b;d++){if(d%2){g[d]={value:SC.clone(j),duration:c,timing:"ease-out"}}else{if(d===b-1){g[d]={value:SC.clone(j),duration:c,timing:"ease-in-out"}}else{g[d]={value:SC.clone(j),duration:c,timing:"ease-in"}}}}for(var k in j){var a=j[k],n=Math.round((a-f[k])*e);for(d=0;d<l;d++){g[(d*2)+1].value[k]=a-n;n=Math.round(n*0.5)}}var m=function(){h.didTransitionAdjust()};h._animateFrames(g,m,o.delay||0)}}});SC.mixin(SC.View,{SMOOTH_ADJUST:{run:function(a,b,d){var c,e;a.animate(d,{delay:b.delay||0,duration:b.duration||0.4,timing:b.timing||"ease"},function(f){this.didTransitionAdjust()})}}});SC.mixin(SC.View,{SPRING_ADJUST:{run:function(j,o,k){var g=o.springs||4,h=o.springiness||0.25,e=j.get("layout"),f=[],b=g+1,c,d;c=o.duration||0.4;c=c/b;for(d=0;d<b;d++){if(d!==0){f[d]={value:SC.clone(k),duration:c,timing:"ease-in-out"}}else{f[d]={value:SC.clone(k),duration:c,timing:"ease-out"}}}for(var m in k){var a=k[m],l=Math.round((a-e[m])*h);for(d=0;d<g;d++){if(d%2){f[d].value[m]=a-l}else{f[d].value[m]=a+l}l=Math.round(l*0.5)}}var n=function(){j.didTransitionAdjust()};j._animateFrames(f,n,o.delay||0)}}});SC.mixin(SC.View,{BOUNCE_IN:{setup:function(a,b,f){var c=a.get("parentView"),h,g=a.get("borderFrame"),e,d;if(f){}else{if(c){h=c.get("borderFrame")}else{h=SC.RootResponder.responder.currentWindowSize}switch(b.direction){case"left":e=h.width;break;case"up":d=h.height;break;case"down":d=-g.height;break;default:e=-g.width}}a.adjust({centerX:null,centerY:null,bottom:null,left:e||g.x,right:null,top:d||g.y,height:g.height,width:g.width})},run:function(i,n,j,c){var e=i.get("layout"),d=n.bounciness||0.25,m,b,f,a,k,h,g;switch(n.direction){case"left":a=c.x;k={left:a};m=-(a-e.left)*d;h={left:a+m};g={left:a+(m*0.5)};break;case"up":a=c.y;k={top:a};m=-(a-e.top)*d;h={top:a+m};g={top:a+(m*0.5)};break;case"down":a=c.y;k={top:a};m=(e.top-a)*d;h={top:a+m};g={top:a+(m*0.5)};break;default:a=c.x;k={left:a};m=(e.left-a)*d;h={left:a+m};g={left:a+(m*0.5)}}b=n.duration||0.4;b=b*0.2;f=[{value:k,duration:b,timing:"ease-in"},{value:h,duration:b,timing:"ease-out"},{value:k,duration:b,timing:"ease-in"},{value:g,duration:b,timing:"ease-out"},{value:k,duration:b,timing:"ease-in-out"}];var l=function(o){if(!o.isCancelled){i.didTransitionIn()}};i._animateFrames(f,l,n.delay||0)}},BOUNCE_OUT:{setup:function(b,c){var g=b.get("borderFrame"),f=g.x,e=g.y,a=g.height,d=g.width;b.adjust({centerX:null,centerY:null,bottom:null,left:f,right:null,top:e,height:a,width:d})},run:function(j,q,k,e){var f=q.bounciness||0.25,o,p,c,d,a,i,h=j.get("layout"),g=j.get("borderFrame"),n=j.get("parentView"),m,b;if(n){m=n.get("borderFrame")}else{m=SC.RootResponder.responder.currentWindowSize}switch(q.direction){case"left":b={left:h.left};a={left:-g.width};o=(h.left+g.width)*f;p={left:h.left-(o*0.5)};c={left:h.left-o};break;case"up":b={top:h.top};a={top:-g.height};o=(h.top+g.height)*f;p={top:h.top-(o*0.5)};c={top:h.top-o};break;case"down":b={top:h.top};a={top:m.height};o=(m.height-h.top)*f;p={top:h.top+(o*0.5)};c={top:h.top+o};break;default:b={left:h.left};a={left:m.width};o=(m.width-h.left)*f;p={left:h.left+(o*0.5)};c={left:h.left+o}}d=q.duration||0.6;d=d*0.2;i=[{value:p,duration:d,timing:"ease-out"},{value:b,duration:d,timing:"ease-in"},{value:c,duration:d,timing:"ease-out"},{value:b,duration:d,timing:"ease-in-out"},{value:a,duration:d,timing:"ease-in"}];var l=function(r){if(!r.isCancelled){j.didTransitionOut()}};j._animateFrames(i,l,q.delay||0)}}});SC.mixin(SC.View,{FADE_IN:{layoutProperties:["opacity"],setup:function(a,b,c){a.adjust({opacity:c?a.get("layout").opacity||0:0})},run:function(b,c,d,a){b.animate("opacity",d.opacity||1,{delay:c.delay||0,duration:c.duration||0.4,timing:c.timing||"ease"},function(e){if(!e.isCancelled){this.didTransitionIn()}})}},FADE_OUT:{layoutProperties:["opacity"],run:function(a,b){a.animate("opacity",0,{delay:b.delay||0,duration:b.duration||0.4,timing:b.timing||"ease"},function(c){if(!c.isCancelled){this.didTransitionOut()}})}}});SC.mixin(SC.View,{POP_IN:{layoutProperties:["scale"],setup:function(a,b,c){a.adjust({scale:c?a.get("layout").scale||0:0})},run:function(g,j,h,d){var a,c,e,f=j.poppiness||0.2,b;b=h.scale||1;a=b*(f+1);c=j.duration||0.25;e=[{value:{scale:a},duration:c*0.6,timing:"ease-out"},{value:{scale:b},duration:c*0.4,timing:"ease-in-out"}];var i=function(k){if(!k.isCancelled){g.didTransitionIn()}};g._animateFrames(e,i,j.delay||0)}},POP_OUT:{layoutProperties:["scale"],run:function(a,b){var f,c,e,h=b.poppiness||0.15,d;d=a.get("layout").scale||1;f=d*(h+1);c=b.duration||0.2;e=[{value:{scale:f},duration:c*0.4,timing:"ease-out"},{value:{scale:0},duration:c*0.6,timing:"ease-in-out"}];var g=function(i){if(!i.isCancelled){a.didTransitionOut()}};a._animateFrames(e,g,b.delay||0)}}});SC.mixin(SC.View,{SCALE_IN:{layoutProperties:["scale"],setup:function(a,b,c){a.adjust({scale:c?a.get("layout").scale||0:0})},run:function(b,c,d,a){b.animate("scale",d.scale||1,{delay:c.delay||0,duration:c.duration||0.4,timing:c.timing||"ease"},function(e){if(!e.isCancelled){this.didTransitionIn()}})}},SCALE_OUT:{layoutProperties:["scale"],run:function(a,b){a.animate("scale",0,{delay:b.delay||0,duration:b.duration||0.4,timing:b.timing||"ease"},function(c){if(!c.isCancelled){this.didTransitionOut()}})}}});SC.mixin(SC.View,{SLIDE_IN:{layoutProperties:["top","bottom","left","right","height","width","centerX","centerY"],setup:function(a,b,f){var c=a.get("parentView"),h,g=a.get("borderFrame"),e,d;if(f){}else{if(c){h=c.get("borderFrame")}else{h=SC.RootResponder.responder.currentWindowSize}switch(b.direction){case"left":e=h.width;break;case"up":d=h.height;break;case"down":d=-g.height;break;default:e=-g.width}}a.adjust({centerX:null,centerY:null,bottom:null,left:e||g.x,right:null,top:d||g.y,height:g.height,width:g.width})},run:function(b,c,e,a){var d,f;if(c.direction==="up"||c.direction==="down"){d="top";f=a.y}else{d="left";f=a.x}b.animate(d,f,{delay:c.delay||0,duration:c.duration||0.4,timing:c.timing||"ease"},function(g){if(!g.isCancelled){this.didTransitionIn()}})}},SLIDE_OUT:{layoutProperties:["top","bottom","left","right","height","width","centerX","centerY"],setup:function(b,c){var g=b.get("borderFrame"),f=g.x,e=g.y,a=g.height,d=g.width;b.adjust({centerX:null,centerY:null,bottom:null,left:f,right:null,top:e,height:a,width:d})},run:function(c,i,d,a){var b=c.get("borderFrame"),h=c.get("parentView"),g,f,e;if(h){g=h.get("borderFrame")}else{g=SC.RootResponder.responder.currentWindowSize}switch(i.direction){case"left":f="left";e=-b.width;break;case"up":f="top";e=-b.height;break;case"down":f="top";e=g.height;break;default:f="left";e=g.width}c.animate(f,e,{delay:i.delay||0,duration:i.duration||0.4,timing:i.timing||"ease"},function(j){if(!j.isCancelled){this.didTransitionOut()}})}}});SC.mixin(SC.View,{SPRING_IN:{setup:function(a,b,f){var c=a.get("parentView"),h,g=a.get("borderFrame"),e,d;if(f){}else{if(c){h=c.get("borderFrame")}else{h=SC.RootResponder.responder.currentWindowSize}switch(b.direction){case"left":e=h.width;break;case"up":d=h.height;break;case"down":d=-g.height;break;default:e=-g.width}}a.adjust({centerX:null,centerY:null,bottom:null,left:e||g.x,right:null,top:d||g.y,height:g.height,width:g.width})},run:function(j,o,k,c){var g=j.get("layout"),i=o.springiness||0.25,m,b,h,a,f,e,d,l;switch(o.direction){case"left":a=c.x;l={left:a};m=(g.left-a)*i;f={left:a-m};e={left:a+(m*0.5)};d={left:a-(m*0.25)};break;case"up":a=c.y;l={top:a};m=(g.top-a)*i;f={top:a-m};e={top:a+(m*0.5)};d={top:a-(m*0.25)};break;case"down":a=c.y;l={top:a};m=(a-g.top)*i;f={top:a+m};e={top:a-(m*0.5)};d={top:a+(m*0.25)};break;default:a=c.x;l={left:a};m=(a-g.left)*i;f={left:a+m};e={left:a-(m*0.5)};d={left:a+(m*0.25)}}b=o.duration||0.4;b=b*0.25;h=[{value:f,duration:b,timing:"ease-out"},{value:e,duration:b,timing:"ease-in-out"},{value:d,duration:b,timing:"ease-in-out"},{value:l,duration:b,timing:"ease-in-out"}];var n=function(p){if(!p.isCancelled){j.didTransitionIn()}};j._animateFrames(h,n,o.delay||0)}},SPRING_OUT:{setup:function(b,c){var g=b.get("borderFrame"),f=g.x,e=g.y,a=g.height,d=g.width;b.adjust({centerX:null,centerY:null,bottom:null,left:f,right:null,top:e,height:a,width:d})},run:function(j,p,k,c){var i=p.springiness||0.25,b,a,h,g=j.get("layout"),f=j.get("borderFrame"),o=j.get("parentView"),n,l,e,d;if(o){n=o.get("borderFrame")}else{n=SC.RootResponder.responder.currentWindowSize}switch(p.direction){case"left":a={left:-f.width};l=(g.left+f.width)*i;e={left:g.left-(l*0.5)};d={left:g.left+l};break;case"up":a={top:-f.height};l=(g.top+f.height)*i;e={top:g.top-(l*0.5)};d={top:g.top+l};break;case"down":a={top:n.height};l=(n.height-g.top)*i;e={top:g.top+(l*0.5)};d={top:g.top-l};break;default:a={left:n.width};l=(n.width-g.left)*i;e={left:g.left+(l*0.5)};d={left:g.left-l}}b=p.duration||0.3;b=b*0.33;h=[{value:e,duration:b,timing:"ease-in-out"},{value:d,duration:b,timing:"ease-in-out"},{value:a,duration:b,timing:"ease-in"}];var m=function(q){if(!q.isCancelled){j.didTransitionOut()}};j._animateFrames(h,m,p.delay||0)}}});SC.ContainerView=SC.View.extend({classNames:["sc-container-view"],contentView:null,contentViewBindingDefault:SC.Binding.single(),isTransitioning:NO,nowShowing:null,renderDelegateName:"containerRenderDelegate",transitionSwap:null,transitionSwapOptions:null,init:function(){var a;arguments.callee.base.apply(this,arguments);if(this.get("nowShowing")){this.nowShowingDidChange()}else{a=this.get("contentView");if(a){this.set("nowShowing",a)}}},clippingFrame:function(){var d=this._contentStatecharts,c=this.get("frame"),a=arguments.callee.base.apply(this,arguments);if(this.get("isTransitioning")){for(var b=d.length-1;b>=0;b--){a=d[b].transitionClippingFrame(a)}}else{a.width=c.width}return a}.property("parentView","frame").cacheable(),contentViewDidChange:function(){this.replaceContent(this.get("contentView"))}.observes("contentView"),destroy:function(){var b=this._contentStatecharts;if(b){for(var a=b.length-1;a>=0;a--){b[a].doExit(true)}}this._contentStatecharts=this._currentStatechart=null;return arguments.callee.base.apply(this,arguments)},nowShowingDidChange:function(){var c=this.get("nowShowing");if(SC.typeOf(c)===SC.T_STRING&&c.length>0){var b=c.indexOf(".");if(b===-1){var a=this.get(c);c=SC.kindOf(a,SC.CoreView)?a:SC.objectForPropertyPath(c,this.get("page"))}else{if(b===0){c=this.getPath(c.slice(1))}else{c=SC.objectForPropertyPath(c)}}}if(c&&c.kindOf(SC.CoreView)){c=this.createChildView(c)}else{c=null}this.set("contentView",c)}.observes("nowShowing"),statechartReady:function(){var b=this._contentStatecharts;for(var a=b.length-2;a>=0;a--){b[a].doExit(true)}this.set("isTransitioning",NO)},statechartEnded:function(a){var b=this._contentStatecharts;b.removeObject(a);if(b.length===1){b[0].entered()}},replaceContent:function(b){var f,d=this._currentStatechart,a;this.set("isTransitioning",YES);f=this._contentStatecharts;if(!f){f=this._contentStatecharts=[]}for(var c=f.length-1;c>=0;c--){var e=f[c].doExit(false,b);if(e){a=f[c];a.set("previousStatechart",d);a.gotoEnteringState()}}if(!a){a=SC.ContainerContentStatechart.create({container:this,content:b,previousStatechart:d});f.pushObject(a)}this._currentStatechart=a}});SC.ContainerContentStatechart=SC.Object.extend({container:null,content:null,previousStatechart:null,state:"none",init:function(){arguments.callee.base.apply(this,arguments);this.gotoEnteringState()},transitionClippingFrame:function(d){var b=this.get("container"),c=b.get("transitionSwapOptions")||{},a=b.get("transitionSwap");if(a&&a.transitionClippingFrame){return a.transitionClippingFrame(b,d,c)}else{return d}},entered:function(){if(this.state==="entering"){this.gotoReadyState()}},doExit:function(b,a){if(this.state!=="exited"){this.gotoExitingState(b,a)}if(this.get("content")===a){return true}else{return false}},exited:function(){if(this.state==="exiting"){this.gotoExitedState()}},gotoEnteringState:function(){var b=this.get("container"),d=this.get("content"),e=this.get("previousStatechart"),c=b.get("transitionSwapOptions")||{},a=b.get("transitionSwap");if(this.state==="exiting"&&a.reverseBuildOut){a.reverseBuildOut(this,b,d,c);this.set("state","entering");return}else{if(d){b.appendChild(d)}}this.set("state","entering");if(e&&d&&a){if(a.willBuildInToView){a.willBuildInToView(b,d,e,c)}if(a.buildInToView){a.buildInToView(this,b,d,e,c)}else{this.entered()}}else{this.entered()}},gotoExitingState:function(c){var b=this.get("container"),f=this.get("content"),e=this._exitCount,d=b.get("transitionSwapOptions")||{},a=b.get("transitionSwap");if(this.state==="entering"&&a.reverseBuildIn){a.reverseBuildIn(this,b,f,d);this.set("state","exiting");return}this.set("state","exiting");if(!c&&f&&a){if(!e){e=this._exitCount=1}if(a.willBuildOutFromView){a.willBuildOutFromView(b,f,d,e)}if(a.buildOutFromView){a.buildOutFromView(this,b,f,d,e)}else{}this._exitCount+=1}else{this.exited()}},gotoExitedState:function(){var b=this.get("container"),d=this.get("content"),c=b.get("transitionSwapOptions")||{},a=b.get("transitionSwap");if(d){if(a&&a.didBuildOutFromView){a.didBuildOutFromView(b,d,c)}if(d.createdByParent){b.removeChildAndDestroy(d)}else{b.removeChild(d)}}b.statechartEnded(this);this._exitCount=0;this.set("state","exited")},gotoReadyState:function(){var b=this.get("container"),d=this.get("content"),c=b.get("transitionSwapOptions")||{},a=b.get("transitionSwap");if(d&&a&&a.didBuildInToView){a.didBuildInToView(b,d,c)}b.statechartReady();this.set("state","ready")}});sc_require("views/container");SC.mixin(SC.ContainerView,{DISSOLVE:{willBuildInToView:function(a,c,d,b){c.adjust({opacity:0})},buildInToView:function(b,a,d,e,c){d.animate("opacity",1,{duration:c.duration||0.4,timing:c.timing||"ease"},function(f){if(b.get("state")==="entering"){b.entered()}})},buildOutFromView:function(b,a,e,c,d){if(d==1){e.animate("opacity",0,{duration:c.duration||0.4,timing:c.timing||"ease"},function(f){if(!f.isCancelled){b.exited()}})}},didBuildOutFromView:function(a,c,b){c.adjust({opacity:1})}}});sc_require("views/container");SC.mixin(SC.ContainerView,{FADE_COLOR:{willBuildInToView:function(a,d,e,c){var b,f;d.adjust({opacity:0});b=SC.Color.from(c.color||"black");f=SC.View.create({layout:{opacity:0,zIndex:1},render:function(g){g.addStyle("background-color",b.get("cssText"))}});a.appendChild(f)},buildInToView:function(b,a,d,e,c){var f=a.get("childViews"),g;g=f.objectAt(f.get("length")-1);g.animate("opacity",1,{duration:c.duration*0.5||0.4,timing:c.timing||"ease-in"},function(){d.adjust("opacity",1);g.animate("opacity",0,{duration:c.duration*0.5||0.4,timing:c.timing||"ease-in"},function(h){a.removeChild(this);this.destroy();if(b.get("state")==="entering"){b.entered()}})})},buildOutFromView:function(b,a,e,c,d){}}});sc_require("views/container");SC.mixin(SC.ContainerView,{MOVE_IN:{willBuildInToView:function(a,f,e,i){var c=a.get("frame"),d,g,h,b;h=c.height;b=c.width;switch(i.direction){case"right":d=-b;break;case"up":g=h;break;case"down":g=-h;break;default:d=b}f.adjust({bottom:null,left:d||0,right:null,top:g||0,height:h,width:b})},buildInToView:function(b,a,e,g,c){var d,f;switch(c.direction){case"right":d="left";break;case"up":d="top";break;case"down":d="top";break;default:d="left"}e.animate(d,0,{duration:c.duration||0.4,timing:c.timing||"ease"},function(h){if(b.get("state")==="entering"){b.entered()}})},didBuildInToView:function(a,c,b){c.adjust({bottom:0,right:0,height:null,width:null})},didBuildOutFromView:function(a,c,b){c.adjust({bottom:0,right:0,height:null,width:null})},buildOutFromView:function(b,a,d,c){}}});sc_require("views/container");SC.mixin(SC.ContainerView,{PUSH:{willBuildInToView:function(a,h,g,l){var e=0,j=0,c=a.get("frame"),f=0,i=0,k,b;k=c.height;b=c.width;if(g&&g.get("content")){var d=g.getPath("content.liveAdjustments");e=d.left||0;j=d.top||0}switch(l.direction){case"right":f=-b+e;break;case"up":i=k+j;break;case"down":i=-k+j;break;default:f=b+e}h.adjust({bottom:null,right:null,left:f,top:i,height:k,width:b})},buildInToView:function(b,a,e,f,c){var d;switch(c.direction){case"up":d="top";break;case"down":d="top";break;default:d="left"}e.animate(d,0,{duration:c.duration||0.4,timing:c.timing||"ease"},function(g){if(b.get("state")==="entering"){b.entered()}})},didBuildInToView:function(a,c,b){c.adjust({bottom:0,right:0,height:null,width:null})},willBuildOutFromView:function(b,e,c){var f=b.get("frame"),a,d;a=f.height;d=f.width;e.adjust({bottom:null,right:null,height:a,width:d})},buildOutFromView:function(b,a,f,c,e){var h=a.get("frame"),d,g;switch(c.direction){case"right":d="left";g=h.width;break;case"up":d="top";g=-h.height;break;case"down":d="top";g=h.height;break;default:d="left";g=-h.width}f.animate(d,g*e,{duration:c.duration||0.4,timing:c.timing||"ease"},function(i){if(!i.isCancelled){b.exited()}})},didBuildOutFromView:function(a,c,b){c.adjust({bottom:0,right:0,height:null,width:null})},transitionClippingFrame:function(a,d,b){var c=a.get("frame");switch(b.direction){case"right":d.width=c.width*2;d.x=-c.width;break;case"up":d.height=c.height*2;d.y=-c.height;break;case"down":d.height=c.height*2;d.y=0;break;default:d.width=c.width*2;d.x=0}return d}}});sc_require("views/container");SC.mixin(SC.ContainerView,{REVEAL:{buildInToView:function(b,a,d,e,c){},didBuildInToView:function(a,c,b){c.adjust({bottom:0,right:0,height:null,width:null,zIndex:null})},willBuildOutFromView:function(b,f,c,d){var g=b.get("frame"),a,e;a=g.height;e=g.width;f.adjust({bottom:null,right:null,height:a,width:e,zIndex:d})},buildOutFromView:function(b,a,f,c,e){if(e===1){var h=a.get("frame"),d,g;switch(c.direction){case"right":d="left";g=-h.width;break;case"up":d="top";g=-h.height;break;case"down":d="top";g=h.height;break;default:d="left";g=h.width}f.animate(d,g,{duration:c.duration||0.4,timing:c.timing||"ease"},function(i){if(!i.isCancelled){b.exited()}})}},didBuildOutFromView:function(a,c,b){c.adjust({top:0,left:0,bottom:0,right:0,height:null,width:null,zIndex:null})}}});sc_require("system/string");SC.VALIDATE_OK=YES;SC.VALIDATE_NO_CHANGE=NO;SC.Validator=SC.Object.extend({fieldValueForObject:function(b,c,a){return b},objectForFieldValue:function(c,b,a){return c},validate:function(a,b){return true},validateError:function(a,b){return SC.$error(SC.String.loc("Invalid.General(%@)",b.get("fieldValue")),b.get("fieldKey"))},validateChange:function(b,c,a){return this.validate(b,c)?SC.VALIDATE_OK:this.validateError(b,c)},validateSubmit:function(a,b){return this.validate(a,b)?SC.VALIDATE_OK:this.validateError(a,b)},validatePartial:function(a,b){if(!b.get("isValid")){return this.validate(a,b)?SC.VALIDATE_OK:this.validateError(a,b)}else{return SC.VALIDATE_NO_CHANGE}},validateKeyDown:function(b,c,a){return true},attachTo:function(a,b){},detachFrom:function(a,b){}});SC.Validator.mixin({OK:true,NO_CHANGE:false,findFor:function(e,g,f){var c;if(!f){return}if(f instanceof SC.Validator){c=f}else{if(f.isClass){c=f.create()}else{if(SC.typeOf(f)===SC.T_STRING){var b=null;var a=f.match(/^(.+)\[(.*)\]/);if(a){f=a[1];b=a[2]}f=SC.String.classify(f);var d=SC.Validator[f];if(SC.none(d)){throw new Error("validator %@ not found for %@".fmt(f,g))}else{if(b){if(!e){throw new Error("named validator (%@) could not be found for field %@ because the field does not belong to a form".fmt(b,g))}if(!e._validatorHash){e._validatorHash={}}c=(b)?e._validatorHash[b]:null;if(!c){c=d.create()}if(b){e._validatorHash[b]=c}}else{c=d.create()}}}}}return c},fieldValueForObject:function(a,b,c){if(this.prototype&&this.prototype.fieldValueForObject){return this.prototype.fieldValueForObject(a,b,c)}else{return null}},objectForFieldValue:function(b,a,c){if(this.prototype&&this.prototype.objectForFieldValue){return this.prototype.objectForFieldValue(b,a,c)}else{return null}}});sc_require("validators/validator");SC.Validator.CreditCard=SC.Validator.extend({fieldValueForObject:function(a,b,c){if(typeof(a)=="string"&&a.length==16){a=[a.slice(0,4),a.slice(4,8),a.slice(8,12),a.slice(12,16)].join(" ")}return a},objectForFieldValue:function(b,a,c){return b.replace(/[\s-\.\:]/g,"")},validate:function(a,b){return this.checkNumber(b.get("fieldValue"))},validateError:function(b,c){var a=c.get("errorLabel")||"Field";return SC.$error(SC.String.loc("Invalid.CreditCard(%@)",a),a)},validateKeyDown:function(b,c,a){return !!a.match(/[0-9\- ]/)},checkNumber:function(h){if(!h||h.length===0){return YES}h=h.replace(/[^0-9]/g,"");var a="0123456789";var g=h.length;var f=parseInt(h,0);var l=h.toString();l=l.replace(/^\s+|\s+$/g,"");var k=0;var n=true;var b=false;var m;var d;for(var c=0;c<g;c++){m=""+l.substring(c,c+1);if(a.indexOf(m)=="-1"){n=false}}if(!n){b=false}if((g===0)&&(b)){b=false}else{if(g>=15){for(var e=g;e>0;e--){d=parseInt(f,0)%10;d=parseInt(d,0);k+=d;e--;f=f/10;d=parseInt(f,0)%10;d=d*2;switch(d){case 10:d=1;break;case 12:d=3;break;case 14:d=5;break;case 16:d=7;break;case 18:d=9;break;default:d=d}f=f/10;k+=d}if((k%10)===0){b=true}else{b=false}}}return b}});sc_require("validators/validator");SC.Validator.Date=SC.Validator.extend({format:"%b %d, %Y %i:%M:%S %p",fieldValueForObject:function(a,b,e){var d=this.get("format"),c;if(SC.typeOf(a)===SC.T_NUMBER){c=SC.DateTime.create(a)}else{if(a instanceof Date){c=a.getTime()}}if(c){a=c.toFormattedString(d)}return a},objectForFieldValue:function(c,a,e){var d=this.get("format"),b;if(c){b=SC.DateTime.parse(c,d);c=b?b._ms:null}return c}});sc_require("validators/validator");SC.Validator.DateTime=SC.Validator.extend({format:"%d/%m/%Y",fieldValueForObject:function(a,b,c){if(SC.kindOf(a,SC.DateTime)){a=a.toFormattedString(this.get("format"))}else{a=null}return a},objectForFieldValue:function(b,a,c){if(b){b=SC.DateTime.parse(b,this.get("format"))}return b}});sc_require("validators/validator");SC.Validator.Email=SC.Validator.extend({validate:function(a,b){return(b.get("fieldValue")||"").match(/.+@.+\...+/)},validateError:function(b,c){var a=c.get("errorLabel")||"Field";return SC.$error(SC.String.loc("Invalid.Email(%@)",a),a)}});SC.Validator.EmailOrEmpty=SC.Validator.Email.extend({validate:function(a,c){var b=c.get("fieldValue");return(b&&b.length>0)?b.match(/.+@.+\...+/):true}});sc_require("validators/validator");SC.Validator.NotEmpty=SC.Validator.extend({validate:function(a,c){var b=c.get("fieldValue");if(SC.none(b)){return NO}if(!SC.none(b.length)){return b.length>0}return YES},validateError:function(b,c){var a=c.get("errorLabel")||"Field";return SC.$error(SC.String.loc("Invalid.NotEmpty(%@)",SC.String.capitalize(a)),c.get("errorLabel"))}});sc_require("validators/validator");sc_require("system/utils/misc");SC.Validator.Number=SC.Validator.extend({places:0,fieldValueForObject:function(a,b,c){switch(SC.typeOf(a)){case SC.T_NUMBER:a=a.toFixed(this.get("places"));break;case SC.T_NULL:case SC.T_UNDEFINED:a="";break}return a},objectForFieldValue:function(c,b,d){var a;c=c.replace(/,/g,"");switch(SC.typeOf(c)){case SC.T_STRING:if(c.length===0){c=null}else{if(this.get("places")>0){c=parseFloat(c)}else{if(c.length===1&&c.match(/-/)){c=null}else{a=parseInt(c,0);if(isNaN(a)){c=SC.uniJapaneseConvert(c);c=parseInt(c,0);if(isNaN(c)){c=""}}else{c=a}}}}break;case SC.T_NULL:case SC.T_UNDEFINED:c=null;break}return c},validate:function(a,c){var b=c.get("fieldValue");return(b==="")||!(isNaN(b)||isNaN(parseFloat(b)))},validateError:function(b,c){var a=c.get("errorLabel")||"Field";return SC.$error(SC.String.loc("Invalid.Number(%@)",a),a)},validateKeyDown:function(b,c,a){if(!a){a=""}var d=c.$input().val();if(!d){d=""}d+=a;if(this.get("places")===0){if(a.length===0){return true}else{return d.match(/^[\-{0,1}]?[0-9,\0]*/)[0]===d}}else{if(a.length===0){return true}else{return d.match(/^[\-{0,1}]?[0-9,\0]*\.?[0-9\0]+/)===d}}}});sc_require("validators/validator");SC.Validator.Password=SC.Validator.extend({attachTo:function(a,b){arguments.callee.base.apply(this,arguments);if(!this.fields){this.fields=[]}this.fields.push(b)},validate:function(e){if(!this.fields||this.fields.length===0){return true}var d=false;var b=false;var a=true;var c=this.fields[0].get("fieldValue");this.fields.forEach(function(g){var f=g.get("fieldValue");if(f!=c){a=false}if(!f||f.length===0){d=true}if(f&&f.length>0){b=true}});if(e){return(b===false)?false:a}else{return(d===true)?true:a}},updateFields:function(c,b){if(!this.fields||this.fields.length===0){return true}var a=SC.String.loc("Invalid.Password");var d=this._field;this.fields.forEach(function(e){var g=(b)?null:((e==d)?a:"");c.setErrorFor(e,g)});return(b)?SC.VALIDATE_OK:a},validateChange:function(b,c,a){return this.updateFields(b,this.validate(false))},validateSubmit:function(a,b){return this.updateFields(a,this.validate(true))},validatePartial:function(b,c){var a=!this._field.get("isValid");if(a){return this.updateFields(b,this.validate(false))}else{return SC.VALIDATE_NO_CHANGE}}});sc_require("validators/validator");SC.Validator.PositiveInteger=SC.Validator.extend({defaultValue:null,fieldValueForObject:function(a,b,c){switch(SC.typeOf(a)){case SC.T_NUMBER:a=a.toFixed(0);break;case SC.T_NULL:case SC.T_UNDEFINED:a=this.get("defaultValue");break}return a},objectForFieldValue:function(b,a,c){b=b.replace(/,/g,"");switch(SC.typeOf(b)){case SC.T_STRING:if(b.length===0){b=this.get("defaultValue")}else{b=parseInt(b,0)}break;case SC.T_NULL:case SC.T_UNDEFINED:b=this.get("defaultValue");break}if(isNaN(b)){return this.get("defaultValue")}return b},validate:function(a,c){var b=c.get("fieldValue");return(b==="")||!isNaN(b)},validateError:function(b,c){var a=c.get("errorLabel")||"Field";return SC.$error(SC.String.loc("Invalid.Number(%@)",a),a)},validateKeyDown:function(b,c,a){var d=c.$input().val();if(!d){d=""}d+=a;if(a.length===0){return true}else{return d.match(/^[0-9\0]*/)[0]===d}}});sc_require("mixins/validatable");SC.FieldView=SC.View.extend(SC.Control,SC.Validatable,{fieldValue:function(){var a=this.get("value");if(SC.typeOf(a)===SC.T_ERROR){a=a.get("errorValue")}return this.fieldValueForObject(a)}.property("value","validator").cacheable(),$input:function(){var a=this._inputElementTagName();return this.$(a).andSelf().filter(a)},_inputElementTagName:function(){return"input"},setFieldValue:function(b){if(SC.none(b)){b=""}var a=this.$input();if(a.val()!==b){a.val(b)}return this},getFieldValue:function(){return this.$input().val()},_field_fieldValueDidChange:function(a){SC.run(function(){this.fieldValueDidChange(NO)},this)},fieldValueDidChange:function(a){var c=this.getFieldValue();var b=this.objectForFieldValue(c,a);this.setIfChanged("value",b)},_field_valueDidChange:function(){this.setFieldValue(this.get("fieldValue"))}.observes("fieldValue"),didCreateLayer:function(){this.setFieldValue(this.get("fieldValue"));this._addChangeEvent()},willDestroyLayer:function(){SC.Event.remove(this.$input(),"change",this,this._field_fieldValueDidChange)},mouseDown:function(a){this._field_isMouseDown=YES;a.allowDefault();return YES},mouseExited:function(a){if(this._field_isMouseDown){this.set("isActive",NO)}a.allowDefault();return YES},mouseEntered:function(a){this.set("isActive",this._field_isMouseDown);a.allowDefault();return YES},mouseUp:function(a){if(this._field_isMouseDown){this.set("isActive",NO)}this._field_isMouseDown=NO;a.allowDefault();return YES},keyDown:function(b){if(b.which===9||b.keyCode===9){var a=b.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES}if(this.performValidateKeyDown(b)){this._isKeyDown=YES;b.allowDefault()}else{b.stop()}return YES},acceptsFirstResponder:function(){if(SC.FOCUS_ALL_CONTROLS){return this.get("isEnabledInPane")}return NO}.property("isEnabledInPane"),_addChangeEvent:function(){SC.Event.add(this.$input(),"change",this,this._field_fieldValueDidChange)},_field_setFieldValue:function(b){this.propertyWillChange("fieldValue");if(this.fieldValueForObject){b=this.fieldValueForObject(b)}var a=this.setFieldValue(b);this.propertyDidChange("fieldValue");return a},_field_getFieldValue:function(){var a=this.getFieldValue();if(this.objectForFieldValue){a=this.objectForFieldValue(a)}return a}});SC.IMAGE_STATE_NONE="none";SC.IMAGE_STATE_LOADING="loading";SC.IMAGE_STATE_LOADED="loaded";SC.IMAGE_STATE_FAILED="failed";SC.IMAGE_TYPE_NONE="NONE";SC.IMAGE_TYPE_URL="URL";SC.IMAGE_TYPE_CSS_CLASS="CSS_CLASS";SC.BLANK_IMAGE_DATAURL="data:image/gif;base64,R0lGODlhAQABAJAAAP///wAAACH5BAUQAAAALAAAAAABAAEAAAICBAEAOw==";SC.BLANK_IMAGE_URL=SC.browser.isIE&&SC.browser.compare(SC.browser.version,"8")<=0?"/static/sproutcore/foundation/en/92bb4195a150bffb35c7c646fe75828d66bd61de/source/resources/blank.gif":SC.BLANK_IMAGE_DATAURL;SC.BLANK_IMAGE=new Image();SC.BLANK_IMAGE.src=SC.BLANK_IMAGE_URL;SC.BLANK_IMAGE.width=SC.BLANK_IMAGE.height=1;SC.ImageView=SC.View.extend(SC.Control,SC.InnerFrame,{classNames:"sc-image-view",displayProperties:["align","scale","value","displayToolTip"],renderDelegateName:function(){return(this.get("useCanvas")?"canvasImage":"image")+"RenderDelegate"}.property("useCanvas").cacheable(),tagName:function(){return this.get("useCanvas")?"canvas":"div"}.property("useCanvas").cacheable(),canLoadInBackground:NO,image:SC.BLANK_IMAGE,innerFrame:function(){var c=this.get("image"),b=c.width,a=c.height,d=this.get("frame");if(SC.none(d)){return{x:0,y:0,width:0,height:0}}return this.innerFrameForSize(b,a,d.width,d.height)}.property("align","image","scale","frame").cacheable(),localize:YES,status:SC.IMAGE_STATE_NONE,type:function(){var a=this.get("value");if(SC.ImageView.valueIsUrl(a)){return SC.IMAGE_TYPE_URL}else{if(!SC.none(a)){return SC.IMAGE_TYPE_CSS_CLASS}}return SC.IMAGE_TYPE_NONE}.property("value").cacheable(),useCanvas:function(){return SC.platform.supportsCanvas&&!this.get("useStaticLayout")}.property("useStaticLayout").cacheable(),useImageQueue:YES,value:null,valueBindingDefault:SC.Binding.oneWay(),viewDidResize:function(){arguments.callee.base.apply(this,arguments);if(this.get("useStaticLayout")){if(this._updatingOnce){this._updatingOnce=false}else{this._updatingOnce=true;this.updateLayerIfNeeded()}}else{this.updateLayerIfNeeded()}},init:function(){arguments.callee.base.apply(this,arguments);this._valueDidChange();if(this.get("useImageCache")!==undefined){this.set("useImageQueue",this.get("useImageCache"))}},didAppendToDocument:function(){if(this.get("useStaticLayout")){this.updateLayerIfNeeded()}},didCreateLayer:function(){if(this.get("useCanvas")){this.updateLayerIfNeeded()}},_valueDidChange:function(){var b=this.get("value"),a=this.get("type");this.set("image",SC.BLANK_IMAGE);if(a==SC.IMAGE_TYPE_URL){this.set("status",SC.IMAGE_STATE_LOADING);if(!this._loadImageUsingCache()){this._loadImage()}}}.observes("value"),_loadImageUsingCache:function(){var c=this.get("value"),b=this.get("type");if(b===SC.IMAGE_TYPE_URL&&this.get("useImageQueue")){var a=this.get("isVisibleInWindow")||this.get("canLoadInBackground");SC.imageQueue.loadImage(c,this,this._loadImageUsingCacheDidComplete,a);return YES}return NO},_loadImageUsingCacheDidComplete:function(a,c){var b=this.get("value");if(b===a){if(SC.ok(c)){this.didLoad(c)}else{this.didError(c)}}},_loadImage:function(){var d=this.get("value"),b=this.get("type"),c=this,f,a;if(b===SC.IMAGE_TYPE_URL){f=new Image();var e=function(){SC.run(function(){c._loadImageDidComplete(d,SC.$error("SC.Image.FailedError","Image",-101))})};var g=function(){SC.run(function(){c._loadImageDidComplete(d,f)})};a=$(f);a.bind("error",e);a.bind("abort",e);a.bind("load",g);f.src=d;return YES}return NO},_loadImageDidComplete:function(a,c){var b=this.get("value");if(b===a){if(SC.ok(c)){this.didLoad(c)}else{this.didError(c)}}},didLoad:function(a){this.set("status",SC.IMAGE_STATE_LOADED);if(!a){a=SC.BLANK_IMAGE}this.set("image",a);this.displayDidChange()},didError:function(a){this.set("status",SC.IMAGE_STATE_FAILED);this.set("image",SC.BLANK_IMAGE)}});SC.ImageView.valueIsUrl=function(a){return a&&SC.typeOf(a)===SC.T_STRING?a.indexOf("/")>=0:NO};sc_require("views/field");sc_require("system/text_selection");sc_require("mixins/editable");SC.AUTOCAPITALIZE_NONE="none";SC.AUTOCAPITALIZE_SENTENCES="sentences";SC.AUTOCAPITALIZE_WORDS="words";SC.AUTOCAPITALIZE_CHARACTERS="characters";SC.TextFieldView=SC.FieldView.extend(SC.Editable,{classNames:["sc-text-field-view"],isTextField:true,applyImmediately:true,commitOnBlur:true,isTextArea:false,focused:false,hint:"",type:"text",isBrowserFocusable:true,autoCorrect:true,autoCapitalize:SC.CAPITALIZE_SENTENCES,autoComplete:null,formattedHint:function(){var a=this.get("hint");a=typeof(a)==="string"&&this.get("localize")?SC.String.loc(a):a;if(this.get("useHintOverlay")){a=this.get("escapeHTML")?SC.RenderContext.escapeHTML(a):a}return a}.property("hint","localize").cacheable(),hintOnFocus:true,localize:true,isEditing:false,defaultTabbingEnabled:true,isContextMenuEnabled:true,allowsErrorAsValue:true,leftAccessoryView:null,rightAccessoryView:null,spellCheckEnabled:true,maxLength:5096,shouldRenderBorder:true,supportsAutoResize:true,autoResizeLayer:function(){return this.$input()[0]}.property("layer").cacheable(),autoResizeText:function(){return this.get("value")}.property("value").cacheable(),autoResizePadding:SC.propertyFromRenderDelegate("autoResizePadding",20),isEditable:true,selection:function(m,l){var d=this.$input()[0],j="none",f,a,c;if(l===undefined){if(d){a=null;c=null;if(!d.value){a=c=0}else{try{if(SC.platform.input.selectionStart){a=d.selectionStart}if(SC.platform.input.selectionEnd){c=d.selectionEnd}if(SC.platform.input.selectionDirection){j=d.selectionDirection}}catch(g){return null}if(a===null||c===null){var k=document.selection;if(k){var i=k.type;if(i&&(i==="None"||i==="Text")){f=k.createRange();if(!this.get("isTextArea")){var b=f.text.length;a=Math.abs(f.moveStart("character",0-(d.value.length+1)));c=a+b}else{var h=f.duplicate();h.moveToElementText(d);h.setEndPoint("EndToStart",f);a=h.text.length;c=a+f.text.length}}}}}return SC.TextSelection.create({start:a,end:c,direction:j})}else{return null}}else{if(!l||!l.kindOf||!l.kindOf(SC.TextSelection)){throw new Error("When setting the selection, you must specify an SC.TextSelection instance.")}if(d){if(d.setSelectionRange){try{d.setSelectionRange(l.get("start"),l.get("end"),l.get("direction"))}catch(g){return null}if(!SC.platform.input.selectionDirection){l.set("direction","none")}}else{f=d.createTextRange();a=l.get("start");f.move("character",a);f.moveEnd("character",l.get("end")-a);f.select()}}return l}}.property("fieldValue").cacheable(),useHintOverlay:function(){return this.get("hintOnFocus")||!SC.platform.input.placeholder}.property().cacheable(),displayProperties:["isBrowserFocusable","formattedHint","fieldValue","isEditing","isEditable","isEnabledInPane","leftAccessoryView","rightAccessoryView","isTextArea","maxLength"],createChildViews:function(){arguments.callee.base.apply(this,arguments);this.accessoryViewObserver()},acceptsFirstResponder:function(){return this.get("isEnabledInPane")}.property("isEnabledInPane"),accessoryViewObserver:function(){var a,c=["leftAccessoryView","rightAccessoryView"],f=c.length,d,g,b,j;for(d=0;d<f;d++){g=c[d];b=this["_"+g];j=this.get(g);if(!(b&&j&&(b===j))){if(b){a=b.get("classNames");a=a.without("sc-text-field-accessory-view");b.set("classNames",a);if(b.createdByParent){this.removeChildAndDestroy(b)}else{this.removeChild(b)}b=this["_"+g]=this["_created"+g]=null}if(j){j=this.createChildView(j);if(g==="rightAccessoryView"){var e=j.get("layout");j.adjust({left:null,right:e.right||0})}a=j.get("classNames");var h="sc-text-field-accessory-view";if(a.indexOf(h)<0){a=SC.clone(a);a.push(h);j.set("classNames",a)}this.appendChild(j);this["_"+g]=j}}}}.observes("leftAccessoryView","rightAccessoryView"),render:function(e,f){var a,d,c,b;a=this.get("fieldValue");if(SC.none(a)){a=""}a=String(a);e.setClass("not-empty",a.length>0);d=this._getAccessoryViewWidths();c=d.left;b=d.right;if(c){c+="px"}if(b){b+="px"}this._renderField(e,f,a,c,b)},_forceRenderFirstTime:false,_renderFieldLikeFirstTime:function(){this.set("_forceRenderFirstTime",true)}.observes("isTextArea"),_renderField:function(f,l,z,j,u){var v=this.get("formattedHint"),d="",k=this.get("maxLength"),x=this.get("isTextArea"),i=this.get("isEnabledInPane"),q=this.get("isEditable"),w=this.get("autoCorrect"),B=this.get("autoCapitalize"),E=this.get("autoComplete"),o=this.get("isBrowserFocusable"),D="",e="",c="",s="",n="",m="",C,A,g,p,h,a;f.setClass("text-area",x);a=SC.browser.isWebkit&&SC.browser.compare(SC.browser.engineVersion,"532")<0;f.setClass("oldWebKitFieldPadding",a);if(l||this._forceRenderFirstTime){this._forceRenderFirstTime=false;n=i?(q?"":' readonly="readonly"'):' disabled="disabled"';C=this.get("layerId");D=this.get("spellCheckEnabled")?' spellcheck="true"':' spellcheck="false"';if(!SC.none(w)){c=" autocorrect="+(!w?'"off"':'"on"')}if(!SC.none(B)){if(SC.typeOf(B)==="boolean"){e=" autocapitalize="+(!B?'"none"':'"sentences"')}else{e=" autocapitalize="+B}}if(!SC.none(E)){s=" autocomplete="+(!E?'"off"':'"on"')}if(!o){m=' tabindex="-1"'}if(this.get("shouldRenderBorder")){f.push('<div class="border"></div>')}A="";if(j||u){A='style="';if(j){A+="left:"+j+";"}if(u){A+="right:"+u+";"}A+='"'}f.push('<div class="padding" '+A+">");z=this.get("escapeHTML")?SC.RenderContext.escapeHTML(z):z;if(this.get("useHintOverlay")){var y='<div aria-hidden="true" class="hint '+(x?"":"ellipsis")+'%@">'+v+"</div>";f.push(y.fmt(z?" sc-hidden":""))}else{d=' placeholder="'+v+'"'}h="field";if(x){f.push('<textarea aria-label="'+v+'" class="'+h+'" aria-multiline="true"" name="'+C+'"'+n+d+D+c+e+m+' maxlength="'+k+'">'+z+"</textarea></div>")}else{g=this.get("type");f.push('<input aria-label="'+v+'" class="'+h+'" type="'+g+'" name="'+C+'"'+n+d+D+c+e+s+m+' maxlength="'+k+'" value="'+z+'"/></div>')}}else{var r=this.$input(),b=r[0];if(this.get("useHintOverlay")){f.$(".hint")[0].innerHTML=v}else{r.attr("placeholder",v)}r.attr("maxLength",k);if(SC.browser.name===SC.BROWSER.ie&&SC.browser.version<=8&&!x){r.css("line-height",this.get("frame").height+"px")}if(!SC.none(w)){r.attr("autocorrect",!w?"off":"on")}else{r.attr("autocorrect",null)}if(!SC.none(B)){if(SC.typeOf(B)=="boolean"){r.attr("autocapitalize",!B?"none":"sentences")}else{r.attr("autocapitalize",B)}}else{r.attr("autocapitalize",null)}if(!SC.none(E)){r.attr("autoComplete",!E?"off":"on")}else{r.attr("autoComplete",null)}if(o){r.removeAttr("tabindex")}else{r.attr("tabindex","-1")}if(!q){r.attr("readOnly",true)}else{r.attr("readOnly",null)}if(b){p=b.parentNode.style;if(j){if(p.left!==j){p.left=j}}else{p.left=null}if(u){if(p.right!==u){p.right=u}}else{p.right=null}}}},_getAccessoryViewWidths:function(){var c={},j=["left","right"],d=j.length,f,g,k,a,h,e,b;for(f=0;f<d;f++){g=j[f];k=this["_"+g+"AccessoryView"];if(k&&k.isObservable){b=k.get("frame");if(b){a=b.width;if(a){h=k.get("layout");if(h){e=h[g];a+=e}c[g]=a}}}}return c},didCreateLayer:function(){arguments.callee.base.apply(this,arguments);if(this.get("isTextArea")){this.invokeLast(this._addTextAreaEvents)}else{this._addTextAreaEvents();if(SC.browser.isMozilla){var a=this.$input();SC.Event.add(a,"keypress",this,this._firefox_dispatch_keypress)}}},didAppendToDocument:function(){this._fixupTextLayout()},_fixupTextLayout:function(){var a=this.get("frame").height;if(SC.browser.name===SC.BROWSER.ie&&SC.browser.version<=8&&!this.get("isTextArea")){this.$input().css("line-height",a+"px")}if(this.get("useHintOverlay")&&!this.get("isTextArea")){var b=this.$(".hint");b.css("line-height",b.outerHeight()+"px")}},_addTextAreaEvents:function(){var a=this.$input();SC.Event.add(a,"focus",this,this._textField_fieldDidFocus);SC.Event.add(a,"blur",this,this._textField_fieldDidBlur);SC.Event.add(a,"select",this,this._textField_selectionDidChange);SC.Event.add(a,"input",this,this._textField_inputDidChange)},willDestroyLayer:function(){arguments.callee.base.apply(this,arguments);var a=this.$input();SC.Event.remove(a,"focus",this,this._textField_fieldDidFocus);SC.Event.remove(a,"blur",this,this._textField_fieldDidBlur);SC.Event.remove(a,"select",this,this._textField_selectionDidChange);SC.Event.remove(a,"keypress",this,this._firefox_dispatch_keypress);SC.Event.remove(a,"input",this,this._textField_inputDidChange)},_textField_fieldDidFocus:function(a){SC.run(function(){this.set("focused",true);this.fieldDidFocus(a)},this)},_textField_fieldDidBlur:function(a){SC.run(function(){this.set("focused",false);this.fieldDidBlur(this._origEvent||a)},this)},fieldDidFocus:function(a){this.becomeFirstResponder();this.beginEditing(a);if(this._didHideInterceptForPane){this._didHideInterceptForPane.showTouchIntercept();this._didHideInterceptForPane=null}var b=this.get("pane");if(b&&b.get("hasTouchIntercept")){b.hideTouchIntercept();this._didHideInterceptForPane=this.get("pane")}},fieldDidBlur:function(a){this.resignFirstResponder(a);if(this.get("commitOnBlur")){this.commitEditing(a)}var b=this._didHideInterceptForPane;if(b){b.showTouchIntercept();b=null}},_field_fieldValueDidChange:function(a){if(this.get("focused")){SC.run(function(){this.fieldValueDidChange(false)},this)}this.updateHintOnFocus()},_textField_inputDidChange:function(){var a=SC.empty(this._fieldValueDidChangeTimer)||!this._fieldValueDidChangeTimer.get("isValid");if(this.get("applyImmediately")&&a){this.invokeLater(this.fieldValueDidChange,10)}},updateHintOnFocus:function(){if(!this.get("useHintOverlay")){return}if(this.getFieldValue()){this.$(".hint").addClass("sc-hidden")}else{this.$(".hint").removeClass("sc-hidden");this._fixupTextLayout()}}.observes("value"),_topOffsetForFirefoxCursorFix:3,_firefox_dispatch_keypress:function(a){var d=this.get("selection"),e=this.get("value"),c=e?e.length:0,b;if(!d||((d.get("length")===0&&(d.get("start")===0)||d.get("end")===c))){b=SC.RootResponder.responder;if(a.keyCode===9){return}b.keypress.call(b,a);a.stopPropagation()}},_textField_selectionDidChange:function(){this.notifyPropertyChange("selection")},didBecomeKeyResponderFrom:function(a){if(this.get("isVisibleInWindow")){var b=this.$input()[0];try{if(b){b.focus()}}catch(c){}if(!this._txtFieldMouseDown){this.invokeLast(this._selectRootElement)}}},_selectRootElement:function(){var b=this.$input()[0],a;if(b){a=SC.browser.os===SC.OS.mac&&SC.browser.compare(SC.browser.osVersion,"10.7")===0;if(!(SC.browser.name===SC.BROWSER.safari&&a&&SC.buildLocale==="ko-kr")){b.select()}}else{this._textField_selectionDidChange()}},didLoseKeyResponderTo:function(a){var b=this.$input()[0];if(b){b.blur()}this.invokeLater("scrollToOriginIfNeeded",100)},scrollToOriginIfNeeded:function(){var b=this.get("pane");if(!b){return}var a=b.get("firstResponder");if(!a||!a.get("isTextField")){document.body.scrollTop=document.body.scrollLeft=0}},keyDown:function(a){return this.interpretKeyEvents(a)||false},insertText:function(c,a){var f=a.which,d=a.keyCode,b=false;if(!SC.platform.input.maxlength&&this.get("isTextArea")){var e=this.get("value");if(e&&((!SC.browser.isMozilla&&f>47)||(SC.browser.isMozilla&&((f>32&&f<43)||f>47)&&!(d>36&&d<41)))&&(e.length>=this.get("maxLength"))){b=true}}if(this.performValidateKeyDown(a)&&!b){a.allowDefault()}else{a.stop()}if(this.get("applyImmediately")){this._fieldValueDidChangeTimer=this.invokeLater(this.fieldValueDidChange,10)}return true},insertTab:function(b){if(!this.get("defaultTabbingEnabled")){b.preventDefault();return false}var a=this.get("nextValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return true},insertBacktab:function(b){if(!this.get("defaultTabbingEnabled")){b.preventDefault();return false}var a=this.get("previousValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return true},insertNewline:function(a){if(this.get("isTextArea")||a.isIMEInput){a.allowDefault();return true}return false},deleteForward:function(a){a.allowDefault();return true},deleteBackward:function(a){a.allowDefault();return true},moveLeft:function(a){a.allowDefault();return true},moveRight:function(a){a.allowDefault();return true},selectAll:function(a){a.allowDefault();return true},moveUp:function(a){if(this.get("isTextArea")){a.allowDefault();return true}return false},moveDown:function(a){if(this.get("isTextArea")){a.allowDefault();return true}return false},keyUp:function(a){if(SC.browser.isMozilla&&a.keyCode===SC.Event.KEY_RETURN){this.fieldValueDidChange()}this.notifyPropertyChange("selection");a.allowDefault();return true},mouseDown:function(a){if(!this.get("isEnabledInPane")){a.stop();return true}else{this._txtFieldMouseDown=true;this.becomeFirstResponder();return arguments.callee.base.apply(this,arguments)}},mouseUp:function(a){this._txtFieldMouseDown=false;if(!this.get("isEnabledInPane")){a.stop();return true}this.notifyPropertyChange("selection");return arguments.callee.base.apply(this,arguments)},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)},mouseWheel:function(a){if(this.get("isTextArea")){a.allowDefault();return true}else{return false}},selectStart:function(a){return true},_inputElementTagName:function(){if(this.get("isTextArea")){return"textarea"}else{return"input"}},_valueObserver:function(){var b=this.get("value"),a;if(b&&b.length>0){a=this.get("maxLength");if(!SC.platform.input.maxlength&&b.length>a){this.set("value",b.substr(0,a))}}}.observes("value")});sc_require("views/text_field");sc_require("system/utils/misc");sc_require("delegates/inline_text_field");sc_require("mixins/inline_editor");SC.InlineTextFieldView=SC.TextFieldView.extend(SC.InlineEditor,{classNames:["inline-editor"],_topOffsetForFirefoxCursorFix:0,layout:{height:0,width:0},useAbsoluteLayout:YES,_updateViewStyle:function(b){var c="",a=SC.getStyle(b,"font-size");if(a&&a.length>0){c=c+"font-size: "+a+" !important; "}a=SC.getStyle(b,"font-family");if(a&&a.length>0){c=c+"font-family: "+a+" !important; "}a=SC.getStyle(b,"font-weight");if(a&&a.length>0){c=c+"font-weight: "+a+" !important; "}a=SC.getStyle(b,"z-index");if(a&&a.length>0){c=c+"z-index: "+a+" !important; "}a=SC.getStyle(b,"line-height");if(a&&a.length>0){c=c+"line-height: "+a+" !important; "}a=SC.getStyle(b,"text-align");if(a&&a.length>0){c=c+"text-align: "+a+" !important; "}a=SC.getStyle(b,"top-margin");if(a&&a.length>0){c=c+"top-margin: "+a+" !important; "}a=SC.getStyle(b,"bottom-margin");if(a&&a.length>0){c=c+"bottom-margin: "+a+" !important; "}a=SC.getStyle(b,"left-margin");if(a&&a.length>0){c=c+"left-margin: "+a+" !important; "}a=SC.getStyle(b,"right-margin");if(a&&a.length>0){c=c+"right-margin: "+a+" !important; "}return c},_updateViewPaddingStyle:function(b){var c="",a=SC.getStyle(b,"padding-top");if(a&&a.length>0){c=c+"top: "+a+" !important; "}a=SC.getStyle(b,"padding-bottom");if(a&&a.length>0){c=c+"bottom: "+a+" !important; "}a=SC.getStyle(b,"padding-left");if(a&&a.length>0){c=c+"left: "+a+" !important; "}a=SC.getStyle(b,"padding-right");if(a&&a.length>0){c=c+"right: "+a+" !important; "}return c},updateStyle:function(d){if(d.length){d=d[0]}var a=document.getElementById("sc-inline-text-field-style"),c=this._updateViewStyle(d),e=this._updateViewPaddingStyle(d),f=".inline-editor input{"+c+"}.inline-editor textarea{"+c+"}.inline-editor .padding{"+e+"}";if(!a){var b=document.getElementsByTagName("head")[0];a=document.createElement("style");a.type="text/css";a.media="screen";a.id="sc-inline-text-field-style";b.appendChild(a)}if(a.styleSheet){a.styleSheet.cssText=f}else{a.innerHTML=f}},positionOverTargetView:function(g,f,e,a,b){var d=g.get("layout"),c={};if(!SC.none(a)){f=a;e=b}if(f&&e){var h=SC.offset(e,"parent");c.top=d.top+h.y-f.height/2;c.left=d.left+h.x;c.height=f.height;c.width=f.width}else{c=SC.copy(d)}this.set("layout",c)},multiline:NO,isTextArea:function(){return this.get("multiline")}.property("multiline").cacheable(),beginEditing:function(b,a){if(!b(a)){return NO}var d=a.get("pane"),c=this.get("exampleElement");this.beginPropertyChanges();if(a.multiline){this.set("multiline",a.multiline)}if(c){if(c.length){c=c[0]}}else{c=a.$()[0]}this.updateStyle(c);this.positionOverTargetView(a,this.get("exampleFrame"),c);this._previousFirstResponder=d?d.get("firstResponder"):null;this.becomeFirstResponder();this.endPropertyChanges();return YES}.enhance(),blurEditor:function(a){if(this.get("isEditing")){return this.commitOnBlur?this.commitEditing():this.discardEditing()}else{return true}},_endEditing:function(b){var a=b();if(this.get("isFirstResponder")){var c=this.get("pane");if(c&&this._previousFirstResponder){c.makeFirstResponder(this._previousFirstResponder)}else{this.resignFirstResponder()}}this._previousFirstResponder=null;return a}.enhance(),mouseDown:function(a){arguments.callee.base.call(this,a);return this.get("isEditing")},touchStart:function(a){this.mouseDown(a)},_scitf_blurInput:function(){var a=this.$input()[0];if(a){a.blur()}a=null},willRemoveFromParent:function(){return this._scitf_blurInput()},willLoseFirstResponder:function(b,a){if(b!==this){return}this._previousFirstResponder=null;this._origEvent=a;this._scitf_blurInput();return this.blurEditor(a)},cancel:function(){this.discardEditing();return YES},insertNewline:function(a){if(this.get("isTextArea")){return arguments.callee.base.apply(this,arguments)}else{this.commitEditing();return YES}},insertTab:function(a){var c=this.target;this.resignFirstResponder();if(c){var b=c.get("nextValidKeyView");if(b&&b.beginEditing){b.beginEditing()}}return YES},insertBacktab:function(a){var c=this.target;this.resignFirstResponder();if(c){var b=c.get("previousValidKeyView");if(b&&b.beginEditing){b.beginEditing()}}return YES}});sc_require("mixins/inline_editable");sc_require("mixins/inline_editor_delegate");sc_require("delegates/inline_text_field");SC.LabelView=SC.View.extend(SC.Control,SC.InlineEditable,{classNames:["sc-label-view"],displayProperties:["displayTitle","displayHint","displayToolTip","icon"],inlineEditorDelegate:SC.InlineTextFieldDelegate,isEditable:NO,exampleEditor:SC.InlineTextFieldView,escapeHTML:true,localize:NO,localizeBindingDefault:SC.Binding.oneWay().bool(),needsEllipsis:false,formatter:null,value:"",hint:null,hintEnabled:function(){return this.get("isEditable")}.property("isEditable").cacheable(),icon:null,textAlign:null,supportsAutoResize:YES,autoResizeLayer:function(){return this.get("layer")}.property("layer").cacheable(),autoResizeText:function(){return this.get("displayTitle")}.property("displayTitle").cacheable(),autoResizePadding:SC.propertyFromRenderDelegate("autoResizePadding",{height:0,width:10}),renderDelegateName:"labelRenderDelegate",displayTitle:function(){var g,e;g=this.get("value");e=this.getDelegateProperty("formatter",this.displayDelegate);if(e){var f=(SC.typeOf(e)===SC.T_FUNCTION)?e(g,this):e.fieldValueForObject(g,this);if(!SC.none(f)){g=f}}if(SC.typeOf(g)===SC.T_ARRAY){var d=[];for(var b=0,c=g.get("length");b<c;b++){var a=g.objectAt(b);if(!SC.none(a)&&a.toString){a=a.toString()}d.push(a)}g=d.join(",")}if(!SC.none(g)&&g.toString){g=g.toString()}if(g&&this.getDelegateProperty("localize",this.displayDelegate)){g=SC.String.loc(g)}return g}.property("value","localize","formatter").cacheable(),displayHint:function(){var b=this.get("hint"),a=this.get("isEditable");if(a){if(b&&this.getDelegateProperty("localize",this.displayDelegate)){b=SC.String.loc(b)}}else{b=null}return b}.property("hint","localize","isEditable").cacheable(),hintValue:function(){var a=this.get("hint");return a}.property("hint").cacheable(),mouseDown:function(a){return this.get("isEditable")&&a.clickCount===2},doubleClick:function(a){return this.beginEditing()},inlineEditorDidBeginEditing:function(b,c,d,a){this._oldOpacity=this.get("layout").opacity||1;this.adjust("opacity",0);b(c,d,a)}.enhance(),inlineEditorDidEndEditing:function(){this.adjust("opacity",this._oldOpacity);this._oldOpacity=null}});SC.allowsBackspaceToPreviousPage=NO;SC.HORIZONTAL_ORIENTATION="horizontal";SC.VERTICAL_ORIENTATION="vertical";SC.CollectionGroup={classNames:["sc-collection-group"]};SC.CollectionRowDelegate={isCollectionRowDelegate:true,itemHeight:null,rowSize:function(b,c){var d=this.get("itemHeight"),a=24;if(!SC.none(d)){return d}if(!SC.none(c)){a=c}return a}.property("itemHeight").cacheable(),rowSpacing:0,rowPadding:0,rowHeight:function(c,d){var a=this.get("rowPadding"),b=this.get("rowSize");if(d!==undefined){this.set("rowSize",d-a*2);return d}return b+a*2}.property("rowSize","rowPadding"),_sc_totalRowSize:function(){return this.get("rowHeight")}.property("rowHeight"),customRowHeightIndexes:null,customRowSizeIndexes:function(c,d){var a=this.get("customRowHeightIndexes"),b=null;if(!SC.none(a)){return a}if(!SC.none(d)){b=d}return b}.property("customRowHeightIndexes").cacheable(),contentIndexRowHeight:function(a,b,c){return this.get("_sc_totalRowSize")},contentIndexRowSize:function(a,b,c){return this.contentIndexRowHeight(a,b,c)}};SC.CollectionViewDelegate={isCollectionViewDelegate:YES,collectionViewSelectionForProposedSelection:function(a,b){return b},collectionViewShouldSelectIndexes:function(a,b,c){return b},collectionViewShouldDeselectIndexes:function(a,b){return b},collectionViewShouldDeleteIndexes:function(a,b){return b},collectionViewDeleteContent:function(a,c,b){if(!c){return NO}if(SC.typeOf(c.destroyAt)===SC.T_FUNCTION){c.destroyAt(b);a.selectPreviousItem(NO,1);return YES}else{if(SC.typeOf(c.removeAt)===SC.T_FUNCTION){c.removeAt(b);a.selectPreviousItem(NO,1);return YES}else{return NO}}},collectionViewShouldBeginDrag:function(a){return YES},collectionViewDragDataTypes:function(a){return[]},collectionViewDragDataForType:function(a,c,b){return null},collectionViewComputeDragOperations:function(a,b,c){return c},collectionViewValidateDragOperation:function(b,d,e,c,a){return(a&SC.DROP_ON)?SC.DRAG_NONE:e},collectionViewPerformDragOperation:function(b,d,e,c,a){return SC.DRAG_NONE},collectionViewDragViewFor:function(a,b){return null},ghostActsLikeCursor:NO};SC.NavigationBuilder={isNavigationBuilder:YES,navigationTransitions:NO,initMixin:function(){var b=SC.Animatable;if(b&&!this.isAnimatable){this.mixin(b)}else{if(!b){SC.Logger.error("SC.NavigationView and SC.NavigationBuilder require SC.Animatable to perform animations, but it is not present. Please ensure your app or framework references it.")}}var a=this.get("navigationTransitions");if(!a&&SC.Animatable){a={left:{duration:0.25,timing:SC.Animatable.TRANSITION_EASE_IN_OUT,action:"navigationBuildDidFinish"},transform:{duration:0.25,timing:SC.Animatable.TRANSITION_EASE_IN_OUT,action:"navigationBuildDidFinish"}}}if(SC.Animatable){SC.mixin(this.transitions,a)}},metrics:function(){var a=this.computeFrameWithParentFrame();return a},transform:function(a){if(SC.platform.supportsCSS3DTransforms){this.adjust("transform","translate3d("+a+"px,0px,0px)")}else{this.adjust("transform","translate("+a+"px,0px)")}},buildInNavigation:function(){var a=this.metrics();this.disableAnimation();this.transform(this.get("buildDirection")===SC.TO_LEFT?a.width:-a.width);this.enableAnimation();this.invokeLater("transform",10,0)},buildOutNavigation:function(){var a=this.metrics();this.transform(this.get("buildDirection")===SC.TO_LEFT?-a.width:a.width)},buildIn:function(){this.buildInNavigation()},buildOut:function(){this.buildOutNavigation()},resetBuild:function(){this.transform(0)},navigationBuildDidFinish:function(){if(this.isBuildingIn){this.buildInDidFinish()}else{if(this.isBuildingOut){this.buildOutDidFinish()}}}};SC.NeedsSplitParent={splitView:function(){var a=this.get("parentView");while(a&&!a.isSplitView){a=a.get("parentView")}return a}.property("parentView").cacheable(),splitViewLayoutDirection:null,splitViewLayoutDirectionBinding:SC.Binding.oneWay("*splitView.layoutDirection")};SC.SplitChild={isSplitDivider:NO,minimumSize:100,maximumSize:undefined,size:undefined,position:0,positionOffset:SC.propertyFromRenderDelegate("splitPositionOffset",0),sizeOffset:SC.propertyFromRenderDelegate("splitSizeOffset",0),canCollapse:NO,collapseAtSize:undefined,autoResizeStyle:undefined,compensatesForMovement:YES,allowsIndirectAdjustments:YES,initMixin:function(){if(!this.splitView){this.mixin(SC.NeedsSplitParent)}},_scsvc_positionOrSizeDidChange:function(){this.invokeOnce("splitChildLayoutDidChange")}.observes("position","size"),splitChildLayoutDidChange:function(){var c=this.get("splitView");if(!c){return}var a=this.get("position")+this.get("positionOffset"),b=this.get("size")+this.get("sizeOffset");if(c.get("layoutDirection")===SC.LAYOUT_HORIZONTAL){this.set("layout",{left:a,width:b,top:0,bottom:0})}else{this.set("layout",{top:a,height:b,right:0,left:0})}},splitViewLayoutDirectionDidChange:function(){this.invokeOnce("splitChildLayoutDidChange")}.observes("splitViewLayoutDirection")};SC.MOVES_AUTOMATIC_CHILD="moves-automatic-child";SC.MOVES_CHILD="moves-child";SC.MOVES_PREVIOUS_CHILD="moves-previous-child";SC.MOVES_NEXT_CHILD="moves-next-child";SC.SplitThumb={movesChild:function(){var a=this,d,c=this.get("splitView"),b=this.get("movesSibling");while(a&&a!==c){d=a;a=a.get("parentView")}if(b===SC.MOVES_NEXT_CHILD){return d.nextView}if(b===SC.MOVES_PREVIOUS_CHILD){return d.previousView}if(b===SC.MOVES_AUTOMATIC_CHILD){if(!d.nextView){return d.previousView}if(!d.previousView){return d.nextView}}return d}.property("splitView","movesSibling").cacheable(),movesSibling:SC.MOVES_AUTOMATIC_CHILD,splitCursorStyle:function(){if(this.get("splitViewLayoutDirection")===SC.LAYOUT_HORIZONTAL){return"ew-resize"}else{return"ns-resize"}}.property("splitViewLayoutDirection").cacheable(),splitCursorStyleDidChange:function(){if(this._isDragging){this.get("splitView").set("splitChildCursorStyle",this.get("splitCursorStyle"))}this.$().css("cursor",this.get("splitCursorStyle"))}.observes("splitCursorStyle"),initMixin:function(){if(!this.splitView){this.mixin(SC.NeedsSplitParent)}},renderMixin:function(a){a.setStyle("cursor",this.get("splitCursorStyle"))},touchStart:function(b){this._isDragging=YES;var a=this.get("splitView");a.beginLiveResize();this._scst_mouseStartPosition=a.get("layoutDirection")===SC.LAYOUT_HORIZONTAL?b.pageX:b.pageY;this._scst_childStartPosition=a.getPositionForChild(this.get("movesChild"));return YES},touchesDragged:function(a){var b=this.get("splitView");var e=b.get("layoutDirection")===SC.LAYOUT_HORIZONTAL?a.pageX:a.pageY;var c=e-this._scst_mouseStartPosition,d=this._scst_childStartPosition;b.adjustPositionForChild(this.get("movesChild"),d+c);return YES},touchEnd:function(e){this._isDragging=NO;var a=this.get("splitView");var d=a.get("layoutDirection")===SC.LAYOUT_HORIZONTAL?e.pageX:e.pageY;var b=d-this._scst_mouseStartPosition,c=this._scst_childStartPosition;a.adjustPositionForChild(this.get("movesChild"),c+b);a.set("splitChildCursorStyle",null);a.endLiveResize();return YES},mouseDown:function(a){var b=this.get("splitView");b.set("splitChildCursorStyle",this.get("splitCursorStyle"));return this.touchStart(a)},mouseDragged:function(a){return this.touchesDragged(a)},mouseUp:function(a){this.get("splitView").set("splitChildCursorStyle",null);return this.touchEnd(a)}};SC.ModalPane=SC.Pane.extend({classNames:"sc-modal",_openPaneCount:0,paneWillAppend:function(e){var d;this._openPaneCount++;if(!this.get("isVisibleInWindow")){this.append()}var c=SC.RootResponder.responder.panes;for(var b=0,a=c.length;b<a;b++){d=c[b];if(d!==e){this._hideShowTextfields(d,NO)}}return this},paneDidRemove:function(e){var d;this._openPaneCount--;var c=SC.RootResponder.responder.panes;for(var b=0,a=c.length;b<a;b++){d=c[b];if(d!==e){this._hideShowTextfields(d,YES)}}if(this._openPaneCount<=0){this._openPaneCount=0;if(this.get("isVisibleInWindow")){this.remove()}}},_hideShowTextfields:function(c,b){var a;for(a in SC.View.views){a=SC.View.views[a];if(a.get("isTextField")&&a!==c&&a.get("pane")===c){if(b){if(a._scmp_isBrowserFocusable!==undefined){b=a._scmp_isBrowserFocusable;delete a._scmp_isBrowserFocusable}}else{a._scmp_isBrowserFocusable=a.get("isBrowserFocusable")}a.set("isBrowserFocusable",b)}}},mouseDown:function(b){var a=this.get("owner");if(a&&a.modalPaneDidClick){a.modalPaneDidClick(b)}},touchStart:function(a){this.mouseDown(a)}});sc_require("panes/modal");SC.PanelPane=SC.Pane.extend({isPanelPane:YES,classNames:["sc-panel"],acceptsKeyPane:YES,ariaRole:"dialog",ariaLabel:null,ariaLabelledBy:null,ariaDescribedBy:null,isModal:YES,modalPane:SC.ModalPane.extend({classNames:"for-sc-panel"}),contentView:null,contentViewBindingDefault:SC.Binding.single(),replaceContent:function(a){this.removeAllChildren();if(a){this.appendChild(a)}},createChildViews:function(){var a=this.contentView;if(a){a=this.contentView=this.createChildView(a);this.childViews=[a]}},contentViewDidChange:function(){this.replaceContent(this.get("contentView"))}.observes("contentView"),renderDelegateName:"panelRenderDelegate",_modalPane:function(){var a=this.get("modalPane");if(a&&a.isClass){a=a.create({owner:this});this.set("modalPane",a)}return a},appendTo:function(a){var b;if(!this.get("isVisibleInWindow")&&this.get("isModal")&&(b=this._modalPane())){this._isShowingModal=YES;b.paneWillAppend(this)}return arguments.callee.base.apply(this,arguments)},remove:function(){var b,a=arguments.callee.base.apply(this,arguments);if(this._isShowingModal){this._isShowingModal=NO;if(b=this._modalPane()){b.paneDidRemove(this)}}return a},destroy:function(){var a=this.get("modalPane");if(a&&!a.isClass){a.destroy()}arguments.callee.base.apply(this,arguments)},_isModalDidChange:function(){var b,a=this.get("isModal");if(a){if(!this._isShowingModal&&this.get("viewState")&SC.CoreView.IS_SHOWN&&(b=this._modalPane())){this._isShowingModal=YES;b.paneWillAppend(this)}}else{if(this._isShowingModal&&(b=this._modalPane())){this._isShowingModal=NO;b.paneDidRemove(this)}}}.observes("isModal"),didShowInDocument:function(){this.becomeKeyPane()},didAppendToDocument:function(){this.becomeKeyPane()},willRemoveFromDocument:function(){this.resignKeyPane()},willHideInDocument:function(){this.resignKeyPane()},displayProperties:["ariaLabel","ariaLabelledBy","ariaDescribedBy"]});SC.TOGGLE_BEHAVIOR="toggle";SC.PUSH_BEHAVIOR="push";SC.TOGGLE_ON_BEHAVIOR="on";SC.TOGGLE_OFF_BEHAVIOR="off";SC.HOLD_BEHAVIOR="hold";SC.ButtonView=SC.View.extend(SC.Control,{acceptsFirstResponder:function(){if(SC.FOCUS_ALL_CONTROLS){return this.get("isEnabledInPane")}return NO}.property("isEnabledInPane"),classNames:["sc-button-view"],escapeHTML:true,themeName:"square",value:null,toggleOnValue:YES,toggleOffValue:NO,localize:NO,localizeBindingDefault:SC.Binding.bool(),title:"",contentTitleKey:null,icon:null,contentIconKey:null,needsEllipsis:YES,displayTitle:function(){var a=this.get("title");return(a&&this.get("localize"))?SC.String.loc(a):(a||"")}.property("title","localize").cacheable(),keyEquivalent:null,buttonBehavior:SC.PUSH_BEHAVIOR,holdInterval:100,isDefault:NO,isDefaultBindingDefault:SC.Binding.oneWay().bool(),isCancel:NO,isCancelBindingDefault:SC.Binding.oneWay().bool(),action:null,target:null,supportFocusRing:NO,supportsAutoResize:YES,autoResizeLayer:function(){var a=this.invokeRenderDelegateMethod("getRenderedAutoResizeLayer",this.$());return a||this.get("layer")}.property("layer").cacheable(),autoResizeText:function(){return this.get("displayTitle")}.property("displayTitle").cacheable(),autoResizePadding:SC.propertyFromRenderDelegate("autoResizePadding",10),_labelMinWidthIE7:0,triggerActionAfterDelay:function(a){if(!this.get("isEnabledInPane")){return NO}this.set("isActive",YES);this.invokeLater("triggerAction",SC.ButtonView.TRIGGER_DELAY,a);return YES},triggerAction:function(a){this._action(a,YES);this.didTriggerAction();this.set("isActive",NO)},didTriggerAction:function(){},init:function(){arguments.callee.base.apply(this,arguments);var a=this.get("keyEquivalent");if(a){this._defaultKeyEquivalent=a}if(!SC.none(this.get("value"))){this._button_valueDidChange()}},ariaRole:"button",displayProperties:["icon","displayTitle","displayToolTip","supportFocusRing","buttonBehavior"],renderDelegateName:"buttonRenderDelegate",contentKeys:{contentValueKey:"value",contentTitleKey:"title",contentIconKey:"icon"},performKeyEquivalent:function(c,b){if(!this.get("isVisibleInWindow")){return NO}if(!this.get("isEnabledInPane")){return NO}var a=this.get("keyEquivalent");if(a){if(a===c){return this.triggerAction(b)}}else{if((this.get("isDefault")&&(c==="return"))||(this.get("isCancel")&&(c==="escape"))){return this.triggerAction(b)}}return NO},computeIsSelectedForValue:function(d){var b=this.get("toggleOnValue"),c,a;if(SC.typeOf(d)===SC.T_ARRAY){if(d.length===1){c=(d[0]==b)}else{c=null;d.find(function(e){a=(e==b);if(c===null){c=a}else{if(a!==c){c=SC.MIXED_STATE}}return c===SC.MIXED_STATE})}}else{if(d===SC.MIXED_STATE){c=SC.MIXED_STATE}else{c=(d===b)}}return c},_button_valueDidChange:function(){var b=this.get("value"),a=this.computeIsSelectedForValue(b);this.set("isSelected",a);this.displayDidChange()}.observes("value"),_button_isSelectedDidChange:function(){var c=this.get("isSelected"),b=this.computeIsSelectedForValue(this.get("value"));if((c!==SC.MIXED_STATE)&&(b!==c)){var a=(c)?"toggleOnValue":"toggleOffValue";this.set("value",this.get(a))}}.observes("isSelected"),_defaultKeyEquivalent:null,_isDefaultOrCancelDidChange:function(){var b=!!this.get("isDefault"),a=!b&&this.get("isCancel");if(b){this.set("keyEquivalent","return")}else{if(a){this.set("keyEquivalent","escape")}else{this.set("keyEquivalent",this._defaultKeyEquivalent)}}this.displayDidChange()}.observes("isDefault","isCancel"),mouseDown:function(a){if(a.which!==1){return false}var b=this.get("buttonBehavior");if(!this.get("isEnabledInPane")){return YES}this.set("isActive",YES);this._isMouseDown=YES;if(b===SC.HOLD_BEHAVIOR){this._action(a)}else{if(!this._isFocused&&(b!==SC.PUSH_BEHAVIOR)){this._isFocused=YES;this.becomeFirstResponder()}}return YES},mouseExited:function(a){if(this._isMouseDown){this.set("isActive",NO)}return YES},mouseEntered:function(a){if(this._isMouseDown){this.set("isActive",YES)}return YES},mouseUp:function(b){if(this._isMouseDown){this.set("isActive",NO)}this._isMouseDown=false;if(this.get("buttonBehavior")!==SC.HOLD_BEHAVIOR){var a=this.$().within(b.target);if(a&&this.get("isEnabledInPane")){this._action(b)}}return YES},touchStart:function(b){var a=this.get("buttonBehavior");if(!this.get("isEnabledInPane")){return YES}this.set("isActive",YES);if(a===SC.HOLD_BEHAVIOR){this._action(b)}else{if(!this._isFocused&&(a!==SC.PUSH_BEHAVIOR)){this._isFocused=YES;this.becomeFirstResponder()}}b.preventDefault();return YES},touchesDragged:function(a,b){if(!this.touchIsInBoundary(a)){if(!this._touch_exited){this.set("isActive",NO)}this._touch_exited=YES}else{if(this._touch_exited){this.set("isActive",YES)}this._touch_exited=NO}a.preventDefault();return YES},touchEnd:function(a){this._touch_exited=NO;this.set("isActive",NO);if(this.get("buttonBehavior")!==SC.HOLD_BEHAVIOR){if(this.touchIsInBoundary(a)&&this.get("isEnabledInPane")){this._action()}}a.preventDefault();return YES},keyDown:function(b){if(!this.get("isEnabledInPane")){return YES}if(b.which===9||b.keyCode===9){var a=b.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES}if(b.which===13||b.which===32){this.triggerActionAfterDelay(b);return YES}b.allowDefault();return NO},_action:function(a,c){switch(this.get("buttonBehavior")){case SC.TOGGLE_BEHAVIOR:var b=this.get("isSelected");if(b){this.set("value",this.get("toggleOffValue"))}else{this.set("value",this.get("toggleOnValue"))}break;case SC.TOGGLE_ON_BEHAVIOR:this.set("value",this.get("toggleOnValue"));break;case SC.TOGGLE_OFF_BEHAVIOR:this.set("value",this.get("toggleOffValue"));break;case SC.HOLD_BEHAVIOR:this._runHoldAction(a,c);break;default:this._runAction(a)}},_runAction:function(a){var c=this.get("action"),d=this.get("target")||null,b;if(c){if(c&&(SC.typeOf(c)===SC.T_FUNCTION)){this.action(a);return}else{b=this.getPath("pane.rootResponder");if(b){b.sendAction(c,d,this,this.get("pane"),null,this)}}}},_runHoldAction:function(a,b){if(this.get("isActive")){this._runAction();if(!b){SC.RunLoop.begin();this.invokeLater("_runHoldAction",this.get("holdInterval"),a);SC.RunLoop.end()}}},didBecomeKeyResponderFrom:function(a){if(!this._isFocused){this._isFocused=YES;this.becomeFirstResponder();if(this.get("isVisibleInWindow")){this.$().focus()}}},willLoseKeyResponderTo:function(a){if(this._isFocused){this._isFocused=NO}},didAppendToDocument:function(){if(SC.browser.isIE&&SC.browser.compare(SC.browser.version,"7")===0&&this.get("useStaticLayout")){var e=this.get("layout"),d=this.$(),a=0;if(d&&d[0]&&(a=d[0].clientWidth)&&a!==0&&this._labelMinWidthIE7===0){var c=this.$(".sc-button-label"),h=parseInt(c.css("paddingRight"),0),b=parseInt(c.css("paddingLeft"),0),g=parseInt(c.css("marginRight"),0),f=parseInt(c.css("marginLeft"),0);if(g=="auto"){SC.Logger.log(g+","+f+","+h+","+b)}if(!h&&isNaN(h)){h=0}if(!b&&isNaN(b)){b=0}if(!g&&isNaN(g)){g=0}if(!f&&isNaN(f)){f=0}this._labelMinWidthIE7=a-(h+b)-(g+f);c.css("minWidth",this._labelMinWidthIE7+"px")}else{this.invokeLater(this.didAppendToDocument,1)}}}});SC.ButtonView.TRIGGER_DELAY=200;SC.ButtonView.CLICK_AND_HOLD_DELAY=SC.browser.isIE?600:300;SC.REGULAR_BUTTON_HEIGHT=24;sc_require("panes/panel");sc_require("views/button");SC.BUTTON1_STATUS="button1";SC.BUTTON2_STATUS="button2";SC.BUTTON3_STATUS="button3";SC.AlertPane=SC.PanelPane.extend({classNames:["sc-alert"],ariaRole:"alertdialog",delegate:null,icon:"sc-icon-alert-48",message:"",ariaLabel:function(){return this.get("message")}.property("message").cacheable(),description:"",displayDescription:function(){var a=this.get("description");if(!a||a.length===0){return a}a=SC.RenderContext.escapeHTML(a);return'<p class="description">'+a.split("\n").join('</p><p class="description">')+"</p>"}.property("description").cacheable(),caption:"",displayCaption:function(){var a=this.get("caption");if(!a||a.length===0){return a}a=SC.RenderContext.escapeHTML(a);return'<p class="caption">'+a.split("\n").join('</p><p class="caption">')+"</p>"}.property("caption").cacheable(),button1:SC.outlet("contentView.childViews.1.childViews.1"),button2:SC.outlet("contentView.childViews.1.childViews.0"),button3:SC.outlet("contentView.childViews.2.childViews.0"),buttonThreeWrapper:SC.outlet("contentView.childViews.2"),layout:{top:0.3,centerX:0,width:500},contentView:SC.View.extend({useStaticLayout:YES,layout:{left:0,right:0,top:0,height:"auto"},childViews:[SC.View.extend({classNames:["info"],useStaticLayout:YES,render:function(a,c){var b=this.get("pane");if(b.get("icon")=="blank"){a.addClass("plain")}a.push('<img src="'+SC.BLANK_IMAGE_URL+'" class="icon '+b.get("icon")+'" />');a.begin("h1").addClass("header").text(b.get("message")||"").end();a.push(b.get("displayDescription")||"");a.push(b.get("displayCaption")||"");a.push('<div class="separator"></div>')}}),SC.View.extend({layout:{bottom:13,height:24,right:18,width:466},childViews:["cancelButton","okButton"],classNames:["text-align-right"],cancelButton:SC.ButtonView.extend({useStaticLayout:YES,actionKey:SC.BUTTON2_STATUS,localize:YES,layout:{right:5,height:"auto",width:"auto",bottom:0},isCancel:YES,action:"dismiss",isVisible:NO}),okButton:SC.ButtonView.extend({useStaticLayout:YES,actionKey:SC.BUTTON1_STATUS,localize:YES,layout:{left:0,height:"auto",width:"auto",bottom:0},isDefault:YES,action:"dismiss",isVisible:NO})}),SC.View.extend({layout:{bottom:13,height:24,left:18,width:150},childViews:[SC.ButtonView.extend({useStaticLayout:YES,actionKey:SC.BUTTON3_STATUS,localize:YES,layout:{left:0,height:"auto",width:"auto",bottom:0},action:"dismiss",isVisible:NO})]})]}),dismiss:function(b){var a=this.delegate,c,d,e;if(a&&a.alertPaneDidDismiss){a.alertPaneDidDismiss(this,b.get("actionKey"))}if(d=(b&&b.get("customAction"))){if(SC.typeOf(d)===SC.T_FUNCTION){d.call(d)}else{c=this.getPath("pane.rootResponder");if(c){e=b.get("customTarget");c.sendAction(d,e||a,this,this,null,this)}}}this.remove()},alertInfoDidChange:function(){var a=this.getPath("contentView.childViews.0");if(a){a.displayDidChange()}}.observes("icon","message","displayDescription","displayCaption")});SC.AlertPane.mixin({show:function(l){l=SC.AlertPane._argumentsCall.apply(this,arguments);var b=this.create(l),p,m=l.buttons,f,k,e,n,a,d,j,h,c,i,g,q;if(m){g=!!m.findProperty("isDefault");q=!!m.findProperty("isCancel");for(p=0;p<3;p++){f=m[p];if(!f){continue}k=b.get("button%@".fmt(p+1));e=f.layerId;n=f.title;localize=f.localize;a=f.toolTip;d=f.action;j=f.target;h=l.themeName||"capsule";c=g?!!f.isDefault:undefined;i=q?!!f.isCancel:undefined;k.set("title",n);if(localize===YES){k.set("localize",YES)}if(a){k.set("toolTip",a)}if(d){k.set("customAction",d)}if(j){k.set("customTarget",j)}if(e!==undefined){k.set("layerId",e)}if(c!==undefined){k.set("isDefault",c)}if(i!==undefined){k.set("isCancel",i)}k.set("isVisible",!!n);k.set("themeName",h)}}else{k=b.get("button1");k.set("title","OK");k.set("isVisible",YES)}var o=b.append();b.adjust("height",b.childViews[0].$().height());b.updateLayout();return o},warn:function(a){a=SC.AlertPane._argumentsCall.apply(this,arguments);a.icon="sc-icon-alert-48";return this.show(a)},info:function(a){a=SC.AlertPane._argumentsCall.apply(this,arguments);a.icon="sc-icon-info-48";return this.show(a)},error:function(a){a=SC.AlertPane._argumentsCall.apply(this,arguments);a.icon="sc-icon-error-48";return this.show(a)},plain:function(a){a=SC.AlertPane._argumentsCall.apply(this,arguments);a.icon="blank";return this.show(a)},_argumentsCall:function(b){var a=b;if(SC.typeOf(b)!==SC.T_HASH){var c=this._normalizeArguments(arguments);a={message:c[0],description:c[1],caption:c[2],delegate:c[7],icon:(c[6]||"sc-icon-alert-48"),themeName:"capsule"};if(SC.typeOf(c[3])===SC.T_STRING||SC.typeOf(c[4])===SC.T_STRING||SC.typeOf(c[5])===SC.T_STRING){a.buttons=[{title:c[3]},{title:c[4]},{title:c[5]}]}}return a},_normalizeArguments:function(b){b=SC.A(b);var a=b.length,c=b[a-1];if(SC.typeOf(c)!==SC.T_STRING){b[a-1]=null}else{c=null}b[7]=c;return b}});SC.DraggablePaneSupport={isDraggablePane:YES,isAnchored:NO,_drag_cachedMouseX:null,_drag_cachedMouseY:null,initMixin:function(){if(this.mouseDown){this.mouseDown=SC._enhance(this.mouseDown,function(c,a){var b=this._drag_mouseDown(a);return c(a)||b})}else{this.mouseDown=this._drag_mouseDown}if(this.mouseDragged){this.mouseDragged=SC._enhance(this.mouseDragged,function(c,a){var b=this._drag_mouseDragged(a);return c(a)||b})}else{this.mouseDragged=this._drag_mouseDragged}if(this.touchStart){this.touchStart=SC._enhance(this.touchStart,function(c,a){var b=this._drag_touchStart(a);return c(a)||b})}else{this.touchStart=this._drag_touchStart}if(this.touchesDragged){this.touchesDragged=SC._enhance(this.touchesDragged,function(c,a){var b=this._drag_touchesDragged(a);return c(a)||b})}else{this.touchesDragged=this._drag_touchesDragged}},_drag_targetHasSelectableText:function(a){var b=SC.RootResponder.responder.targetViewForEvent(a);return !!(b&&b.isTextSelectable)},_drag_shouldHandleDrag:function(a){return !this.get("isAnchored")&&!this._drag_targetHasSelectableText(a)},_drag_mouseDown:function(a){this._drag_cachedMouseX=a.pageX;this._drag_cachedMouseY=a.pageY;return this._drag_shouldHandleDrag(a)},_drag_mouseDragged:function(a){var c=this._drag_cachedMouseX-a.pageX,g=this._drag_cachedMouseY-a.pageY,f=this.get("frame"),e=SC.RootResponder.responder.computeWindowSize(),b=SC.clone(this.get("layout")),d={},h=function(i){return(i<1&&i>0)};this._drag_cachedMouseX=a.pageX;this._drag_cachedMouseY=a.pageY;if(!this._drag_shouldHandleDrag(a)){return NO}if(b.hasOwnProperty("left")){if(h(b.left)){b.left=f.x}d.left=b.left-c}if(b.hasOwnProperty("right")){if(h(b.right)){b.right=e.width-(f.x+f.width)}d.right=b.right+c}if(b.hasOwnProperty("centerX")){d.centerX=b.centerX-c}if(b.hasOwnProperty("top")){if(h(b.top)){b.top=f.y}d.top=b.top-g}if(b.hasOwnProperty("bottom")){if(h(b.bottom)){b.bottom=e.height-(f.y+f.height)}d.bottom=b.bottom+g}if(b.hasOwnProperty("centerY")){d.centerY=b.centerY-g}this.adjust(d);return YES},_drag_touchStart:function(a){return this._drag_mouseDown(a)},_drag_touchesDragged:function(a){return this._drag_mouseDragged(a)}};sc_require("panes/panel");SC.PalettePane=SC.PanelPane.extend(SC.DraggablePaneSupport,{classNames:["sc-palette"],isModal:NO,modalPane:SC.ModalPane});sc_require("panes/palette");SC.PICKER_MENU="menu";SC.PICKER_FIXED="fixed";SC.PICKER_POINTER="pointer";SC.PICKER_MENU_POINTER="menu-pointer";SC.PickerPane=SC.PalettePane.extend({classNames:["sc-picker"],isAnchored:YES,isModal:YES,_sc_pointerLayout:SC.POINTER_LAYOUT||["perfectRight","perfectLeft","perfectTop","perfectBottom"],pointerPos:"perfectRight",pointerPosX:0,pointerPosY:0,anchorElement:function(a,b){if(b===undefined){if(this._anchorView){return this._anchorView.get("layer")}else{return this._anchorHTMLElement}}else{if(b&&b.isCoreQuery){b=b[0]}if(!b){throw"You must set 'anchorElement' to either a view or a DOM element"}this._removeScrollObservers();if(b.isView){this._setupScrollObservers(b);this._anchorView=b;this._anchorHTMLElement=null;return b.get("layer")}else{this._anchorView=null;this._anchorHTMLElement=b;return b}}}.property().cacheable(),anchorCached:null,preferType:null,preferMatrix:null,pointerOffset:null,extraRightOffset:function(){return this.get("windowPadding")}.property("windowPadding").cacheable(),removeTarget:null,removeAction:null,repositionOnWindowResize:YES,windowPadding:null,borderFrameDidChange:function(){this.positionPane(true)},popup:function(c,b,d,a){this.beginPropertyChanges();this.setIfChanged("anchorElement",c);if(b){this.set("preferType",b)}if(d){this.set("preferMatrix",d)}if(a){this.set("pointerOffset",a)}this.endPropertyChanges();this.positionPane();this._hideOverflow();this.addObserver("borderFrame",this.borderFrameDidChange);return this.append()},positionPane:function(g){g=g&&this.get("anchorCached");var b=g?this.get("anchorCached"):this.get("anchorElement"),f=this.get("borderFrame"),c=this.get("preferType"),d=this.get("preferMatrix"),a,e;if(b){if(!g){b=this.computeAnchorRect(b);this.set("anchorCached",b)}a=SC.cloneRect(b);switch(c){case SC.PICKER_MENU:case SC.PICKER_FIXED:if(!d||d.length!==3){this.set("preferMatrix",[1,4,3])}a.x+=((this.preferMatrix[2]===0)?a.width:0)+this.preferMatrix[0];a.y+=((this.preferMatrix[2]===3)?a.height:0)+this.preferMatrix[1];break;default:a.y+=a.height;break}b.halfWidth=parseInt(b.width*0.5,0);b.halfHeight=parseInt(b.height*0.5,0);f.halfWidth=parseInt(f.originalWidth*0.5,0);f.halfHeight=parseInt(f.originalHeight*0.5,0);a=this.fitPositionToScreen(a,f,b);e={left:a.x,top:a.y};this.adjust(e)}else{this.adjust({centerX:0,centerY:0})}this.updateLayout();return this},computeAnchorRect:function(c){var e,b,d,a=SC.RootResponder.responder.computeWindowSize();if(c.getBoundingClientRect){e=c.getBoundingClientRect();b={x:e.left,y:e.top,width:e.width,height:e.height};if(b.width===undefined||b.height===undefined){d=SC.$(c);b.width=d.outerWidth();b.height=d.outerHeight()}}else{b=SC.offset(c);d=SC.$(c);b.width=d.outerWidth();b.height=d.outerHeight()}b.height=(a.height-b.y)<b.height?(a.height-b.y):b.height;if(!SC.browser.isIE&&window.scrollX>0||window.scrollY>0){b.x+=window.scrollX;b.y+=window.scrollY}else{if(SC.browser.isIE&&(document.documentElement.scrollTop>0||document.documentElement.scrollLeft>0)){b.x+=document.documentElement.scrollLeft;b.y+=document.documentElement.scrollTop}}return b},fitPositionToScreen:function(h,c,b){var a=SC.RootResponder.responder.computeWindowSize(),g={x:0,y:0,width:a.width,height:a.height};var d=SC.RootResponder.responder.mainPane;if(d){var e=d.layout.minWidth,f=d.layout.minHeight;if(e&&g.width<e){g.width=d.layout.minWidth}if(f&&g.height<f){g.height=d.layout.minHeight}}c.x=h.x;c.y=h.y;if(this.preferType){switch(this.preferType){case SC.PICKER_MENU:c=this.fitPositionToScreenMenu(g,c,this.get("isSubMenu"));break;case SC.PICKER_MENU_POINTER:this.setupPointer(b);c=this.fitPositionToScreenMenuPointer(g,c,b);break;case SC.PICKER_POINTER:this.setupPointer(b);c=this.fitPositionToScreenPointer(g,c,b);break;case SC.PICKER_FIXED:break;default:break}}else{c=this.fitPositionToScreenDefault(g,c,b)}return c},fitPositionToScreenDefault:function(c,d,b){var e;if(SC.maxX(d)>c.width){e=Math.max(SC.maxX(b),d.width);d.x=Math.min(e,c.width)-d.width}if(SC.minX(d)<0){d.x=SC.minX(Math.max(b,0));if(SC.maxX(d)>c.width){d.x=Math.max(0,c.width-d.width)}}if(SC.maxY(d)>c.height){e=Math.max((b.y-d.height),0);if(e>c.height){d.y=Math.max(0,c.height-d.height)}else{d.y=e}}if(SC.minY(d)<0){e=Math.min(SC.maxY(b),(c.height-b.height));d.y=Math.max(e,0)}return d},fitPositionToScreenMenu:function(c,b,a){if(a){b.x-=this.get("submenuOffsetX");b.y-=Math.floor(this.get("menuHeightPadding")/2)}if((b.x+b.width)>(c.width-20)){if(a){b.x=b.x-(b.width*2)}else{b.x=c.width-b.width-20}}if(b.x<7){b.x=7}if(b.y<7){b.height+=b.y;b.y=7}if(b.height+b.y+35>=c.height){if(b.height+50>=c.height){b.y=SC.MenuPane.VERTICAL_OFFSET;b.height=c.height-(SC.MenuPane.VERTICAL_OFFSET*2)}else{b.y+=(c.height-(b.height+b.y+35))}}return b},fitPositionToScreenMenuPointer:function(c,d,b){d=this.fitPositionToScreenPointer(c,d,b);if(d.height+d.y+35>=c.height){d.height=c.height-d.y-(SC.MenuPane.VERTICAL_OFFSET*2)}return d},fitPositionToScreenPointer:function(o,h,n){var l,c,m=this.preferMatrix,d=this.pointerOffset,j,k,b=this.get("windowPadding");j=[[n.x+n.width+d[0],n.y+n.halfHeight-h.halfHeight],[n.x-h.originalWidth+d[1],n.y+n.halfHeight-h.halfHeight],[n.x+n.halfWidth-h.halfWidth,n.y-h.originalHeight+d[2]],[n.x+n.halfWidth-h.halfWidth,n.y+n.height+d[3]]];k=[[n.x+n.width+h.width+d[0],n.y+n.halfHeight+h.halfHeight],[n.x+d[1],n.y+n.halfHeight+h.halfHeight],[n.x+n.halfWidth+h.halfWidth,n.y+d[2]],[n.x+n.halfWidth+h.halfWidth,n.y+n.height+h.height+d[3]]];for(var e=0,g=this._sc_pointerLayout.length;e<g;e++){l=m[e];c={top:j[l][1]-b,right:o.width-b-k[l][0],bottom:o.height-b-k[l][1],left:j[l][0]-b};if(c.top>=0&&c.right>=0&&c.bottom>=0&&c.left>=0){h.x=j[l][0];h.y=j[l][1];this.set("pointerPosX",0);this.set("pointerPosY",0);this.set("pointerPos",this._sc_pointerLayout[l]);break}else{if(((l===0&&c.right>=0)||(l===1&&c.left>=0))&&c.top<0&&c.top+h.halfHeight>=0){h.x=j[l][0];h.y=j[l][1]-c.top;this.set("pointerPosX",0);this.set("pointerPosY",c.top);this.set("pointerPos",this._sc_pointerLayout[l]);break}else{if(((l===0&&c.right>=0)||(l===1&&c.left>=0))&&c.bottom<0&&c.bottom+h.halfHeight>=0){h.x=j[l][0];h.y=j[l][1]+c.bottom;this.set("pointerPosX",0);this.set("pointerPosY",Math.abs(c.bottom));this.set("pointerPos",this._sc_pointerLayout[l]);break}else{if(((l===2&&c.top>=0)||(l===3&&c.bottom>=0))&&c.right<0&&c.right+h.halfWidth>=0){h.x=j[l][0]+c.right;h.y=j[l][1];this.set("pointerPosX",Math.abs(c.right));this.set("pointerPosY",0);this.set("pointerPos",this._sc_pointerLayout[l]);break}else{if(((l===2&&c.top>=0)||(l===3&&c.bottom>=0))&&c.left<0&&c.left+h.halfWidth>=0){h.x=j[l][0]-c.left;h.y=j[l][1];this.set("pointerPosX",c.left);this.set("pointerPosY",0);this.set("pointerPos",this._sc_pointerLayout[l]);break}}}}}}if(e===g){if(m[4]===-1){h.x=n.x+n.halfWidth;h.y=n.y+n.halfHeight-h.halfHeight;this.set("pointerPos",this._sc_pointerLayout[0]+" fallback");this.set("pointerPosY",h.halfHeight-40)}else{h.x=j[m[4]][0];h.y=j[m[4]][1];this.set("pointerPos",this._sc_pointerLayout[m[4]]);this.set("pointerPosY",0)}this.set("pointerPosX",0)}this.invokeLast(this._adjustPointerPosition);return h},_adjustPointerPosition:function(){var d=this.$(".sc-pointer"),a=this.get("pointerPos"),c,b;switch(a){case"perfectRight":case"perfectLeft":b=-Math.round(d.outerHeight()/2);b+=this.get("pointerPosY");d.attr("style","margin-top: "+b+"px");break;case"perfectTop":case"perfectBottom":c=-Math.round(d.outerWidth()/2);c+=this.get("pointerPosX");d.attr("style","margin-left: "+c+"px;");break}},setupPointer:function(f){var g=this.pointerOffset,e=SC.PickerPane;if(!g||g.length!==4){if(this.get("preferType")==SC.PICKER_MENU||this.get("preferType")==SC.PICKER_MENU_POINTER){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:this.set("pointerOffset",e.TINY_PICKER_MENU_POINTER_OFFSET);this.set("windowPadding",e.TINY_MENU_WINDOW_PADDING);break;case SC.SMALL_CONTROL_SIZE:this.set("pointerOffset",e.SMALL_PICKER_MENU_POINTER_OFFSET);this.set("windowPadding",e.SMALL_MENU_WINDOW_PADDING);break;case SC.REGULAR_CONTROL_SIZE:this.set("pointerOffset",e.REGULAR_PICKER_MENU_POINTER_OFFSET);this.set("windowPadding",e.REGULAR_MENU_WINDOW_PADDING);break;case SC.LARGE_CONTROL_SIZE:this.set("pointerOffset",e.LARGE_PICKER_MENU_POINTER_OFFSET);this.set("windowPadding",e.LARGE_MENU_WINDOW_PADDING);break;case SC.HUGE_CONTROL_SIZE:this.set("pointerOffset",e.HUGE_PICKER_MENU_POINTER_OFFSET);this.set("windowPadding",e.HUGE_MENU_WINDOW_PADDING);break;default:this.set("pointerOffset",e.REGULAR_PICKER_MENU_POINTER_OFFSET);this.set("windowPadding",e.REGULAR_MENU_WINDOW_PADDING)}}else{var d=(f.width<16)?((f.width<4)?9:6):0,b=(f.height<16)?((f.height<4)?9:6):0,c=e.PICKER_POINTER_OFFSET;var h=[c[0]+d,c[1]-d,c[2]-b,c[3]+b];this.set("pointerOffset",h)}}if(!this.preferMatrix||this.preferMatrix.length!==5){this.set("preferMatrix",this.get("preferType")===SC.PICKER_MENU_POINTER?[3,2,1,0,3]:[0,1,2,3,2])}},displayProperties:["pointerPos"],renderDelegateName:"pickerRenderDelegate",modalPaneDidClick:function(a){var d=this.get("frame"),e=this.get("removeTarget")||null,c=this.get("removeAction"),b=this.get("rootResponder");if(!this.clickInside(d,a)){if(c){b.sendAction(c,e,this,this,null,this)}else{this.remove()}return YES}return NO},mouseDown:function(a){return this.modalPaneDidClick(a)},clickInside:function(b,a){return SC.pointInRect({x:a.pageX,y:a.pageY},b)},windowSizeDidChange:function(b,a){arguments.callee.base.apply(this,arguments);if(this.repositionOnWindowResize){this.positionPane()}},remove:function(){if(this.get("isVisibleInWindow")&&this.get("isPaneAttached")){this._withdrawOverflowRequest()}this._removeScrollObservers();this.removeObserver("borderFrame",this.borderFrameDidChange);return arguments.callee.base.apply(this,arguments)},_hideOverflow:function(){var a=SC.$(".sc-main"),c=parseInt(a.css("minWidth"),0),d=parseInt(a.css("minHeight"),0),b=SC.RootResponder.responder.get("currentWindowSize");if(b.width>=c&&b.height>=d){SC.bodyOverflowArbitrator.requestHidden(this)}},_withdrawOverflowRequest:function(){SC.bodyOverflowArbitrator.withdrawRequest(this)},_getScrollViewOfView:function(b){var a=b;while(a){if(a.isScrollable){break}a=a.get("parentView")}return a},_setupScrollObservers:function(b){var a=this._getScrollViewOfView(b);if(a){a.addObserver("horizontalScrollOffset",this,this._scrollOffsetDidChange);a.addObserver("verticalScrollOffset",this,this._scrollOffsetDidChange);this._scrollView=a}},_removeScrollObservers:function(){var a=this._scrollView;if(a){a.removeObserver("horizontalScrollOffset",this,this._scrollOffsetDidChange);a.removeObserver("verticalScrollOffset",this,this._scrollOffsetDidChange)}},_scrollOffsetDidChange:function(){this.positionPane()},init:function(){arguments.callee.base.apply(this,arguments);if(!this.windowPadding){this.windowPadding=SC.PickerPane.WINDOW_PADDING}},destroy:function(){this._scrollView=null;this._anchorView=null;this._anchorHTMLElement=null;return arguments.callee.base.apply(this,arguments)}});SC.PickerPane.mixin({WINDOW_PADDING:20,TINY_MENU_WINDOW_PADDING:12,SMALL_MENU_WINDOW_PADDING:11,REGULAR_MENU_WINDOW_PADDING:12,LARGE_MENU_WINDOW_PADDING:17,HUGE_MENU_WINDOW_PADDING:12,PICKER_POINTER_OFFSET:[9,-9,-18,18],TINY_PICKER_MENU_POINTER_OFFSET:[9,-9,-18,18],SMALL_PICKER_MENU_POINTER_OFFSET:[9,-9,-8,8],REGULAR_PICKER_MENU_POINTER_OFFSET:[9,-9,-12,12],LARGE_PICKER_MENU_POINTER_OFFSET:[9,-9,-16,16],HUGE_PICKER_MENU_POINTER_OFFSET:[9,-9,-18,18],PICKER_EXTRA_RIGHT_OFFSET:20,TINY_PICKER_MENU_EXTRA_RIGHT_OFFSET:12,SMALL_PICKER_MENU_EXTRA_RIGHT_OFFSET:11,REGULAR_PICKER_MENU_EXTRA_RIGHT_OFFSET:12,LARGE_PICKER_MENU_EXTRA_RIGHT_OFFSET:17,HUGE_PICKER_MENU_EXTRA_RIGHT_OFFSET:12});SC.SeparatorView=SC.View.extend({classNames:["sc-separator-view"],tagName:"span",layoutDirection:SC.LAYOUT_HORIZONTAL,render:function(a,b){if(b){a.push("<span></span>")}a.addClass(this.get("layoutDirection"))}});sc_require("views/separator");SC.MenuItemView=SC.View.extend(SC.ContentDisplay,{classNames:["sc-menu-item"],displayProperties:["title","toolTip","isEnabled","icon","isSeparator","shortcut","isChecked"],ariaRole:"menuitem",escapeHTML:YES,acceptsFirstResponder:YES,blocksIEDeactivate:YES,isContextMenuEnabled:NO,content:null,title:function(){var b=this.getContentProperty("itemTitleKey"),a=this.getPath("parentMenu.localize");if(a&&b){b=SC.String.loc(b)}return b||""}.property().cacheable(),value:function(){return this.getContentProperty("itemValueKey")}.property().cacheable(),toolTip:function(){var b=this.getContentProperty("itemToolTipKey"),a=this.getPath("parentMenu.localize");if(a&&b){b=SC.String.loc(b)}return b||""}.property().cacheable(),isEnabled:function(){return this.getContentProperty("itemIsEnabledKey")!==NO&&this.getContentProperty("itemSeparatorKey")!==YES}.property().cacheable(),icon:function(){return this.getContentProperty("itemIconKey")}.property().cacheable(),isSeparator:function(){return this.getContentProperty("itemSeparatorKey")===YES}.property().cacheable(),shortcut:function(){return this.getContentProperty("itemShortCutKey")}.property().cacheable(),isChecked:function(){return this.getContentProperty("itemCheckboxKey")}.property().cacheable(),subMenu:function(){var b=this.get("parentMenu"),c=this.getContentProperty("itemSubMenuKey");if(c){if(SC.kindOf(c,SC.MenuPane)){c.set("isModal",NO);c.set("isSubMenu",YES);c.set("parentMenu",b);return c}else{var a=this._subMenu;if(a){if(a.get("isAttached")){this.invokeLast("showSubMenu")}a.remove();a.destroy()}a=this._subMenu=SC.MenuPane.create({layout:{width:200},items:c,isModal:NO,isSubMenu:YES,parentMenu:b,controlSize:b.get("controlSize"),exampleView:b.get("exampleView")});return a}}return null}.property().cacheable(),hasSubMenu:function(){return !!this.get("subMenu")}.property("subMenu").cacheable(),getContentProperty:function(b){var a=this.get("content"),c=this.get("parentMenu");if(a&&c){return a.get(c.get(b))}},init:function(){arguments.callee.base.apply(this,arguments);this.contentDidChange()},destroy:function(){arguments.callee.base.apply(this,arguments);var a=this._subMenu;if(a){a.destroy();this._subMenu=null}},isReusable:false,render:function(a){var b=this.get("content"),f,e=this.get("parentMenu"),c=this.get("itemWidth")||e.layout.width,g=this.get("itemHeight")||SC.DEFAULT_MENU_ITEM_HEIGHT,d=this.get("escapeHTML");this.set("itemWidth",c);this.set("itemHeight",g);if(this.get("isSeparator")){a.setAttr("role","separator")}else{if(this.get("isChecked")){a.setAttr("role","menuitemcheckbox");a.setAttr("aria-checked",true)}}a=a.begin("a").addClass("menu-item");if(this.get("isSeparator")){a.push('<span class="separator"></span>');a.addClass("disabled")}else{f=this.get("icon");if(f){this.renderImage(a,f);a.addClass("has-icon")}f=this.get("title");if(SC.typeOf(f)!==SC.T_STRING){f=f.toString()}this.renderLabel(a,f);f=this.get("toolTip");if(SC.typeOf(f)!==SC.T_STRING){f=f.toString()}if(d){f=SC.RenderContext.escapeHTML(f)}a.setAttr("title",f);if(this.get("isChecked")){a.push('<div class="checkbox"></div>')}if(this.get("hasSubMenu")){this.renderBranch(a)}f=this.get("shortcut");if(f){this.renderShortcut(a,f)}}a=a.end()},renderImage:function(b,d){var a,c;if(d&&SC.ImageView.valueIsUrl(d)){a=d;c=""}else{c=d;a=SC.BLANK_IMAGE_URL}b.begin("img").addClass("image").addClass(c).setAttr("src",a).end()},renderLabel:function(b,a){if(this.get("escapeHTML")){a=SC.RenderContext.escapeHTML(a)}b.push("<span class='value ellipsis'>"+a+"</span>")},renderBranch:function(a){a.push('<span class="has-branch"></span>')},renderShortcut:function(b,a){b.push('<span class = "shortcut">'+a+"</span>")},showSubMenu:function(){var a=this.get("subMenu");if(a){a.set("mouseHasEntered",NO);a.popup(this,[0,0,0])}this._subMenuTimer=null},mouseUp:function(b){var a;a=this.getPath("parentMenu.rootMenu.targetMenuItem");if(a){a.performAction()}return YES},performAction:function(){if(!this.get("isEnabled")){this.getPath("parentMenu.rootMenu").remove();return YES}if(this.get("hasSubMenu")){return NO}var b=this.getContentProperty("itemDisableMenuFlashKey"),a;if(b){this.sendAction()}else{this._flashCounter=0;a=this.getPath("parentMenu.rootMenu");a._isFlashing=YES;this.invokeLater(this.flashHighlight,25);this.invokeLater(this.sendAction,150)}return YES},sendAction:function(){var c=this.getContentProperty("itemActionKey"),d=this.getContentProperty("itemTargetKey"),b=this.getPath("parentMenu.rootMenu"),a;this.getPath("parentMenu.rootMenu").remove();b._isFlashing=NO;c=(c===undefined)?b.get("action"):c;d=(d===undefined)?b.get("target"):d;b.set("selectedItem",this.get("content"));if(SC.typeOf(c)===SC.T_FUNCTION){c.apply(d,[b])}else{a=this.getPath("pane.rootResponder")||SC.RootResponder.responder;if(a){a.sendAction(c,d,b)}}},flashHighlight:function(){var a=this._flashCounter,b=this.$();if(a%2===0){b.addClass("focus")}else{b.removeClass("focus")}if(a<=2){this.invokeLater(this.flashHighlight,50);this._flashCounter++}},mouseDown:function(a){return a.which===1},mouseEntered:function(a){var c=this.get("parentMenu"),b=c.get("rootMenu");if(b._isFlashing){return}c.set("mouseHasEntered",YES);this.set("mouseHasEntered",YES);c.set("currentMenuItem",this);if(this.get("isEnabled")){this.becomeFirstResponder()}if(this.get("hasSubMenu")){this._subMenuTimer=this.invokeLater(this.showSubMenu,100)}return YES},mouseExited:function(a){var b,c;if(this.get("hasSubMenu")){c=this._subMenuTimer;if(c){c.invalidate()}else{this.invokeLater(this.checkMouseLocation,100)}}else{b=this.get("parentMenu");if(b.get("currentMenuItem")===this){b.set("currentMenuItem",null)}}return YES},touchStart:function(a){this.mouseEntered(a);return YES},touchEnd:function(a){return this.mouseUp(a)},touchEntered:function(a){return this.mouseEntered(a)},touchExited:function(a){return this.mouseExited(a)},checkMouseLocation:function(){var b=this.get("subMenu"),c=this.get("parentMenu"),a,d;if(!b.get("mouseHasEntered")){a=c.get("currentMenuItem");if(a===this||a===null){d=c.get("previousMenuItem");if(d){d.resignFirstResponder()}this.resignFirstResponder();b.remove()}}},moveUp:function(b,a){var c=this.get("parentMenu");if(c){c.moveUp(this)}return YES},moveDown:function(b,a){var c=this.get("parentMenu");if(c){c.moveDown(this)}return YES},moveRight:function(b,a){this.showSubMenu();return YES},insertText:function(b,a){var c=this.get("parentMenu");if(c){c.insertText(b,a)}},keyDown:function(a){return this.interpretKeyEvents(a)},keyUp:function(a){return YES},cancel:function(a){this.getPath("parentMenu.rootMenu").remove();return YES},didBecomeFirstResponder:function(a){if(a!==this){return}var b=this.get("parentMenu");if(b){b.set("currentSelectedMenuItem",this)}},willLoseFirstResponder:function(a){if(a!==this){return}var b=this.get("parentMenu");if(b){b.set("currentSelectedMenuItem",null);b.set("previousSelectedMenuItem",this)}},insertNewline:function(b,a){this.mouseUp(a)},closeParent:function(){this.$().removeClass("focus");var a=this.get("parentMenu");if(a){a.remove()}},clickInside:function(b,a){return SC.pointInRect({x:a.pageX,y:a.pageY},b)},contentDidChange:function(){var b=this.get("content"),a=this._content;if(b===a){return}var c=this.contentPropertyDidChange;if(a&&a.removeObserver){a.removeObserver("*",this,c)}this._content=b;if(b&&b.addObserver){b.addObserver("*",this,c)}this.contentPropertyDidChange(b,"*")}.observes("content"),contentPropertyDidChange:function(g,j){var b=this.get("parentMenu");if(!b){return}var a=SC.MenuItemView._contentPropertyToMenuItemPropertyMapping,h=SC.keys(a),e,f,d,c;if(j==="*"){for(e=0,f=h.length;e<f;++e){d=h[e];c=a[d];this.notifyPropertyChange(c)}}else{for(e=0,f=h.length;e<f;++e){d=h[e];if(b.get(d)===j){c=a[d];this.notifyPropertyChange(c)}}}}});SC.MenuItemView._contentPropertyToMenuItemPropertyMapping={itemTitleKey:"title",itemValueKey:"value",itemToolTipKey:"toolTip",itemIsEnabledKey:"isEnabled",itemIconKey:"icon",itemSeparatorKey:"isSeparator",itemShortCutKey:"shortcut",itemCheckboxKey:"isChecked",itemSubMenuKey:"subMenu"};sc_require("panes/picker");sc_require("views/menu_item");SC.MenuPane=SC.PickerPane.extend({classNames:["sc-menu"],ariaRole:"menu",items:null,controlSize:SC.REGULAR_CONTROL_SIZE,itemHeight:SC.propertyFromRenderDelegate("itemHeight",20),itemSeparatorHeight:SC.propertyFromRenderDelegate("itemSeparatorHeight",9),menuHeight:0,menuHeightPadding:SC.propertyFromRenderDelegate("menuHeightPadding",6),submenuOffsetX:SC.propertyFromRenderDelegate("submenuOffsetX",2),selectedItem:null,exampleView:SC.MenuItemView,anchor:null,isSubMenu:NO,escapeHTML:YES,localize:YES,acceptsMenuPane:YES,isContextMenuEnabled:NO,popup:function(a,b){this.beginPropertyChanges();if(a){if(a.isView){this._anchorView=a;this._setupScrollObservers(a)}else{this._anchorHTMLElement=a}}if(b){this.set("preferMatrix",b)}this.adjust("height",this.get("menuHeight"));this.positionPane();this.set("defaultResponder",this);this.endPropertyChanges();SC.bodyOverflowArbitrator.requestHidden(this,true);this.append()},itemTitleKey:"title",itemValueKey:"value",itemToolTipKey:"toolTip",itemIsEnabledKey:"isEnabled",itemIconKey:"icon",itemHeightKey:"height",itemSubMenuKey:"subMenu",itemSeparatorKey:"isSeparator",itemTargetKey:"target",itemActionKey:"action",itemCheckboxKey:"checkbox",itemShortCutKey:"shortcut",itemKeyEquivalentKey:"keyEquivalent",itemDisableMenuFlashKey:"disableMenuFlash",itemLayerIdKey:"layerId",itemExampleViewKey:"exampleView",menuItemKeys:["itemTitleKey","itemValueKey","itemToolTipKey","itemIsEnabledKey","itemIconKey","itemSeparatorKey","itemActionKey","itemCheckboxKey","itemShortCutKey","itemHeightKey","itemSubMenuKey","itemKeyEquivalentKey","itemTargetKey","itemLayerIdKey"],target:null,action:null,preferType:SC.PICKER_MENU,isModal:YES,init:function(){if(!this.items){this.items=[]}this._keyEquivalents={};arguments.callee.base.apply(this,arguments)},displayProperties:["controlSize"],renderDelegateName:"menuRenderDelegate",createChildViews:function(){var b,a,c;b=this._menuScrollView=this.createChildView(SC.MenuScrollView,{controlSize:this.get("controlSize")});a=this._menuView=SC.View.create({parentViewDidResize:function(){this.notifyPropertyChange("frame")},viewDidResize:function(){}});c=this.get("menuItemViews");a.replaceAllChildren(c);a.set("layout",{top:0,left:0,height:this.get("menuHeight")});b.set("contentView",a);this.childViews=[b];return this},didAppendToDocument:function(){this.becomeMenuPane()},willRemoveFromDocument:function(){var a=this.get("parentMenu");this.set("currentMenuItem",null);this.closeOpenMenus();this.resignMenuPane();if(a){a.becomeMenuPane()}},becomeMenuPane:function(){if(this.rootResponder){this.rootResponder.makeMenuPane(this)}return this},resignMenuPane:function(){if(this.rootResponder){this.rootResponder.makeMenuPane(null)}return this},menuItemViews:function(){return this.createMenuItemViews()}.property("displayItems").cacheable(),createMenuItemViews:function(){var i=[],q=this.get("displayItems"),a=this.get("exampleView"),v,d,l,k,e,p,n,g,b,j,r,c,f,m,h,o,x,w,s,u;if(!q){return i}n=this.get("itemHeightKey");g=this.get("itemSeparatorKey");k=this.get("itemExampleViewKey");b=this.get("itemHeight");f=this.get("itemKeyEquivalentKey");j=this.get("itemSeparatorHeight");x=this.get("itemLayerIdKey");s=this.get("escapeHTML");c=Math.floor(this.get("menuHeightPadding")/2);r=c;h=this.menuItemKeys.map(SC._menu_fetchKeys,this);u=q.get("length");for(o=0;o<u;o++){v=q[o];p=v.get(n);if(!p){p=v.get(g)?j:b}w={layout:{height:p,top:r},contentDisplayProperties:h,content:v,parentMenu:this,escapeHTML:s};if(v.get(x)){w.layerId=v.get(x)}e=v.get(k);if(e){d=e}else{d=a}l=this._menuView.createChildView(d,w);i[o]=l;r+=p;m=v.get(f);if(m){if(SC.typeOf(m)===SC.T_ARRAY){m.forEach(function(y){this._keyEquivalents[y]=l},this)}else{this._keyEquivalents[m]=l}}}this.set("menuHeight",r+c);return i},menuItemViewForContentIndex:function(a){var b=this.get("menuItemViews");if(!b){return undefined}return b.objectAt(a)},rootMenu:function(){if(this.get("isSubMenu")){return this.getPath("parentMenu.rootMenu")}return this}.property("isSubMenu").cacheable(),destroy:function(){var a=arguments.callee.base.apply(this,arguments);if(this._sc_menu_items){this._sc_menu_items.removeObserver("[]",this,"_sc_menu_itemPropertiesDidChange")}this._menuView.destroy();this._sc_menu_items=null;this._menuView=null;return a},windowSizeDidChange:function(){this.remove();return arguments.callee.base.apply(this,arguments)},displayItems:function(){var c=this.get("items"),b,d=[],a,e,f;if(!c){return null}b=c.get("length");for(a=0;a<b;a++){e=c.objectAt(a);if(!e||(!d.length&&e[this.get("itemSeparatorKey")])){continue}f=SC.typeOf(e);if(f===SC.T_STRING){e=SC.Object.create({title:e,value:e,isEnabled:YES})}else{if(f===SC.T_HASH){e=SC.Object.create(e)}}e.contentIndex=a;d.push(e)}return d}.property("items").cacheable(),_sc_menu_itemsDidChange:function(){var a=this.get("items");if(this._sc_menu_items){this._sc_menu_items.removeObserver("[]",this,"_sc_menu_itemPropertiesDidChange")}if(a){a.addObserver("[]",this,"_sc_menu_itemPropertiesDidChange")}this._sc_menu_items=a;var b;b=this.get("menuItemViews");this._menuView.replaceAllChildren(b);this._menuView.adjust("height",this.get("menuHeight"))}.observes("items"),_sc_menu_itemPropertiesDidChange:function(){this.notifyPropertyChange("displayItems");var a;a=this.get("menuItemViews");this._menuView.replaceAllChildren(a);this._menuView.adjust("height",this.get("menuHeight"))},currentMenuItem:function(a,b){if(b!==undefined){if(this._currentMenuItem!==null){this.set("previousMenuItem",this._currentMenuItem)}this._currentMenuItem=b;this.setPath("rootMenu.targetMenuItem",b);return b}return this._currentMenuItem}.property().cacheable(),_sc_menu_currentMenuItemDidChange:function(){var a=this.get("currentMenuItem"),b=this.get("previousMenuItem");if(b){if(b.get("hasSubMenu")&&a===null){}else{b.resignFirstResponder();this.closeOpenMenusFor(b)}}if(a&&a.get("isEnabled")){a.scrollToVisible()}}.observes("currentMenuItem"),closeOpenMenusFor:function(a){if(!a){return}var b=a.get("parentMenu");while(b&&a){b=a.get("subMenu");if(b){b.remove();a.resignFirstResponder();a=b.get("previousMenuItem")}}},closeOpenMenus:function(){this.closeOpenMenusFor(this.get("previousMenuItem"))},mouseDown:function(a){this.modalPaneDidClick(a);return YES},mouseEntered:function(){this.set("mouseHasEntered",YES)},keyUp:function(a){var b=this.interpretKeyEvents(a);return !b?NO:b},moveUp:function(){var c=this.get("currentMenuItem"),d=this.get("menuItemViews"),b,a;if(!c){a=d.get("length")-1}else{b=c.getPath("content.contentIndex");if(b===0){return YES}a=b-1}while(a>=0){if(d[a].get("isEnabled")){this.set("currentMenuItem",d[a]);d[a].becomeFirstResponder();break}a--}return YES},moveDown:function(){var d=this.get("currentMenuItem"),e=this.get("menuItemViews"),b=e.get("length"),c,a;if(!d){a=0}else{c=d.getPath("content.contentIndex");if(c===b){return YES}a=c+1}while(a<b){if(e[a].get("isEnabled")){this.set("currentMenuItem",e[a]);e[a].becomeFirstResponder();break}a++}return YES},moveToBeginningOfDocument:function(){var c=this.get("menuItemViews"),b=c.get("length"),a=0;while(a<b){if(c[a].get("isEnabled")){this.set("currentMenuItem",c[a]);c[a].becomeFirstResponder();break}++a}return YES},moveToEndOfDocument:function(){var c=this.get("menuItemViews"),b=c.get("length"),a=b-1;while(a>=0){if(c[a].get("isEnabled")){this.set("currentMenuItem",c[a]);c[a].becomeFirstResponder();break}--a}return YES},pageDown:function(){var c=this.get("currentMenuItem"),h,e=this.get("menuItemViews"),b=e.get("length"),a=0,g,d=0,f;if(this._menuScrollView&&this._menuScrollView.verticalScrollerView2){if(c){a=c.getPath("content.contentIndex")}g=a;f=this._menuScrollView.get("verticalPageScroll");for(a;a<b;a++){h=e[a];d+=h.get("layout").height;if(d>f){break}else{if(h.get("isEnabled")){g=a}}}h=e[g];this.set("currentMenuItem",h);h.becomeFirstResponder()}else{this.moveToEndOfDocument()}return YES},pageUp:function(){var c=this.get("currentMenuItem"),h,e=this.get("menuItemViews"),b=e.get("length"),a=b-1,g,d=0,f;if(this._menuScrollView&&this._menuScrollView.verticalScrollerView){if(c){a=c.getPath("content.contentIndex")}g=a;f=this._menuScrollView.get("verticalPageScroll");for(a;a>=0;a--){h=e[a];d+=h.get("layout").height;if(d>f){break}else{if(h.get("isEnabled")){g=a}}}h=e[g];this.set("currentMenuItem",h);h.becomeFirstResponder()}else{this.moveToBeginningOfDocument()}return YES},insertText:function(a){var c=this._timer,b=this._keyBuffer;if(c){c.invalidate()}c=this._timer=SC.Timer.schedule({target:this,action:"clearKeyBuffer",interval:500,isPooled:NO});b=b||"";b+=a.toUpperCase();this.selectMenuItemForString(b);this._keyBuffer=b;return YES},performKeyEquivalent:function(d,a,b){if(!b&&!this.get("isVisibleInWindow")){return NO}var c=this._keyEquivalents[d];if(c){c.performAction(YES);return YES}if(d==="escape"||d==="return"){this.remove();return YES}return NO},selectMenuItemForString:function(c){var d=this.get("menuItemViews"),f,g,b,a,e;if(!d){return}e=c.length;a=d.get("length");for(b=0;b<a;b++){f=d.objectAt(b);g=f.get("title");if(!g){continue}g=g.replace(/ /g,"").substr(0,e).toUpperCase();if(g===c){this.set("currentMenuItem",f);f.becomeFirstResponder();break}}},clearKeyBuffer:function(){this._keyBuffer=""},modalPaneDidClick:function(){this.remove();return YES}});SC._menu_fetchKeys=function(a){return this.get(a)};SC._menu_fetchItem=function(a){if(!a){return null}return this.get?this.get(a):this[a]};SC.MenuPane.VERTICAL_OFFSET=23;sc_require("panes/panel");SC.SheetPane=SC.PanelPane.extend({classNames:["sc-sheet"],modalPane:SC.ModalPane,duration:0.3,timing:"ease-in-out",transitionIn:SC.View.SLIDE_IN,transitionInOptions:function(){return{direction:"down",duration:this.get("duration"),timing:this.get("timing")}}.property("timing","duration").cacheable(),transitionOut:SC.View.SLIDE_OUT,transitionOutOptions:function(){return{direction:"up",duration:this.get("duration"),timing:this.get("timing")}}.property("timing","duration").cacheable()});SC.BaseTheme.buttonRenderDelegate=SC.RenderDelegate.create({className:"button","sc-small-size":{height:18,autoResizePadding:{width:15,height:0}},"sc-regular-size":{height:24,autoResizePadding:{width:20,height:0}},"sc-huge-size":{height:30,autoResizePadding:{width:30,height:0}},"sc-jumbo-size":{height:44,autoResizePadding:{width:50,height:0}},render:function(a,e){this.addSizeClassName(a,e);var b=a.get("toolTip"),f=a.get("isSelected")||NO,i=a.get("isActive")||NO,g=a.get("isDefault")||NO,h=a.get("isCancel")||NO,d=(a.get("buttonBehavior")===SC.TOGGLE_BEHAVIOR),c=SC.guidFor(a)+"-label";e.setClass({icon:!!a.get("icon"),def:g,cancel:h&&!g,active:i,sel:f});if(b){e.setAttr("title",b)}this.includeSlices(a,e,SC.THREE_SLICE);if(a.get("isSegment")){e.setAttr("aria-selected",f.toString())}else{if(d){e.setAttr("aria-pressed",i.toString())}}e.setAttr("aria-labelledby",c);e=e.begin("label").addClass("sc-button-label").id(c);a.get("theme").labelRenderDelegate.render(a,e);e=e.end();if(a.get("supportFocusRing")){e=e.begin("div").addClass("focus-ring");this.includeSlices(a,e,SC.THREE_SLICE);e=e.end()}},update:function(f,a){var e=(f.get("buttonBehavior")===SC.TOGGLE_BEHAVIOR),d=f.get("isDefault"),c=f.get("isCancel"),b=f.get("toolTip");this.updateSizeClassName(f,a);if(f.get("isActive")){a.addClass("active")}if(f.get("isSegment")){a.attr("aria-selected",f.get("isSelected").toString())}else{if(e){a.attr("aria-pressed",f.get("isActive").toString())}}if(b){a.attr("title",b)}else{a.removeAttr("title")}a.setClass("icon",!!f.get("icon"));a.setClass("def",!!d);a.setClass("cancel",!!c&&!d);f.get("theme").labelRenderDelegate.update(f,a.find("label"))},getRenderedAutoResizeLayer:function(a,b){return b.find(".sc-button-label")[0]}});SC.BaseTheme.checkboxRenderDelegate=SC.RenderDelegate.create({className:"checkbox",render:function(g,c){this.addSizeClassName(g,c);var f=g.get("theme"),e;e=SC.guidFor(g)+"-label";var b=g.get("isSelected")||NO;var d=g.get("isActive");var a;if(b===SC.MIXED_STATE){a="mixed"}else{if(b){a="true"}else{a="false"}}c.setAttr("role","checkbox");c.setAttr("aria-checked",a);c.setAttr("aria-labelledby",e);c.setClass({sel:b,active:d});c.push('<span class = "button"></span>');c=c.begin("span").addClass("label").id(e);f.labelRenderDelegate.render(g,c);c=c.end()},update:function(f,b){this.updateSizeClassName(f,b);var e=f.get("theme");var c=f.get("isSelected");var d=f.get("isActive");var a;if(c===SC.MIXED_STATE){a="mixed"}else{if(c){a="true"}else{a="false"}}b.attr("aria-checked",a);e.labelRenderDelegate.update(f,b.find("span.label"));b.setClass({sel:c,active:d})}});SC.BaseTheme.collectionRenderDelegate=SC.RenderDelegate.create({className:"collection",render:function(b,a){a.setClass("active",b.get("isActive"))},update:function(b,a){a.setClass("active",b.get("isActive"))}});SC.BaseTheme.disclosureRenderDelegate=SC.RenderDelegate.create({className:"disclosure",render:function(g,a){this.addSizeClassName(g,a);var f=g.get("theme"),d=g.get("value"),b=["sc-button-label","sc-disclosure-label"];var e=SC.guidFor(g)+"-label";a.setAttr("aria-expanded",d);a.setAttr("aria-labelledby",e);if(g.get("isSelected")){a.addClass("sel")}var c="";c+=g.get("isSelected")?"open":"closed";if(g.get("isActive")){c+=" active"}a.push('<img src = "'+SC.BLANK_IMAGE_URL+'" class = "disclosure button '+c+'" />');a=a.begin("span").addClass(b).id(e);f.labelRenderDelegate.render(g,a);a=a.end()},update:function(d,a){this.updateSizeClassName(d,a);var c=d.get("theme"),b=d.get("value");a.attr("aria-expanded",b);if(d.get("isSelected")){a.addClass("sel")}a.find("img").setClass({open:d.get("isSelected"),closed:!d.get("isSelected"),active:d.get("isActive")});c.labelRenderDelegate.update(d,a.find("span.sc-disclosure-label"))}});SC.THREE_SLICE=["left","middle","right"];SC.NINE_SLICE=["top-left","top","top-right","left","middle","right","bottom-left","bottom","bottom-right"];SC.RenderDelegate.reopen({includeSlices:function(e,c,d){for(var b=0,a=d.length;b<a;b++){c.push('<div class="'+d[b]+'"></div>')}}});SC.BaseTheme.imageButtonRenderDelegate=SC.RenderDelegate.create({className:"image-button",render:function(d,b){var c=d.get("image"),a=d.get("toolTip");this.addSizeClassName(d,b);if(a){b.setAttr("title",a);b.setAttr("alt",a)}if(c){b.addClass(c);d.renderState._cachedImage=c}},update:function(d,b){var c,a;this.updateSizeClassName(d,b);if(d.didChangeFor("imageButtonRenderDelegate","toolTip")){a=d.get("toolTip");b.attr("title",a);b.attr("alt",a)}if(d.didChangeFor("imageButtonRenderDelegate","image")){c=d.get("image");if(d.renderState._cachedImage){b.removeClass(d.renderState._cachedImage)}if(c){b.addClass(c);d.renderState._cachedImage=c}}}});SC.BaseTheme.MASTER_DETAIL_DIVIDER_WIDTH=1;SC.BaseTheme.masterDetailRenderDelegate=SC.RenderDelegate.create({className:"master-detail",dividerWidth:1,render:function(b,a){a.setClass("round-toolbars",SC.platform.touch)},update:function(b,a){a.setClass("round-toolbars",SC.platform.touch)}});SC.BaseTheme.panelRenderDelegate=SC.RenderDelegate.create({className:"panel",render:function(e,b){b=b.begin("div").addClass("panel-background");this.includeSlices(e,b,SC.NINE_SLICE);b=b.end();var a=e.get("ariaLabel"),c=e.get("ariaLabelledBy"),d=e.get("ariaDescribedBy");if(a){b.setAttr("aria-label",a)}if(c){b.setAttr("aria-labelledby",c)}if(d){b.setAttr("aria-describedby",d)}},update:function(e,c){var a=e.get("ariaLabel"),b=e.get("ariaLabelledBy"),d=e.get("ariaDescribedBy");if(a){c.attr("aria-label",a)}if(b){c.attr("aria-labelledby",b)}if(d){c.attr("aria-describedby",d)}}});sc_require("render_delegates/panel");SC.BaseTheme.pickerRenderDelegate=SC.RenderDelegate.create({className:"picker",render:function(e,c){var a=e.get("theme").panelRenderDelegate;a.render(e,c);var b=e.get("preferType"),d=e.get("pointerPos");if(b==SC.PICKER_POINTER||b==SC.PICKER_MENU_POINTER){c.push('<div class="sc-pointer '+d+'"></div>');c.addClass(d);e.renderState._lastPointerPosition=d}},update:function(g,e){var a=g.get("theme").panelRenderDelegate;a.update(g,e);var b=g.get("preferType"),d=g.get("pointerPos");if(b==SC.PICKER_POINTER||b==SC.PICKER_MENU_POINTER){var f=g.renderState._lastPointerPosition;if(f!==d){var c=e.find(".sc-pointer");c.attr("class","sc-pointer "+d);e.removeClass(f);e.addClass(d);g.renderState._lastPointerPosition=d}}}});sc_require("render_delegates/picker");SC.BaseTheme.menuRenderDelegate=SC.BaseTheme.pickerRenderDelegate.create({className:"menu",render:function(c,b,a){this.addSizeClassName(b,a);c(b,a)}.enhance(),update:function(c,b,a){this.updateSizeClassName(b,a);c(b,a)}.enhance(),itemHeight:20,itemSeparatorHeight:9,menuHeightPadding:6,menuWidthPadding:50,minimumMenuWidth:50,submenuOffsetX:2,verticalOffset:23,"sc-tiny-size":{itemHeight:10,itemSeparatorHeight:2,menuHeightPadding:2,submenuOffsetX:0},"sc-small-size":{itemHeight:16,itemSeparatorHeight:7,menuHeightPadding:4,submenuOffsetX:2},"sc-large-size":{itemHeight:60,itemSeparatorHeight:20,menuHeightPadding:0,submenuOffsetX:4},"sc-huge-size":{itemHeight:20,itemSeparatorHeight:9,menuHeightPadding:0,submenuOffsetX:0}});SC.BaseTheme.popupButtonRenderDelegate=SC.BaseTheme.buttonRenderDelegate.create({render:function(b,a){a.setAttr("aria-haspopup","true");arguments.callee.base.apply(this,arguments)},update:function(b,a){arguments.callee.base.apply(this,arguments)}});SC.BaseTheme.PROGRESS_OFFSET=0.5;SC.BaseTheme.PROGRESS_OFFSET_RANGE=42;SC.BaseTheme.progressRenderDelegate=SC.RenderDelegate.create({className:"progress",render:function(h,c){this.addSizeClassName(h,c);var a=h.get("isIndeterminate"),g=h.get("theme"),b=h.get("maximum"),e=h.get("minimum"),d=h.get("ariaValue");var f;if(a){f=1}else{f=h.get("value")}c.setAttr("aria-valuemax",b);c.setAttr("aria-valuemin",e);c.setAttr("aria-valuenow",d);c.setAttr("aria-valuetext",d);c.setClass({indeterminate:a,running:h.get("isRunning")&&a,"sc-empty":(f<=0),"sc-complete":(f>=1&&!a)});c=c.begin("div").addClass("track");this.includeSlices(h,c,SC.THREE_SLICE);c=c.end();c=c.begin("div").addClass("content");c.setStyle("width",(f*100)+"%");this.includeSlices(h,c,SC.THREE_SLICE);c=c.end()},update:function(a,j){this.updateSizeClassName(a,j);var d=a.get("theme"),g,h=a.get("maximum"),e=a.get("minimum"),b=a.get("ariaValue"),c=a.get("isIndeterminate"),i=a.get("isRunning"),f=a.get("isVisibleInWindow");j.attr("aria-valuemax",h);j.attr("aria-valuemin",e);j.attr("aria-valuenow",b);j.attr("aria-valuetext",b);if(c){g=1}else{g=a.get("value")}j.setClass({indeterminate:c,running:i&&c,"sc-empty":(g<=0),"sc-complete":(g>=1&&!c)});j.find(".content").css("width",(g*100)+"%");if(!SC.platform.supportsCSSTransitions){if(!this._queue[j[0].id]){this._queue[j[0].id]={offset:0,element:SC.$(j).find(".content .middle"),shouldAnimate:false}}if(c&&i&&f){this._queue[j[0].id].shouldAnimate=true;this.animate(a)}else{if(!c){this._queue[j[0].id].element.css("background-position","")}else{this._queue[j[0].id].shouldAnimate=false}}}},_queue:{},_animating:false,animate:function(b){var a=this;if(this._animating){return}function c(){var h,e,f,d=a._queue,j=0,g;var i;for(i in d){if(d.hasOwnProperty(i)){g=d[i];if(g.shouldAnimate){a._animating=true;j++;e=g.offset||0;h=(e+SC.BaseTheme.PROGRESS_OFFSET)%SC.BaseTheme.PROGRESS_OFFSET_RANGE;f=Math.round(h);if(f>Math.round(e)){g.element.css("background-position",f+"px 0px")}g.offset=h}}}if(j===0){a._animating=false}else{window.requestAnimationFrame(c)}}c()}});SC.BaseTheme.radioRenderDelegate=SC.RenderDelegate.create({className:"radio",render:function(f,b){this.addSizeClassName(f,b);var e=f.get("theme");var a=f.get("isSelected"),c=f.get("width"),d=SC.guidFor(f)+"-label";b.setClass({active:f.get("isActive"),mixed:f.get("isMixed"),sel:f.get("isSelected"),disabled:!f.get("isEnabled")});b.setAttr("role","radio");b.setAttr("aria-checked",a);b.setAttr("aria-labelledby",d);b.setAttr("aria-disabled",f.get("isEnabled")?"false":"true");if(c){b.setStyle("width",c)}b.push('<span class = "button"></span>');b=b.begin("span").addClass("sc-button-label").id(d);e.labelRenderDelegate.render(f,b);b=b.end()},update:function(f,a){this.updateSizeClassName(f,a);var e=f.get("theme");var b=f.get("isSelected"),c=f.get("width"),d=f.get("value");a.setClass({active:f.get("isActive"),mixed:f.get("isMixed"),sel:f.get("isSelected"),disabled:!f.get("isEnabled")});a.attr("aria-disabled",f.get("isEnabled")?"false":"true");a.attr("aria-checked",b);a.css("width",c?c:null);e.labelRenderDelegate.update(f,a.find(".sc-button-label"))}});SC.BaseTheme.radioGroupRenderDelegate=SC.RenderDelegate.create({className:"radio-group",render:function(h,e){this.addSizeClassName(h,e);var g=h.get("theme"),d=SC.guidFor(this),c=h.get("items"),b,a=c.length,f;e.addClass(h.get("layoutDirection"));e.setAttr("role","radiogroup");e.setAttr("aria-disabled",h.get("isEnabled")?"false":"true");for(b=0;b<a;b++){f=c[b];e=e.begin("div").addClass("radio-"+b).setAttr("index",b).addClass(g.classNames).addClass(g.radioRenderDelegate.className).addClass("sc-radio-button");g.radioRenderDelegate.render(f,e);e=e.end()}h.get("renderState").radioCount=b},update:function(a,d){this.updateSizeClassName(a,d);var e=a.get("theme"),b=SC.guidFor(this),g=a.get("items"),h,f=g.length,i;d.addClass(a.get("layoutDirection"));d.attr("aria-disabled",a.get("isEnabled")?"false":"true");if(a.get("renderState").radioCount!==f){var c=SC.RenderContext(d[0]);this.render(a,c);c.update();return}for(h=0;h<f;h++){i=g[h];e.radioRenderDelegate.update(i,d.find(".radio-"+h))}},updateRadioAtIndex:function(d,a,b){var c=d.get("items")[b];d.get("theme").radioRenderDelegate.update(c,a.find(".radio-"+b))},indexForEvent:function(d,b,a){var c=$(a.target).closest(".sc-radio-button").attr("index");if(isNaN(c)){return undefined}return parseInt(c,0)}});SC.BaseTheme.segmentRenderDelegate=SC.RenderDelegate.create({className:"segment",render:function(e,b){var c=e.get("theme"),d,a;a={"sc-first-segment":e.get("isFirstSegment"),"sc-middle-segment":e.get("isMiddleSegment"),"sc-last-segment":e.get("isLastSegment"),"sc-overflow-segment":e.get("isOverflowSegment"),vertical:e.get("layoutDirection")!==SC.LAYOUT_HORIZONTAL};if(!SC.none(e.get("index"))){a["sc-segment-"+e.get("index")]=YES}b.setClass(a);d=c.buttonRenderDelegate;d.render(e,b)},update:function(e,a){var c=e.get("theme"),d,b={};b={"sc-first-segment":e.get("isFirstSegment"),"sc-middle-segment":e.get("isMiddleSegment"),"sc-last-segment":e.get("isLastSegment"),"sc-overflow-segment":e.get("isOverflowSegment")||NO,vertical:e.get("layoutDirection")!==SC.LAYOUT_HORIZONTAL};if(!SC.none(e.get("index"))){b["sc-segment-"+e.get("index")]=YES}a.setClass(b);d=c.buttonRenderDelegate;d.update(e,a)}});SC.BaseTheme.segmentedRenderDelegate=SC.RenderDelegate.create({className:"segmented",render:function(b,a){this.addSizeClassName(b,a);a.addStyle("text-align",b.get("align"))},update:function(b,a){this.updateSizeClassName(b,a);a.css("text-align",b.get("align"))}});SC.BaseTheme.sliderRenderDelegate=SC.RenderDelegate.create({className:"slider",render:function(h,d){this.addSizeClassName(h,d);var b=h.get("maximum"),f=h.get("minimum"),e=h.get("ariaValue");d.setAttr("aria-valuemax",b);d.setAttr("aria-valuemin",f);d.setAttr("aria-valuenow",e);if(f!==0||b!==100){d.setAttr("aria-valuetext",e)}d.setAttr("aria-orientation","horizontal");d=d.begin("span").addClass("track");this.includeSlices(h,d,SC.THREE_SLICE);if(h.get("markSteps")){var g=h.get("stepPositions");if(g){var c,a=g.length;for(c=0;c<a;c++){d.begin().setStyle("left","%@%".fmt(g[c]*100)).addClass(["sc-slider-step-mark","sc-slider-step-mark-%@".fmt(c)]).setClass({"sc-slider-step-mark-first":c===0,"sc-slider-step-mark-last":c===a-1}).end()}}}d.begin("img").setAttr("src",SC.BLANK_IMAGE_URL).addClass("sc-handle").setStyle("left","%@%".fmt(h.get("value"))).end();d=d.end();h.get("renderState")._cachedHandle=null},update:function(b,c){this.updateSizeClassName(b,c);var o=b.get("maximum"),h=b.get("minimum"),e=b.get("ariaValue"),k=b.get("renderState")._cachedHandle;if(!k){k=b.get("renderState")._cachedHandle=c.find(".sc-handle")}c.attr("aria-valuemax",o);c.attr("aria-valuemin",h);c.attr("aria-valuenow",e);if(h!==0||o!==100){c.attr("aria-valuetext",e)}c.attr("aria-orientation","horizontal");if(b.didChangeFor("sliderRenderDelegateMinimumMaximumStepMarkSteps","minimum","maximum","step","markSteps")){var m=c.find(".sc-slider-step-mark"),q=b.get("markSteps"),p;if(!q||!(p=b.get("stepPositions"))){m.remove()}else{var f,g,j=p.length,a,d='<div style="left:%@%" class="sc-slider-step-mark sc-slider-step-mark-%@ %@"></div>',l;for(g=0;g<j;g++){if(m[g]){m.eq(g).css("left","%@%".fmt(p[g]*100)).setClass({"sc-slider-step-mark-first":g===0,"sc-slider-step-mark-last":g===j-1})}else{if(g===0){a="sc-slider-step-mark-first"}else{if(g===j-1){a="sc-slider-step-mark-last"}else{a=""}}l=d.fmt(p[g]*100,g,a);k.before(l)}}m.slice(g).remove()}}if(b.didChangeFor("sliderRenderDelegateValue","value")){var n=b.get("value");k.css("left",n+"%")}}});SC.BaseTheme.SourceList=SC.BaseTheme.subtheme("source-list");SC.BaseTheme.splitRenderDelegate=SC.RenderDelegate.create({className:"split",_classesForDataSource:function(b){var a={},c=b.get("layoutDirection");a[SC.LAYOUT_VERTICAL]=c===SC.LAYOUT_VERTICAL;a[SC.LAYOUT_HORIZONTAL]=c===SC.LAYOUT_HORIZONTAL;return a},render:function(b,a){a.setClass(this._classesForDataSource(b))},update:function(b,a){a.setClass(this._classesForDataSource(b))}});SC.BaseTheme.splitDividerRenderDelegate=SC.RenderDelegate.create({className:"split-divider",dividerSize:1,splitPositionOffset:-5,splitSizeOffset:10,render:function(b,a){this.addSizeClassName(b,a);a.push("<div class='line'></div>")},update:function(b,a){this.updateSizeClassName(b,a)}});SC.BaseTheme.toolbarRenderDelegate=SC.RenderDelegate.create({className:"toolbar",render:function(b,a){},update:function(){}});SC.BaseTheme.wellRenderDelegate=SC.RenderDelegate.create({className:"well",render:function(b,a){this.includeSlices(b,a,SC.NINE_SLICE)},update:function(){}});SC.BaseTheme.workspaceRenderDelegate=SC.RenderDelegate.create({className:"workspace",render:function(){},update:function(){}});SC.DRAG_LINK=4;SC.DRAG_COPY=1;SC.DRAG_MOVE=2;SC.DRAG_NONE=0;SC.DRAG_ANY=15;SC.DRAG_DATA=8;SC.DRAG_AUTOSCROLL_ZONE_THICKNESS=20;SC.View.reopen({init:function(a){a();if(this.get("isDropTarget")){SC.Drag.addDropTarget(this)}if(this.get("isScrollable")){SC.Drag.addScrollableView(this)}}.enhance(),destroy:function(a){if(this.get("isDropTarget")){SC.Drag.removeDropTarget(this)}if(this.get("isScrollable")){SC.Drag.removeScrollableView(this)}return a()}.enhance()});SC.Drag=SC.Object.extend({source:null,ghostView:null,ghostActsLikeCursor:NO,dragView:null,ghost:YES,sourceIsDraggable:YES,slideBack:YES,ghostOffset:{x:0,y:0},location:{},dataTypes:function(){if(this.dataSource){return this.dataSource.get("dragDataTypes")||[]}var d=this.data;if(d){var a=[];for(var b in d){if(d.hasOwnProperty(b)){a.push(b)}}return a}var c=this.get("source");if(c&&c.dragDataTypes){return c.get("dragDataTypes")||[]}return[]}.property().cacheable(),hasDataType:function(a){return(this.get("dataTypes").indexOf(a)>=0)},dataForType:function(a){if(this.dataSource){return this.dataSource.dragDataForType(this,a)}else{if(this.data){return this.data[a]}else{var b=this.get("source");if(b&&SC.typeOf(b.dragDataForType)===SC.T_FUNCTION){return b.dragDataForType(this,a)}else{return null}}}},dataSource:null,data:null,allowedDragOperations:SC.DRAG_ANY,_dragInProgress:YES,_dragViewWasVisible:null,startDrag:function(){if(this.get("sourceIsDraggable")){this._createGhostView()}var i=this.event;var e={x:i.pageX,y:i.pageY};this.set("location",e);if(this.get("sourceIsDraggable")){var b=this._getDragView();var j=b.get("parentView");var h=j?j.convertFrameToView(b.get("frame"),null):b.get("frame");if(this.get("ghost")){this._dragViewWasVisible=b.get("isVisible");b.set("isVisible",NO)}if(this.ghostActsLikeCursor){this.ghostOffset={x:14,y:14}}else{this.ghostOffset={x:(e.x-h.x),y:(e.y-h.y)}}if(!this._ghostViewHidden){this._positionGhostView(i)}if(i.makeTouchResponder){var k=this;SC.Timer.schedule({target:i,action:function(){if(!i.hasEnded){i.makeTouchResponder(k,YES)}},interval:1})}else{this.ghostView.rootResponder.dragDidStart(this,i)}}var a=this.source;if(a&&a.dragDidBegin){a.dragDidBegin(this,e)}var c=this._dropTargets();for(var g=0,d=c.length;g<d;g++){var f=c[g];if(!f.get("isVisibleInWindow")){continue}f.tryToPerform("dragStarted",this,i)}},cancelDrag:function(a){var b=this._lastTarget;if(b&&b.dragExited){b.dragExited(this,this._lastMouseDraggedEvent)}this.endDrag(a,SC.DRAG_NONE)},endDrag:function(c,h){var g=this.get("location");var d=this._dropTargets();for(var b=0,a=d.length;b<a;b++){try{d[b].tryToPerform("dragEnded",this,c)}catch(e){SC.Logger.error("Exception in SC.Drag.mouseUp(dragEnded on %@): %@".fmt(d[b],e))}}if(this.get("sourceIsDraggable")&&this.get("slideBack")&&h===SC.DRAG_NONE){this._slideGhostViewBack()}else{this._endDrag()}var f=this.get("source");if(f){if(f.dragDidSucceed&&h!==SC.DRAG_NONE){f.dragDidSucceed(this,g,h)}else{if(f.dragDidCancel&&h===SC.DRAG_NONE){f.dragDidCancel(this,g,h)}}if(f.dragDidEnd){f.dragDidEnd(this,g,h)}}},touchStart:function(a){return YES},mouseDragged:function(a){var b=this._autoscroll(a);var f=this.get("location");if(!b&&(a.pageX===f.x)&&(a.pageY===f.y)){return}f={x:a.pageX,y:a.pageY};this.set("location",f);this._lastMouseDraggedEvent=a;var d=this.source;var c=this._lastTarget;var e=this._findDropTarget(a);var g=SC.DRAG_NONE;while(e&&(e!==c)&&(g===SC.DRAG_NONE)){if(e&&d&&d.dragSourceOperationMaskFor){g=d.dragSourceOperationMaskFor(this,e)}else{g=SC.DRAG_ANY}if((g!==SC.DRAG_NONE)&&e&&e.computeDragOperations){g=g&e.computeDragOperations(this,a,g)}else{g=SC.DRAG_NONE}this.allowedDragOperations=g;if(g===SC.DRAG_NONE){e=this._findNextDropTarget(e)}}if(e!==c){if(c&&c.dragExited){c.dragExited(this,a)}if(e){if(e.dragEntered){e.dragEntered(this,a)}if(e.dragUpdated){e.dragUpdated(this,a)}}this._lastTarget=e}else{if(e&&e.dragUpdated){e.dragUpdated(this,a)}}if(d&&d.dragDidMove){d.dragDidMove(this,f)}if(this.get("sourceIsDraggable")&&!this._ghostViewHidden){this._positionGhostView(a)}},touchesDragged:function(a){this.mouseDragged(a)},mouseUp:function(a){var d={x:a.pageX,y:a.pageY},c=this._lastTarget,f=this.allowedDragOperations;this.set("location",d);try{if(c&&c.acceptDragOperation&&c.acceptDragOperation(this,f)){f=c.performDragOperation?c.performDragOperation(this,f):SC.DRAG_NONE}else{f=SC.DRAG_NONE}}catch(b){SC.Logger.error("Exception in SC.Drag.mouseUp(acceptDragOperation|performDragOperation): %@".fmt(b))}this.endDrag(a,f)},touchEnd:function(a){this.mouseUp(a)},_getDragView:function(){if(!this.dragView){if(!this.source||!this.source.isView){throw new Error("Source can't be used as dragView, because it's not a view.")}this.dragView=this.source}return this.dragView},_createGhostView:function(){var b=this._getDragView(),d=b.get("borderFrame"),c,a;c={top:d.y,left:d.x,width:d.width,height:d.height};a=this.ghostView=SC.Pane.create({classNames:["sc-ghost-view"],layout:c,owner:this,wantsAcceleratedLayer:b.get("wantsAcceleratedLayer"),didCreateLayer:function(){if(b){var j=b.get("layer");if(j){var h=j.cloneNode(true);var l=b.$().find("canvas");if(l.length){var m=$(h).find("canvas"),f=l.length,g,k,e;for(g=0;g<f;g++){k=l[g];e=m[g];e.width=k.width;e.height=k.height;e.getContext("2d").drawImage(k,0,0)}}h.style.top="0px";h.style.left="0px";h.style.bottom="0px";h.style.right="0px";this.get("layer").appendChild(h)}}}});a.append()},_positionGhostView:function(a){var b=this.ghostView,c;if(b){c=this.get("location");c.x-=this.ghostOffset.x;c.y-=this.ghostOffset.y;b.adjust({top:c.y,left:c.x})}},_ghostViewHidden:NO,hideGhostView:function(){if(this.ghostView&&!this._ghostViewHidden){this.ghostView.remove();this._ghostViewHidden=YES}},unhideGhostView:function(){if(this._ghostViewHidden){this._ghostViewHidden=NO;this._createGhostView()}},_slideGhostViewBack:function(){if(this.ghostView){var b=this._getDragView(),e=b.get("borderFrame"),a=b.get("parentView"),d=a?a.convertFrameToView(e,null):b.get("frame"),c;c={top:d.y,left:d.x};this.ghostView.animate(c,0.5,this,function(){this.invokeNext(function(){var f=this.get("source");if(this.get("slideBack")&&f&&f.dragSlideBackDidEnd){f.dragSlideBackDidEnd(this)}this._endDrag()})})}else{this._endDrag()}},_destroyGhostView:function(){if(this.ghostView){this.ghostView.remove();this.ghostView=null;this._ghostViewHidden=NO}},_endDrag:function(){if(this.get("sourceIsDraggable")){this._destroyGhostView();if(this.get("ghost")){if(this._dragViewWasVisible){this._getDragView().set("isVisible",YES)}this._dragViewWasVisible=null}}this._cleanUpDrag()},_cleanUpDrag:function(){this._lastTarget=null;this._dragInProgress=NO;this._cachedDropTargets=null},_dropTargets:function(){if(this._cachedDropTargets){return this._cachedDropTargets}var b=[];var d=SC.Drag._dropTargets;for(var c in d){if(d.hasOwnProperty(c)){b.push(d[c])}}var f={};var e=SC.Drag._dropTargets;var a=function(g){if(!g){return 0}var i=SC.guidFor(g);var h=f[i];if(!h){h=1;while((g=g.get("parentView"))){if(e[SC.guidFor(g)]!==undefined){h=h+1}if(g.isPane&&g.isMainPane){h=h+10000}}f[i]=h}return h};b.sort(function(h,g){if(h===g){return 0}h=a(h);g=a(g);return(h>g)?-1:1});this._cachedDropTargets=b;return b},_findDropTarget:function(c){var g={x:c.pageX,y:c.pageY};var e,f;var d=this._dropTargets();for(var b=0,a=d.length;b<a;b++){e=d[b];if(!e.get("isVisibleInWindow")){continue}f=e.convertFrameToView(e.get("clippingFrame"),null);if(SC.pointInRect(g,f)){return e}}return null},_findNextDropTarget:function(a){var b=SC.Drag._dropTargets;while((a=a.get("parentView"))){if(b[SC.guidFor(a)]){return a}}return null},_autoscroll:function(k){if(!k){k=this._lastAutoscrollEvent}if(!this._dragInProgress){return NO}var e=k?{x:k.pageX,y:k.pageY}:this.get("location"),g=this._findScrollableView(e),l=null,j,b,c,h,a,d;while(g&&!l){j=g.get("canScrollVertical")?1:0;b=g.get("canScrollHorizontal")?1:0;if(j||b){a=g.get("containerView");if(a){d=g.convertFrameToView(a.get("frame"),null)}else{j=b=0}}if(j){h=SC.maxY(d);c=h-SC.DRAG_AUTOSCROLL_ZONE_THICKNESS;if(e.y>=c&&e.y<=h){j=1}else{c=SC.minY(d);h=c+SC.DRAG_AUTOSCROLL_ZONE_THICKNESS;if(e.y>=c&&e.y<=h){j=-1}else{j=0}}}if(b){h=SC.maxX(d);c=h-SC.DRAG_AUTOSCROLL_ZONE_THICKNESS;if(e.x>=c&&e.x<=h){b=1}else{c=SC.minX(d);h=c+SC.DRAG_AUTOSCROLL_ZONE_THICKNESS;if(e.x>=c&&e.x<=h){b=-1}else{b=0}}}if(j||b){l=g}else{g=this._findNextScrollableView(g)}}if(l&&(this._lastScrollableView===l)){if((Date.now()-this._hotzoneStartTime)>100){this._horizontalScrollAmount*=1.05;this._verticalScrollAmount*=1.05}}else{this._lastScrollableView=l;this._horizontalScrollAmount=15;this._verticalScrollAmount=15;this._hotzoneStartTime=(l)?Date.now():null;b=j=0}if(l&&(b||j)){var i={x:b*this._horizontalScrollAmount,y:j*this._verticalScrollAmount};l.scrollBy(i)}if(l){if(k){this._lastAutoscrollEvent={pageX:k.pageX,pageY:k.pageY}}this.invokeLater(this._autoscroll,100,null);return YES}else{this._lastAutoscrollEvent=null;return NO}},_scrollableViews:function(){if(this._cachedScrollableView){return this._cachedScrollableView}var a=[];var c=SC.Drag._scrollableViews;for(var b in c){if(c.hasOwnProperty(b)){a.push(c[b])}}a=a.sort(function(f,d){var e=f;while((e=e.get("parentView"))){if(d===e){return -1}}return 1});this._cachedScrollableView=a;return a},_findScrollableView:function(f){var c=this._scrollableViews(),b=c?c.length:0,d,e,a;for(a=0;a<b;a++){d=c[a];if(!d.get("isVisibleInWindow")){continue}e=d.convertFrameToView(d.get("clippingFrame"),null);if(SC.pointInRect(f,e)){return d}}return null},_findNextScrollableView:function(a){var b=SC.Drag._scrollableViews;while((a=a.get("parentView"))){if(b[SC.guidFor(a)]){return a}}return null}});SC.Drag.mixin({start:function(b){var a=this.create(b);a.startDrag();return a},_dropTargets:{},_scrollableViews:{},addDropTarget:function(a){this._dropTargets[SC.guidFor(a)]=a},removeDropTarget:function(a){delete this._dropTargets[SC.guidFor(a)]},addScrollableView:function(a){this._scrollableViews[SC.guidFor(a)]=a},removeScrollableView:function(a){delete this._scrollableViews[SC.guidFor(a)]}});SC.CheckboxView=SC.ButtonView.extend({classNames:["sc-checkbox-view","sc-checkbox-control"],ariaRole:"checkbox",themeName:null,renderDelegateName:"checkboxRenderDelegate",needsEllipsis:NO,acceptsFirstResponder:function(){if(SC.FOCUS_ALL_CONTROLS){return this.get("isEnabledInPane")}return NO}.property("isEnabledInPane"),_toggleValue:function(){var a=this.get("value")===this.get("toggleOnValue");this.set("value",a?this.get("toggleOffValue"):this.get("toggleOnValue"))},mouseDown:function(a){if(a.which&&a.which!==1){return false}if(!this.get("isEnabledInPane")){return YES}this.set("isActive",YES);this._isMouseDown=YES;if(a&&this.get("acceptsFirstResponder")){a.allowDefault()}return YES},mouseUp:function(a){if(!this.get("isEnabledInPane")){return YES}this.set("isActive",NO);this._isMouseDown=NO;if(this.get("buttonBehavior")!==SC.HOLD_BEHAVIOR){if(this.$().within(a.target)){this._toggleValue();this._action(a)}}return YES},keyDown:function(b){if(!this.get("isEnabledInPane")){return YES}if(b.which===9||b.keyCode===9){var a=b.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES}if(b.which===13||b.which===32){this._toggleValue();if(this.get("buttonBehavior")!==SC.HOLD_BEHAVIOR){if(this.$().within(b.target)){this._action(b)}}return YES}b.allowDefault();return NO},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)}});sc_require("mixins/collection_view_delegate");SC.DRAG_REORDER=16;SC.CollectionView=SC.View.extend(SC.CollectionViewDelegate,SC.CollectionContent,{classNames:["sc-collection-view"],displayProperties:["isActive"],renderDelegateName:"collectionRenderDelegate",ACTION_DELAY:200,useFastPath:NO,content:null,contentBindingDefault:SC.Binding.multiple(),length:0,nowShowing:function(){var a=this._inScrollClippingFrame||this.get("clippingFrame");return this.computeNowShowing(a)}.property("length","clippingFrame").cacheable(),selection:null,isSelectable:YES,isSelectableBindingDefault:SC.Binding.bool(),isEnabled:YES,isEnabledBindingDefault:SC.Binding.bool(),isEditable:YES,isEditableBindingDefault:SC.Binding.bool(),canReorderContent:NO,canReorderContentBindingDefault:SC.Binding.bool(),canDeleteContent:NO,canDeleteContentBindingDefault:SC.Binding.bool(),canEditContent:NO,canEditContentBindingDefault:SC.Binding.bool(),isDropTarget:NO,useToggleSelection:NO,actOnSelect:NO,selectOnMouseDown:YES,exampleView:SC.View,contentExampleViewKey:null,groupExampleView:null,contentGroupExampleViewKey:null,action:null,target:null,rightIconAction:null,rightIconTarget:null,contentValueKey:null,acceptsFirstResponder:NO,isActive:NO,calculatedHeight:0,calculatedWidth:0,adjustLayout:function(){var a=this.computeLayout();if(a){this.adjust(a)}},computeLayout:function(){return null},layoutForContentIndex:function(a){return null},allContentIndexes:function(){return SC.IndexSet.create(0,this.get("length")).freeze()}.property("length").cacheable(),contentIndexesInRect:function(a){return null},computeNowShowing:function(d){var c=this.contentIndexesInRect(d);if(!c){c=this.get("allContentIndexes")}else{var b=this.get("length"),a=c.get("max");if(a>b){c=c.copy().remove(b,a-b).freeze()}}return c},showInsertionPoint:function(a,b){},hideInsertionPoint:function(){},delegate:null,selectionDelegate:function(){var a=this.get("delegate"),b=this.get("content");return this.delegateFor("isCollectionViewDelegate",a,b)}.property("delegate","content").cacheable(),contentDelegate:function(){var a=this.get("delegate"),b=this.get("content");return this.delegateFor("isCollectionContent",a,b)}.property("delegate","content").cacheable(),contentRangeDidChange:function(d,b,c,a){if(!b&&(c==="[]")){this.notifyPropertyChange("_contentGroupIndexes");this.reload(a)}else{this.contentPropertyDidChange(b,c,a)}},contentPropertyDidChange:function(c,b,a){},updateContentRangeObserver:function(){var d=this.get("nowShowing"),a=this._cv_contentRangeObserver,c=this.get("content");if(!c){return}if(a){c.updateRangeObserver(a,d)}else{var b=this.contentRangeDidChange;a=c.addRangeObserver(d,this,b,null);this._cv_contentRangeObserver=a}},removeContentRangeObserver:function(){var b=this.get("content"),a=this._cv_contentRangeObserver;if(a){if(b){b.removeRangeObserver(a)}this._cv_contentRangeObserver=null}},contentLengthDidChange:function(){var a=this.get("content");this.set("length",a?a.get("length"):0);this.invokeOnce(this.adjustLayout)},_cv_contentDidChange:function(){var c=this.get("content"),b=this.contentLengthDidChange;if(c===this._content){return}this.removeContentRangeObserver();if(this._content){this._content.removeObserver("length",this,b)}if(this._pools){for(var a in this._pools){this._pools[a].invoke("destroy")}delete this._pools}this._content=c;if(c){c.addObserver("length",this,b)}this.contentLengthDidChange();this.contentRangeDidChange(c,null,"[]",null)}.observes("content"),_invalidIndexes:NO,_isEnabledDidChange:function(){this.reload()}.observes("isEnabled","isEditable","canEditContent","canReorderContent","canDeleteContent"),reload:function(a){var c=this._invalidIndexes,b;if(a&&c!==YES){if(c){c.add(a)}else{c=this._invalidIndexes=a.clone()}b=this.get("length");if(b>1&&c.max==b){c.add(b-2)}}else{this._invalidIndexes=YES}if(this.get("isVisibleInWindow")){this.invokeOnce(this.reloadIfNeeded)}return this},reloadIfNeeded:function(){var f=this._invalidIndexes;if(!f||!this.get("isVisibleInWindow")){return this}this._invalidIndexes=NO;var b,d,e=this.get("nowShowing"),c=this._sc_itemViews||[],a;if(f.isIndexSet&&f.contains(e)){f=YES}if(f.isIndexSet){f.forEach(function(g){d=c[g];if(d){this._removeItemView(d,g)}if(e.contains(g)){this.itemViewForContentIndex(g,YES)}},this)}else{for(a=0,b=c.length;a<b;a++){d=c?c[a]:null;if(d){this._removeItemView(d,a)}}e.forEach(function(g){this.itemViewForContentIndex(g,YES)},this)}return this},_TMP_ATTRS:{},_COLLECTION_CLASS_NAMES:["sc-collection-item","sc-item"],_GROUP_COLLECTION_CLASS_NAMES:["sc-collection-item","sc-group-item"],itemViewForContentIndex:function(g,d){var c,i;if(SC.none(g)||g<0||g>=this.get("length")){return null}i=this._sc_itemViews;if(!i){i=this._sc_itemViews=[]}c=i[g];if(c){if(d){c.destroy();c=null}else{return c}}var h,f=this.get("containerView")||this,a,b,e;h=this._attrsForContentIndex(g);a=this._exampleViewForContentIndex(g);e=a.prototype;if(SC.none(e.isReusable)||e.isReusable){b=this._poolForExampleView(a);if(b.length>0){c=b.shift();this._reconfigureItemView(c,h);if(c.awakeFromPool){c.awakeFromPool(this)}if(!c.get("_isRendered")){c.invokeOnce(c._doRender)}}}if(!c){c=this.createItemView(a,g,h);f.insertBefore(c,null)}i[g]=c;return c},itemViewForContentObject:function(a){var b=this.get("content");if(!b){return null}var c=b.indexOf(a);if(c===-1){return null}return this.itemViewForContentIndex(c)},_TMP_LAYERID:[],createItemView:function(c,a,b){return c.create(b)},layerIdFor:function(a){var b=this._TMP_LAYERID;b[0]=this.get("layerId");b[1]=a;return b.join("-")},contentIndexForLayerId:function(c){if(!c||!(c=c.toString())){return null}var b=this.get("layerId")+"-";if((c.length<=b.length)||(c.indexOf(b)!==0)){return null}var a=Number(c.slice(c.lastIndexOf("-")+1));return isNaN(a)?null:a},itemViewForEvent:function(a){var b=this.getPath("pane.rootResponder");if(!b){return null}var d=a.target,c=this.get("layer"),f=null,e;while(d&&d!==document&&d!==c){e=d?SC.$(d).attr("id"):null;if(e&&(f=this.contentIndexForLayerId(e))!==null){break}d=d.parentNode}if(f===null||(d===c)){d=c=null;return null}if(f>=this.get("length")){throw new Error("layout for item view %@ was found when item view does not exist (%@)".fmt(e,this))}return this.itemViewForContentIndex(f)},expand:function(b){if(!b){return this}var a=this.get("contentDelegate"),c=this.get("content");b.forEach(function(d){var e=a.contentIndexDisclosureState(this,c,d);if(e===SC.BRANCH_CLOSED){a.contentIndexExpand(this,c,d)}},this);return this},collapse:function(b){if(!b){return this}var a=this.get("contentDelegate"),c=this.get("content");b.forEach(function(d){var e=a.contentIndexDisclosureState(this,c,d);if(e===SC.BRANCH_OPEN){a.contentIndexCollapse(this,c,d)}},this);return this},_cv_selectionDidChange:function(){var c=this.get("selection"),b=this._cv_selection,a=this._cv_selectionContentDidChange;if(c===b){return}if(b){b.removeObserver("[]",this,a)}if(c){c.addObserver("[]",this,a)}this._cv_selection=c;this._cv_selectionContentDidChange()}.observes("selection"),_cv_selectionContentDidChange:function(){var c=this.get("selection"),b=this._cv_selindexes,a=this.get("content"),d;this._cv_selindexes=c?c.frozenCopy():null;if(b){b=b.indexSetForSource(a)}if(c){c=c.indexSetForSource(a)}if(c&&b){d=c.without(b).add(b.without(c))}else{d=c||b}if(d&&d.get("length")>0){this.reloadSelectionIndexes(d)}},_invalidSelection:NO,reloadSelectionIndexes:function(a){var b=this._invalidSelection;if(a&&(b!==YES)){if(b){b.add(a)}else{b=this._invalidSelection=a.copy()}}else{this._invalidSelection=YES}if(this.get("isVisibleInWindow")){this.invokeOnce(this.reloadSelectionIndexesIfNeeded)}return this},reloadSelectionIndexesIfNeeded:function(){var e=this._invalidSelection;if(!e||!this.get("isVisibleInWindow")){return this}var d=this.get("nowShowing"),b=this._invalidIndexes,a=this.get("content"),c=this.get("selection");this._invalidSelection=NO;if(b===YES||!d){return this}if(e===YES){e=d}if(b&&b.isIndexSet){e=e.without(b)}e.forEach(function(f){if(!d.contains(f)){return}var g=this.itemViewForContentIndex(f,NO);if(g){g.set("isSelected",c?c.contains(a,f):NO)}},this);return this},select:function(c,f){var d=this.get("content"),a=this.get("selectionDelegate"),b=this.get("_contentGroupIndexes"),e;if(!this.get("isSelectable")||!this.get("isEnabledInPane")){return this}if(SC.typeOf(c)===SC.T_NUMBER){c=SC.IndexSet.create(c,1)}if(c&&c.get("length")>0){if(b&&b.get("length")>0){c=c.copy().remove(b)}c=a.collectionViewShouldSelectIndexes(this,c,f);if(!c||c.get("length")===0){return this}}else{c=null}if(f&&(e=this.get("selection"))){e=e.copy()}else{e=SC.SelectionSet.create()}if(c&&c.get("length")>0){if(c.get("length")===1&&!this.get("allowDuplicateItems")){e.addObject(d.objectAt(c.get("firstObject")))}else{e.add(d,c)}}e=a.collectionViewSelectionForProposedSelection(this,e);if(!e){e=SC.SelectionSet.create()}this._selectionAnchor=null;this.set("selection",e.freeze());return this},deselect:function(b){var d=this.get("selection"),c=this.get("content"),a=this.get("selectionDelegate");if(!this.get("isSelectable")||!this.get("isEnabledInPane")){return this}if(!d||d.get("length")===0){return this}if(SC.typeOf(b)===SC.T_NUMBER){b=SC.IndexSet.create(b,1)}b=a.collectionViewShouldDeselectIndexes(this,b);if(!b||b.get("length")===0){return this}d=d.copy().remove(c,b);d=a.collectionViewSelectionForProposedSelection(this,d);if(!d){d=SC.SelectionSet.create()}this.set("selection",d.freeze());return this},_findNextSelectableItemFromIndex:function(b,d){var h=this.get("length"),c=SC.IndexSet.create(),a=this.get("selectionDelegate"),f=this.get("_contentGroupIndexes"),e,g;if(!f&&(a.collectionViewShouldSelectIndexes===this.collectionViewShouldSelectIndexes)){return b}while(b<h){if(!f||!f.contains(b)){c.add(b);e=a.collectionViewShouldSelectIndexes(this,c);if(e&&e.get("length")>=1){return b}c.remove(b)}b++}if(d===undefined){g=this.get("selection");d=g?g.get("max"):-1}return d},_findPreviousSelectableItemFromIndex:function(b,g){var c=SC.IndexSet.create(),a=this.get("selectionDelegate"),e=this.get("_contentGroupIndexes"),d;if(SC.none(b)){b=-1}if(!e&&(a.collectionViewShouldSelectIndexes===this.collectionViewShouldSelectIndexes)){return b}while(b>=0){if(!e||!e.contains(b)){c.add(b);d=a.collectionViewShouldSelectIndexes(this,c);if(d&&d.get("length")>=1){return b}c.remove(b)}b--}if(g===undefined){var f=this.get("selection");g=f?f.get("min"):-1}if(SC.none(g)){g=-1}return g},selectPreviousItem:function(h,b){if(SC.none(b)){b=1}if(SC.none(h)){h=false}var f=this.get("selection"),e=this.get("content");if(f){f=f.indexSetForSource(e)}var g=f?f.get("min"):-1,a=f?f.get("max")-1:-1,d=this._selectionAnchor;if(SC.none(d)){d=g}if(h){if(a>d){a=a-b}else{g=this._findPreviousSelectableItemFromIndex(g-b)}if(SC.none(g)||(g<0)){g=0}if(!e.objectAt(g)){g=f?f.get("min"):-1}if(a<g){a=g}}else{g=this._findPreviousSelectableItemFromIndex(g-b);if(SC.none(g)||(g<0)){g=0}if(!e.objectAt(g)){g=f?f.get("min"):-1}a=g;d=null}var c=g;f=SC.IndexSet.create(g,a+1-g);this.scrollToContentIndex(c);this.select(f);this._selectionAnchor=d;return this},selectNextItem:function(h,i){if(SC.none(i)){i=1}if(SC.none(h)){h=false}var b=this.get("selection"),g=this.get("content");if(b){b=b.indexSetForSource(g)}var a=b?b.get("min"):-1,d=b?b.get("max")-1:-1,e=this._selectionAnchor,c=this.get("length");if(SC.none(e)){e=a}if(h){if(a<e){a=a+i}else{d=this._findNextSelectableItemFromIndex(d+i,d)}if(d>=c){d=c-1}if(!g.objectAt(d)){d=b?b.get("max")-1:-1}if(a>d){a=d}}else{d=this._findNextSelectableItemFromIndex(d+i,d);if(d>=c){d=c-1}if(!g.objectAt(d)){d=b?b.get("max")-1:-1}a=d;e=null}var f=d;b=SC.IndexSet.create(a,d-a+1);this.scrollToContentIndex(f);this.select(b);this._selectionAnchor=e;return this},deleteSelection:function(){if(!this.get("isEditable")||!this.get("canDeleteContent")){return NO}var d=this.get("selection"),c=this.get("content"),a=this.get("selectionDelegate"),b=d&&c?d.indexSetForSource(c):null;if(!c||!b||b.get("length")===0){return NO}b=a.collectionViewShouldDeleteIndexes(this,b);if(!b||b.get("length")===0){return NO}a.collectionViewDeleteContent(this,this.get("content"),b);return YES},scrollToContentIndex:function(b){var a=this.itemViewForContentIndex(b);if(a){this.scrollToItemView(a)}return this},scrollToItemView:function(a){if(a){a.scrollToVisible()}return this},keyDown:function(a){var b=this.interpretKeyEvents(a);return !b?NO:b},keyUp:function(){return true},insertText:function(b,a){if(b===" "){var c=this.get("selection");if(c&&c.get("length")>0){this.invokeLater(this._cv_action,0,null,a)}return YES}else{return NO}},selectAll:function(b){var c=this.get("content"),a=this.delegateFor("allowsMultipleSelection",this.get("delegate"),c);if(a&&a.get("allowsMultipleSelection")){var d=c?SC.IndexSet.create(0,c.get("length")):null;this.select(d,NO)}return YES},deselectAll:function(){var b=this.get("content"),a=this.delegateFor("allowsEmptySelection",this.get("delegate"),b);if(a&&a.get("allowsEmptySelection")){var c=b?SC.IndexSet.create(0,b.get("length")):null;this.deselect(c,NO)}return YES},deleteBackward:function(a){return this.deleteSelection()},deleteForward:function(a){return this.deleteSelection()},moveDown:function(b,a){this.selectNextItem(false,this.get("itemsPerRow")||1);this._cv_performSelectAction(null,a,this.ACTION_DELAY);return true},moveUp:function(b,a){this.selectPreviousItem(false,this.get("itemsPerRow")||1);this._cv_performSelectAction(null,a,this.ACTION_DELAY);return true},moveLeft:function(k){if(k.ctrlKey||k.metaKey){return NO}if((this.get("itemsPerRow")||1)>1){this.selectPreviousItem(false,1);this._cv_performSelectAction(null,k,this.ACTION_DELAY)}else{var c=this.get("selection"),i=this.get("content"),g=c?c.indexSetForSource(i):null;if(g){var l,f=false,h;if(g.get("length")===1){h=g.get("firstObject");l=this.get("contentDelegate");var b=l.contentIndexDisclosureState(this,i,h);if(b!==SC.BRANCH_OPEN){f=true}}if(f){var a=l.contentIndexOutlineLevel(this,i,h)-1;if(a>=0){var e=-1;while(e<0){var d=this._findPreviousSelectableItemFromIndex(h-1);if(d<0){return false}h=d;var j=l.contentIndexOutlineLevel(this,i,h);if(j===a){e=d}}if(e!==-1){this.select(h)}}}else{this.collapse(g)}}}return true},moveRight:function(a){if(a.ctrlKey||a.metaKey){return NO}if((this.get("itemsPerRow")||1)>1){this.selectNextItem(false,1);this._cv_performSelectAction(null,a,this.ACTION_DELAY)}else{var d=this.get("selection"),c=this.get("content"),b=d?d.indexSetForSource(c):null;if(b){this.expand(b)}}return true},moveDownAndModifySelection:function(c,b){var d=this.get("content"),a=this.delegateFor("allowsMultipleSelection",this.get("delegate"),d);if(a&&a.get("allowsMultipleSelection")){this.selectNextItem(true,this.get("itemsPerRow")||1);this._cv_performSelectAction(null,b,this.ACTION_DELAY)}return true},moveUpAndModifySelection:function(c,b){var d=this.get("content"),a=this.delegateFor("allowsMultipleSelection",this.get("delegate"),d);if(a&&a.get("allowsMultipleSelection")){this.selectPreviousItem(true,this.get("itemsPerRow")||1);this._cv_performSelectAction(null,b,this.ACTION_DELAY)}return true},moveLeftAndModifySelection:function(b,a){if((this.get("itemsPerRow")||1)>1){this.selectPreviousItem(true,1);this._cv_performSelectAction(null,a,this.ACTION_DELAY)}return true},moveRightAndModifySelection:function(b,a){if((this.get("itemsPerRow")||1)>1){this.selectNextItem(true,1);this._cv_performSelectAction(null,a,this.ACTION_DELAY)}return true},insertNewline:function(c,i){var d=this.get("isEditable")&&this.get("canEditContent"),a=false,b,e,g,h,f;if(d){b=this.get("selection");e=this.get("content");if(b&&b.get("length")===1){g=b.indexSetForSource(e);h=g?g.get("min"):-1;f=this.itemViewForContentIndex(h);a=f&&SC.typeOf(f.beginEditing)===SC.T_FUNCTION}}if(a){this.scrollToContentIndex(h);f.beginEditing()}else{this.invokeLater(this._cv_action,0,f,null)}return YES},insertTab:function(b){var a=this.get("nextValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES},insertBacktab:function(b){var a=this.get("previousValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES},mouseDown:function(j){var g=this.get("content");if(!g){return this.get("isSelectable")}var h=this.itemViewForEvent(j),e=h?h.get("contentIndex"):-1,c,d,b,a,k,f=NO,i=g.get("allowsMultipleSelection");if(!this.get("isEnabledInPane")){return e>-1}if(!this.get("isSelectable")){return NO}this.becomeFirstResponder();if(this.get("useToggleSelection")){if(this.get("selectOnMouseDown")){if(!h){return}b=this.get("selection");a=b&&b.contains(g,e,1);if(a){this.deselect(e)}else{if(!i){this.select(e,NO);f=YES}else{this.select(e,YES);f=YES}}if(f&&this.get("actOnSelect")){this._cv_performSelectAction(h,j)}}return YES}if(!h){if(this.get("allowDeselectAll")){this.select(null,false)}return YES}b=this.get("selection");if(b){b=b.indexSetForSource(g)}c=this.mouseDownInfo={event:j,itemView:h,contentIndex:e,at:Date.now()};a=b?b.contains(e):NO;c.modifierKeyPressed=k=j.ctrlKey||j.metaKey;if(k&&a){c.shouldDeselect=e>=0}else{if(j.shiftKey&&b&&b.get("length")>0&&i){b=this._findSelectionExtendedByShift(b,e);d=this._selectionAnchor;this.select(b);this._selectionAnchor=d}else{if(!k&&a){c.shouldReselect=e>=0}else{if((j.shiftKey||k)&&!i){this.select(null,false)}if(this.get("selectOnMouseDown")){this.select(e,k)}else{c.shouldSelect=e>=0}}}}c.previousContentIndex=e;return YES},mouseUp:function(i){var j=this.itemViewForEvent(i),d=this.mouseDownInfo,f=this.get("content");if(!f){this._cleanupMouseDown();return true}var e=j?j.get("contentIndex"):-1,c,a,b,g,k,h=f.get("allowsMultipleSelection");if(!this.get("isEnabledInPane")){return e>-1}if(!this.get("isSelectable")){return NO}if(this.get("useToggleSelection")){if(!j||this.get("selectOnMouseDown")){return NO}c=this.get("selection");a=c&&c.contains(f,e,1);if(a){this.deselect(e)}else{if(!h){this.select(e,NO)}else{this.select(e,YES)}}}else{if(d){k=d.contentIndex;e=(j)?j.get("contentIndex"):-1;if(d.shouldSelect){this.select(k,d.modifierKeyPressed)}if(d.shouldDeselect){this.deselect(k)}if(d.shouldReselect){b=this.get("isEditable")&&this.get("canEditContent");if(b){c=this.get("selection");b=c&&(c.get("length")===1)}if(b){g=this.itemViewForContentIndex(k);b=g&&(!g.contentHitTest||g.contentHitTest(i));b=(b&&g.beginEditing)?g.beginEditing():NO}if(!b){if(this._cv_reselectTimer){this._cv_reselectTimer.invalidate()}this._cv_reselectTimer=this.invokeLater(this.select,300,k,false)}}this._cleanupMouseDown()}}this._cv_performSelectAction(j,i,0,i.clickCount);return NO},_cleanupMouseDown:function(){var b=this.mouseDownInfo,a;if(b){for(a in b){if(!b.hasOwnProperty(a)){continue}delete b[a]}}this.mouseDownInfo=null},mouseMoved:function(c){var a=this.itemViewForEvent(c),b=this._lastHoveredItem;if(a!==b){if(b&&b.mouseExited){b.mouseExited(c)}if(a&&a.mouseEntered){a.mouseEntered(c)}}this._lastHoveredItem=a;if(a&&a.mouseMoved){a.mouseMoved(c)}return YES},mouseExited:function(b){var a=this._lastHoveredItem;this._lastHoveredItem=null;if(a&&a.mouseExited){a.mouseExited(b)}return YES},touchStart:function(d,a){var b=this.itemViewForEvent(d),c=b?b.get("contentIndex"):-1;if(!this.get("isEnabledInPane")){return c>-1}this.becomeFirstResponder();this._touchSelectedView=b;if(!this.get("useToggleSelection")){if(b&&!b.get("isSelected")){b.set("isSelected",YES)}}return YES},touchesDragged:function(a,b){b.forEach(function(c){if(Math.abs(c.pageX-c.startX)>5||Math.abs(c.pageY-c.startY)>5){c.makeTouchResponder(c.nextTouchResponder)}},this)},touchEnd:function(g){var d=this.get("content"),c=this._touchSelectedView,f=c?c.get("contentIndex"):-1,a=NO,e,b;if(!this.get("isEnabledInPane")){return f>-1}if(f>-1){if(this.get("useToggleSelection")){e=this.get("selection");a=e&&e.contains(d,f,1);b=!a}else{b=true}if(b){this.select(f,NO);this._cv_performSelectAction(c,g,0)}else{this.deselect(f)}}this._touchSelectedView=null},touchCancelled:function(a){if(this._touchSelectedView){this._touchSelectedView.set("isSelected",NO);this._touchSelectedView=null}},_findSelectionExtendedByShift:function(d,e){if(!d||d.get("length")===0){return SC.IndexSet.create(e)}var c=d.get("min"),a=d.get("max")-1,b=this._selectionAnchor;if(SC.none(b)){b=-1}if(e<c){c=e;if(b<0){this._selectionAnchor=b=a}}else{if(e>a){a=e;if(b<0){this._selectionAnchor=b=c}}else{if(e>=c&&e<=a){if(b<0){this._selectionAnchor=b=c}if(e===b){c=a=e}else{if(e>b){c=b;a=e}else{if(e<b){c=e;a=b}}}}}}return SC.IndexSet.create(c,a-c+1)},reorderDataType:function(){return"SC.CollectionView.Reorder."+SC.guidFor(this)}.property().cacheable(),dragContent:null,proposedInsertionIndex:null,proposedDropOperation:null,mouseDragged:function(h){var i=this.get("selectionDelegate"),e=this.get("content"),a=this.get("selection"),c=this.mouseDownInfo,f=this.get("_contentGroupIndexes"),d,b,g;if(!c||c.contentIndex<0){return YES}if((Date.now()-c.at)<123){return YES}if(this.get("isEditable")&&i.collectionViewShouldBeginDrag(this)){if(!this.get("selectOnMouseDown")){d=SC.IndexSet.create(c.contentIndex)}else{d=a?a.indexSetForSource(e):null}if(d&&f&&f.get("length")>0){d=d.copy().remove(f);if(d.get("length")===0){d=null}else{d.freeze()}}if(!d){return YES}else{d=d.frozenCopy()}d={content:e,indexes:d};this.set("dragContent",d);b=this.get("dragDataTypes");if(b&&b.get("length")>0){g=i.collectionViewDragViewFor(this,d.indexes);if(!g){g=this._cv_dragViewFor(d.indexes)}SC.Drag.start({event:c.event,source:this,dragView:g,ghost:NO,ghostActsLikeCursor:i.ghostActsLikeCursor,slideBack:YES,dataSource:this});this._cleanupMouseDown();this._lastInsertionIndex=null}else{this.set("dragContent",null)}return YES}},_cv_dragViewFor:function(f){var c=this.get("nowShowing").without(f),d=this.get("layer").cloneNode(false),b=SC.View.create({layer:d,parentView:this}),a=0,e;c=this.get("nowShowing").without(c);SC.$(d).css("backgroundColor","transparent").css("border","none").css("top",0).css("left",0);c.forEach(function(j){var o=this.itemViewForContentIndex(j),g,l,m;if(o){g=o.get("isSelected");o.set("isSelected",NO);o.updateLayerIfNeeded();l=o.get("layer");if(l){m=l.cloneNode(true);var p=o.$().find("canvas");if(p){var h=$(m).find("canvas"),n=p.length,k,q;for(j=0;j<n;j++){k=p[j];q=h[j];q.height=k.height;q.width=k.width;q.getContext("2d").drawImage(k,0,0)}}}o.set("isSelected",g);o.updateLayerIfNeeded()}if(m){d.appendChild(m);e=o.get("layout");if(e.height+e.top>a){a=e.height+e.top}}m=null},this);b.set("layout",{height:a});d=null;return b},dragDataTypes:function(){var a=this.get("selectionDelegate"),b=a.collectionViewDragDataTypes(this),c;if(this.get("canReorderContent")){b=b?b.copy():[];c=this.get("reorderDataType");if(b.indexOf(c)<0){b.push(c)}}return b?b:[]}.property(),dragDataForType:function(c,b){if(this.get("canReorderContent")){if(b===this.get("reorderDataType")){return this.get("dragContent")}}var a=this.get("selectionDelegate");return a.collectionViewDragDataForType(this,c,b)},computeDragOperations:function(c,b){var d=SC.DRAG_NONE,a=this.get("selectionDelegate");if(this.get("canReorderContent")){if(c.get("dataTypes").indexOf(this.get("reorderDataType"))>=0){d=SC.DRAG_REORDER}}d=a.collectionViewComputeDragOperations(this,c,d);if(d&SC.DRAG_REORDER){d=SC.DRAG_MOVE}return d},_computeDropOperationState:function(c,l,e){var g=this.convertFrameFromView(c.get("location"),null),k=SC.DROP_BEFORE,m=this.get("selectionDelegate"),d=this.get("canReorderContent"),n,h,a,i,f,b;var j=this.insertionIndexForLocation(g,SC.DROP_ON);if(SC.typeOf(j)===SC.T_ARRAY){k=j[1];j=j[0]}if(k===SC.DROP_ON){this.set("proposedInsertionIndex",j);this.set("proposedDropOperation",k);b=m.collectionViewValidateDragOperation(this,c,e,j,k);j=this.get("proposedInsertionIndex");k=this.get("proposedDropOperation");this._dropInsertionIndex=this._dropOperation=null;if(b!==SC.DRAG_NONE){return[j,k,b]}else{k=SC.DROP_BEFORE;j=this.insertionIndexForLocation(g,SC.DROP_BEFORE);if(SC.typeOf(j)===SC.T_ARRAY){k=j[1];j=j[0]}}}if((j>=0)&&d&&(k!==SC.DROP_ON)){n=c.dataForType(this.get("reorderDataType"));if(n){h=this.get("content");if(k===SC.DROP_BEFORE){a=n.indexes.contains(j-1);i=n.indexes.contains(j)}else{a=n.indexes.contains(j);i=n.indexes.contains(j-1)}if(a&&i){if(SC.none(this._lastInsertionIndex)){if(k===SC.DROP_BEFORE){while((j>=0)&&n.indexes.contains(j)){j--}}else{f=h?h.get("length"):0;while((j<f)&&n.indexes.contains(j)){j++}}}else{j=this._lastInsertionIndex}}if(j>=0){e=SC.DRAG_REORDER}}}this.set("proposedInsertionIndex",j);this.set("proposedDropOperation",k);e=m.collectionViewValidateDragOperation(this,c,e,j,k);j=this.get("proposedInsertionIndex");k=this.get("proposedDropOperation");this._dropInsertionIndex=this._dropOperation=null;return[j,k,e]},dragUpdated:function(f,b){var h=f.get("allowedDragOperations"),g=this._computeDropOperationState(f,b,h),a=g[0],c=g[1],e=g[2];if(e!==SC.DRAG_NONE){if((this._lastInsertionIndex!==a)||(this._lastDropOperation!==c)){var d=this.itemViewForContentIndex(a);this.showInsertionPoint(d,c)}this._lastInsertionIndex=a;this._lastDropOperation=c}else{this.hideInsertionPoint();this._lastInsertionIndex=this._lastDropOperation=null}return(e&SC.DRAG_REORDER)?SC.DRAG_MOVE:e},dragEnded:function(){this.hideInsertionPoint();this._lastInsertionIndex=this._lastDropOperation=null},acceptDragOperation:function(a,b){return YES},performDragOperation:function(e,g){var a=this._computeDropOperationState(e,null,g),k=a[0],j=a[1],h=a[2],l=this.get("selectionDelegate"),c,m,d,i,b,f;if(h&SC.DRAG_REORDER){g=(g&SC.DRAG_MOVE)?SC.DRAG_REORDER:SC.DRAG_NONE}else{g=g&h}if(g===SC.DRAG_NONE){return g}c=l.collectionViewPerformDragOperation(this,e,g,k,j);if((c===SC.DRAG_NONE)&&(g&SC.DRAG_REORDER)){d=e.dataForType(this.get("reorderDataType"));if(!d){return SC.DRAG_NONE}i=this.get("content");f=d.indexes;if(f.get("length")===1){if(((j===SC.DROP_BEFORE)||(j===SC.DROP_AFTER))&&(f.get("min")===k)){return SC.DRAG_MOVE}}i.beginPropertyChanges();m=[];b=0;d.indexes.forEach(function(n){m.push(i.objectAt(n-b));i.removeAt(n-b);b++;if(n<k){k--}},this);if(j===SC.DROP_AFTER){k++}i.replace(k,0,m,j);this.select(SC.IndexSet.create(k,m.length));i.endPropertyChanges();g=SC.DRAG_MOVE}return g},collectionViewShouldBeginDrag:function(a){return this.get("canReorderContent")},insertionIndexForLocation:function(a,b){return -1},touchScrollDidStart:function(){var a=this.get("clippingFrame");this._inScrollClippingFrame={x:a.x,y:a.y,width:a.width,height:a.height}},_lastTouchScrollTime:null,touchScrollDidChange:function(c,b,d){if(Date.now()-this._lastTouchScrollTime<30){return}var a=this._inScrollClippingFrame;a.x=c;a.y=b;SC.run(function(){this.notifyPropertyChange("nowShowing");this.invokeOnce("_cv_nowShowingDidChange")},this);this._lastTouchScrollTime=Date.now()},touchScrollDidEnd:function(){this._inScrollClippingFrame=null},willShowInDocument:function(){if(this._invalidIndexes){this.invokeOnce(this.reloadIfNeeded)}if(this._invalidSelection){this.invokeOnce(this.reloadSelectionIndexesIfNeeded)}},didAppendToDocument:function(){if(this._invalidIndexes){this.invokeOnce(this.reloadIfNeeded)}if(this._invalidSelection){this.invokeOnce(this.reloadSelectionIndexesIfNeeded)}},collectionViewShouldSelectItem:function(a,b){return this.get("isSelectable")},_TMP_DIFF1:SC.IndexSet.create(),_TMP_DIFF2:SC.IndexSet.create(),_cv_nowShowingDidChange:function(){var b=this.get("nowShowing"),a=this._sccv_lastNowShowing,d,e,c;if(a!==b){if(a&&b){e=this._TMP_DIFF1.add(a).remove(b);c=this._TMP_DIFF2.add(b).remove(a);d=e.add(c)}else{d=a||b}}if(d&&d.get("length")>0){this._sccv_lastNowShowing=b?b.frozenCopy():null;this.updateContentRangeObserver();this.reload(d)}if(e){e.clear()}if(c){c.clear()}}.observes("nowShowing"),init:function(){arguments.callee.base.apply(this,arguments);if(this.get("canReorderContent")){this._cv_canReorderContentDidChange()}this._sccv_lastNowShowing=this.get("nowShowing").clone();if(this.content){this._cv_contentDidChange()}if(this.selection){this._cv_selectionDidChange()}},_cv_canReorderContentDidChange:function(){if(this.get("canReorderContent")){if(!this.get("isDropTarget")){this.set("isDropTarget",YES)}SC.Drag.addDropTarget(this)}}.observes("canReorderContent"),_cv_performSelectAction:function(b,d,c,a){var e;if(c===undefined){c=0}if(a===undefined){a=1}if((a>1)||this.get("actOnSelect")){if(this._cv_reselectTimer){this._cv_reselectTimer.invalidate()}e=this.get("selection");e=e?e.toArray():[];if(this._cv_actionTimer){this._cv_actionTimer.invalidate()}this._cv_actionTimer=this.invokeLater(this._cv_action,c,b,d,e)}},_cv_action:function(b,a,c){var d=this.get("action");var e=this.get("target")||null;this._cv_actionTimer=null;if(d){if(SC.typeOf(d)===SC.T_FUNCTION){return this.action(b,a)}var f=this.get("pane");if(f){f.rootResponder.sendAction(d,e,this,f,c)}}else{if(!b){return}else{if(SC.typeOf(b._action)==SC.T_FUNCTION){return b._action(a)}else{if(SC.typeOf(b.action)==SC.T_FUNCTION){return b.action(a)}}}}},_attrsForContentIndex:function(j){var k=this._TMP_ATTRS,l=this.get("contentDelegate"),g=this.get("content"),c=this._contentIndexIsGroup(j),m=this.get("isEditable")&&this.get("canEditContent"),b=this.get("isEditable")&&this.get("canReorderContent"),e=this.get("isEditable")&&this.get("canDeleteContent"),i=l.contentIndexIsEnabled(this,g,j),a=l.contentIndexIsSelected(this,g,j),h=l.contentIndexOutlineLevel(this,g,j),f=l.contentIndexDisclosureState(this,g,j);k.contentIndex=j;k.content=g.objectAt(j);k.disclosureState=f;k.isEnabled=i;k.isEditable=m;k.isReorderable=b;k.isDeletable=e;k.isSelected=a;k.isGroupView=c;k.layerId=this.layerIdFor(j);k.owner=k.displayDelegate=this;k.page=this.page;k.outlineLevel=h;k.isLast=j===g.get("length")-1;if(c){k.classNames=this._GROUP_COLLECTION_CLASS_NAMES}else{k.classNames=this._COLLECTION_CLASS_NAMES}var d=this.layoutForContentIndex(j);if(d){k.layout=d}else{delete k.layout}return k},_contentGroupIndexes:function(){return this.get("contentDelegate").contentGroupIndexes(this,this.get("content"))}.property("contentDelegate").cacheable(),_contentIndexIsGroup:function(a){var d=this.get("_contentGroupIndexes");if(d&&d.contains(a)){var b=this.get("contentDelegate"),c=this.get("content");return b.contentIndexIsGroup(this,c,a)}else{return false}},_exampleViewForContentIndex:function(b){var d,a,c=this.get("content"),e=c.objectAt(b);if(this._contentIndexIsGroup(b)){d=this.get("contentGroupExampleViewKey");if(d&&e){a=e.get(d)}if(!a){a=this.get("groupExampleView")||this.get("exampleView")}}else{d=this.get("contentExampleViewKey");if(d&&e){a=e.get(d)}if(!a){a=this.get("exampleView")}}return a},_poolForExampleView:function(a){var b=SC.guidFor(a);if(!this._pools){this._pools={}}if(!this._pools[b]){this._pools[b]=[]}return this._pools[b]},_poolLayoutForContentIndex:function(b){var a=this.layoutForContentIndex(b);if(a&&a.height){if(a.top){a.top=-a.height}else{a.bottom=-a.height}}else{if(a&&a.width){if(a.left){a.left=-a.width}else{a.right=-a.width}}}return a},_reconfigureItemView:function(c,b){c.beginPropertyChanges();c.set("content",b.content);c.set("contentIndex",b.contentIndex);c.set("isEnabled",b.isEnabled);c.set("isEditable",b.isEditable);c.set("isReorderable",b.isReorderable);c.set("isDeletable",b.isDeletable);c.set("isSelected",b.isSelected);c.set("layerId",b.layerId);c.set("outlineLevel",b.outlineLevel);c.set("disclosureState",b.disclosureState);c.set("isLast",b.isLast);if(b.layout){c.set("layout",b.layout)}var e=c.get("isGroupView"),a=b.isGroupView;if(e!==a){c.set("isGroupView",a);var f=c.get("classNames"),d=c.$();if(e&&!a){f.pushObject("sc-item");f.removeObject("sc-group-item");d.setClass({"sc-item":YES,"sc-group-item":NO})}else{f.removeObject("sc-item");f.pushObject("sc-group-item");d.setClass({"sc-item":NO,"sc-group-item":YES})}}c.endPropertyChanges()},_removeItemView:function(f,j){var d,g=this.get("content"),a,h,c,e,i,b=false;if(g&&f.get("content")===g.objectAt(j)){d=this._exampleViewForContentIndex(j);i=d.prototype;a=SC.none(i.isReusable)||i.isReusable;if(a){e=this._poolForExampleView(d);if(f.sleepInPool){f.sleepInPool(this)}e.push(f);c=this._poolLayoutForContentIndex(j);h=c&&(SC.none(i.isLayerReusable)||i.isLayerReusable);if(h){f.set("layout",c)}else{f.destroyLayer()}f.set("layerId",SC.generateGuid(null,"pool-"));b=true}}if(!b){f.destroy()}delete this._sc_itemViews[j]}});SC.DateFieldView=SC.TextFieldView.extend({value:null,showDate:YES,showTime:NO,allowNumericInput:YES,formatTime:"%I:%M %p",formatDate:"%d/%m/%Y",formatDateTime:"%d/%m/%Y %I:%M %p",_dtConstants:["%a","%b","%d","%H","%I","%j","%m","%M","%p","%S","%U","%W","%y","%Y"],_wtConstants:[3,3,2,2,2,3,2,2,2,2,2,2,2,4],activeSelection:0,format:function(){var a=this.get("showTime");var b=this.get("showDate");if(a===YES&&b===YES){return this.get("formatDateTime")}if(a===YES){return this.get("formatTime")}return this.get("formatDate")}.property("showTime","showDate","formatDateTime","formatDate","formatTime").cacheable(),validator:function(){return SC.Validator.DateTime.extend({format:this.get("format")})}.property("format").cacheable(),tabsSelections:function(){var f=[];var d=this.get("format");var i=this.get("_dtConstants");var b=this.get("_wtConstants");if(SC.empty(d)){throw new Error("The format string is empty, and must be a valid string.")}var g,j,c,e=0,a=0,h=0;while(e<d.length&&d.indexOf("%",e)!==-1){g=d.indexOf("%",e);j=d.substring(g,g+2);e=g+2;c=i.indexOf(j);if(c===-1){throw new Error("SC.DateFieldView: The format's key '%@' is not supported.".fmt(j))}a=a+g-h;f.push(SC.Object.create({key:j,textSelection:SC.TextSelection.create({start:a,end:a+b[c]})}));a=a+b[c];h=e}g=j=c=null;return f}.property("format").cacheable(),updateTextSelectionObserver:function(){var a=this.get("activeSelection");var b=this.get("tabsSelections");if(this.get("isEditing")){this.selection(null,b[a].get("textSelection"))}}.observes("activeSelection","value"),updateValue:function(b,c){var e=(c===0)?-1:1;var d=this.get("value"),a;switch(b){case"%a":case"%d":case"%j":this.set("value",d.advance({day:e}));break;case"%b":case"%m":this.set("value",d.advance({month:e}));break;case"%H":case"%I":this.set("value",d.advance({hour:e}));break;case"%M":this.set("value",d.advance({minute:e}));break;case"%p":a=d.get("hour")>=12?-12:12;this.set("value",d.advance({hour:a}));break;case"%S":this.set("value",d.advance({second:e}));break;case"%U":this.set("value",d.advance({week1:e}));break;case"%W":this.set("value",d.advance({week0:e}));break;case"%y":case"%Y":this.set("value",d.advance({year:e}));break}},_lastValue:null,_lastKey:null,_selectRootElement:function(){},keyDown:function(a){if(this.interpretKeyEvents(a)){a.stop();return YES}return arguments.callee.base.apply(this,arguments)},ctrl_a:function(){return YES},moveUp:function(b){var a=this.get("activeSelection");var c=this.get("tabsSelections");this.updateValue(c[a].get("key"),1);return YES},moveDown:function(b){var a=this.get("activeSelection");var c=this.get("tabsSelections");this.updateValue(c[a].get("key"),0);return YES},moveRight:function(a){var c=this.get("tabsSelections");var b=this.get("activeSelection")+1;if(b===c.length){b=0}this.set("activeSelection",b);return YES},moveLeft:function(a){var c=this.get("tabsSelections");var b=this.get("activeSelection")-1;if(b===-1){b=c.length-1}this.set("activeSelection",b);return YES},insertTab:function(a){var c=this.get("tabsSelections");var b=this.get("activeSelection")+1;if(b<c.length){this.set("activeSelection",b);return YES}return NO},insertBacktab:function(a){var b=this.get("activeSelection")-1;if(b!==-1){this.set("activeSelection",b);return YES}return NO},mouseUp:function(b){var c=arguments.callee.base.apply(this,arguments);var e=this.get("selection");if(SC.none(e)){this.set("activeSelection",0)}else{var h=e.get("start");var g=this.get("tabsSelections");var a=g.length,f;for(var d=0;d<a;d++){f=g[d].get("textSelection");if(h>=f.get("start")&&h<=f.get("end")){this.set("activeSelection",d)}}}return c},deleteBackward:function(a){return YES},deleteForward:function(a){return YES},_numericCharacters:["0","1","2","3","4","5","6","7","8","9"],_nonnumericCharacters:[" ","-","/",":"],insertText:function(e,l){if(this._nonnumericCharacters.contains(e)){this.moveRight()}if(this.get("allowNumericInput")&&this._numericCharacters.contains(e)){var c=this.get("activeSelection"),g=this.get("tabsSelections"),k=g[c].get("key");var j=this.get("value"),i=this._lastValue,b=2,d=0,h,k,a;switch(k){case"%Y":k="year";d=1000;h=9999;b=4;break;case"%y":k="year";h=99;break;case"%m":k="month";d=1;h=12;break;case"%d":k="day";d=1;h=j.advance({month:1}).adjust({day:0}).get("day");break;case"%H":k="hour";h=23;break;case"%I":k="hour";h=11;break;case"%M":k="minute";h=59;break;case"%S":k="second";h=59;break}if(SC.none(i)||this._lastKey!==k){i=j.get(k);i=(i<10?"0":"")+i}if(i.length>b){i=i.substr(-b)}i=i.slice(1)+e;a=parseInt(i,10);if(a<=h&&a>=d){var f={};f[k]=a;this.set("value",j.adjust(f,NO))}this._lastValue=i;this._lastKey=k}return YES}});SC.DisclosureView=SC.ButtonView.extend({classNames:["sc-disclosure-view"],renderDelegateName:"disclosureRenderDelegate",buttonBehavior:SC.TOGGLE_BEHAVIOR,toggleOnValue:YES,toggleOffValue:NO,valueBindingDefault:SC.Binding.bool(),keyDown:function(a){if(a.which===37||a.which===38){this.set("value",this.get("toggleOffValue"));return YES}if(a.which===39||a.which===40){this.set("value",this.get("toggleOnValue"));return YES}arguments.callee.base.apply(this,arguments)}});SC.LIST_ITEM_ACTION_CANCEL="sc-list-item-cancel-action";SC.LIST_ITEM_ACTION_REFRESH="sc-list-item-cancel-refresh";SC.LIST_ITEM_ACTION_EJECT="sc-list-item-cancel-eject";SC.ListItemView=SC.View.extend(SC.InlineEditable,SC.Control,{classNames:["sc-list-item-view"],displayProperties:["disclosureState","escapeHTML","isDropTarget"],contentIndex:null,hasContentIcon:NO,hasContentRightIcon:NO,hasContentBranch:NO,contentCheckboxKey:null,icon:null,isDropTarget:NO,contentIconKey:null,rightIcon:null,contentRightIconKey:null,contentValueKey:null,escapeHTML:YES,contentUnreadCountKey:null,contentIsBranchKey:null,outlineIndent:16,outlineLevel:0,disclosureState:SC.LEAF_NODE,validator:null,contentKeys:{contentValueKey:"title",contentCheckboxKey:"checkbox",contentIconKey:"icon",contentRightIconKey:"rightIcon",contentUnreadCountKey:"count",contentIsBranchKey:"branch"},contentPropertyDidChange:function(){if(this.get("contentIsEditable")!==this.contentIsEditable()){this.notifyPropertyChange("contentIsEditable")}this.displayDidChange()},contentIsEditable:function(){var a=this.get("content");return a&&(a.get?a.get("isEditable")!==NO:NO)}.property("content").cacheable(),inlineEditorDelegate:SC.InlineTextFieldDelegate,$label:function(){return this.$("label")},_isInsideElementWithClassName:function(e,a){var c=this.get("layer");if(!c){return NO}var d=SC.$(a.target);var b=NO;while(!b&&d.length>0&&(d[0]!==c)){if(d.hasClass(e)){b=YES}d=d.parent()}d=c=null;return b},_isInsideCheckbox:function(b){var a=this.displayDelegate;var c=this.getDelegateProperty("contentCheckboxKey",a);return c&&this._isInsideElementWithClassName("sc-checkbox-view",b)},_isInsideDisclosure:function(a){if(this.get("disclosureState")===SC.LEAF_NODE){return NO}return this._isInsideElementWithClassName("sc-disclosure-view",a)},_isInsideRightIcon:function(c){var b=this.displayDelegate;var a=this.getDelegateProperty("hasContentRightIcon",b)||!SC.none(this.rightIcon);return a&&this._isInsideElementWithClassName("right-icon",c)},mouseDown:function(a){if(a.which&&a.which!==1){return false}if(!this.get("contentIsEditable")){return NO}if(this._isInsideCheckbox(a)){this._addCheckboxActiveState();this._isMouseDownOnCheckbox=YES;this._isMouseInsideCheckbox=YES;return YES}else{if(this._isInsideDisclosure(a)){this._addDisclosureActiveState();this._isMouseDownOnDisclosure=YES;this._isMouseInsideDisclosure=YES;return YES}else{if(this._isInsideRightIcon(a)){this._addRightIconActiveState();this._isMouseDownOnRightIcon=YES;this._isMouseInsideRightIcon=YES;return YES}}}return NO},mouseUp:function(h){var c=NO,i,d,b,a,g,f;if(this._isMouseDownOnCheckbox){if(this._isInsideCheckbox(h)){i=this.displayDelegate;d=this.getDelegateProperty("contentCheckboxKey",i);b=this.get("content");if(b&&b.get){var e=b.get(d);e=(e===SC.MIXED_STATE)?YES:!e;b.set(d,e);this.displayDidChange()}}this._removeCheckboxActiveState();c=YES}else{if(this._isMouseDownOnDisclosure){if(this._isInsideDisclosure(h)){a=this.get("disclosureState");g=this.get("contentIndex");f=(!SC.none(g))?SC.IndexSet.create(g):null;i=this.get("displayDelegate");if(a===SC.BRANCH_OPEN){if(f&&i&&i.collapse){i.collapse(f)}else{this.set("disclosureState",SC.BRANCH_CLOSED)}this.displayDidChange()}else{if(a===SC.BRANCH_CLOSED){if(f&&i&&i.expand){i.expand(f)}else{this.set("disclosureState",SC.BRANCH_OPEN)}this.displayDidChange()}}}this._removeDisclosureActiveState();c=YES}else{if(this._isMouseDownOnRightIcon){this._removeRightIconActiveState();c=YES}}}this._isMouseInsideCheckbox=this._isMouseDownOnCheckbox=NO;this._isMouseDownOnDisclosure=this._isMouseInsideDisclosure=NO;this._isMouseInsideRightIcon=this._isMouseDownOnRightIcon=NO;return c},mouseMoved:function(a){if(this._isMouseDownOnCheckbox&&this._isInsideCheckbox(a)){this._addCheckboxActiveState();this._isMouseInsideCheckbox=YES}else{if(this._isMouseDownOnCheckbox){this._removeCheckboxActiveState();this._isMouseInsideCheckbox=NO}else{if(this._isMouseDownOnDisclosure&&this._isInsideDisclosure(a)){this._addDisclosureActiveState();this._isMouseInsideDisclosure=YES}else{if(this._isMouseDownOnDisclosure){this._removeDisclosureActiveState();this._isMouseInsideDisclosure=NO}else{if(this._isMouseDownOnRightIcon&&this._isInsideRightIcon(a)){this._addRightIconActiveState();this._isMouseInsideRightIcon=YES}else{if(this._isMouseDownOnRightIcon){this._removeRightIconActiveState();this._isMouseInsideRightIcon=NO}}}}}}return NO},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)},touchEntered:function(a){return this.mouseEntered(a)},touchExited:function(a){return this.mouseExited(a)},_addCheckboxActiveState:function(){if(this.get("isEnabled")){if(this._checkboxRenderDelegate){var a=this._checkboxRenderSource;a.set("isActive",YES);this._checkboxRenderDelegate.update(a,this.$(".sc-checkbox-view"))}else{this.$(".sc-checkbox-view").addClass("active")}}},_removeCheckboxActiveState:function(){if(this._checkboxRenderer){var a=this._checkboxRenderSource;a.set("isActive",NO);this._checkboxRenderDelegate.update(a,this.$(".sc-checkbox-view"))}else{this.$(".sc-checkbox-view").removeClass("active")}},_addDisclosureActiveState:function(){if(this.get("isEnabled")){if(this._disclosureRenderDelegate){var a=this._disclosureRenderSource;a.set("isActive",YES);this._disclosureRenderDelegate.update(a,this.$(".sc-disclosure-view"))}else{this.$(".sc-disclosure-view").addClass("active")}}},_removeDisclosureActiveState:function(){if(this._disclosureRenderer){var a=this._disclosureRenderSource;a.set("isActive",NO);this._disclosureRenderDelegate.update(a,this.$(".sc-disclosure-view"))}else{this.$(".sc-disclosure-view").addClass("active")}},_addRightIconActiveState:function(){this.$("img.right-icon").setClass("active",YES)},_removeRightIconActiveState:function(){this.$("img.right-icon").removeClass("active");var d=this.get("pane"),a=this.displayDelegate,c=this.getDelegateProperty("rightIconTarget",a),b=this.getDelegateProperty("rightIconAction",a);if(b&&d){d.rootResponder.sendAction(b,c,this,d)}},contentHitTest:function(b){var a=this.displayDelegate;var c=this.getDelegateProperty("contentValueKey",a);if(!c){return NO}var e=this.$label()[0];if(!e){return NO}var f=b.target,d=this.get("layer");while(f&&(f!==d)&&(f!==window)){if(f===e){return YES}f=f.parentNode}return NO},beginEditing:function(d,c){var f=this.$label(),e=this.get("parentView");if(c&&this.scrollToVisible()){var b=this.get("owner"),a=this.get("contentIndex");this.invokeLast(function(){var g=b.itemViewForContentIndex(a);if(g&&g.beginEditing){g.beginEditing(NO)}});return YES}else{if(!e||!f||f.get("length")===0){return NO}else{return d()}}}.enhance(),inlineEditorWillBeginEditing:function(i,d,m){var j=this.get("content"),o=this.get("displayDelegate"),e=this.getDelegateProperty("contentValueKey",o),b=this.$label(),a=this.get("validator"),h,n,g,r,k,l,q,p,c;n=(e&&j)?(j.get?j.get(e):j[e]):j;h=this.computeFrameWithParentFrame(null);l=this._oldLineHeight=b.css("lineHeight");r=b.css("fontSize");k=this.$().css("top");if(k){k=parseInt(k.substring(0,k.length-2),0)}else{k=0}p=0;if(r&&l){c=r*1.5;if(c<l){b.css({lineHeight:"1.5"});p=(l-c)/2}else{this._oldLineHeight=null}}b=b[0];g=SC.offset(b);h.x=g.x;h.y=g.y+k+p;h.height=b.offsetHeight;h.width=b.offsetWidth;q=this.get("escapeHTML");i.set({value:n,exampleFrame:h,exampleElement:b,multiline:NO,validator:a,escapeHTML:q})},inlineEditorShouldBeginEditing:function(a){return YES},inlineEditorDidBeginEditing:function(b,d,e,a){b(d,e,a);var c=this.$label();this._oldOpacity=c.css("opacity");c.css("opacity",0);if(this._oldLineHeight){c.css({lineHeight:this._oldLineHeight})}}.enhance(),inlineEditorDidCommitEditing:function(d,f,c){var e=this.get("content");var a=this.displayDelegate;var b=this.getDelegateProperty("contentValueKey",a);if(b&&e){if(e.set){e.set(b,f)}else{e[b]=f}}else{this.set("content",f)}this.displayDidChange();this._endEditing()},_endEditing:function(a){this.$label().css("opacity",this._oldOpacity);a()}.enhance(),isReusable:false,render:function(c,a){var f=this.get("content"),m=this.displayDelegate,b=this.get("outlineLevel"),e=this.get("outlineIndent"),l,j,i,n=[];n.push((this.get("contentIndex")%2===0)?"even":"odd");c.setClass("disabled",!this.get("isEnabled"));c.setClass("drop-target",this.get("isDropTarget"));i=c.begin("div").addClass("sc-outline");if(b>=0&&e>0){i.addStyle("left",e*(b+1))}j=this.get("disclosureState");if(j!==SC.LEAF_NODE){this.renderDisclosure(i,j);n.push("has-disclosure")}else{if(this._disclosureRenderSource){c.removeClass("has-disclosure");this._disclosureRenderSource.destroy();this._disclosureRenderSource=this._disclosureRenderDelegate=null}}l=this.getDelegateProperty("contentCheckboxKey",m);if(l){j=f?(f.get?f.get(l):f[l]):NO;if(j!==null){this.renderCheckbox(i,j);n.push("has-checkbox")}else{if(this._checkboxRenderSource){c.removeClass("has-checkbox");this._checkboxRenderSource.destroy();this._checkboxRenderSource=this._checkboxRenderDelegate=null}}}if(this.getDelegateProperty("hasContentIcon",m)){l=this.getDelegateProperty("contentIconKey",m);j=(l&&f)?(f.get?f.get(l):f[l]):null;if(j){this.renderIcon(i,j);n.push("has-icon")}}else{if(this.get("icon")){j=this.get("icon");this.renderIcon(i,j);n.push("has-icon")}}l=this.getDelegateProperty("contentValueKey",m);j=(l&&f)?(f.get?f.get(l):f[l]):f;if(j&&SC.typeOf(j)!==SC.T_STRING){j=j.toString()}if(this.get("escapeHTML")){j=SC.RenderContext.escapeHTML(j)}this.renderLabel(i,j);if(this.getDelegateProperty("hasContentRightIcon",m)){l=this.getDelegateProperty("contentRightIconKey",m);j=(l&&f)?(f.get?f.get(l):f[l]):null;if(j){this.renderRightIcon(i,j);n.push("has-right-icon")}}else{if(this.get("rightIcon")){j=this.get("rightIcon");this.renderRightIcon(i,j);n.push("has-right-icon")}}l=this.getDelegateProperty("contentUnreadCountKey",m);j=(l&&f)?(f.get?f.get(l):f[l]):null;if(!SC.none(j)&&(j!==0)){this.renderCount(i,j);var d=["zero","one","two","three","four","five"];var k=j.toString().length;var h=d.length;var g=(k<h)?d[k]:d[h-1];n.push("has-count",g+"-digit")}else{c.removeClass("has-count")}l=this.getDelegateProperty("listItemActionProperty",m);j=(l&&f)?(f.get?f.get(l):f[l]):null;if(j){this.renderAction(i,j);n.push("has-action")}if(this.getDelegateProperty("hasContentBranch",m)){l=this.getDelegateProperty("contentIsBranchKey",m);j=(l&&f)?(f.get?f.get(l):f[l]):NO;this.renderBranch(i,j);n.push("has-branch")}c.addClass(n);c=i.end()},renderDisclosure:function(a,d){var c=this.get("theme").disclosureRenderDelegate;a=a.begin("div").addClass("sc-disclosure-view").addClass("sc-regular-size").addClass(this.get("theme").classNames).addClass(c.get("className"));var b=this._disclosureRenderSource;if(!b){this._disclosureRenderSource=b=SC.Object.create({renderState:{},theme:this.get("theme")})}b.set("isSelected",d===SC.BRANCH_OPEN).set("isEnabled",this.get("isEnabled")).set("title","");c.render(b,a);a=a.end();this._disclosureRenderDelegate=c},renderCheckbox:function(a,d){var c=this.get("theme").checkboxRenderDelegate;a=a.begin("div").addClass("sc-checkbox-view").addClass("sc-regular-size").addClass(this.get("theme").classNames).addClass(c.get("className"));var b=this._checkboxRenderSource;if(!b){b=this._checkboxRenderSource=SC.Object.create({renderState:{},theme:this.get("theme")})}b.set("isSelected",d&&(d!==SC.MIXED_STATE)).set("isEnabled",this.get("isEnabled")&&this.get("contentIsEditable")).set("isActive",this._checkboxIsActive).set("title","");c.render(b,a);a=a.end();this._checkboxRenderDelegate=c},renderIcon:function(c,e){var b=null,d=null,a=[];if(e&&SC.ImageView.valueIsUrl(e)){b=e;d=""}else{d=e;b=SC.BLANK_IMAGE_URL}a.push(d,"icon");c.begin("img").addClass(a).setAttr("src",b).end()},renderLabel:function(b,a){b.push("<label>",a||"","</label>")},renderRightIcon:function(c,e){var b=null,d=null,a=[];if(e&&SC.ImageView.valueIsUrl(e)){b=e;d=""}else{d=e;b=SC.BLANK_IMAGE_URL}a.push("right-icon",d);c.begin("img").addClass(a).setAttr("src",b).end()},renderCount:function(a,b){a.push('<span class="count"><span class="inner">',b.toString(),"</span></span>")},renderAction:function(a,b){a.push('<img src="',SC.BLANK_IMAGE_URL,'" class="action" />')},renderBranch:function(c,b){var a=[];a.push("branch",b?"branch-visible":"branch-hidden");c.begin("span").addClass(a).push("&nbsp;").end()}});SC.ListItemView._deprecatedRenderWarningHasBeenIssued=false;sc_require("views/collection");sc_require("views/list_item");sc_require("mixins/collection_row_delegate");SC.ListView=SC.CollectionView.extend(SC.CollectionRowDelegate,{_sc_customRowSizeIndexes:null,_sc_insertionPointView:null,_sc_lastDropOnView:null,_sc_layout:null,_sc_sizeCache:null,_sc_offsetCache:null,_sc_rowSize:null,classNames:["sc-list-view"],acceptsFirstResponder:true,exampleView:SC.ListItemView,layoutDirection:SC.LAYOUT_VERTICAL,showAlternatingRows:false,init:function(){arguments.callee.base.apply(this,arguments);this._sc_rowDelegateDidChange()},render:function(a,b){a.setClass("alternating",this.get("showAlternatingRows"));return arguments.callee.base.apply(this,arguments)},rowDelegate:function(){var a=this.delegate,b=this.get("content");return this.delegateFor("isCollectionRowDelegate",a,b)}.property("delegate","content").cacheable(),_sc_rowDelegateDidChange:function(){var d=this._sc_rowDelegate,b=this.get("rowDelegate"),c=this._sc_rowSizeDidChange,a=this._sc_customRowSizeIndexesDidChange;if(d===b){return this}this._sc_rowDelegate=b;if(d){d.removeObserver("_sc_totalRowSize",this,c);d.removeObserver("customRowSizeIndexes",this,a)}b.addObserver("_sc_totalRowSize",this,c);b.addObserver("customRowSizeIndexes",this,a);this._sc_rowSizeDidChange()._sc_customRowSizeIndexesDidChange();return this}.observes("rowDelegate"),_sc_rowSizeDidChange:function(){var b=this.get("rowDelegate"),a=b.get("_sc_totalRowSize"),c;if(a===this._sc_rowSize){return this}this._sc_rowSize=a;c=SC.IndexSet.create(0,this.get("length"));this.rowSizeDidChangeForIndexes(c);return this},_sc_customRowSizeIndexesDidChange:function(){var a=this.get("rowDelegate"),b=a.get("customRowSizeIndexes"),d=this._sc_customRowSizeIndexes,c=this._sc_customRowSizeIndexesContentDidChange;if((b===d)||(d&&d.isEqual(b))){return this}if(d&&this._sc_isObservingCustomRowSizeIndexes){d.removeObserver("[]",this,c)}this._sc_isObservingCustomRowSizeIndexes=b;if(b&&!b.get("isFrozen")){b.addObserver("[]",this,c)}this._sc_customRowSizeIndexesContentDidChange();return this},_sc_customRowSizeIndexesContentDidChange:function(){var a=this.get("rowDelegate"),b=a.get("customRowSizeIndexes"),c=this._sc_customRowSizeIndexes,d;if(b&&c){d=b.copy().add(c)}else{d=b||c}this._sc_customRowSizeIndexes=b?b.frozenCopy():null;this.rowSizeDidChangeForIndexes(d);return this},rowOffsetForContentIndex:function(g){if(g===0){return 0}var i=this.get("rowDelegate"),c=i.get("_sc_totalRowSize"),e=i.get("rowSpacing"),d,b,a,h,f;d=g*c;if(e){d+=g*e}if(i.customRowSizeIndexes&&(b=i.get("customRowSizeIndexes"))){a=this._sc_offsetCache;if(!a){a=[];h=f=0;b.forEach(function(j){h+=this.rowSizeForContentIndex(j)-c;a[j+1]=h;f=j},this);this._sc_max=f+1;this._sc_offsetCache=a}h=a[g];if(h===undefined){h=a[g]=a[g-1];if(h===undefined){f=this._sc_max;if(g<f){f=b.indexBefore(g)+1}h=a[g]=a[f]||0}}d+=h}return d},rowHeightForContentIndex:null,rowSizeForContentIndex:function(a){var b=this.get("rowDelegate"),e,c,f,d;if(this.rowHeightForContentIndex){return this.rowHeightForContentIndex(a)}if(b.customRowSizeIndexes&&(d=b.get("customRowSizeIndexes"))){c=this._sc_sizeCache;if(!c){c=[];f=this.get("content");d.forEach(function(g){c[g]=b.contentIndexRowSize(this,f,g)},this);this._sc_sizeCache=c}e=c[a];if(e===undefined){e=b.get("_sc_totalRowSize")}}else{e=b.get("_sc_totalRowSize")}return e},rowHeightDidChangeForIndexes:function(a){return this.rowSizeDidChangeForIndexes(a)},rowSizeDidChangeForIndexes:function(b){var a=this.get("length");this._sc_sizeCache=this._sc_offsetCache=null;if(b&&b.isIndexSet){b=b.get("min")}this.reload(SC.IndexSet.create(b,a-b));this.invokeOnce("adjustLayout");return this},computeLayout:function(){var a=this._sc_layout,b=this.get("layoutDirection");if(!a){a=this._sc_layout={}}if(b===SC.LAYOUT_HORIZONTAL){a.minWidth=this.rowOffsetForContentIndex(this.get("length"));this.set("calculatedWidth",a.minWidth)}else{a.minHeight=this.rowOffsetForContentIndex(this.get("length"));this.set("calculatedHeight",a.minHeight)}return a},layoutForContentIndex:function(e){var a=this.get("rowDelegate"),d=this.get("layoutDirection"),c,b;c=this.rowOffsetForContentIndex(e);b=this.rowSizeForContentIndex(e)-a.get("rowPadding")*2;if(d===SC.LAYOUT_HORIZONTAL){return{left:c,width:b,top:0,bottom:0}}else{return{top:c,height:b,left:0,right:0}}},contentIndexesInRect:function(i){var b=this.get("rowDelegate").get("_sc_totalRowSize"),h=this.get("rowSpacing"),f=b+h,e=this.get("layoutDirection"),g=this.get("length"),d,a,c,j,l,k;if(e===SC.LAYOUT_HORIZONTAL){j=SC.minX(i);l=SC.maxX(i);k=i.width||0}else{j=SC.minY(i);l=SC.maxY(i);k=i.height||0}a=(j-(j%f))/f;d=this.rowOffsetForContentIndex(a);while(a>0&&d>j){a--;d-=(this.rowSizeForContentIndex(a)+h)}d+=this.rowSizeForContentIndex(a);while(a<g&&d<=j){a++;d+=this.rowSizeForContentIndex(a)+h}if(a<0){a=0}if(a>=g){a=g}c=a+((k-(k%f))/f);if(c>g){c=g}d=this.rowOffsetForContentIndex(c);while(c>=a&&d>=l){c--;d-=(this.rowSizeForContentIndex(c)+h)}d+=this.rowSizeForContentIndex(c)+h;while(c<g&&d<l){c++;d+=this.rowSizeForContentIndex(c)+h}c++;if(c<a){c=a}if(c>g){c=g}return SC.IndexSet.create(a,c-a)},insertionPointView:SC.View.extend({classNames:"sc-list-insertion-point",layout:function(a,b){var c=this.get("layoutDirection");a=c===SC.LAYOUT_HORIZONTAL?"width":"height";if(b===undefined){b={}}if(SC.none(b[a])){b[a]=2}return b}.property("layoutDirection").cacheable(),layoutDirection:SC.LAYOUT_VERTICAL,render:function(a,b){if(b){a.push('<div class="anchor"></div>')}}}),showInsertionPoint:function(j,i){if(i&SC.DROP_ON){if(j&&j!==this._sc_lastDropOnView){this.hideInsertionPoint();j.set("isDropTarget",YES);this._sc_lastDropOnView=j}return}if(this._sc_lastDropOnView){this._sc_lastDropOnView.set("isDropTarget",NO);this._sc_lastDropOnView=null}var g=this.get("length"),f,a,b;if(j){f=j.get("contentIndex");a=j.get("outlineLevel");b=j.get("outlineIndent")}f=f||0;if(SC.none(a)){a=-1}b=b||0;if((f>=g)&&f>0){var e=this.itemViewForContentIndex(g-1);if(e.get("isGroupView")){a=1;b=e.get("outlineIndent")}}var h=this._sc_insertionPointView,d=this.get("layoutDirection");if(!h){h=this._sc_insertionPointView=this.get("insertionPointView").create({layoutDirection:d})}var l=j?j.get("layout"):{top:0,left:0},k,c;if(d===SC.LAYOUT_HORIZONTAL){c=l.left;if(i&SC.DROP_AFTER){c+=l.width}k=((a+1)*b)+12}else{k=l.top;if(i&SC.DROP_AFTER){k+=l.height}c=((a+1)*b)+12}h.adjust({top:k,left:c});this.appendChild(h)},hideInsertionPoint:function(){if(this._sc_lastDropOnView){this._sc_lastDropOnView.set("isDropTarget",NO);this._sc_lastDropOnView=null}var a=this._sc_insertionPointView;if(a){a.removeFromParent().destroy()}this._sc_insertionPointView=null},insertionIndexForLocation:function(f,j){var a={x:f.x,y:f.y,width:1,height:1},e=this.contentIndexesInRect(a),g=e.get("min"),h=this.get("length"),b,k,l,d,n,c,m,i;if(SC.none(g)||g<0){if((h===0)||(f.y<=this.rowOffsetForContentIndex(0))){g=0}else{if(f.y>=this.rowOffsetForContentIndex(h)){g=h}}}b=this.rowOffsetForContentIndex(g);k=b+this.rowSizeForContentIndex(g);if(j===SC.DROP_ON){if(this.get("isEditable")){l=Math.min(Math.floor((k-b)*0.2),5)}else{l=0}if(f.y>=(b+l)||f.y<=(k+l)){return[g,SC.DROP_ON]}}if(g>0){i=this.itemViewForContentIndex(g-1);m=(i?i.get("outlineIndent"):0)||0;c=i?i.get("outlineLevel"):0;if(g<h){i=this.itemViewForContentIndex(g);d=i?i.get("outlineLevel"):0;n=(i?i.get("outlineIndent"):0)||0;n*=d}else{d=i.get("isGroupView")?1:0;n=m*d}m*=c;if((d!==c)&&(n!==m)){if(m>n){g--;j=SC.DROP_AFTER}}}if(j===SC.DROP_BEFORE){i=(g<h)?this.itemViewForContentIndex(g):null;if(!i||i.get("isGroupView")){if(g>0){i=this.itemViewForContentIndex(g-1);if(!i.get("isGroupView")||(i.get("disclosureState")===SC.BRANCH_OPEN)){g=g-1;j=SC.DROP_AFTER}else{g=-1}}else{g=-1}}if(g<0){j=SC.DRAG_NONE}}return[g,j]}});sc_require("views/list");SC.GridView=SC.ListView.extend({classNames:["sc-grid-view"],layout:{left:0,right:0,top:0,bottom:0},rowHeight:48,columnWidth:64,exampleView:SC.LabelView,insertionOrientation:SC.HORIZONTAL_ORIENTATION,itemsPerRow:function(){var a=this.get("frame").width,b=this.get("columnWidth")||0;return(b<1)?1:Math.floor(a/b)}.property("columnWidth","_frameWidth").cacheable(),contentIndexesInRect:function(e){var d=this.get("rowHeight")||48,b=this.get("itemsPerRow"),c=Math.floor(SC.minY(e)/d)*b,a=Math.ceil(SC.maxY(e)/d)*b;return SC.IndexSet.create(c,a-c)},layoutForContentIndex:function(g){var d=this.get("rowHeight")||48,a=this.get("frame").width,b=this.get("itemsPerRow"),e=Math.floor(a/b),f=Math.floor(g/b),c=g-(b*f);if(a===0||b===0){return{}}return{left:c*e,top:f*d,height:d,width:e}},computeLayout:function(){var e=this.get("content"),d=(e)?e.get("length"):0,c=this.get("rowHeight")||48,a=this.get("itemsPerRow"),f=a?Math.ceil(d/a):0;var b=this._cachedLayoutHash;if(!b){b=this._cachedLayoutHash={}}b.minHeight=f*c;this.set("calculatedHeight",b.minHeight);return b},insertionPointClass:SC.View.extend({classNames:["sc-grid-insertion-point"],layout:{width:2},render:function(a,b){if(b){a.push('<div class="anchor"></div>')}}}),showInsertionPoint:function(c,g){if(!c){return}if(g&SC.DROP_ON){if(c!==this._lastDropOnView){this.hideInsertionPoint();c.set("isDropTarget",YES);this._lastDropOnView=c}}else{if(this._lastDropOnView){this._lastDropOnView.set("isDropTarget",NO);this._lastDropOnView=null}var b=this._insertionPointView,d=c.get("layout"),f,e;if(!b){b=this._insertionPointView=this.insertionPointClass.create()}f=d.top;e=d.left;if(g&SC.DROP_AFTER){e+=d.width}var a=d.height;b.adjust({top:f,left:e,height:a});this.appendChild(b)}},hideInsertionPoint:function(){if(this._lastDropOnView){this._lastDropOnView.set("isDropTarget",NO);this._lastDropOnView=null}var a=this._insertionPointView;if(a){a.removeFromParent().destroy()}this._insertionPointView=null},insertionIndexForLocation:function(d,j){var e=this.get("frame"),g=this.get("clippingFrame"),k=this.get("itemsPerRow"),a=Math.floor(e.width/k),m=Math.floor((d.y-e.y-g.y)/this.get("rowHeight"));var i=SC.DROP_BEFORE,c=(d.x-e.x-g.x),b=Math.floor(c/a),l=(c/a)-b;if(j===SC.DROP_ON){if(l>0.8){b++}if((l>=0.2)&&(l<=0.8)){i=SC.DROP_ON}}else{if(l>0.45){b++}}var h=(m*k)+b;return[h,i]},_gv_frameDidChange:function(){var e=this.get("frame"),c=this._lastFrameWidth,b=e.width;if(!SC.none(c)&&b!==c){var a,d=this.get("nowShowing");this.set("_frameWidth",b);d.forEach(function(f){a=this.itemViewForContentIndex(f);a.adjust(this.layoutForContentIndex(f))},this)}this._lastFrameWidth=b}.observes("frame"),_gv_itemsPerRowDidChange:function(){var a=this.get("itemsPerRow"),b=this._lastItemsPerRow||0;if(a!==b){this.invokeOnce("adjustLayout")}this._lastItemsPerRow=a}.observes("itemsPerRow")});SC.ImageButtonView=SC.ButtonView.extend({classNames:["sc-image-button-view"],themeName:null,renderDelegateName:"imageButtonRenderDelegate",displayProperties:["image"],image:null});SC.LinkView=SC.View.extend({ariaRole:"link",body:"",classNames:["sc-link-view"],displayBody:function(){var a=this.get("body");return(a&&this.get("localize"))?SC.String.loc(a):(a||"")}.property("body","localize").cacheable(),displayProperties:["displayBody","displayToolTip","fileName","href","hreflang"],fileName:null,escapeHTML:true,href:"#",language:null,hreflang:function(){var b=this.get("language"),a;a=b||SC.Locale.currentLocale.language;return a}.property("language","localize").cacheable(),ping:null,rel:null,tagName:"a",target:"_blank",type:null,render:function(b){var c=this.get("displayBody"),f=this.get("displayToolTip"),e=this.get("fileName"),k=this.get("escapeHTML"),a=this.get("href"),d=this.get("hreflang"),i=this.get("ping"),j=this.get("rel"),g=this.get("target"),h=this.get("type");if(f&&k){f=SC.RenderContext.escapeHTML(f)}b.setAttr({download:e,href:a,hreflang:d,ping:i?i.join(" "):null,rel:j?j.join(" "):null,target:g,title:f,type:h});if(c&&k){c=SC.RenderContext.escapeHTML(c)}b.push(c)},mouseDown:function(a){a.allowDefault();return true},mouseUp:function(a){a.allowDefault();return true},touchStart:function(a){a.allowDefault();return true},touchEnd:function(a){a.allowDefault();return true},update:function(c){var f=this.get("displayBody"),e=this.get("displayToolTip"),g=this.get("fileName"),d=this.get("escapeHTML"),b=this.get("href"),a=this.get("hreflang");c.attr("download",g);c.attr("href",b);c.attr("hreflang",a);if(e&&d){e=SC.RenderContext.escapeHTML(e)}c.attr("title",e);if(f&&d){f=SC.RenderContext.escapeHTML(f)}c.html(f)}});SC.ANCHOR_TOP={top:0};SC.ANCHOR_LEFT={left:0};SC.ANCHOR_TOP_LEFT={top:0,left:0};SC.ANCHOR_BOTTOM={bottom:0};SC.ANCHOR_RIGHT={right:0};SC.ANCHOR_BOTTOM_RIGHT={bottom:0,right:0};SC.ToolbarView=SC.View.extend({classNames:["sc-toolbar-view"],ariaRole:"toolbar",renderDelegateName:"toolbarRenderDelegate",anchorLocation:null,layout:{left:0,right:0,height:32,zIndex:10},init:function(){if(this.anchorLocation){this.layout=SC.merge(this.layout,this.anchorLocation);switch(this.anchorLocation){case SC.ANCHOR_TOP:case SC.ANCHOR_TOP_LEFT:this.layout.borderBottom=1;break;case SC.ANCHOR_BOTTOM:case SC.ANCHOR_BOTTOM_RIGHT:this.layout.borderTop=1;break;default:}}arguments.callee.base.apply(this,arguments)}});sc_require("views/toolbar");SC.WorkspaceView=SC.View.extend({classNames:["sc-workspace-view"],displayProperties:["hasTopToolbar","hasBottomToolbar"],renderDelegateName:"workspaceRenderDelegate",topToolbar:SC.ToolbarView.extend(),bottomToolbar:null,contentView:SC.View.extend(),autoResizeToolbars:NO,defaultToolbarSize:44,largeToolbarSize:44,smallToolbarSize:30,toolbarSize:function(){if(!this.get("autoResizeToolbars")){return this.get("defaultToolbarSize")}if(this.get("orientation")===SC.HORIZONTAL_ORIENTATION){return this.get("smallToolbarSize")}return this.get("largeToolbarSize")}.property("autoHideMaster","orientation"),orientation:function(){var a=this.get("frame");if(a.width>a.height){return SC.HORIZONTAL_ORIENTATION}else{return SC.VERTICAL_ORIENTATION}}.property("frame").cacheable(),masterIsHidden:NO,masterIsHiddenDidChange:function(){var a,b=this.get("masterIsHidden");if(a=this.get("topToolbar")){a.set("masterIsHidden",b)}if(a=this.get("bottomToolbar")){a.set("masterIsHidden",b)}}.observes("masterIsHidden"),_scmd_tilePropertyDidChange:function(){this.invokeOnce("_scws_tile")}.observes("toolbarSize"),createChildViews:function(){arguments.callee.base.apply(this,arguments);var a=this.get("topToolbar");if(a){a=this.topToolbar=this.activeTopToolbar=this.createChildView(a);this.appendChild(a)}var c=this.get("bottomToolbar");if(c){c=this.bottomToolbar=this.activeBottomToolbar=this.createChildView(c);this.appendChild(c)}var b=this.get("contentView");b=this.contentView=this.activeContentView=this.createChildView(b);this.appendChild(b);this.invokeOnce("_scws_tile")},_scws_tile:function(){var b=0,e=0,a=this.get("topToolbar"),f=this.get("bottomToolbar"),d=this.get("contentView"),c=this.get("toolbarSize");if(a){a.set("layout",{left:0,right:0,top:0,height:c});b+=c}if(f){f.set("layout",{left:0,right:0,bottom:0,height:c});e+=c}this.contentView.set("layout",{left:0,right:0,top:b,bottom:e})},hasTopToolbar:function(){if(this.get("topToolbar")){return YES}return NO}.property("topToolbar").cacheable(),hasBottomToolbar:function(){if(this.get("bottomToolbar")){return YES}return NO}.property("bottomToolbar").cacheable(),childDidChange:function(){this._scws_tile()},activeTopToolbar:null,activeBottomToolbar:null,activeContentView:null,topToolbarDidChange:function(){var b=this.activeTopToolbar,a=this.get("topToolbar");if(b){if(b.createdByParent){container.removeChildAndDestroy(b)}else{container.removeChild(b)}}if(a){this.appendChild(a)}this.activeTopToolbar=a;this.invokeLast("childDidChange")}.observes("topToolbar"),bottomToolbarDidChange:function(){var b=this.activeBottomToolbar,a=this.get("bottomToolbar");if(b){if(b.createdByParent){container.removeChildAndDestroy(b)}else{container.removeChild(b)}}if(a){this.appendChild(a)}this.activeBottomToolbar=a;this.invokeLast("childDidChange")}.observes("bottomToolbar"),contentViewDidChange:function(){var b=this.activeContentView,a=this.get("contentView");if(b){if(b.createdByParent){container.removeChildAndDestroy(b)}else{container.removeChild(b)}}if(a){this.appendChild(a)}this.activeContentView=a;this.invokeLast("childDidChange")}.observes("contentView")});sc_require("views/workspace");sc_require("views/toolbar");SC.MasterDetailView=SC.View.extend({classNames:["sc-master-detail-view"],renderDelegateName:"masterDetailRenderDelegate",masterView:SC.WorkspaceView.extend({topToolbar:SC.ToolbarView.extend({}),contentView:SC.View.extend({backgroundColor:"white"})}),detailView:SC.WorkspaceView.extend({topToolbar:SC.ToolbarView.extend({childViews:["showHidePicker"],showHidePicker:SC.ButtonView.extend({layout:{left:7,centerY:0,height:30,width:100},controlSize:SC.AUTO_CONTROL_SIZE,title:"Picker",action:"toggleMasterPicker",isVisible:NO,isVisibleBinding:".parentView.masterIsHidden"})})}),autoHideMaster:function(){if(SC.platform.touch){return YES}return NO}.property().cacheable(),masterWidth:250,dividerWidth:SC.propertyFromRenderDelegate("dividerWidth",1),masterIsHidden:function(){if(!this.get("autoHideMaster")){return NO}if(this.get("orientation")===SC.HORIZONTAL_ORIENTATION){return NO}return YES}.property("autoHideMaster","orientation"),orientation:SC.VERTICAL_ORIENTATION,_scmd_frameDidChange:function(){var b=this.get("frame"),a;if(b.width>b.height){a=SC.HORIZONTAL_ORIENTATION}else{a=SC.VERTICAL_ORIENTATION}this.setIfChanged("orientation",a)}.observes("frame"),init:function(){arguments.callee.base.apply(this,arguments);this._scmd_frameDidChange();this._scmd_masterIsHiddenDidChange()},toggleMasterPicker:function(a){if(!this.get("masterIsHidden")){return}if(this._picker&&this._picker.get("isVisibleInWindow")){this.hideMasterPicker()}else{this.showMasterPicker(a)}},showMasterPicker:function(b){if(this._picker&&this._picker.get("isVisibleInWindow")){return}if(!this._picker){var a=this.get("pickerPane");this._picker=a.create({})}this._picker.set("contentView",this.get("masterView"));this._picker.set("extraRightOffset",this.get("pointerDistanceFromEdge"));this.showPicker(this._picker,b)},hideMasterPicker:function(){if(this._picker&&this._picker.get("isVisibleInWindow")){this.hidePicker(this._picker)}},showPicker:function(b,a){b.popup(a,SC.PICKER_POINTER,[3,0,1,2,3],[9,-9,-18,18])},hidePicker:function(a){a.remove()},pickerPane:SC.PickerPane.extend({layout:{width:250,height:480},themeName:"popover"}),_picker:null,pointerDistanceFromEdge:46,_scmd_masterIsHiddenDidChange:function(){var a=this.get("masterIsHidden");this.get("masterView").set("masterIsHidden",a);this.get("detailView").set("masterIsHidden",a)}.observes("masterIsHidden"),_scmd_orientationDidChange:function(){this.invokeOnce("_scmd_tile")}.observes("orientation"),_scmd_retileProperties:function(){this.invokeOnce("_scmd_tile")}.observes("masterIsHidden","masterWidth"),createChildViews:function(){var b=this.get("masterView");b=this.masterView=this.createChildView(b);var a=this.get("detailView");a=this.detailView=this.createChildView(a);this.appendChild(a);this.invokeOnce("_scmd_tile")},_masterIsDrawn:NO,_scmd_tile:function(){var b=!this.get("masterIsHidden");var e=this.get("masterWidth"),d=this.get("masterView"),c=this.get("detailView");if(b){this.hideMasterPicker();if(!this._masterIsDrawn){if(this._picker){this._picker.set("contentView",null)}this.appendChild(d);this._masterIsDrawn=YES}d.set("layout",{left:0,top:0,bottom:0,width:e});var a=this.get("dividerWidth");c.set("layout",{left:e+a,right:0,top:0,bottom:0})}else{if(this._masterIsDrawn){this.removeChild(d);this._masterIsDrawn=NO}c.set("layout",{left:0,right:0,top:0,bottom:0})}}});SC.ScrollerView=SC.View.extend({classNames:["sc-scroller-view"],displayProperties:["thumbPosition","thumbLength","controlsHidden"],ariaRole:"scrollbar",shouldScrollToClick:NO,_touchScrollValue:NO,value:function(a,c){if(c!==undefined){this._scs_value=c}var b=this.get("minimum");c=this._scs_value||b;return Math.max(Math.min(c,this.get("maximum")),b)}.property("maximum","minimum").cacheable(),displayValue:function(){var a;if(this.get("_touchScrollValue")){a=this.get("_touchScrollValue")}else{a=this.get("value")}return a}.property("value","_touchScrollValue").cacheable(),proportion:0,maximum:100,minimum:0,isEnabled:function(a,b){if(b!==undefined){this._scsv_isEnabled=b}if(this._scsv_isEnabled!==undefined){return this._scsv_isEnabled}return this.get("proportion")<1}.property("proportion").cacheable(),_scsv_isEnabled:undefined,layoutDirection:SC.LAYOUT_VERTICAL,hasButtons:YES,scrollbarThickness:14,capLength:18,capOverlap:14,buttonLength:41,buttonOverlap:9,minimumThumbLength:20,render:function(c,a){var g="vertical",b={},i=this.get("parentView"),f=this.get("layoutDirection"),d,h,e;switch(f){case SC.LAYOUT_VERTICAL:b["sc-vertical"]=YES;break;case SC.LAYOUT_HORIZONTAL:b["sc-horizontal"]=YES;g="horizontal";break}b["controls-hidden"]=this.get("controlsHidden");c.setClass(b);h=this.get("thumbLength");d=this.get("thumbPosition");if(a){c.push('<div class="track"></div>','<div class="cap"></div>');this.renderButtons(c,this.get("hasButtons"));this.renderThumb(c,f,h,d);c.setAttr("aria-orientation",g);c.setAttr("aria-valuemax",this.get("maximum"));c.setAttr("aria-valuemin",this.get("minimum"));c.setAttr("aria-valuenow",this.get("value"));c.setAttr("aria-controls",i.getPath("contentView.layerId"))}else{if(this.get("controlsHidden")){return}e=this.$(".thumb");this.adjustThumb(e,d,h);c.setAttr("aria-valuenow",this.get("value"));if(this.didChangeFor("render-min","minimum")){c.setAttr("aria-valuemin",this.get("minimum"))}if(this.didChangeFor("render-max","maximum")){c.setAttr("aria-valuemax",this.get("maximum"))}}},renderThumb:function(d,e,b,c){var a;if(e===SC.LAYOUT_HORIZONTAL){a="width: "+b+"px; left: "+c+"px;"}else{a="height: "+b+"px; top: "+c+"px;"}d.push('<div class="thumb" style="%@">'.fmt(a),'<div class="thumb-center"></div>','<div class="thumb-top"></div>','<div class="thumb-bottom"></div></div>')},renderButtons:function(b,a){if(a){b.push('<div class="button-bottom"></div><div class="button-top"></div>')}else{b.push('<div class="endcap"></div>')}},touchScrollDidStart:function(a){this.set("_touchScrollValue",a)},touchScrollDidEnd:function(a){SC.run(function(){this.set("_touchScrollValue",NO)},this)},_lastTouchScrollTime:null,touchScrollDidChange:function(a){if(Date.now()-this._lastTouchScrollTime<30){return}SC.run(function(){this.set("_touchScrollValue",a)},this);this._lastTouchScrollTime=Date.now()},adjustThumb:function(b,a,c){this.adjustThumbPosition(b,a);this.adjustThumbSize(b,c)},adjustThumbPosition:function(b,a){if(this._thumbPosition===a){return}switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:b.css("top",a);break;case SC.LAYOUT_HORIZONTAL:b.css("left",a);break}this._thumbPosition=a},adjustThumbSize:function(a,b){if(this._thumbSize===b){return}switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:a.css("height",Math.max(b,this.get("minimumThumbLength")));break;case SC.LAYOUT_HORIZONTAL:a.css("width",Math.max(b,this.get("minimumThumbLength")));break}this._thumbSize=b},trackLength:function(){var a=this.get("scrollerLength");a-=this.get("capLength")-this.get("capOverlap");a-=this.buttonLength-this.buttonOverlap;return a}.property("scrollerLength").cacheable(),scrollerLength:function(){switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:return this.get("frame").height;case SC.LAYOUT_HORIZONTAL:return this.get("frame").width}return 0}.property("frame").cacheable(),thumbLength:function(){var a;a=Math.floor(this.get("trackLength")*this.get("proportion"));a=isNaN(a)?0:a;return Math.max(a,this.get("minimumThumbLength"))}.property("trackLength","proportion").cacheable(),thumbPosition:function(){var g=this.get("displayValue"),c=this.get("maximum"),b=this.get("trackLength"),d=this.get("thumbLength"),f=this.get("capLength"),e=this.get("capOverlap"),a;a=(g/c)*(b-d);a+=f-e;return Math.floor(isNaN(a)?0:a)}.property("displayValue","maximum","trackLength","thumbLength").cacheable(),controlsHidden:function(){return this.get("proportion")>=1}.property("proportion").cacheable(),fadeIn:null,fadeOut:null,valueForPosition:function(g){var b=this.get("maximum"),a=this.get("trackLength"),c=this.get("thumbLength"),f=this.get("capLength"),d=this.get("capOverlap"),e;e=g-(f-d);e=e/(a-c);e=e*b;return e},mouseDown:function(g){if(g.which!==1){return false}if(!this.get("isEnabledInPane")){return NO}this._altIsDown=g.altKey;this._shiftIsDown=g.shiftKey;var d=g.target,b=this.get("thumbPosition"),c,e=this.get("scrollerLength");if(d.className.indexOf("thumb")>=0){c=this.convertFrameFromView({x:g.pageX,y:g.pageY});c.x-=b;c.y-=b;this._thumbDragging=YES;this._thumbOffset=c;this._mouseDownLocation={x:g.pageX,y:g.pageY};this._thumbPositionAtDragStart=this.get("thumbPosition");this._valueAtDragStart=this.get("value")}else{if(d.className.indexOf("button-top")>=0){this.decrementProperty("value",(this._altIsDown?e:30));this.makeButtonActive(".button-top");this.startMouseDownTimer("scrollUp");this._isScrollingUp=YES}else{if(d.className.indexOf("button-bottom")>=0){this.incrementProperty("value",(this._altIsDown?e:30));this.makeButtonActive(".button-bottom");this.startMouseDownTimer("scrollDown");this._isScrollingDown=YES}else{var i=this.get("shouldScrollToClick");if(g.altKey){i=!i}var f=this.get("thumbLength"),a=this.convertFrameFromView({x:g.pageX,y:g.pageY}),h;switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:this._mouseDownLocation=h=a.y;break;case SC.LAYOUT_HORIZONTAL:this._mouseDownLocation=h=a.x;break}if(i){this.set("value",this.valueForPosition(h-(f/2)));b=this.get("thumbPosition");this._thumbDragging=YES;this._thumbOffset={x:a.x-b,y:a.y-b};this._mouseDownLocation={x:g.pageX,y:g.pageY};this._thumbPositionAtDragStart=b;this._valueAtDragStart=this.get("value")}else{if(h<b){this.decrementProperty("value",e);this.startMouseDownTimer("page")}else{this.incrementProperty("value",e);this.startMouseDownTimer("page")}}}}}return YES},mouseUp:function(a){var c=this._scs_buttonActive,b=NO,d;if(c){c.removeClass("active");b=YES}d=this._mouseDownTimer;if(d){d.invalidate();this._mouseDownTimer=null}this._thumbDragging=NO;this._isScrollingDown=NO;this._isScrollingUp=NO;return b},mouseDragged:function(i){if(!this.get("isEnabledInPane")){return NO}var a,h,b,c=this._thumbPositionAtDragStart,f=this._isScrollingUp,k=this._isScrollingDown,d=this._scs_buttonActive;if(this._thumbDragging){switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:h=(i.pageY-this._mouseDownLocation.y);break;case SC.LAYOUT_HORIZONTAL:h=(i.pageX-this._mouseDownLocation.x);break}if(i.altKey){if(!this._altIsDown||(this._shiftIsDown!==i.shiftKey)){c=this._thumbPositionAtDragStart=c+h;h=0;this._mouseDownLocation={x:i.pageX,y:i.pageY};this._valueAtDragStart=this.get("value")}if(i.shiftKey){h=-h}this.set("value",Math.round(this._valueAtDragStart+h*2))}else{b=c+h;a=this.get("trackLength")-this.get("thumbLength");this.set("value",Math.round((b/a)*this.get("maximum")))}}else{if(f||k){var j=NO,e=NO;var g=this.$(".button-top")[0].getBoundingClientRect();switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:if(i.clientY<g.bottom){j=YES}else{e=YES}break;case SC.LAYOUT_HORIZONTAL:if(i.clientX<g.right){j=YES}else{e=YES}break}if((j||e)&&j!==f){if(d){d.removeClass("active")}this._mouseDownTimerAction=j?"scrollUp":"scrollDown";if(j){this.makeButtonActive(".button-top")}else{if(e){this.makeButtonActive(".button-bottom")}}this._isScrollingUp=j;this._isScrollingDown=e}}}this._altIsDown=i.altKey;this._shiftIsDown=i.shiftKey;return YES},startMouseDownTimer:function(b,a){this._mouseDownTimerAction=b;this._mouseDownTimer=SC.Timer.schedule({target:this,action:this.mouseDownTimerDidFire,interval:a?0:300})},mouseDownTimerDidFire:function(){var d=this.get("scrollerLength"),a=SC.device.get("mouseLocation"),c=this.get("thumbPosition"),b=this.get("thumbLength"),e=50;switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:a=this.convertFrameFromView(a).y;break;case SC.LAYOUT_HORIZONTAL:a=this.convertFrameFromView(a).x;break}switch(this._mouseDownTimerAction){case"scrollDown":this.incrementProperty("value",this._altIsDown?d:30);break;case"scrollUp":this.decrementProperty("value",this._altIsDown?d:30);break;case"page":e=150;if(a<c){this.decrementProperty("value",d)}else{if(a>c+b){this.incrementProperty("value",d)}}}this._mouseDownTimer=SC.Timer.schedule({target:this,action:this.mouseDownTimerDidFire,interval:e})},makeButtonActive:function(a){this._scs_buttonActive=this.$(a).addClass("active")}});SC.OverlayScrollerView=SC.ScrollerView.extend({fadeIn:function(){this.$().toggleClass("fade-in",true);this.$().toggleClass("fade-out",false)},fadeOut:function(){this.$().toggleClass("fade-in",false);this.$().toggleClass("fade-out",true)},classNames:["sc-touch-scroller-view","sc-overlay-scroller-view"],scrollbarThickness:12,capLength:3,capOverlap:0,buttonLength:3,buttonOverlap:0,hasButtons:NO,adjustThumb:function(b,e,d){var c=SC.browser.experimentalCSSNameFor("transform");var a=this.$(".thumb-inner");switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:if(this._thumbPosition!==e){b.css(c,"translate3d(0px,"+e+"px,0px)")}if(this._thumbSize!==d){a.css(c,"translate3d(0px,"+Math.round(d-1044)+"px,0px)")}break;case SC.LAYOUT_HORIZONTAL:if(this._thumbPosition!==e){b.css(c,"translate3d("+e+"px,0px,0px)")}if(this._thumbSize!==d){a.css(c,"translate3d("+Math.round(d-1044)+"px,0px,0px)")}break}this._thumbPosition=e;this._thumbSize=d},render:function(c,f){var e=[],b,a,d;switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:e.push("sc-vertical");break;case SC.LAYOUT_HORIZONTAL:e.push("sc-horizontal");break}if(this.get("controlsHidden")){e.push("controls-hidden")}c.addClass(e);a=this.get("thumbLength");b=this.get("thumbPosition");if(f){c.push('<div class="track"></div><div class="cap"></div>');this.renderButtons(c,this.get("hasButtons"));this.renderThumb(c,b,a)}else{if(this.get("controlsHidden")){return}d=this.$(".thumb");this.adjustThumb(d,b,a)}},renderThumb:function(f,e,c){var b=SC.browser.experimentalCSSNameFor("transform"),d,a;switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:d=b+": translate3d(0px,"+e+"px,0px)";a=b+": translateY("+(c-1044)+"px)".fmt();break;case SC.LAYOUT_HORIZONTAL:d=b+": translate3d("+e+"px,0px,0px)";a=b+": translateX("+(c-1044)+"px)".fmt();break}f.push('<div class="thumb" style="%@;">'.fmt(d)+'<div class="thumb-top"></div><div class="thumb-clip">'+'<div class="thumb-inner" style="%@;">'.fmt(a)+'<div class="thumb-center"></div><div class="thumb-bottom"></div></div></div></div>');this._thumbPosition=e;this._thumbSize=c}});SC.TouchScrollerView=SC.OverlayScrollerView.extend({});sc_require("views/scroller");SC.NORMAL_SCROLL_DECELERATION=0.95;SC.FAST_SCROLL_DECELERATION=0.85;SC.ScrollView=SC.View.extend({classNames:["sc-scroll-view"],isScrollable:YES,contentView:null,horizontalAlign:SC.ALIGN_LEFT,verticalAlign:SC.ALIGN_TOP,initialHorizontalAlign:SC.outlet("horizontalAlign"),initialVerticalAlign:SC.outlet("verticalAlign"),horizontalScrollOffset:function(b,d){if(d!==undefined){var c=this.get("minimumHorizontalScrollOffset"),a=this.get("maximumHorizontalScrollOffset");d=this._scroll_horizontalScrollOffset=Math.max(c,Math.min(a,d));if(this._scroll_isExogenous){if(d===c&&d===a){this._scroll_horizontalScaleOrigin=SC.ALIGN_DEFAULT}else{if(d===c){this._scroll_horizontalScaleOrigin=SC.ALIGN_LEFT}else{if(d===a){this._scroll_horizontalScaleOrigin=SC.ALIGN_RIGHT}else{this._scroll_horizontalScaleOrigin=SC.ALIGN_CENTER}}}this._scroll_horizontalScaleOriginPct=(d+(this._scroll_containerWidth/2))/(a+this._scroll_containerWidth)}}return this._scroll_horizontalScrollOffset||0}.property("minimumHorizontalScrollOffset","maximumHorizontalScrollOffset").cacheable(),verticalScrollOffset:function(b,d){if(d!==undefined){var c=this.get("minimumVerticalScrollOffset"),a=this.get("maximumVerticalScrollOffset");d=this._scroll_verticalScrollOffset=Math.max(c,Math.min(a,d));if(this._scroll_isExogenous){if(d===c&&d===a){this._scroll_verticalScaleOrigin=SC.ALIGN_DEFAULT}else{if(d===c){this._scroll_verticalScaleOrigin=SC.ALIGN_TOP}else{if(d===a){this._scroll_verticalScaleOrigin=SC.ALIGN_BOTTOM}else{this._scroll_verticalScaleOrigin=SC.ALIGN_CENTER}}}this._scroll_verticalScaleOriginPct=(d+(this._scroll_containerHeight/2))/(a+this._scroll_containerHeight)}}return this._scroll_verticalScrollOffset||0}.property("minimumVerticalScrollOffset","maximumVerticalScrollOffset").cacheable(),maximumScrollOffset:function(b,a,c){if(b>=a){return b-a}if(c===SC.ALIGN_LEFT||c===SC.ALIGN_TOP){return 0}else{if(c===SC.ALIGN_MIDDLE||c===SC.ALIGN_CENTER){return 0-Math.round((a-b)/2)}else{return 0-(a-b)}}},minimumScrollOffset:function(b,a,c){if(b>a){return 0}if(c===SC.ALIGN_LEFT||c===SC.ALIGN_TOP){return 0}else{if(c===SC.ALIGN_MIDDLE||c===SC.ALIGN_CENTER){return 0-Math.round((a-b)/2)}else{return 0-(a-b)}}},maximumHorizontalScrollOffset:function(){var c=this.get("contentView");var b=c?c.get("frame").width:0,a=c?c.get("calculatedWidth"):0;if(a){b=a*this.get("scale")}var d=this.get("containerView").get("frame").width;if(!this.get("canScrollHorizontal")){b=Math.min(b,d)}return this._scroll_maximumHorizontalScrollOffset=this.maximumScrollOffset(b,d,this.get("horizontalAlign"))}.property(),maximumVerticalScrollOffset:function(){var a=this.get("contentView"),c=(a&&a.get("frame"))?a.get("frame").height:0,b=a?a.get("calculatedHeight"):0;if(b){c=b*this.get("scale")}var d=this.get("containerView").get("frame").height;if(!this.get("canScrollVertical")){c=Math.min(c,d)}return this._scroll_maximumVerticalScrollOffset=this.maximumScrollOffset(c,d,this.get("verticalAlign"))}.property(),minimumHorizontalScrollOffset:function(){var c=this.get("contentView");var b=c?c.get("frame").width:0,a=c?c.get("calculatedWidth"):0;if(a){b=a*this.get("scale")}var d=this.get("containerView").get("frame").width;if(!this.get("canScrollHorizontal")){b=Math.min(b,d)}return this._scroll_minimumHorizontalScrollOffset=this.minimumScrollOffset(b,d,this.get("horizontalAlign"))}.property(),minimumVerticalScrollOffset:function(){var a=this.get("contentView");var c=(a&&a.get("frame"))?a.get("frame").height:0,b=a?a.get("calculatedHeight"):0;if(b){c=b*this.get("scale")}var d=this.get("containerView").get("frame").height;if(!this.get("canScrollVertical")){c=Math.min(c,d)}return this._scroll_minimumVerticalScrollOffset=this.minimumScrollOffset(c,d,this.get("verticalAlign"))}.property(),verticalLineScroll:20,horizontalLineScroll:20,verticalPageScroll:function(){return this.get("frame").height}.property("frame"),horizontalPageScroll:function(){return this.get("frame").width}.property("frame"),verticalFade:YES,horizontalFade:YES,fadeOutDelay:0.4,hasHorizontalScroller:YES,horizontalScrollerView:SC.ScrollerView,horizontalTouchScrollerView:SC.OverlayScrollerView,isHorizontalScrollerVisible:YES,canScrollHorizontal:function(){return !!(this.get("hasHorizontalScroller")&&this.get("horizontalScrollerView")&&this.get("isHorizontalScrollerVisible"))}.property("isHorizontalScrollerVisible").cacheable(),autohidesHorizontalScroller:YES,hasVerticalScroller:YES,verticalScrollerView:SC.ScrollerView,verticalTouchScrollerView:SC.OverlayScrollerView,isVerticalScrollerVisible:YES,canScrollVertical:function(){return !!(this.get("hasVerticalScroller")&&this.get("verticalScrollerView")&&this.get("isVerticalScrollerVisible"))}.property("isVerticalScrollerVisible").cacheable(),autohidesVerticalScroller:YES,verticalScrollerBottom:0,verticalOverlay:function(){if(SC.platform.touch){return YES}return NO}.property().cacheable(),horizontalOverlay:function(){if(SC.platform.touch){return YES}return NO}.property().cacheable(),verticalScrollerLayout:null,horizontalScrollerLayout:null,containerView:SC.ContainerView,scrollTo:function(a,b){this._scroll_isExogenous=YES;if(b===undefined&&SC.typeOf(a)===SC.T_HASH){b=a.y;a=a.x}if(!SC.none(a)){this.set("horizontalScrollOffset",a)}if(!SC.none(b)){this.set("verticalScrollOffset",b)}this._scroll_isExogenous=NO;return this},scrollBy:function(a,b){if(b===undefined&&SC.typeOf(a)===SC.T_HASH){b=a.y;a=a.x}a=(a)?this.get("horizontalScrollOffset")+a:null;b=(b)?this.get("verticalScrollOffset")+b:null;return this.scrollTo(a,b)},scrollToVisible:function(b){if(arguments.length===0){return arguments.callee.base.apply(this,arguments)}var c=this.get("contentView");if(!c){return NO}var a=b.get("frame");if(!a){return NO}a=c.convertFrameFromView(a,b.get("parentView"));return this.scrollToRect(a)},scrollToRect:function(b){var a=SC.cloneRect(this.get("containerView").get("frame")),e=this.get("horizontalScrollOffset"),d=this.get("verticalScrollOffset"),c=this.get("scale");a.x=e;a.y=d;if(c!==1){b=SC.cloneRect(b);b.x*=c;b.y*=c;b.height*=c;b.width*=c}a.y+=Math.max(0,SC.maxY(b)-SC.maxY(a));a.x+=Math.max(0,SC.maxX(b)-SC.maxX(a));a.y-=Math.max(0,SC.minY(a)-SC.minY(b));a.x-=Math.max(0,SC.minX(a)-SC.minX(b));if((e!==a.x)||(d!==a.y)){this.scrollTo(a.x,a.y);return YES}else{return NO}},scrollDownLine:function(a){if(a===undefined){a=1}return this.scrollBy(null,this.get("verticalLineScroll")*a)},scrollUpLine:function(a){if(a===undefined){a=1}return this.scrollBy(null,0-this.get("verticalLineScroll")*a)},scrollRightLine:function(a){if(a===undefined){a=1}return this.scrollTo(this.get("horizontalLineScroll")*a,null)},scrollLeftLine:function(a){if(a===undefined){a=1}return this.scrollTo(0-this.get("horizontalLineScroll")*a,null)},scrollDownPage:function(a){if(a===undefined){a=1}return this.scrollBy(null,this.get("verticalPageScroll")*a)},scrollUpPage:function(a){if(a===undefined){a=1}return this.scrollBy(null,0-(this.get("verticalPageScroll")*a))},scrollRightPage:function(a){if(a===undefined){a=1}return this.scrollBy(this.get("horizontalPageScroll")*a,null)},scrollLeftPage:function(a){if(a===undefined){a=1}return this.scrollBy(0-(this.get("horizontalPageScroll")*a),null)},tile:function(){if(this.viewState===SC.View.UNRENDERED){return}var c=this.get("hasHorizontalScroller")?this.get("horizontalScrollerView"):null;var h=c&&this.get("isHorizontalScrollerVisible");var j=this.get("hasVerticalScroller")?this.get("verticalScrollerView"):null;var f=j&&this.get("isVerticalScrollerVisible");var e=this.get("containerView");var l={left:0,top:0};var g,b,m,d,a;var i=((h)?c.get("scrollbarThickness"):0);var k=(f)?j.get("scrollbarThickness"):0;if(h){a=this.get("horizontalScrollerLayout");g={left:(a?a.left:0),bottom:(a?a.bottom:0),right:(a?a.right+k-1:k-1),height:i};c.set("layout",g);m=this.get("horizontalOverlay");l.bottom=m?0:(g.bottom+i)}else{l.bottom=0}if(c){c.set("isVisible",h);this._sc_fadeOutHorizontalScroller()}if(f){i=i+this.get("verticalScrollerBottom");d=this.get("verticalScrollerLayout");g={top:(d?d.top:0),bottom:(d?d.bottom+i:i),right:(d?d.right:0),width:k};j.set("layout",g);b=this.get("verticalOverlay");l.right=b?0:(g.right+k)}else{l.right=0}if(j){j.set("isVisible",f);this._sc_fadeOutVerticalScroller()}e.adjust(l)},scrollerVisibilityDidChange:function(){this.tile()}.observes("isVerticalScrollerVisible","isHorizontalScrollerVisible"),_scroll_wheelDeltaX:0,_scroll_wheelDeltaY:0,mouseWheel:function(a){if(!this.get("isEnabledInPane")){return NO}var c=this.get("horizontalScrollOffset"),f=this.get("maximumHorizontalScrollOffset"),e=this.get("maximumVerticalScrollOffset"),b=NO,d=this.get("verticalScrollOffset");b=((this.get("canScrollHorizontal")&&(a.wheelDeltaX<0&&c>0)||(a.wheelDeltaX>0&&c<f))||(this.get("canScrollVertical")&&(a.wheelDeltaY<0&&d>0)||(a.wheelDeltaY>0&&d<e)));if(b){this._scroll_wheelDeltaX+=a.wheelDeltaX;this._scroll_wheelDeltaY+=a.wheelDeltaY;this.invokeLater(this._scroll_mouseWheel,10)}return b},_scroll_mouseWheel:function(){if(this._scroll_wheelDeltaX||this._scroll_wheelDeltaY){this.scrollBy(this._scroll_wheelDeltaX,this._scroll_wheelDeltaY)}if(SC.WHEEL_MOMENTUM&&this._scroll_wheelDeltaY>0){this._scroll_wheelDeltaY=Math.floor(this._scroll_wheelDeltaY*0.95);this._scroll_wheelDeltaY=Math.max(this._scroll_wheelDeltaY,0);this.invokeLater(this._scroll_mouseWheel,10)}else{if(SC.WHEEL_MOMENTUM&&this._scroll_wheelDeltaY<0){this._scroll_wheelDeltaY=Math.ceil(this._scroll_wheelDeltaY*0.95);this._scroll_wheelDeltaY=Math.min(this._scroll_wheelDeltaY,0);this.invokeLater(this._scroll_mouseWheel,10)}else{this._scroll_wheelDeltaY=0;this._scroll_wheelDeltaX=0}}},canScale:NO,_scale:1,scale:function(a,b){if(b!==undefined){if(this.get("canScale")){b=Math.min(Math.max(this.get("minimumScale"),b),this.get("maximumScale"))}else{b=1}this._scale=b}return this._scale}.property("canScale","minimumScale","maximumScale").cacheable(),minimumScale:0.25,maximumScale:2,_sc_minimumFadeOutDelay:function(){return Math.max(Math.max(this.get("fadeOutDelay")||0,0.1),this.get("fadeInDuration")||0)*1000}.property("fadeOutDelay").cacheable(),_sc_fadeOutScrollers:function(){this._sc_fadeOutVerticalScroller();this._sc_fadeOutHorizontalScroller()},_sc_fadeOutVerticalScroller:function(){var a=this.get("verticalScrollerView");if(a&&a.get("fadeOut")){a.fadeOut()}this._sc_verticalFadeOutTimer=null},_sc_fadeOutHorizontalScroller:function(){var a=this.get("horizontalScrollerView");if(a&&a.get("fadeOut")){a.fadeOut()}this._sc_horizontalFadeOutTimer=null},_sc_fadeInScrollers:function(){this._sc_fadeInVerticalScroller();this._sc_fadeInHorizontalScroller()},_sc_fadeInVerticalScroller:function(){var b=this.get("canScrollVertical"),a=this.get("verticalScrollerView"),c;if(b&&a&&a.get("fadeIn")){if(this._sc_verticalFadeOutTimer){this._sc_verticalFadeOutTimer.startTime=null;this._sc_verticalFadeOutTimer.schedule()}else{a.fadeIn();c=this.get("_sc_minimumFadeOutDelay");this._sc_verticalFadeOutTimer=this.invokeLater(this._sc_fadeOutVerticalScroller,c)}}},_sc_fadeInHorizontalScroller:function(){var b=this.get("canScrollHorizontal"),c=this.get("horizontalScrollerView"),a;if(b&&c&&c.get("fadeIn")){if(this._sc_horizontalFadeOutTimer){this._sc_horizontalFadeOutTimer.startTime=null;this._sc_horizontalFadeOutTimer.schedule()}else{c.fadeIn();a=this.get("_sc_minimumFadeOutDelay");this._sc_horizontalFadeOutTimer=this.invokeLater(this._sc_fadeOutHorizontalScroller,a)}}},acceptsMultitouch:YES,decelerationRate:SC.NORMAL_SCROLL_DECELERATION,alwaysBounceHorizontal:NO,alwaysBounceVertical:YES,delaysContentTouches:YES,_touchScrollDidChange:function(){if(this.get("contentView").touchScrollDidChange){this.get("contentView").touchScrollDidChange(this._scroll_horizontalScrollOffset,this._scroll_verticalScrollOffset,this._scale)}if(this.verticalScrollerView&&this.verticalScrollerView.touchScrollDidChange){this.verticalScrollerView.touchScrollDidChange(this._scroll_verticalScrollOffset)}if(this.horizontalScrollerView&&this.horizontalScrollerView.touchScrollDidChange){this.horizontalScrollerView.touchScrollDidChange(this._scroll_horizontalScrollOffset)}this.invokeLast(this._sc_fadeInScrollers)},_touchScrollDidStart:function(){if(this.get("contentView").touchScrollDidStart){this.get("contentView").touchScrollDidStart(this._scroll_horizontalScrollOffset,this._scroll_verticalScrollOffset)}if(this.verticalScrollerView&&this.verticalScrollerView.touchScrollDidStart){this.verticalScrollerView.touchScrollDidStart(this._touch_verticalScrollOffset)}if(this.horizontalScrollerView&&this.horizontalScrollerView.touchScrollDidStart){this.horizontalScrollerView.touchScrollDidStart(this._touch_horizontalScrollOffset)}},_touchScrollDidEnd:function(){if(this.get("contentView").touchScrollDidEnd){this.get("contentView").touchScrollDidEnd(this._scroll_horizontalScrollOffset,this._scroll_verticalScrollOffset)}if(this.verticalScrollerView&&this.verticalScrollerView.touchScrollDidEnd){this.verticalScrollerView.touchScrollDidEnd(this._touch_verticalScrollOffset)}if(this.horizontalScrollerView&&this.horizontalScrollerView.touchScrollDidEnd){this.horizontalScrollerView.touchScrollDidEnd(this._touch_horizontalScrollOffset)}},_applyMidTouchTransforms:function(c){if(!c){return}var b="";if(SC.platform.touch){b+="translate3d("+-this._scroll_horizontalScrollOffset+"px, "+-Math.round(this._scroll_verticalScrollOffset)+"px,0) "}var e=this.get("contentView"),a;if(e){if(e.isScalable){SC.run(function(){e.applyScale(scale)});a=""}else{a="scale3d("+this._scale+", "+this._scale+", 1)"}}b+=a;var d=c.style;if(SC.none(this._scsv_preTouchTransformOrigin)){this._scsv_preTouchTransformOrigin=d[SC.browser.experimentalStyleNameFor("transformOrigin")]||""}d[SC.browser.experimentalStyleNameFor("transform")]=b;d[SC.browser.experimentalStyleNameFor("transformOrigin")]="top left"},_clearMidTouchTransforms:function(a){if(!a){return}var b=a.style;b[SC.browser.experimentalStyleNameFor("transform")]=null;b[SC.browser.experimentalStyleNameFor("transformOrigin")]=this._scsv_preTouchTransformOrigin||null;this._scsv_preTouchTransformOrigin=null},captureTouch:function(a){if(this.get("delaysContentTouches")){return YES}else{a.stackCandidateTouchResponder(this);return NO}},touchGeneration:0,touchStart:function(c){var b=++this.touchGeneration,a=this.tracking;if(!this.touch||this.touch.touch!==c){this.beginTouchTracking(c,YES)}if(!a){if(this.get("delaysContentTouches")){this.invokeLater(this.beginTouchesInContent,150,b)}}return YES},beginTouchesInContent:function(a){if(a!==this.touchGeneration){return}var b=this.touch;if(b&&this.tracking&&!this.dragging&&!b.touch.scrollHasEnded&&!b.touch.hasEnded){b.touch.captureTouch(this,YES);if(!b.touch.touchResponder){b.touch.makeTouchResponder(this)}else{if(b.touch.touchResponder!==this){if(b.needsScrollEnd){this._touchScrollDidEnd()}}}}},beginTouchTracking:function(f,r){var q=f.averagedTouchesForView(this,r);var k=this._scroll_verticalScrollOffset||0,a=this._scroll_horizontalScrollOffset||0,m=a,l=k,e=NO,p=0,s=0,j=this.touch,o,i;if(j&&!SC.none(j.animationID)){window.cancelAnimationFrame(j.animationID);m=this.touch.startClipOffset.x;l=this.touch.startClipOffset.y;e=YES}i=this.get("contentView");if(i){o=i.get("frame");p=o.width;s=o.height}if(i.calculatedWidth&&i.calculatedWidth!==0){p=i.calculatedWidth}if(i.calculatedHeight&&i.calculatedHeight!==0){s=i.calculatedHeight}var g=this.get("containerView").get("frame"),h=g.width,n=g.height;var b=this.convertFrameToView(this.get("frame"),null),d=(a+(q.x-b.x))/this._scale,c=(k+(q.y-b.y))/this._scale;this.touch={startTime:f.timeStamp,notCalculated:YES,enableScrolling:{x:p*this._scale>h||this.get("alwaysBounceHorizontal"),y:s*this._scale>n||this.get("alwaysBounceVertical")},scrolling:{x:NO,y:NO},enableBouncing:SC.platform.bounceOnScroll,startClipOffset:{x:m,y:l},lastScrollOffset:{x:a,y:k},startTouchOffset:{x:q.x,y:q.y},scrollVelocity:{x:0,y:0},startTouchOffsetInContent:{x:d,y:c},containerSize:{width:h,height:n},contentSize:{width:p,height:s},startScale:this._scale,startDistance:q.d,canScale:this.get("canScale")&&SC.platform.pinchToZoom,minimumScale:this.get("minimumScale"),maximumScale:this.get("maximumScale"),globalFrame:b,layer:i.get("layer"),resistanceCoefficient:0.998,resistanceAsymptote:320,decelerationFromEdge:0.05,accelerationToEdge:0.1,scrollTolerance:{x:15,y:15},scaleTolerance:5,secondaryScrollTolerance:30,scrollLock:500,decelerationRate:this.get("decelerationRate"),lastEventTime:f.timeStamp,touch:(r?f:(this.touch?this.touch.touch:null)),needsScrollEnd:e};if(!this.tracking){this.tracking=YES;this.dragging=NO}},_adjustForEdgeResistance:function(f,d,b,c,a){var e;if(f<d){e=f-d}else{if(f>b){e=b-f}else{return f}}e=Math.pow(c,Math.abs(e))*a;if(f<d){e=e-a}else{e=-e+a}return Math.min(Math.max(d,f),b)+e},touchesDragged:function(a){var b=a.averagedTouchesForView(this);this.updateTouchScroll(b.x,b.y,b.d,a.timeStamp)},updateTouchScroll:function(k,j,e,h){var g=this.touch,a=k-g.globalFrame.x,m=j-g.globalFrame.y,u,n,v,o,B,z,c=g.scrolling,r=this.get("horizontalAlign"),l=this.get("verticalAlign");var d=((this._scroll_horizontalScrollOffset||0)+a)/this._scale,b=((this._scroll_verticalScrollOffset||0)+m)/this._scale;var y=d-g.startTouchOffsetInContent.x,x=b-g.startTouchOffsetInContent.y;var i=g.dragging;if(!c.x&&Math.abs(y)>g.scrollTolerance.x&&g.enableScrolling.x){i=YES;c.x=YES;g.scrollTolerance.y=g.secondaryScrollTolerance;g.startTouchOffset.x=k;y=0}if(!c.y&&Math.abs(x)>g.scrollTolerance.y&&g.enableScrolling.y){i=YES;c.y=YES;g.scrollTolerance.x=g.secondaryScrollTolerance;g.startTouchOffset.y=j;x=0}if(i&&!g.dragging){g.dragging=YES;this.dragging=YES;this._touchScrollDidStart()}if(!c.x&&!c.y&&!g.canScale){return}if(c.x&&!c.y){if(y>g.scrollLock&&!c.y){g.enableScrolling.y=NO}}if(c.y&&!c.x){if(x>g.scrollLock&&!c.x){g.enableScrolling.x=NO}}if(g.canScale){var q=g.startDistance,w=e-q;if(Math.abs(w)>g.scaleTolerance){c.y=YES;c.x=YES;var A=g.startScale*(e/Math.max(q,50));var s=this._adjustForEdgeResistance(A,g.minimumScale,g.maximumScale,g.resistanceCoefficient,g.resistanceAsymptote);this._scale=s;i=YES;if(i&&!g.dragging){g.dragging=YES;this.dragging=YES;this._touchScrollDidStart()}}}B=this.minimumScrollOffset(g.contentSize.width*this._scale,g.containerSize.width,r);z=this.minimumScrollOffset(g.contentSize.height*this._scale,g.containerSize.height,l);o=this.maximumScrollOffset(g.contentSize.width*this._scale,g.containerSize.width,r);n=this.maximumScrollOffset(g.contentSize.height*this._scale,g.containerSize.height,l);v=g.startTouchOffsetInContent.x*this._scale-a;u=g.startTouchOffsetInContent.y*this._scale-m;if(g.enableBouncing){v=this._adjustForEdgeResistance(v,B,o,g.resistanceCoefficient,g.resistanceAsymptote);u=this._adjustForEdgeResistance(u,z,n,g.resistanceCoefficient,g.resistanceAsymptote)}else{v=Math.max(B,Math.min(o,v));u=Math.max(z,Math.min(n,u))}if(c.x){this._scroll_horizontalScrollOffset=v}if(c.y){this._scroll_verticalScrollOffset=u}if(i){this._applyMidTouchTransforms(g.layer);this._touchScrollDidChange()}if(h-g.lastEventTime>=1||g.notCalculated){g.notCalculated=NO;var f=this._scroll_horizontalScrollOffset;var p=this._scroll_verticalScrollOffset;g.scrollVelocity.x=((f-g.lastScrollOffset.x)/Math.max(1,h-g.lastEventTime));g.scrollVelocity.y=((p-g.lastScrollOffset.y)/Math.max(1,h-g.lastEventTime));g.lastScrollOffset.x=f;g.lastScrollOffset.y=p;g.lastEventTime=h}},touchEnd:function(c){var a=this.touch,b=c.averagedTouchesForView(this);c.scrollHasEnded=YES;if(b.touchCount>0){this.beginTouchTracking(c,NO)}else{if(this.dragging){a.dragging=NO;a.lastEventTime=c.timeStamp;this.startDecelerationAnimation()}else{if(a.needsScrollEnd){this._touchScrollDidEnd()}c.captureTouch(this,YES);if(c.touchResponder&&c.touchResponder!==this){c.end()}else{if(!c.touchResponder||c.touchResponder===this){if(c.nextTouchResponder){c.makeTouchResponder(c.nextTouchResponder)}}else{}}this.touch=null}this.tracking=NO;this.dragging=NO}},touchCancelled:function(){var a=this.touch;if(!a||!a.animationID){this.touch=null;this.beginPropertyChanges();this.set("scale",this._scale);this.set("verticalScrollOffset",this._scroll_verticalScrollOffset);this.set("horizontalScrollOffset",this._scroll_horizontalScrollOffset);this.endPropertyChanges();this.tracking=NO;if(this.dragging){this._touchScrollDidEnd()}this.dragging=NO}},startDecelerationAnimation:function(a){var c=this.touch,b=this;c.decelerationVelocity={x:c.scrollVelocity.x*10,y:c.scrollVelocity.y*10};c.animationID=window.requestAnimationFrame(function(){b.decelerateAnimation()})},bouncyBounce:function(c,e,d,f,g,b,a){if(e<d){if(c<0){c=c+((d-e)*g)}else{c=Math.min((d-e)*b+a,d-e-0.01)}}else{if(e>f){if(c>0){c=c-((e-f)*g)}else{c=-Math.min((e-f)*b+a,e-f-0.01)}}}return c},decelerateAnimation:function(){var c=this.touch,y=this._scale,n=c.contentSize,o=c.containerSize,m=this.get("horizontalAlign"),e=this.get("verticalAlign"),x=this.minimumScrollOffset(n.width*this._scale,o.width,m),w=this.minimumScrollOffset(n.height*this._scale,o.height,e),i=this.maximumScrollOffset(n.width*this._scale,o.width,m),h=this.maximumScrollOffset(n.height*this._scale,o.height,e),a=Date.now(),f=Math.max(a-c.lastEventTime,1),s=this._scroll_horizontalScrollOffset+c.decelerationVelocity.x*(f/10),q=this._scroll_verticalScrollOffset+c.decelerationVelocity.y*(f/10);var r=c.decelerationFromEdge,u=c.accelerationToEdge;var l=!c.enableBouncing,k=!c.enableBouncing;if(s>=x&&s<=i){l=YES}if(q>=w&&q<=h){k=YES}s/=this._scale;q/=this._scale;var j=0;j=this.bouncyBounce(j,y,c.minimumScale,c.maximumScale,r,u,0);this._scale=y=y+j;s*=this._scale;q*=this._scale;x=this.minimumScrollOffset(n.width*this._scale,o.width,m);w=this.minimumScrollOffset(n.height*this._scale,o.height,e);i=this.maximumScrollOffset(n.width*this._scale,o.width,m);h=this.maximumScrollOffset(n.height*this._scale,o.height,e);if(l&&(s<x||s>i)){s=Math.max(x,Math.min(s,i));c.decelerationVelocity.x=0}if(k&&(q<w||q>h)){q=Math.max(w,Math.min(q,h));c.decelerationVelocity.y=0}this._scroll_horizontalScrollOffset=s;this._scroll_verticalScrollOffset=q;this._applyMidTouchTransforms(c.layer);SC.run(this._touchScrollDidChange,this);var v=c.decelerationRate,b=Math.pow(v,(f/10));c.decelerationVelocity.y*=b;c.decelerationVelocity.x*=b;c.decelerationVelocity.x=this.bouncyBounce(c.decelerationVelocity.x,s,x,i,r,u,0.3);c.decelerationVelocity.y=this.bouncyBounce(c.decelerationVelocity.y,q,w,h,r,u,0.3);var p=Math.abs(c.decelerationVelocity.x),d=Math.abs(c.decelerationVelocity.y);if(d<0.05&&p<0.05&&Math.abs(j)<0.05){c.animationID=null;this.touch=null;this._touchScrollDidEnd();SC.run(function(){this._clearMidTouchTransforms(this.getPath("contentView.layer"));this.beginPropertyChanges();this.set("scale",this._scale);this.set("verticalScrollOffset",this._scroll_verticalScrollOffset);this.set("horizontalScrollOffset",this._scroll_horizontalScrollOffset);this.endPropertyChanges()},this);return}var g=this;c.lastEventTime=Date.now();c.animationID=window.requestAnimationFrame(function(){g.decelerateAnimation()})},init:function(){arguments.callee.base.apply(this,arguments);this._scroll_contentView=this.get("contentView");var a=this._scroll_contentView;if(a){a.addObserver("frame",this,"contentViewFrameDidChange");a.addObserver("calculatedWidth",this,"contentViewFrameDidChange");a.addObserver("calculatedHeight",this,"contentViewFrameDidChange");a.addObserver("layer",this,"contentViewLayerDidChange")}if(this.get("isVisibleInWindow")){this._sc_registerAutoscroll()}this._scroll_contentWidth=this._scroll_contentHeight=null},render:function(a,b){this.invokeLast(this.adjustElementScroll);if(b){a.push('<div class="corner"></div>')}return arguments.callee.base.apply(this,arguments)},createChildViews:function(){var b=[],a;if(SC.none(a=this.containerView)){a=SC.ContainerView}b.push(this.containerView=this.createChildView(a,{contentView:this.contentView,isScrollContainer:YES}));this.contentView=this.containerView.get("contentView");a=SC.platform.touch?this.get("horizontalTouchScrollerView"):this.get("horizontalScrollerView");if(a){if(this.get("hasHorizontalScroller")){a=this.horizontalScrollerView=this.createChildView(a,{layoutDirection:SC.LAYOUT_HORIZONTAL,valueBinding:"*owner.horizontalScrollOffset",mouseDown:function(){this.get("owner")._scroll_isExogenous=YES;if(arguments.callee.base.apply(this,arguments)){return YES}else{this.get("owner")._scroll_isExogenous=NO;return NO}},mouseUp:function(){var c=arguments.callee.base.apply(this,arguments);this.get("owner")._scroll_isExogenous=NO}});b.push(a)}else{this.horizontalScrollerView=null}}a=SC.platform.touch?this.get("verticalTouchScrollerView"):this.get("verticalScrollerView");if(a){if(this.get("hasVerticalScroller")){a=this.verticalScrollerView=this.createChildView(a,{layoutDirection:SC.LAYOUT_VERTICAL,valueBinding:"*owner.verticalScrollOffset",mouseDown:function(){this.get("owner")._scroll_isExogenous=YES;if(arguments.callee.base.apply(this,arguments)){return YES}else{this.get("owner")._scroll_isExogenous=NO;return NO}},mouseUp:function(){var c=arguments.callee.base.apply(this,arguments);this.get("owner")._scroll_isExogenous=NO}});b.push(a)}else{this.verticalScrollerView=null}}this.childViews=b},didCreateLayer:function(){this.invokeLast(this._scsv_didCreateLayer)},_scsv_didCreateLayer:function(){this._scroll_horizontalScaleOrigin=this.get("initialHorizontalAlign");this._scroll_horizontalScaleOriginPct=0.5;this._scroll_verticalScaleOrigin=this.get("initialVerticalAlign");this._scroll_verticalScaleOriginPct=0.5;this._scsv_scaleDidChange();this.tile()},_sc_registerAutoscroll:function(){if(this.get("isVisibleInWindow")){SC.Drag.addScrollableView(this)}else{SC.Drag.removeScrollableView(this)}}.observes("isVisibleInWindow"),contentViewDidChange:function(){var b=this.get("contentView"),a=this._scroll_contentView;if(b!==a){if(a){a.removeObserver("calculatedWidth",this,"contentViewFrameDidChange");a.removeObserver("calculatedHeight",this,"contentViewFrameDidChange");a.removeObserver("frame",this,"contentViewFrameDidChange");a.removeObserver("layer",this,"contentViewLayerDidChange")}this._scroll_contentView=b;if(b){b.addObserver("frame",this,"contentViewFrameDidChange");b.addObserver("calculatedWidth",this,"contentViewFrameDidChange");b.addObserver("calculatedHeight",this,"contentViewFrameDidChange");b.addObserver("layer",this,"contentViewLayerDidChange")}this.containerView.set("contentView",b);this._scsv_scaleDidChange()}}.observes("contentView"),contentViewFrameDidChange:function(){if(this.viewState===SC.View.UNRENDERED){return}var m=this.get("contentView"),k=(m)?m.get("frame"):null,g=this.get("scale"),b=0,o=0,i,h,l;if(!m||!k){return}b=(m.get("calculatedWidth")*g)||k.width||0;o=(m.get("calculatedHeight")*g)||k.height||0;i=this.getPath("containerView.frame");h=i.width;l=i.height;if(b===this._scroll_contentWidth&&o===this._scroll_contentHeight&&h===this._scroll_containerWidth&&l===this._scroll_containerHeight){return}this._scroll_contentWidth=b;this._scroll_contentHeight=o;this._scroll_containerWidth=h;this._scroll_containerHeight=l;if(this.get("hasHorizontalScroller")&&(m=this.get("horizontalScrollerView"))){if(this.get("autohidesHorizontalScroller")){this.setIfChanged("isHorizontalScrollerVisible",b>h)}m.setIfChanged("maximum",b-h);m.setIfChanged("proportion",h/b)}if(this.get("hasVerticalScroller")&&(m=this.get("verticalScrollerView"))){if(this.get("autohidesVerticalScroller")){this.setIfChanged("isVerticalScrollerVisible",o>l)}m.setIfChanged("maximum",o-l);m.setIfChanged("proportion",l/o)}if(!this.get("isVerticalScrollerVisible")&&this.get("autohidesVerticalScroller")){this.set("verticalScrollOffset",this.get("minimumVerticalScrollOffset"))}if(!this.get("isHorizontalScrollerVisible")&&this.get("autohidesHorizontalScroller")){this.set("horizontalScrollOffset",this.get("minimumHorizontalScrollOffset"))}var n=this.get("maximumVerticalScrollOffset"),j=this.get("verticalScrollOffset"),e=this.get("maximumHorizontalScrollOffset"),a=this.get("horizontalScrollOffset"),d=n<j,c=e<a;if(d||c){this.forceDimensionsRecalculation(c,d,j,a)}else{this.invokeLast(this.adjustElementScroll)}this.notifyPropertyChange("maximumVerticalScrollOffset");this.notifyPropertyChange("maximumHorizontalScrollOffset")},frameDidChange:function(){this._scroll_contentWidth=this._scroll_contentHeight=this._scroll_containerHeight=this._scroll_containerWidth=null;this.contentViewFrameDidChange()}.observes("frame"),_scsv_scaleDidChange:function(){if(this.viewState===SC.View.UNRENDERED){return}if(!this.get("contentView")){return}if(!this._scroll_isExogenous){var f=this._scroll_horizontalScaleOrigin,d=this._scroll_verticalScaleOrigin,c=this._scroll_horizontalScaleOriginPct,b=this._scroll_verticalScaleOriginPct;if(f===SC.ALIGN_DEFAULT){f=this.get("horizontalAlign")}if(d===SC.ALIGN_DEFAULT){d=this.get("verticalAlign")}}this.get("contentView").notifyPropertyChange("frame");this.tile();if(!this._scroll_isExogenous){switch(f){case SC.ALIGN_LEFT:this.set("horizontalScrollOffset",this.get("minimumHorizontalScrollOffset"));break;case SC.ALIGN_RIGHT:this.set("horizontalScrollOffset",this.get("maximumHorizontalScrollOffset"));break;default:var a=((this.get("maximumHorizontalScrollOffset")+this._scroll_containerWidth)*c)-(this._scroll_containerWidth/2);this.set("horizontalScrollOffset",a)}switch(d){case SC.ALIGN_TOP:this.set("verticalScrollOffset",this.get("minimumVerticalScrollOffset"));break;case SC.ALIGN_BOTTOM:this.set("verticalScrollOffset",this.get("maximumVerticalScrollOffset"));break;default:var e=((this.get("maximumVerticalScrollOffset")+this._scroll_containerHeight)*b)-(this._scroll_containerHeight/2);this.set("verticalScrollOffset",e)}}}.observes("scale"),contentViewLayerDidChange:function(){this.invokeLast(this.adjustElementScroll)},_scroll_horizontalAlignmentDidChange:function(){this.notifyPropertyChange("horizontalScrollOffset");this.set("horizontalScrollOffset",this.get("horizontalScrollOffset"))}.observes("horizontalAlign"),_scroll_verticalAlignmentDidChange:function(){this.notifyPropertyChange("verticalScrollOffset");this.set("verticalScrollOffset",this.get("verticalScrollOffset"))}.observes("verticalAlign"),_scroll_scrollOffsetsDidChange:function(){this.invokeLast(this.adjustElementScroll);this.invokeLast(this._sc_fadeInScrollers)}.observes("horizontalScrollOffset","verticalScrollOffset"),adjustElementScroll:function(){var j=this.get("contentView"),c=this.get("verticalScrollOffset"),e=this.get("horizontalScrollOffset"),d=this.get("scale");if(!j){return}if(j._viewFrameDidChange){j._viewFrameDidChange()}var a=SC.browser.experimentalStyleNameFor("transform");if(a===SC.UNSUPPORTED){var h=this.get("containerView");var g=h.get("layer");g.style.marginLeft=-e+"px";g.style.marginTop=-c+"px";if(j.isScalable){j.applyScale(d)}else{}}else{var b=1/(window.devicePixelRatio||1);c=Math.round(c/b)*b;e=Math.round(e/b)*b;var i="translateX("+(-e)+"px) translateY("+(-c)+"px)";if(SC.platform.get("supportsCSS3DTransforms")){i+=" translateZ(0px)"}if(j.isScalable){j.applyScale(d)}else{i+=" scale("+d+")"}var f=j.get("layer");if(f){f.style[a]=i;f.style[SC.browser.experimentalStyleNameFor("transformOrigin")]="top left"}}},forceDimensionsRecalculation:function(b,c,e,a){var f=a;var d=e;this.beginPropertyChanges();this.set("verticalScrollOffset",0);this.set("horizontalScrollOffset",0);this.endPropertyChanges();this.beginPropertyChanges();if(b&&c){this.set("verticalScrollOffset",this.get("maximumVerticalScrollOffset"));this.set("horizontalScrollOffset",this.get("maximumHorizontalScrollOffset"))}else{if(b&&!c){this.set("verticalScrollOffset",d);this.set("horizontalScrollOffset",this.get("maximumHorizontalScrollOffset"))}else{if(!b&&c){this.set("horizontalScrollOffset",this.get("maximumVerticalScrollOffset"));this.set("verticalScrollOffset",f)}}}this.endPropertyChanges()},_scroll_verticalScrollOffset:0,_scroll_horizontalScrollOffset:0,_scroll_minimumVerticalScrollOffset:0,_scroll_maximumVerticalScrollOffset:0,_scroll_minimumHorizontalScrollOffset:0,_scroll_maximumHorizontalScrollOffset:0,_scroll_verticalScaleOrigin:SC.ALIGN_TOP,_scroll_verticalScaleOriginPct:0.5,_scroll_horizontalScaleOrigin:SC.ALIGN_LEFT,_scroll_horizontalScaleOriginPct:0.5,_scroll_isExogenous:NO});sc_require("views/scroll");SC.MenuScrollerView=SC.ScrollerView.extend({classNames:["sc-menu-scroller-view"],scrollDown:NO,value:function(a,c){if(c!==undefined){this._value=c}else{var b=this._value||0;return Math.min(b,this.get("maximum"))}}.property("maximum").cacheable(),maximum:0,isEnabled:YES,layoutDirection:SC.LAYOUT_VERTICAL,verticalLineScroll:20,ownerScrollValueKey:function(){return"verticalScrollOffset"}.property("layoutDirection").cacheable(),init:function(){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.TINY_SCROLLER_THICKNESS);break;case SC.SMALL_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.SMALL_SCROLLER_THICKNESS);break;case SC.REGULAR_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.REGULAR_SCROLLER_THICKNESS);break;case SC.LARGE_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.LARGE_SCROLLER_THICKNESS);break;case SC.HUGE_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.HUGE_SCROLLER_THICKNESS);break}return arguments.callee.base.apply(this,arguments)},render:function(a,c){a.addClass("sc-vertical");a.addClass(this.get("controlSize"));if(c){var b=this.get("scrollDown")?"arrowDown":"arrowUp";a.push('<span class="scrollArrow '+b+'">&nbsp;</span>')}},willDestroyLayer:function(){var a=this._sc_scroller_scrollDidChange;SC.Event.remove(this.$(),"scroll",this,a)},mouseEntered:function(a){this.set("isMouseOver",YES);this._invokeScrollOnMouseOver()},mouseExited:function(a){this.set("isMouseOver",NO)},_sc_scroller_valueDidChange:function(){}.observes("value"),_sc_scroller_armScrollTimer:function(){if(!this._sc_scrollTimer){SC.run(function(){var a=this._sc_scroller_scrollDidChange;this._sc_scrollTimer=this.invokeLater(a,50)})}},_sc_scroller_scrollDidChange:function(){var b=Date.now(),d=this._sc_lastScroll,c=this.get("layer"),a=0;if(d&&(b-d)<50){return this._sc_scroller_armScrollTimer()}this._sc_scrollTimer=null;this._sc_lastScroll=b;SC.run(function(){if(!this.get("isEnabledInPane")){return}this._sc_scrollValue=a=c.scrollTop;this.set("value",a)})},_scrollMenu:function(){var b=this.get("value"),a;if(this.get("scrollDown")){a=b+this.verticalLineScroll;if(a<=this.get("maximum")){this.set("value",a)}}else{a=b-this.verticalLineScroll;if(a>=0){this.set("value",a)}else{if(b<=this.verticalLineScroll&&b>0){this.set("value",0)}}}return YES},_invokeScrollOnMouseOver:function(){this._scrollMenu();if(this.get("isMouseOver")){this.invokeLater(this._invokeScrollOnMouseOver,50)}}});SC.MenuScrollerView.REGULAR_SCROLLER_THICKNESS=18;SC.MenuScrollerView.TINY_SCROLLER_THICKNESS=10;SC.MenuScrollerView.SMALL_SCROLLER_THICKNESS=14;SC.MenuScrollerView.LARGE_SCROLLER_THICKNESS=23;SC.MenuScrollerView.HUGE_SCROLLER_THICKNESS=26;SC.MenuScrollView=SC.ScrollView.extend({classNames:["sc-menu-scroll-view"],maximumHorizontalScrollOffset:0,hasHorizontalScroller:NO,horizontalScrollerView:SC.MenuScrollerView,isHorizontalScrollerVisible:NO,canScrollHorizontal:NO,autohidesHorizontalScroller:NO,hasVerticalScroller:YES,verticalScrollerView:SC.MenuScrollerView,verticalScrollerView2:SC.MenuScrollerView,isVerticalScrollerVisible:YES,canScrollVertical:YES,autohidesVerticalScroller:YES,verticalScrollerBottom:0,controlSize:SC.REGULAR_CONTROL_SIZE,containerView:SC.ContainerView,scrollToVisible:function(b){if(arguments.length===0){return arguments.callee.base.apply(this,arguments)}var e=this.get("contentView");if(!e){return NO}var a=b.get("frame");if(!a){return NO}a=e.convertFrameFromView(a,b.get("parentView"));var c=this.get("verticalScrollerView2");if(c&&c.get("isVisible")){a.height+=c.get("frame").height}var d=this.get("verticalScrollerView");if(d&&d.get("isVisible")){a.top-=d.get("frame").height}return this.scrollToRect(a)},tile:function(){var m,o,g,e,c,q,i;m=this.get("hasVerticalScroller");o=m?this.get("verticalScrollerView"):null;g=m?this.get("verticalScrollerView2"):null;e=o&&this.get("isVerticalScrollerVisible");c=this.get("containerView");q={left:0,top:0};if(e){i=0;var d=o.get("scrollerThickness")||g.get("scrollerThickness");var l=this.get("contentView"),j=(l)?l.get("frame"):null,p=(j)?j.height:0,b=this.containerView.$()[0],r=this.get("verticalScrollOffset"),k={height:0,top:0,right:0,left:0},a={height:d,top:0,right:0,left:0},h={height:d,bottom:0,right:0,left:0},n={height:0,bottom:0,right:0,left:0};if(b){i=b.offsetHeight}if(r===0){q.top=0;q.bottom=d;o.set("layout",k);g.set("layout",h)}else{if(r>=(p-i-d)){q.top=d;q.bottom=0;o.set("layout",a);g.set("layout",n)}else{q.top=d;q.bottom=d;o.set("layout",a);g.set("layout",h)}}}if(o){o.set("isVisible",e);g.set("isVisible",e)}c.set("layout",q)},scrollerVisibilityDidChange:function(){this.tile()}.observes("isVerticalScrollerVisible","isHorizontalScrollerVisible","verticalScrollOffset"),createChildViews:function(){var c=[],b,a,d=this.get("controlSize");if(SC.none(b=this.containerView)){b=SC.ContainerView}c.push(this.containerView=this.createChildView(b,{contentView:this.contentView}));this.contentView=this.containerView.get("contentView");if((b=this.verticalScrollerView)&&(a=this.verticalScrollerView2)){if(this.get("hasVerticalScroller")){b=this.verticalScrollerView=this.createChildView(b,{layout:{top:0,left:0,right:0},controlSize:d,valueBinding:"*owner.verticalScrollOffset"});c.push(b);a=this.verticalScrollerView2=this.createChildView(a,{scrollDown:YES,layout:{bottom:0,left:0,right:0},controlSize:d,valueBinding:"*owner.verticalScrollOffset"});c.push(a)}else{this.verticalScrollerView=null;this.verticalScrollerView2=null}}this.childViews=c;this.contentViewFrameDidChange();this.tile()},init:function(){arguments.callee.base.apply(this,arguments);this._scroll_contentView=this.get("contentView");var a=this._scroll_contentView;if(a){a.addObserver("frame",this,this.contentViewFrameDidChange)}if(this.get("isVisibleInWindow")){this._scsv_registerAutoscroll()}},_scsv_registerAutoscroll:function(){if(this.get("isVisibleInWindow")){SC.Drag.addScrollableView(this)}else{SC.Drag.removeScrollableView(this)}}.observes("isVisibleInWindow"),contentViewFrameDidChange:function(){var c=this.get("contentView"),b,h=(c)?c.get("frame"):null,e=(h)?h.width:0,a=(h)?h.height:0,i=this.get("frame"),d,g;this._scroll_contentWidth=e;this._scroll_contentHeight=a;if(this.get("hasVerticalScroller")&&(c=this.get("verticalScrollerView"))&&(b=this.get("verticalScrollerView2"))){a-=1;if(this.get("autohidesVerticalScroller")){this.set("isVerticalScrollerVisible",a>i.height)}a-=this.get("verticalScrollerBottom");d=0;g=this.containerView.$()[0];if(g){d=g.offsetHeight}a=a-d;c.setIfChanged("maximum",a);b.setIfChanged("maximum",a)}},_scroll_horizontalScrollOffsetDidChange:function(){},_scroll_verticalScrollOffsetDidChange:function(){var b=this.get("verticalScrollOffset");var a=this.get("contentView");if(a){a.$().css("top",(0-b)+"px")}}.observes("verticalScrollOffset")});sc_require("views/workspace");SC.TO_LEFT="TOLEFT";SC.TO_RIGHT="TORIGHT";SC.NavigationView=SC.WorkspaceView.extend({_views:null,_current:null,navigationContentView:SC.View,init:function(){arguments.callee.base.apply(this,arguments);this._views=[]},createChildViews:function(){arguments.callee.base.apply(this,arguments);var a=this.get("navigationContentView");if(a.isClass){a=this.createChildView(a)}this._defaultContent=this.navigationContentView=a;this.contentView.appendChild(a)},changeNavigationContent:function(a){var c=null,b=null;if(a){c=a.get("topToolbar");b=a.get("bottomToolbar")}if(c&&c.isClass){a.set("topToolbar",c=c.create())}if(b&&b.isClass){a.set("bottomToolbar",b=b.create())}this.beginPropertyChanges();this._current=a;this.set("navigationContentView",a?a:this._defaultContent);this.set("topToolbar",c);this.set("bottomToolbar",b);this.endPropertyChanges()},push:function(a){this._currentDirection=this._current?SC.TO_LEFT:null;if(this._current){this._views.push(this._current)}this.changeNavigationContent(a)},pop:function(){this._currentDirection=SC.TO_RIGHT;var a=this._views.pop();this.changeNavigationContent(a)},popToView:function(b){this._currentDirection=SC.TO_RIGHT;var d=this._views,a=d.length-1,c=d[a];while(c&&c!==b){this._views.pop();a--;c=d[a]}this.changeNavigationContent(c)},topToolbarDidChange:function(){var b=this.activeTopToolbar,a=this.get("topToolbar");if(b){if(this._currentDirection!==null){b.set("buildDirection",this._currentDirection);this.buildOutChild(b)}else{this.removeChild(b)}}if(a){if(this._currentDirection!==null){a.set("buildDirection",this._currentDirection);this.buildInChild(a)}else{this.appendChild(a)}}this.activeTopToolbar=a;this.invokeOnce("childDidChange")}.observes("topToolbar"),bottomToolbarDidChange:function(){var b=this.activeBottomToolbar,a=this.get("bottomToolbar");if(b){if(this._currentDirection!==null){b.set("buildDirection",this._currentDirection);this.buildOutChild(b)}else{this.removeChild(b)}}if(a){if(this._currentDirection!==null){a.set("buildDirection",this._currentDirection);this.buildInChild(a)}else{this.appendChild(a)}}this.activeBottomToolbar=a;this.invokeOnce("childDidChange")}.observes("topToolbar"),contentViewDidChange:function(){var b=this.activeNavigationContentView,a=this.get("navigationContentView");if(!a.isNavigationBuilder){a.mixin(SC.NavigationBuilder)}this._pendingBuildOut=b;this._pendingBuildIn=a;this.activeNavigationContentView=a;this.invokeOnce("childDidChange")}.observes("navigationContentView"),childDidChange:function(){var a=this._pendingBuildIn,b=this._pendingBuildOut;if(b){if(this._currentDirection!==null){b.set("buildDirection",this._currentDirection);this.contentView.buildOutChild(b)}else{this.contentView.removeChild(b)}}this._scws_tile();if(a){if(this._currentDirection!==null){a.set("buildDirection",this._currentDirection);this.contentView.buildInChild(a)}else{this.contentView.appendChild(a)}}}});sc_require("views/toolbar");SC.NavigationBarView=SC.ToolbarView.extend(SC.Gesturable,{init:function(){arguments.callee.base.apply(this,arguments);if(!SC.Animatable){SC.Logger.error("NavigationBarView requires SC.Animatable. Please make your app or framework require the animation framework. CRASH.")}},mixinAnimatable:function(){this.mixin(SC.Animatable);this.transitions=this.navigationTransitions},navigationTransitions:{opacity:{duration:0.25,action:"didFinishTransition"}},style:{opacity:1},gestures:["swipeGesture"],swipeGesture:SC.SwipeGesture,swipe:function(d,h,f){var e=(f===SC.SWIPE_LEFT)?"isSwipeLeft":"isSwipeRight",c=this.get("childViews"),g,b,a=c.get("length");for(b=0;b<a;b++){g=c[b];if(g.get(e)){h.makeTouchResponder(g);h.end();return}}},resetBuild:function(){if(!this.isAnimatable){this.mixinAnimatable()}},didFinishTransition:function(){if(this.isBuildingIn){this.buildInDidFinish()}else{if(this.isBuildingOut){this.buildOutDidFinish()}}},preBuildIn:function(){this.disableAnimation();this.adjust("opacity",0).updateLayout();this.enableAnimation();var c=this.get("childViews"),d,b,a=c.get("length");for(b=0;b<a;b++){d=c[b];if(d.disableNavigationTransition){continue}if(!d._nv_mixedIn){this.mixinNavigationChild(d)}d.disableAnimation();d.transform(this.buildDirection===SC.TO_LEFT?100:-100);d.enableAnimation()}},buildIn:function(){this.preBuildIn();this.invokeLater("startBuildIn",10)},startBuildIn:function(){this.adjust("opacity",1);var c=this.get("childViews"),d,b,a=c.get("length");for(b=0;b<a;b++){d=c[b];if(d.disableNavigationTransition){continue}d.transform(0)}},buildOut:function(){this.adjust("opacity",0);var c=this.get("childViews"),d,b,a=c.get("length");for(b=0;b<a;b++){d=c[b];if(d.disableNavigationTransition){continue}if(!d._nv_mixedIn){this.mixinNavigationChild(d)}d.transform(this.buildDirection===SC.TO_LEFT?-100:100)}},mixinNavigationChild:function(a){if(a.isAnimatable){return}a.mixin(SC.Animatable);a.mixin({transitions:{transform:{timing:SC.Animatable.TRANSITION_EASE_IN_OUT,duration:0.25}},naturalLayout:a.get("layout"),transform:function(b){if(SC.platform.supportsCSS3DTransforms){this.adjust("transform","translate3d("+b+"px,0px,0px)")}else{this.adjust("transform","translate("+b+"px,0px)")}}});a._nv_mixedIn=YES}});sc_require("views/button");SC.PopupButtonView=SC.ButtonView.extend({classNames:["sc-popup-button"],renderDelegateName:"popupButtonRenderDelegate",preferMatrix:null,menu:null,shouldLoadInBackground:NO,init:function(){arguments.callee.base.apply(this,arguments);this._setupMenu();if(this.get("shouldLoadInBackground")){SC.backgroundTaskQueue.push(SC.PopupButtonMenuLoader.create({popupButton:this}))}},_setupMenu:function(){var a=this.get("instantiatedMenu");if(this.isActiveBinding){this.isActiveBinding.disconnect()}this.isActiveBinding=null;if(a&&!a.isClass){this.isActiveBinding=this.bind("isActive",a,"isVisibleInWindow")}},_popup_menuDidChange:function(){this._setupMenu()}.observes("menu"),isActive:NO,_instantiateMenu:function(){var a=this.get("menu");if(!a||!a.isClass){return}this.menu=a.create();this._setupMenu()},instantiatedMenu:function(){var a=this.get("menu");if(a&&a.isClass){this._instantiateMenu();a=this.get("menu")}return a}.property("menu").cacheable(),action:function(a){var b=this.get("instantiatedMenu");if(!b){return NO}b.popup(this,this.get("preferMatrix"));return YES},mouseDown:function(a){if(a.which&&a.which!==1){return false}if(!this.get("isEnabledInPane")){return YES}this._isMouseDown=YES;this._action();this._menuRenderedTimestamp=0;var b=this;setTimeout(function(){SC.run(function(){b._menuRenderedTimestamp=Date.now()})},1);this.becomeFirstResponder();return YES},mouseUp:function(b){var d=new Date().getTime(),c=this._menuRenderedTimestamp,e=this.get("instantiatedMenu"),f=SC.platform.touch,a;if(c===0){c=Date.now()}if(e){a=e.getPath("rootMenu.targetMenuItem");if(a){if(!a.performAction()){e.remove()}}else{if(!f&&(d-c>SC.ButtonView.CLICK_AND_HOLD_DELAY)){e.remove()}}}this._isMouseDown=NO;arguments.callee.base.apply(this,arguments);return YES},mouseExited:function(a){return YES},performKeyEquivalent:function(b,a){if(!this.get("isEnabledInPane")){return NO}var c=this.get("instantiatedMenu");return(!!c&&c.performKeyEquivalent(b,a,YES))},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)}});SC.PopupButtonMenuLoader=SC.Task.extend({popupButton:null,run:function(){if(this.popupButton){this.popupButton._instantiateMenu()}}});SC.ProgressView=SC.View.extend(SC.Control,{classNames:["sc-progress-view"],displayProperties:["displayValue","ariaValue","minimum","maximum","isIndeterminate","isRunning","isVisibleInWindow"],renderDelegateName:"progressRenderDelegate",value:0.5,valueBindingDefault:SC.Binding.single().notEmpty(),displayValue:function(){var b=this.get("minimum")||0,c=this.get("maximum")||1,a=this.get("value")||0;a=(a-b)/(c-b);if(isNaN(a)){a=0}if(a<0){a=0}if(a>1){a=1}return a}.property("value","maximum","minimum").cacheable(),ariaRole:"progressbar",ariaValue:function(){return this.get("value")}.property("value").cacheable(),minimum:0,minimumBindingDefault:SC.Binding.single().notEmpty(),contentMinimumKey:null,maximum:1,maximumBindingDefault:SC.Binding.single().notEmpty(),contentMaximumKey:null,isIndeterminate:NO,isIndeterminateBindingDefault:SC.Binding.bool(),isRunning:NO,isRunningBindingDefault:SC.Binding.bool(),contentIsIndeterminateKey:null,contentPropertyDidChange:function(c,a){var b=this.get("content");this.beginPropertyChanges().updatePropertyFromContent("value",a,"contentValueKey",b).updatePropertyFromContent("minimum",a,"contentMinimumKey",b).updatePropertyFromContent("maximum",a,"contentMaximumKey",b).updatePropertyFromContent("isIndeterminate",a,"contentIsIndeterminateKey",b).endPropertyChanges()},didCreateLayer:function(){if(this.get("isIndeterminate")&&this.get("isRunning")&&this.get("isVisibleInWindow")){this.displayDidChange()}}});SC.RadioView=SC.View.extend(SC.Control,{acceptsFirstResponder:function(){if(SC.FOCUS_ALL_CONTROLS){return this.get("isEnabledInPane")}return NO}.property("isEnabledInPane"),classNames:["sc-radio-view"],ariaRole:"radiogroup",displayProperties:["displayItems","layoutDirection"],renderDelegateName:"radioGroupRenderDelegate",itemAriaLabeledByKey:null,itemAriaLabelKey:null,value:null,layoutDirection:SC.LAYOUT_VERTICAL,escapeHTML:YES,items:[],itemTitleKey:null,itemWidthKey:null,itemValueKey:null,itemIsEnabledKey:null,itemIconKey:null,itemsDidChange:function(){if(this._items){this._items.removeObserver("[]",this,this.itemContentDidChange)}this._items=this.get("items");if(this._items){this._items.addObserver("[]",this,this.itemContentDidChange)}this.itemContentDidChange()}.observes("items"),itemContentDidChange:function(){this._renderAsFirstTime=YES;this.notifyPropertyChange("displayItems")},displayItems:function(){var k=this.get("items"),p=this.get("value"),h=SC.isArray(p),f=this.get("localize"),d=this.get("itemTitleKey"),e=this.get("itemValueKey"),o=this.get("itemWidthKey"),c=this.get("layoutDirection")===SC.LAYOUT_HORIZONTAL,j=this.get("itemIsEnabledKey"),x=this.get("itemIconKey"),g=this.get("itemAriaLabeledByKey"),z=this.get("itemAriaLabelKey"),w=this._displayItems||[],q=(k)?k.get("length"):0,u,y,l,m,i,v,s,n,b,a,r;for(i=0;i<q;i++){u=k.objectAt(i);if(SC.typeOf(u)===SC.T_ARRAY){y=u[0];m=u[1]}else{if(u){if(d){y=u.get?u.get(d):u[d]}else{y=(u.toString)?u.toString():null}if(o&&c){l=u.get?u.get(o):u[o]}if(e){m=u.get?u.get(e):u[e]}else{m=u}if(j){v=u.get?u.get(j):u[j]}else{v=YES}if(x){s=u.get?u.get(x):u[x]}else{s=null}if(g){a=u.get?u.get(g):u[g]}else{a=null}if(z){r=u.get?u.get(z):u[z]}else{r=null}}else{y=m=s=null;v=NO}}v=v&&this.get("isEnabled");if(u){n=(h)?(p.indexOf(m)>=0):(p===m)}else{n=NO}if(f){y=SC.String.loc(y)}w.push(SC.Object.create({title:y,icon:s,width:l,value:m,isEnabled:v,isSelected:(h&&p.indexOf(m)>=0&&p.length===1)||(p===m),isMixed:(h&&p.indexOf(m)>=0),isActive:this._activeRadioButton===i,theme:this.get("theme"),renderState:{}}))}return w}.property("isEnabled","value","items","itemTitleKey","itemWidthKey","itemValueKey","itemIsEnabledKey","localize","itemIconKey","itemAriaLabeledByKey","itemAriaLabelKey").cacheable(),mouseDown:function(a){if(a.which&&a.which!==1){return false}if(!this.get("isEnabledInPane")){return YES}var d=this.get("renderDelegate"),c=this.get("renderDelegateProxy"),f=this.$(),b=d.indexForEvent(c,f,a);this._activeRadioButton=b;if(b!==undefined){var e=this.get("displayItems")[b];if(e.get("isEnabled")){e.set("isActive",YES);d.updateRadioAtIndex(c,f,b)}}a.allowDefault();return YES},mouseUp:function(a){if(!this.get("isEnabledInPane")){return YES}var d=this.get("renderDelegate"),c=this.get("renderDelegateProxy"),f=this.$(),g=this.get("displayItems"),b=d.indexForEvent(c,f,a);if(this._activeRadioButton!==undefined&&b!==this._activeRadioButton){g[this._activeRadioButton].set("isActive",NO);d.updateRadioAtIndex(c,f,this._activeRadioButton)}this._activeRadioButton=undefined;if(b!==undefined){var e=this.get("displayItems")[b];if(e.get("isEnabled")){e.set("isActive",NO);d.updateRadioAtIndex(c,f,b);this.set("value",e.value)}}a.allowDefault();return YES},keyDown:function(j){if(!this.get("isEnabledInPane")){return YES}if(j.which===9||j.keyCode===9){var h=j.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");if(h){h.becomeFirstResponder()}else{j.allowDefault()}return YES}if(j.which>=37&&j.which<=40){var g=this.get("renderDelegate"),f=this.get("renderDelegateProxy"),c=this.$(),e=this.get("displayItems"),b=this.get("value");for(var d=0,a=e.length;d<a;d++){if(b===e[d].value){break}}if(j.which===37||j.which===38){if(d<=0){d=e.length-1}else{d--}}if(j.which===39||j.which===40){if(d>=e.length-1){d=0}else{d++}}g.updateRadioAtIndex(f,c,d);this.set("value",e[d].value)}j.allowDefault();return NO},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)}});SC.SceneView=SC.ContainerView.extend({scenes:null,transitionBackward:SC.ContainerView.PUSH,transitionBackwardOptions:{duration:0.25,direction:"right"},transitionForward:SC.ContainerView.PUSH,transitionForwardOptions:{duration:0.25,direction:"left"},replaceContent:function(b){var a=this.get("scenes"),c=this.get("nowShowing"),e=a?a.indexOf(this._lastNowShowingView):-1,d=a?a.indexOf(c):-1;this._lastNowShowingView=c;if(e<d){this.transitionSwap=this.transitionForward;this.transitionSwapOptions=this.transitionForwardOptions}else{this.transitionSwap=this.transitionBackward;this.transitionSwapOptions=this.transitionBackwardOptions}arguments.callee.base.apply(this,arguments)},});SC.SegmentView=SC.View.extend(SC.Control,{ariaRole:"button",isSegment:YES,classNames:["sc-segment-view"],toolTip:null,isActive:NO,isSelected:NO,layoutDirection:SC.LAYOUT_HORIZONTAL,controlSize:null,supportFocusRing:NO,displayProperties:["icon","displayTitle","value","displayToolTip","isDefault","isCancel","width","isSegment","isFirstSegment","isMiddleSegment","isLastSegment","isOverflowSegment","index","layoutDirection"],renderDelegateName:"segmentRenderDelegate",useStaticLayout:YES,title:"",value:null,icon:null,localize:NO,keyEquivalent:null,escapeHTML:YES,needsEllipsis:YES,displayTitle:function(){var a=this.get("title");if(this.get("localize")){a=SC.String.loc(a)}return a}.property("title","localize").cacheable(),width:null,localItem:null,widthDidChange:function(){this.adjust("width",this.get("width"))}.observes("width"),updateItem:function(d,c){var g=d.get("itemKeys"),f,a=d.get("viewKeys"),e,b;for(b=g.get("length")-1;b>=0;b--){f=d.get(g.objectAt(b));e=a.objectAt(b);if(!SC.none(c.get(f))){this.set(e,c.get(f))}}this.set("localItem",c)}});sc_require("views/segment");SC.SegmentedView=SC.View.extend(SC.Control,{acceptsFirstResponder:function(){if(SC.FOCUS_ALL_CONTROLS){return this.get("isEnabledInPane")}return NO}.property("isEnabledInPane").cacheable(),ariaRole:"group",classNames:["sc-segmented-view"],theme:"square",value:null,allowsEmptySelection:NO,allowsMultipleSelection:NO,selectSegmentWhenTriggeringAction:NO,localize:YES,align:SC.ALIGN_CENTER,layoutDirection:SC.LAYOUT_HORIZONTAL,items:null,itemTitleKey:null,itemValueKey:null,itemIsEnabledKey:null,itemIconKey:null,itemWidthKey:null,itemActionKey:null,itemTargetKey:null,itemLayerIdKey:null,itemKeyEquivalentKey:null,shouldHandleOverflow:YES,overflowTitle:"&raquo;",overflowToolTip:"More…",overflowIcon:null,segmentViewClass:SC.SegmentView,shouldAutoResize:NO,itemKeys:["itemTitleKey","itemValueKey","itemIsEnabledKey","itemIconKey","itemWidthKey","itemToolTipKey","itemKeyEquivalentKey","itemLayerIdKey"],viewKeys:["title","value","isEnabled","icon","width","toolTip","keyEquivalent","layerId"],init:function(){arguments.callee.base.apply(this,arguments);var d=this.get("overflowTitle"),a=this.get("overflowToolTip"),b=this.get("overflowIcon"),c;c=this.get("segmentViewClass").create({controlSize:this.get("controlSize"),escapeHTML:false,localize:this.get("localize"),title:d,toolTip:a,icon:b,isLastSegment:YES,isOverflowSegment:YES,layoutDirection:this.get("layoutDirection"),isVisible:this.get("shouldHandleOverflow")});this.set("overflowView",c);this.appendChild(c);this.itemsDidChange()},shouldHandleOverflowDidChange:function(){if(this.get("shouldHandleOverflow")){this.invokeLast(this.remeasure)}else{this.get("overflowView").set("isVisible",NO)}}.observes("shouldHandleOverflow"),itemsDidChange:function(){var l=this.get("items")||[],c,g,m=this.get("childViews"),h,d=this.get("overflowView"),n=this.get("value"),b,o=this.get("itemKeys"),a,k=this.get("segmentViewClass"),f,e;if(m.get("length")-1>l.get("length")){for(f=m.get("length")-2;f>=l.get("length");f--){h=m.objectAt(f);c=h.get("localItem");if(c instanceof SC.Object){for(e=o.get("length")-1;e>=0;e--){a=this.get(o.objectAt(e));if(a){c.removeObserver(a,this,this.itemContentDidChange)}}}if(SC.isArray(n)){n.removeObject(c)}else{if(n===c){n=null}}this.removeChildAndDestroy(h)}this.set("value",n)}else{if(m.get("length")-1<l.get("length")){for(f=m.get("length")-1;f<l.get("length");f++){h=k.create({controlSize:this.get("controlSize"),localize:this.get("localize"),layoutDirection:this.get("layoutDirection")});this.insertBefore(h,d)}}}m=this.get("childViews");for(f=0;f<l.get("length");f++){c=l.objectAt(f);h=m.objectAt(f);g=h.get("localItem");if(g instanceof SC.Object&&!l.contains(g)){for(e=o.get("length")-1;e>=0;e--){a=this.get(o.objectAt(e));if(a){g.removeObserver(a,this,this.itemContentDidChange)}}}if(SC.none(c)){continue}if(SC.typeOf(c)===SC.T_STRING){c=SC.Object.create({title:c.humanize().titleize(),value:c});this.set("itemTitleKey","title");this.set("itemValueKey","value")}else{if(SC.typeOf(c)===SC.T_HASH){c=SC.Object.create(c)}else{if(c instanceof SC.Object){for(e=o.get("length")-1;e>=0;e--){a=this.get(o.objectAt(e));if(a){c.removeObserver(a,this,this.itemContentDidChange);c.addObserver(a,this,this.itemContentDidChange,f)}}}else{SC.Logger.error("SC.SegmentedView items may be Strings, Objects (ie. Hashes) or SC.Objects only")}}}b=NO;if(SC.isArray(n)?n.indexOf(c.get(this.get("itemValueKey")))>=0:n===c.get(this.get("itemValueKey"))){b=YES}h.set("isSelected",b);h.set("index",f);h.set("isFirstSegment",f===0);h.set("isMiddleSegment",f<l.get("length")-1&&f>0);h.set("isLastSegment",f===l.get("length")-1);h.updateItem(this,c)}if(this.get("shouldHandleOverflow")){this.invokeLast(this.remeasure)}}.observes("*items.[]"),itemContentDidChange:function(d,c,a,b){var e=this.get("childViews"),f;f=e.objectAt(b);if(f){f.updateItem(this,d);if(this.get("shouldHandleOverflow")){this.invokeLast(this.remeasure)}}},viewDidResize:function(){var b=this.get("layoutDirection")===SC.LAYOUT_HORIZONTAL,a=b?this.$().width():this.$().height();if(this.get("shouldHandleOverflow")&&(this.get("isOverflowing")||a<=this.cachedMinimumDim)){this.invokeLast(this.remeasure)}},isVisibleInWindowDidChange:function(){if(this.get("shouldHandleOverflow")){this.invokeLast(this.remeasure)}}.observes("isVisibleInWindow"),remeasure:function(){if(!this.get("shouldHandleOverflow")){return}var c=this.get("childViews"),b;if(this.get("isVisibleInWindow")){b=this.get("overflowView");b.set("isVisible",YES);for(var a=c.get("length")-1;a>=0;a--){c.objectAt(a).set("isVisible",YES)}this.cachedDims=this.segmentDimensions();this.cachedOverflowDim=this.overflowSegmentDim();this.adjustOverflow()}},adjustOverflow:function(){if(!this.get("shouldHandleOverflow")){return}var j=this.get("childViews"),f,m=this.get("value"),c=this.get("overflowView"),k=this.get("layoutDirection")===SC.LAYOUT_HORIZONTAL,g=k?"width":"height",p=k?this.$().width():this.$().height(),e=0,o,b,d,a=NO,n=this.get("shouldAutoResize"),l=!SC.none(this.getPath("layout.%@".fmt(g))),h=n&&l;if(j.get("length")!==this.cachedDims.length+1){return}a=NO;c.set("isSelected",NO);this.overflowItems=[];b=this.cachedDims.length;for(d=0;d<b;d++){f=j.objectAt(d);e+=this.cachedDims[d];if(!a&&!h){o=(d===b-1)?e:e+this.cachedOverflowDim;if(o>p){a=YES}}if(a){this.overflowItems.pushObject(f.get("localItem"));f.set("isVisible",NO);if(d===0){c.set("isFirstSegment",YES)}if(SC.isArray(m)?m.indexOf(f.get("value"))>=0:m===f.get("value")){c.set("isSelected",YES)}}else{f.set("isVisible",YES);if(d===0){c.set("isFirstSegment",NO)}}}c.set("isVisible",a);this.setIfChanged("isOverflowing",a);if(h){this.adjust(g,this.isOverflowing?this.cachedMinimumDim:e)}this.cachedMinimumDim=e+this.cachedOverflowDim},segmentDimensions:function(){var b=this.get("childViews"),a,e,h=[],g=this.get("layoutDirection")===SC.LAYOUT_HORIZONTAL;for(var c=0,d=b.length;c<d-1;c++){a=b[c];e=a.get("frame");h[c]=g?e.width:e.height}return h},overflowSegmentDim:function(){var b=this.get("childViews"),a,c,d=this.get("layoutDirection")===SC.LAYOUT_HORIZONTAL;a=b.length&&b[b.length-1];if(a){c=a.get("frame");return d?c.width:c.height}return 0},indexForClientPosition:function(b,h){var d=this.get("childViews"),g,e,c,f,a;a={x:b,y:h};for(e=0,g=d.length;e<g;e++){c=d[e];f=c.get("layer").getBoundingClientRect();f={x:f.left,y:f.top,width:(f.right-f.left),height:(f.bottom-f.top)};if(SC.pointInRect(a,f)){return e}}return -1},displayProperties:["align"],renderDelegateName:"segmentedRenderDelegate",displayItemIndexForEvent:function(b){var c=this.get("renderDelegate");var a=b.clientX;var f=b.clientY;if(a===0&&f===0){var d=b.target;if(d){var e=SC.offset(d);a=e.x+Math.round(d.offsetWidth/2);f=e.y+Math.round(d.offsetHeight/2)}}if(c&&c.indexForClientPosition){return c.indexForClientPosition(this,a,f)}return this.indexForClientPosition(b.clientX,b.clientY)},keyDown:function(c){var g,h,d,e,f,b;if(c.which===9||c.keyCode===9){var a=c.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");if(a){a.becomeFirstResponder()}else{c.allowDefault()}return YES}if(!this.get("allowsMultipleSelection")){g=this.get("childViews");e=g.get("length");f=this.get("value");b=SC.isArray(f);if(c.which===39||c.which===40){if(f){for(d=0;d<e-2;d++){h=g.objectAt(d);if(b?(f.indexOf(h.get("value"))>=0):(h.get("value")===f)){this.triggerItemAtIndex(d+1)}}}else{this.triggerItemAtIndex(0)}return YES}else{if(c.which===37||c.which===38){if(f){for(d=1;d<e-1;d++){h=g.objectAt(d);if(b?(f.indexOf(h.get("value"))>=0):(h.get("value")===f)){this.triggerItemAtIndex(d-1)}}}else{this.triggerItemAtIndex(e-2)}return YES}}}return NO},mouseDown:function(a){if(a.which!==1){return false}var c=this.get("childViews"),e,d=c.get("length")-1,b;if(!this.get("isEnabledInPane")){return YES}b=this.displayItemIndexForEvent(a);if(b>=0){e=c.objectAt(b);if(e.get("isEnabled")){e.set("isActive",YES)}this.activeChildView=e;if(b===d){this.showOverflowMenu()}else{this._isMouseDown=YES}return YES}else{return NO}},mouseUp:function(a){var c,b;b=this.displayItemIndexForEvent(a);if(this._isMouseDown&&(b>=0)){this.triggerItemAtIndex(b);c=this.activeChildView;if(c){c.set("isActive",NO);this.activeChildView=null}}this._isMouseDown=NO;return YES},mouseMoved:function(a){var d=this.get("childViews"),e=d.get("length")-1,c,f,b;if(this._isMouseDown){b=this.displayItemIndexForEvent(a);c=this.activeChildView;f=d.objectAt(b);if(f&&f!==c){if(c){c.set("isActive",NO)}if(f.get("isEnabled")){f.set("isActive",YES)}this.activeChildView=f;if(b===e){this.showOverflowMenu();this._isMouseDown=NO}}}return YES},mouseEntered:function(a){var c=this.get("childViews"),e,d=c.get("length")-1,b;if(this._isMouseDown){b=this.displayItemIndexForEvent(a);if(b===d){this.showOverflowMenu();this._isMouseDown=NO}else{if(b>=0){e=c.objectAt(b);if(e.get("isEnabled")){e.set("isActive",YES)}this.activeChildView=e}}}return YES},mouseExited:function(a){var b;if(this._isMouseDown){b=this.activeChildView;if(b){b.set("isActive",NO)}this.activeChildView=null}return YES},touchStart:function(e){var b=this.get("childViews"),d,c=b.get("length")-1,a;if(!this.get("isEnabledInPane")){return YES}a=this.displayItemIndexForEvent(e);if(a>=0){d=b.objectAt(a);d.set("isActive",YES);this.activeChildView=d;if(a===c){this.showOverflowMenu()}else{this._isTouching=YES}}return YES},touchEnd:function(c){var b,a;a=this.displayItemIndexForEvent(c);if(this._isTouching&&(a>=0)){this.triggerItemAtIndex(a);b=this.activeChildView;b.set("isActive",NO);this.activeChildView=null;this._isTouching=NO}return YES},touchesDragged:function(a,e){var h=this.touchIsInBoundary(a),d=this.get("childViews"),f=d.get("length")-1,c,g,b;if(h){if(!this._isTouching){this._touchDidEnter(a)}b=this.displayItemIndexForEvent(a);c=this.activeChildView;g=d[b];if(g&&g!==c){if(c){c.set("isActive",NO)}g.set("isActive",YES);this.activeChildView=g;if(b===f){this.showOverflowMenu();this._isMouseDown=NO}}}else{if(this._isTouching){this._touchDidExit(a)}}this._isTouching=h;return YES},_touchDidExit:function(a){var b;if(this.isTouching){b=this.activeChildView;b.set("isActive",NO);this.activeChildView=null}return YES},_touchDidEnter:function(a){var c=this.get("childViews"),e,d=c.get("length")-1,b;b=this.displayItemIndexForEvent(a);if(b===d){this.showOverflowMenu();this._isTouching=NO}else{if(b>=0){e=c.objectAt(b);e.set("isActive",YES);this.activeChildView=e}}return YES},triggerItemAtIndex:function(f){var j=this.get("childViews"),e,h,k,b,i;e=j.objectAt(f);if(!e.get("isEnabled")){return this}b=this.get("allowsEmptySelection");i=this.get("allowsMultipleSelection");h=e.get("value");k=this.get("value");if(!i){if(b&&k===h){k=null}else{k=h}}else{if(!k){k=[]}else{if(!SC.isArray(k)){k=[k]}}if(k.indexOf(h)>=0){if(k.get("length")>1||(k.objectAt(0)!==h)||b){k=k.without(h)}}else{k=k.concat(h)}}var m=this.get("itemActionKey"),a=this.get("itemTargetKey"),d,g=null,c=this.getPath("pane.rootResponder"),l;if(m&&(l=this.get("items").objectAt(f))){d=l.get?l.get(m):l[m];if(a){g=l.get?l.get(a):l[a]}if(c){c.sendAction(d,g,this,this.get("pane"),k)}}if(k!==undefined&&(!d||this.get("selectSegmentWhenTriggeringAction"))){this.set("value",k)}d=this.get("action");if(d&&c){c.sendAction(d,this.get("target"),this,this.get("pane"),k)}},selectOverflowItem:function(b){var a=b.get("selectedItem");this.triggerItemAtIndex(a.get("index"));b.removeObserver("selectedItem",this,"selectOverflowItem");this.activeChildView.set("isActive",NO);this.activeChildView=null},showOverflowMenu:function(){var p=this,f=this.get("childViews"),m=this.get("itemValueKey"),g=this.get("itemLayerIdKey"),o=this.overflowItems,l,k,e,j,n,b,d,h;l=o.get("length");k=f.get("length")-1-l;j=this.get("value");e=SC.isArray(j);for(var c=0;c<l;c++){n=o.objectAt(c);if(e?j.indexOf(n.get(m))>=0:j===n.get(m)){n.set("isChecked",YES)}else{n.set("isChecked",NO)}n.set("index",k+c);b=n.get(g);if(b){n.set("overflowLayerId",b+"-overflow-menu-item")}}var a=SC.MenuPane.create({layout:{width:200},items:o,itemTitleKey:this.get("itemTitleKey"),itemIconKey:this.get("itemIconKey"),itemIsEnabledKey:this.get("itemIsEnabledKey"),itemKeyEquivalentKey:this.get("itemKeyEquivalentKey"),itemCheckboxKey:"isChecked",itemLayerIdKey:"overflowLayerId",modalPaneDidClick:function(){arguments.callee.base.apply(this,arguments);this.removeObserver("selectedItem",p,"selectOverflowItem");p.activeChildView.set("isActive",NO);p.activeChildView=null}});d=this.get("layer");h=d.childNodes[d.childNodes.length-1];a.popup(h);a.addObserver("selectedItem",this,"selectOverflowItem")},valueDidChange:function(){var c=this.get("value"),b,e=this.get("childViews"),f=Infinity,d=this.get("overflowView"),g;if(this.overflowItems){b=this.overflowItems.get("length");f=e.get("length")-1-b;d.set("isSelected",NO)}for(var a=e.get("length")-2;a>=0;a--){g=e.objectAt(a);if(SC.isArray(c)?c.indexOf(g.get("value"))>=0:c===g.get("value")){g.set("isSelected",YES);if(a>=f){d.set("isSelected",YES)}}else{g.set("isSelected",NO)}}}.observes("value")});sc_require("views/button");SC.SelectView=SC.ButtonView.extend({acceptsFirstResponder:function(){return this.get("isEnabledInPane")}.property("isEnabledInPane"),escapeHTML:YES,escapeHTMLBindingDefault:SC.Binding.oneWay().bool(),items:[],itemsBindingDefault:SC.Binding.multiple(),itemTitleKey:null,itemSortKey:null,itemValueKey:null,itemIconKey:null,itemSeparatorKey:"isSeparator",itemIsEnabledKey:"isEnabled",localize:YES,disableSort:YES,classNames:["sc-select-view"],menu:null,_itemList:[],_itemIdx:null,value:null,checkboxEnabled:YES,showCheckbox:YES,emptyName:null,_defaultVal:null,_defaultTitle:null,_defaultIcon:null,theme:"popup",displayProperties:["icon","value","controlSize","escapeHTML","emptyName"],preferMatrix:null,CUSTOM_MENU_ITEM_HEIGHT:20,isActiveBinding:"*menu.isVisibleInWindow",isDefaultPosition:NO,lastMenuWidth:null,exampleView:null,customViewMenuOffsetWidth:0,needsEllipsis:YES,menuPaneHeightPadding:0,menuItemPadding:35,isContextMenuEnabled:NO,supportFocusRing:YES,init:function(){arguments.callee.base.apply(this,arguments);this.itemsDidChange()},leftAlign:function(){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:return SC.SelectView.TINY_OFFSET_X;case SC.SMALL_CONTROL_SIZE:return SC.SelectView.SMALL_OFFSET_X;case SC.REGULAR_CONTROL_SIZE:return SC.SelectView.REGULAR_OFFSET_X;case SC.LARGE_CONTROL_SIZE:return SC.SelectView.LARGE_OFFSET_X;case SC.HUGE_CONTROL_SIZE:return SC.SelectView.HUGE_OFFSET_X}return 0}.property("controlSize"),sortObjects:function(b){if(!this.get("disableSort")){var a=this.get("itemSortKey")||this.get("itemTitleKey");b=b.sort(function(d,c){if(a){d=d.get?d.get(a):d[a];c=c.get?c.get(a):c[a]}return(d<c)?-1:((d>c)?1:0)})}return b},itemsDidChange:function(){var m,i,o,q,v,e,d,u,f,l,a,k,c,h,w,p,n,r,j,g,s,b;i=this.get("items")||[];i=this.sortObjects(i);o=i.length;q=this.get("itemTitleKey");v=this.get("itemIconKey");e=this.get("itemValueKey");d=this.get("itemSeparatorKey");u=this.get("showCheckbox");g=this.get("itemIsEnabledKey");m=this.get("escapeHTML");f=this.get("value");l=this.get("localize");k=[];c=YES;h=0;s=this.get("emptyName");if(!SC.none(s)){s=l?SC.String.loc(s):s;s=m?SC.RenderContext.escapeHTML(s):s;r=SC.Object.create({isSeparator:NO,title:s,icon:null,value:null,isEnabled:YES,checkbox:NO,target:this,action:"displaySelectedItem"});if(SC.none(f)){this.set("title",s)}k.push(r)}i.forEach(function(x){if(x||x===0){a=d?(x.get?x.get(d):x[d]):NO;if(a){r=SC.Object.create({isSeparator:true,value:"_sc_separator_item"})}else{w=q?(x.get?x.get(q):x[q]):x.toString();w=l?SC.String.loc(w):w;w=m?SC.RenderContext.escapeHTML(w):w;p=v?(x.get?x.get(v):x[v]):null;if(SC.none(x[v])){p=null}n=e?(x.get?x.get(e):x[e]):x;if(!SC.none(f)&&!SC.none(n)){b=false;if(SC.kindOf(f,SC.Record)&&SC.kindOf(n,SC.Record)){b=f.get("storeKey")===n.get("storeKey")}if(f===n||b){this.set("title",w);this.set("icon",p)}}if(n===this.get("value")){this.set("_itemIdx",h);c=!u?NO:YES}else{c=NO}j=(x.get?x.get(g):x[g]);if(NO!==j){j=YES}if(SC.none(this._defaultVal)&&j){this._defaultVal=n;this._defaultTitle=w;this._defaultIcon=p}r=SC.Object.create({action:"displaySelectedItem",title:w,icon:p,value:n,isEnabled:j,checkbox:c,target:this})}k.push(r)}h+=1},this);this.set("_itemList",k);var n=this.get("value");if(SC.none(n)){if(SC.none(s)){this.set("value",this._defaultVal);this.set("title",this._defaultTitle);this.set("icon",this._defaultIcon)}else{this.set("title",s)}}this.changeSelectPreferMatrix()}.observes("*items.[]"),_action:function(k){var h,a,i,j,o,m,x,d,w,l,q,n,u,e,f,b,v,g,p;h=this.$(".sc-button-label")[0];var y=SC.SelectView.MENU_WIDTH_OFFSET;if(!this.get("isDefaultPosition")){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:y+=SC.SelectView.TINY_POPUP_MENU_WIDTH_OFFSET;break;case SC.SMALL_CONTROL_SIZE:y+=SC.SelectView.SMALL_POPUP_MENU_WIDTH_OFFSET;break;case SC.REGULAR_CONTROL_SIZE:y+=SC.SelectView.REGULAR_POPUP_MENU_WIDTH_OFFSET;break;case SC.LARGE_CONTROL_SIZE:y+=SC.SelectView.LARGE_POPUP_MENU_WIDTH_OFFSET;break;case SC.HUGE_CONTROL_SIZE:y+=SC.SelectView.HUGE_POPUP_MENU_WIDTH_OFFSET;break}}a=this.get("layer").offsetWidth+y;a=this.get("layer").offsetWidth;i=h.scrollWidth;j=this.get("lastMenuWidth");if(i){o=h.offsetWidth;if(i&&o){a=a+i-o}}if(!j||(a>j)){j=a}m=this.get("_itemList");var r=this.get("customViewClassName");var c="sc-view sc-pane sc-panel sc-palette sc-picker sc-menu select-button sc-scroll-view sc-menu-scroll-view sc-container-view menuContainer sc-button-view sc-menu-item sc-regular-size";c=r?(c+" "+r):c;SC.prepareStringMeasurement("",c);for(l=0,v=m.length;l<v;++l){w=m.objectAt(l);x=SC.measureString(w.title).width;if(!d||(x>d)){d=x}}SC.teardownStringMeasurement();j=(d+this.menuItemPadding>j)?d+this.menuItemPadding:j;var s=SC.RootResponder.responder.get("currentWindowSize").width;if(j>s){j=(s-25)}this.set("lastMenuWidth",j);q=this.get("value");n=this.get("_itemList");u=this.get("controlSize");e=this.get("menuPaneHeightPadding");p=this.get("escapeHTML");f=this.get("exampleView")||SC.MenuItemView.extend({escapeHTML:p});b=SC.MenuPane.create({classNames:["select-button"],items:n,exampleView:f,isEnabled:YES,menuHeightPadding:e,preferType:SC.PICKER_MENU,itemHeightKey:"height",layout:{width:j},controlSize:u,itemWidth:j});if(!b){return NO}b.popup(this,this.preferMatrix);this.set("menu",b);g=this._itemIdx;if(!SC.empty(g)&&g>-1){f=b.menuItemViewForContentIndex(g);if(f){f.becomeFirstResponder()}}this.set("isActive",YES);return YES},displaySelectedItem:function(a){var b=a.get("selectedItem");this.set("value",b.get("value"))},valueDidChange:function(){var b=this._itemList,c=this.get("showCheckbox"),f=this.get("value");for(var d=0,a=b.length;d<a;d++){var e=b[d],g=false;if(f===e.get("value")){g=c;this.set("title",e.get("title"));this.set("icon",e.get("icon"));this.set("_itemIdx",e.get("contentIndex"))}e.set("checkbox",g)}}.observes("value"),changeSelectPreferMatrix:function(){var c=0,g=0;switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:c=SC.SelectView.TINY_OFFSET_Y;g=SC.MenuPane.TINY_MENU_ITEM_HEIGHT;break;case SC.SMALL_CONTROL_SIZE:c=SC.SelectView.SMALL_OFFSET_Y;g=SC.MenuPane.SMALL_MENU_ITEM_HEIGHT;break;case SC.REGULAR_CONTROL_SIZE:c=SC.SelectView.REGULAR_OFFSET_Y;g=SC.MenuPane.REGULAR_MENU_ITEM_HEIGHT;break;case SC.LARGE_CONTROL_SIZE:c=SC.SelectView.LARGE_OFFSET_Y;g=SC.MenuPane.LARGE_MENU_ITEM_HEIGHT;break;case SC.HUGE_CONTROL_SIZE:c=SC.SelectView.HUGE_OFFSET_Y;g=SC.MenuPane.HUGE_MENU_ITEM_HEIGHT;break}var e=c,b=this.get("_itemIdx"),a=this.get("leftAlign"),f,d;if(this.get("isDefaultPosition")){f=[1,0,3];this.set("preferMatrix",f)}else{if(b){e=b*g+c}d=[a,-e,2];this.set("preferMatrix",d)}},mouseDown:function(a){if(a.which!==1){return false}if(!this.get("isEnabledInPane")){return YES}this.set("isActive",YES);this._isMouseDown=YES;this.becomeFirstResponder();this._action();return YES},mouseUp:function(b){var c=this.get("menu"),a;if(c){a=c.getPath("rootMenu.targetMenuItem");if(a&&c.get("mouseHasEntered")){if(!a.performAction()){c.remove()}}else{if(b.timeStamp-this._mouseDownTimestamp>400){c.remove()}}}this._isMouseDown=NO;this.set("isActive",NO);return YES},mouseExited:function(){return YES},keyDown:function(a){if(this.interpretKeyEvents(a)){return YES}else{return arguments.callee.base.apply(this,arguments)}},moveUp:function(a){this._action();return YES},moveDown:function(a){this._action();return YES},cancel:function(a){this.resignFirstResponder()},_button_isSelectedDidChange:function(){}.observes("isSelected")});SC.SelectView.TINY_OFFSET_X=0;SC.SelectView.TINY_OFFSET_Y=0;SC.SelectView.TINY_POPUP_MENU_WIDTH_OFFSET=0;SC.SelectView.SMALL_OFFSET_X=-18;SC.SelectView.SMALL_OFFSET_Y=3;SC.SelectView.SMALL_POPUP_MENU_WIDTH_OFFSET=7;SC.SelectView.REGULAR_OFFSET_X=-17;SC.SelectView.REGULAR_OFFSET_Y=0;SC.SelectView.REGULAR_POPUP_MENU_WIDTH_OFFSET=4;SC.SelectView.LARGE_OFFSET_X=-17;SC.SelectView.LARGE_OFFSET_Y=6;SC.SelectView.LARGE_POPUP_MENU_WIDTH_OFFSET=3;SC.SelectView.HUGE_OFFSET_X=0;SC.SelectView.HUGE_OFFSET_Y=0;SC.SelectView.HUGE_POPUP_MENU_WIDTH_OFFSET=0;SC.SelectView.MENU_WIDTH_OFFSET=-2;SC.SliderView=SC.View.extend(SC.Control,{classNames:"sc-slider-view",ariaRole:"slider",value:0.5,valueBindingDefault:SC.Binding.single().notEmpty(),minimum:0,minimumBindingDefault:SC.Binding.single().notEmpty(),contentMinimumKey:null,maximum:1,maximumBindingDefault:SC.Binding.single().notEmpty(),contentMaximumKey:null,step:0.1,markSteps:false,updateOnScroll:true,displayProperties:["displayValue","markSteps"],ariaValue:function(){return this.get("value")}.property("value").cacheable(),renderDelegateName:"sliderRenderDelegate",displayValue:function(){return this._displayValueForValue(this.get("value"))}.property("value","minimum","maximum","step").cacheable(),steps:function(){var d=this.get("step");if(!d){return null}var c=this.get("minimum"),a=this.get("maximum"),e=c,b=[];while(e<a){b.push(e);e+=d;e=Math.round(e/d)*d}b.push(a);return b}.property("minimum","maximum","step").cacheable(),stepPositions:function(){var c=this.get("steps");if(!c){return null}var f=c[0],b=c[c.length-1],d=[],a=c.length,e;for(e=0;e<a;e++){d[e]=Math.round((c[e]-f)/(b-f)*1000)/1000}return d}.property("steps").cacheable(),_displayValueForValue:function(d){var b=this.get("minimum"),a=this.get("maximum"),c=this.get("step");d=Math.min(Math.max(d,b),a);if(!SC.none(c)&&c!==0){d=Math.round(d/c)*c}d=Math.round((d-b)/(a-b)*100);return d},_isMouseDown:NO,mouseDown:function(a){if(a.which&&a.which!==1){return false}if(!this.get("isEnabledInPane")){return YES}this.set("isActive",YES);this._isMouseDown=YES;return this._triggerHandle(a,YES)},mouseDragged:function(a){return this._isMouseDown?this._triggerHandle(a):YES},mouseUp:function(a){if(this._isMouseDown){this.set("isActive",NO)}var b=this._isMouseDown?this._triggerHandle(a):YES;this._isMouseDown=NO;return b},mouseWheel:function(b){if(!this.get("isEnabledInPane")){return NO}if(!this.get("updateOnScroll")){return NO}var d=this.get("minimum"),a=this.get("maximum"),e=this.get("step")||((a-d)/20),c=this.get("value")+((b.wheelDeltaX+b.wheelDeltaY)*e),f=Math.round(c/e)*e;if(c<d){this.setIfChanged("value",d)}else{if(c>a){this.setIfChanged("value",a)}else{this.setIfChanged("value",c)}}return YES},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)},touchesDragged:function(a){return this.mouseDragged(a)},_triggerHandle:function(i,e){var a=this.get("frame").width,c=this.get("minimum"),f=this.get("maximum"),b=this.get("step"),h=this.get("value"),d;if(e){d=this.convertFrameFromView({x:i.pageX}).x;this._evtDiff=i.pageX-d}else{d=i.pageX-this._evtDiff}d=Math.max(0,Math.min(d/a,1));if(e){var g=this.get("value");g=(g-c)/(f-c);if(Math.abs(g*a-d*a)<16){this._offset=g-d}else{this._offset=0}}d=Math.max(0,Math.min(d+this._offset,1));d=c+((f-c)*d);if(!SC.none(b)&&b!==0){d=Math.round(d/b)*b}if(Math.abs(h-d)>=0.01){this.set("value",d)}return YES},acceptsFirstResponder:function(){if(SC.FOCUS_ALL_CONTROLS){return this.get("isEnabledInPane")}return NO}.property("isEnabledInPane"),keyDown:function(h){if(h.which===9||h.keyCode===9){var f=h.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");if(f){f.becomeFirstResponder()}else{h.allowDefault()}return YES}if(h.which>=33&&h.which<=40){var d=this.get("minimum"),g=this.get("maximum"),b=this.get("step"),i=g-d,a=0,c,e=this.get("value");if(h.which===37||h.which===38||h.which===34){if(SC.none(b)||b===0){if(i<100){a=e-1}else{c=Math.abs(i/100);if(c<2){c=2}a=e-c}}else{a=e-b}}if(h.which===39||h.which===40||h.which===33){if(SC.none(b)||b===0){if(i<100){a=e+2}else{c=Math.abs(i/100);if(c<2){c=2}a=e+c}}else{a=e+b}}if(h.which===36){a=g}if(h.which===35){a=d}if(a>=d&&a<=g){this.set("value",a)}}else{h.allowDefault();return NO}return YES},contentKeys:{contentValueKey:"value",contentMinimumKey:"minimum",contentMaximumKey:"maximum",contentIsIndeterminateKey:"isIndeterminate"}});sc_require("mixins/collection_group");sc_require("views/disclosure");SC.SourceListGroupView=SC.View.extend(SC.Control,SC.CollectionGroup,{classNames:["sc-source-list-group"],content:null,isGroupVisible:YES,hasGroupTitle:YES,groupTitleKey:null,groupVisibleKey:null,render:function(a,b){a.push('<div role="button" class="sc-source-list-label sc-disclosure-view sc-button-view button disclosure no-disclosure">','<img src="'+SC.BLANK_IMAGE_URL+'" class="button" />','<span class="label"></span></div>')},createChildViews:function(){},contentPropertyDidChange:function(f,c){var e=this.get("content");var h=this.outlet("labelView");if(e===null){h.setIfChanged("isVisible",NO);this.setIfChanged("hasGroupTitle",NO);return}else{h.setIfChanged("isVisible",YES);this.setIfChanged("hasGroupTitle",YES)}var b=this.getDelegateProperty("groupTitleKey",this.displayDelegate);if((c=="*")||(b&&(c==b))){var g=(e&&e.get&&b)?e.get(b):e;if(g!=this._title){this._title=g;if(g){g=g.capitalize()}h.set("title",g)}}var d=this.getDelegateProperty("groupVisibleKey",this.displayDelegate);if((c=="*")||(d&&(c==d))){if(d){h.removeClassName("no-disclosure");var a=(e&&e.get)?!!e.get(d):YES;if(a!=this.get("isGroupVisible")){this.set("isGroupVisible",a);h.set("value",a)}}else{h.addClassName("no-disclosure")}}},disclosureValueDidChange:function(c){if(c==this.get("isGroupVisible")){return}var b=this.get("content");var a=this.getDelegateProperty("groupVisibleKey",this.displayDelegate);if(b&&b.set&&a){b.set(a,c)}this.set("isGroupVisible",c);if(this.owner&&this.owner.updateChildren){this.owner.updateChildren(true)}},labelView:SC.DisclosureView.extend({value:YES,_valueObserver:function(){if(this.owner){this.owner.disclosureValueDidChange(this.get("value"))}}.observes("value")})});sc_require("views/list");sc_require("views/source_list_group");SC.SourceListView=SC.ListView.extend({theme:"source-list",classNames:["sc-source-list"],rowHeight:32,selectOnMouseDown:NO,actOnSelect:YES});sc_require("mixins/split_child");sc_require("mixins/split_thumb");SC.SplitDividerView=SC.View.extend(SC.SplitChild,SC.SplitThumb,{classNames:["sc-split-divider-view"],classNameBindings:["layoutDirection"],isSplitDivider:YES,layoutDirection:SC.LAYOUT_HORIZONTAL,autoResizeStyle:"sc-fixed-size",movesSibling:SC.MOVES_CHILD,size:SC.propertyFromRenderDelegate("dividerSize",10),renderDelegateName:"splitDividerRenderDelegate"});sc_require("views/split_divider");SC.FIXED_SIZE="sc-fixed-size";SC.RESIZE_MANUAL="sc-manual-size";SC.RESIZE_AUTOMATIC="sc-automatic-resize";SC.SplitView=SC.View.extend({classNames:["sc-split-view"],childViews:["topLeftView","bottomRightView"],isSplitView:YES,splitDividerView:SC.SplitDividerView,layoutDirection:SC.LAYOUT_HORIZONTAL,shouldResizeChildrenToFit:YES,splitChildCursorStyle:null,_scsv_splitChildCursorDidChange:function(){this.get("cursor").set("cursorStyle",this.get("splitChildCursorStyle"))}.observes("splitChildCursorStyle"),init:function(){this.cursor=SC.Cursor.create();arguments.callee.base.apply(this,arguments)},displayProperties:["layoutDirection"],renderDelegateName:"splitRenderDelegate",_frameSize:function(){if(this.get("layoutDirection")===SC.LAYOUT_HORIZONTAL){return this.get("frame").width}else{return this.get("frame").height}}.property("frame","layoutDirection").cacheable(),viewDidResize:function(){this.scheduleTiling();arguments.callee.base.apply(this,arguments)},layoutDirectionDidChange:function(){this.scheduleTiling();var e=this.get("layoutDirection"),d=this.get("childViews"),a=d?d.get("length"):0,c,b;for(c=0;c<a;c++){b=d[c];if(b.get("isSplitDivider")){b.setIfChanged("layoutDirection",e)}}}.observes("layoutDirection"),adjustPositionForChild:function(b,a){return this.invokeDelegateMethod(this.get("delegate"),"splitViewAdjustPositionForChild",this,b,a)},getPositionForChild:function(a){return this.invokeDelegateMethod(this.get("delegate"),"splitViewGetPositionForChild",this,a)},didAddChild:function(){if(this._scsv_settingUpChildViews){return}this._scsv_settingUpChildViews=YES;this.invokeOnce("_scsv_setupChildViews");this._scsv_settingUpChildViews=NO},didRemoveChild:function(){if(this._scsv_settingUpChildViews){return}this._scsv_settingUpChildViews=YES;this.invokeOnce("_scsv_setupChildViews");this._scsv_settingUpChildViews=NO},createChildViews:function(){arguments.callee.base.apply(this,arguments);if(this._scsv_settingUpChildViews){return}this._scsv_settingUpChildViews=YES;this.invokeOnce("_scsv_setupChildViews");this._scsv_settingUpChildViews=NO},_scsv_setupChildViews:function(){var l=this.get("delegate"),g=this.get("layoutDirection"),d=this.get("childViews").copy(),h=d.length,k,c,a,e,j=this._scsv_dividers||{},b={},f,i;for(k=0;k<h;k++){c=d[k];if(!c.get("autoResizeStyle")){if(c.get("size")!==undefined){c.set("autoResizeStyle",SC.RESIZE_MANUAL)}else{c.set("autoResizeStyle",SC.RESIZE_AUTOMATIC)}}var m=this.invokeDelegateMethod(l,"splitViewGetSizeForChild",this,c);m=this.invokeDelegateMethod(l,"splitViewConstrainSizeForChild",this,c,m);this.invokeDelegateMethod(l,"splitViewSetSizeForChild",this,c,m);c.previousView=a;c.nextView=undefined;c.viewIndex=k;if(a){a.nextView=c}if(e&&!c.isSplitDivider){i=SC.guidFor(e)+"-"+SC.guidFor(c);f=j[i];if(!f&&!a.isSplitDivider){f=this.invokeDelegateMethod(l,"splitViewDividerBetween",this,e,c)}if(f){f.setIfChanged("isSplitDivider",YES);f.setIfChanged("layoutDirection",g);b[i]=f;if(j[i]){delete j[i]}else{this.insertBefore(f,c)}}}a=c;if(!c.isSplitDivider){e=c}}for(i in j){j[i].destroy()}this._scsv_dividers=b;this._scsv_tile()},needsTiling:YES,scheduleTiling:function(){this.set("needsTiling",YES);this.invokeOnce("_scsv_tile")},tileIfNeeded:function(){if(!this.get("needsTiling")){return}this._scsv_tile()},_scsv_tile:function(){var a=this.get("delegate");var c,b=this.get("_frameSize");c=this.invokeDelegateMethod(a,"splitViewLayoutChildren",this);if(this.get("shouldResizeChildrenToFit")&&c!==b){this.invokeDelegateMethod(a,"splitViewResizeChildrenToFit",this,c);c=this.invokeDelegateMethod(a,"splitViewLayoutChildren",this)}if(!this.get("shouldResizeChildrenToFit")){if(this.get("layoutDirection")===SC.LAYOUT_HORIZONTAL){this.adjust("width",c)}else{this.adjust("height",c)}}this.set("needsTiling",NO)},splitViewLayoutChildren:function(e){var c=this.get("delegate");var d=this.get("childViews"),b=d.length,a,g,f=0;for(a=0;a<b;a++){g=d[a];this.invokeDelegateMethod(c,"splitViewSetPositionForChild",this,d[a],f);f+=this.invokeDelegateMethod(c,"splitViewGetSizeForChild",this,d[a])}return f},splitViewResizeChildrenToFit:function(h,d){var l=this.get("delegate");var g=this.get("_frameSize");var e=this.get("childViews"),i=e.length,k,c,a=0,f=0,j;for(k=0;k<i;k++){c=e[k];j=this.invokeDelegateMethod(l,"splitViewGetSizeForChild",this,c);if(this.invokeDelegateMethod(l,"splitViewShouldResizeChildToFit",this,c)){a+=j}else{f+=j}}var b=d;b=this._resizeChildrenForSize(b,g,YES,a);b=this._resizeChildrenForSize(b,g,YES,-1);b=this._resizeChildrenForSize(b,g,NO,f);b=this._resizeChildrenForSize(b,g,NO,-1)},_resizeChildrenForSize:function(d,e,f,h){var l=this.get("delegate");var c=this.get("childViews"),j,g=c.length,b;var i=e-d;for(j=0;j<g;j++){b=c[j];var k=this.invokeDelegateMethod(l,"splitViewGetSizeForChild",this,b),m=k;var a=this.invokeDelegateMethod(l,"splitViewShouldResizeChildToFit",this,b);if(a===f){if(h===-1){m+=i}else{m+=(m/h)*i}m=Math.round(m);m=this.invokeDelegateMethod(l,"splitViewConstrainSizeForChild",this,b,m);this.invokeDelegateMethod(l,"splitViewSetSizeForChild",this,b,m);if(h!==-1){h-=k}}d-=k;d+=m;i=e-d}return d},splitViewShouldResizeChildToFit:function(a,b){return(this.get("shouldResizeChildrenToFit")&&b.get("autoResizeStyle")===SC.RESIZE_AUTOMATIC)},splitViewAdjustPositionForChild:function(d,f,a){var b=this.get("delegate");var e=this._scsv_createPlan();var c=this._scsv_adjustPositionForChildInPlan(e,f,a,f);this._scsv_commitPlan(e);return c},_scsv_createPlan:function(){var c=this.get("delegate"),g=[],f=this.get("childViews"),b,a=f.length,h,e,d;for(b=0;b<a;b++){h=f[b];e=this.invokeDelegateMethod(c,"splitViewGetPositionForChild",this,h);d=this.invokeDelegateMethod(c,"splitViewGetSizeForChild",this,h);g[b]={child:h,originalPosition:e,position:e,originalSize:d,size:d}}return g},_scsv_resetPlanRange:function(c,d,b){for(var a=d;a<=b;a++){c[a].position=c[a].originalPosition;c[a].size=c[a].originalSize}},_scsv_commitPlan:function(f){var d=this.get("delegate"),b=f.length,a,e,c=0;for(a=0;a<b;a++){e=f[a];if(e.size!==e.originalSize){this.invokeDelegateMethod(d,"splitViewSetSizeForChild",this,e.child,e.size)}if(e.position!==e.originalPosition){this.invokeDelegateMethod(d,"splitViewSetPositionForChild",this,e.child,e.position)}c=e.position+e.size}if(!this.get("shouldResizeChildrenToFit")){if(this.get("layoutDirection")===SC.LAYOUT_HORIZONTAL){this.adjust("width",c)}else{this.adjust("height",c)}}},_scsv_adjustPositionForChildInPlan:function(i,d,f,a){var j=this.get("delegate");if(!d.get("allowsIndirectAdjustments")&&a!==d&&a!==d.previousView){return i[d.viewIndex].position}if(d._splitViewIsAdjusting){return i[d.viewIndex].position}d._splitViewIsAdjusting=YES;var g=d.previousView,b=d.nextView,c,k,h,e,l=i[d.viewIndex].size;if(g&&!g._splitViewIsAdjusting){c=i[g.viewIndex].position;k=f-c;k=this._scsv_adjustSizeForChildInPlan(i,g,k,a);f=c+k}else{if(!g){f=0}}if(b&&b._splitViewIsAdjusting){d._splitViewIsAdjusting=NO;i[d.viewIndex].position=f;return f}if(d.get("compensatesForMovement")&&b){h=i[b.viewIndex].position;l=this._scsv_adjustSizeForChildInPlan(i,d,h-f)}else{if(!b&&this.get("shouldResizeChildrenToFit")){h=this.get("_frameSize");l=this._scsv_adjustSizeForChildInPlan(i,d,h-f);f=h-l}}if(b){h=f+l;h=this._scsv_adjustPositionForChildInPlan(i,b,h,a)}if(h&&f!==h-l){f=h-l;if(g&&!g._splitViewIsAdjusting){this._scsv_resetPlanRange(i,0,g.viewIndex);k=f-i[g.viewIndex].position;this._scsv_adjustSizeForChildInPlan(i,g,k,d)}}i[d.viewIndex].position=f;d._splitViewIsAdjusting=NO;return f},_scsv_adjustSizeForChildInPlan:function(f,b,i,a){var g=this.get("delegate");if(a&&!b.get("allowsIndirectAdjustments")&&a!==b&&a!==b.nextView&&a!==b.previousView){return f[b.viewIndex].size}var h=this.invokeDelegateMethod(g,"splitViewConstrainSizeForChild",this,b,i);f[b.viewIndex].size=h;if(i===h){return i}var c=f[b.viewIndex].position,d=c+i-h;var e=this._scsv_adjustPositionForChildInPlan(f,b,d,a);return e+h-c},splitViewDividerBetween:function(c,b,a){if(!this.get("splitDividerView")){return null}return this.get("splitDividerView").create()},splitViewGetPositionForChild:function(a,b){return b.get("position")},splitViewSetPositionForChild:function(b,c,a){c.set("position",a)},splitViewGetSizeForChild:function(b,c){var a=c.get("size");if(SC.none(a)){return 100}return a},splitViewSetSizeForChild:function(b,c,a){c.set("size",a)},splitViewConstrainSizeForChild:function(c,f,a){if(f.get("autoResizeStyle")===SC.FIXED_SIZE){return this.invokeDelegateMethod(this.get("delegate"),"splitViewGetSizeForChild",this,f)}if(f.get("canCollapse")){var b=f.get("collapseAtSize");if(b&&a<b){return 0}}var d=f.get("minimumSize")||0;if(d!==undefined&&d!==null){a=Math.max(d,a)}var e=f.get("maximumSize");if(e!==undefined&&e!==null){a=Math.min(e,a)}return a}});sc_require("views/collection");SC.StackedView=SC.CollectionView.extend({classNames:["sc-stacked-view"],layout:{top:0,left:0,right:0,height:1},computeNowShowing:function(){return this.get("allContentIndexes")},updateHeight:function(a){if(a){this._updateHeight()}else{this.invokeLast(this._updateHeight)}return this},_updateHeight:function(){var e=this.get("childViews"),b=e.get("length"),c,d,a;if(b===0){a=1}else{c=e.objectAt(b-1);d=c?c.get("layer"):null;a=d?(d.offsetTop+d.offsetHeight):1;d=null}this.adjust("minHeight",a);this.set("calculatedHeight",a)},reloadIfNeeded:function(){arguments.callee.base.apply(this,arguments);return this.updateHeight()},didCreateLayer:function(){return this.updateHeight()}});SC.StaticContentView=SC.View.extend({classNames:["sc-static-content-view"],displayProperties:["content"],content:null,contentLayoutDidChange:function(){this._viewFrameDidChange()},useStaticLayout:YES,frame:function(){var a=this.get("layer"),b;if(!a){return{x:0,y:0,width:0,height:0}}if(a.getBoundingClientRect&&!SC.browser.isIE8OrLower){b=a.getBoundingClientRect();return{x:0,y:0,width:b.width,originalWidth:b.width,height:b.height,originalHeight:b.height,scale:1,transformOriginX:0.5,transformOriginY:0.5}}else{return{x:0,y:0,width:a.clientWidth,originalWidth:b.width,height:a.clientHeight,originalHeight:b.height,scale:1,transformOriginX:0.5,transformOriginY:0.5}}}.property("content").cacheable(),parentViewDidResize:function(){this.contentLayoutDidChange()},didUpdateLayer:function(){this.contentLayoutDidChange()},render:function(a,c){var b=this.get("content");a.push(b||"")},touchStart:function(a){a.allowDefault();return YES},touchEnd:function(a){a.allowDefault();return YES}});sc_require("views/segmented");SC.TOP_LOCATION="top";SC.TOP_TOOLBAR_LOCATION="top-toolbar";SC.BOTTOM_LOCATION="bottom";SC.TabView=SC.View.extend({classNames:["sc-tab-view"],displayProperties:["nowShowing"],nowShowing:null,items:[],itemTitleKey:null,itemValueKey:null,itemIsEnabledKey:null,itemIconKey:null,itemWidthKey:null,itemToolTipKey:null,tabHeight:SC.REGULAR_BUTTON_HEIGHT,tabLocation:SC.TOP_LOCATION,userDefaultKey:null,_tab_nowShowingDidChange:function(){var a=this.get("nowShowing");this.get("segmentedView").set("value",a);var b=a?a.indexOf("."):null;if(b===-1){a=this.get(a)}else{if(b===0){a=this.getPath(a.slice(1))}}this.get("containerView").set("nowShowing",a);return this}.observes("nowShowing"),_tab_saveUserDefault:function(){var a=this.get("nowShowing");var b=this.get("userDefaultKey");if(b){SC.userDefaults.set([b,"nowShowing"].join(":"),a)}}.observes("nowShowing"),_tab_itemsDidChange:function(){this.get("segmentedView").set("items",this.get("items"));return this}.observes("items"),init:function(){arguments.callee.base.apply(this,arguments);this._tab_nowShowingDidChange()._tab_itemsDidChange();var a=this.get("userDefaultKey");if(a){a=[a,"nowShowing"].join(":");var b=SC.userDefaults.get(a);if(!SC.none(b)){this.set("nowShowing",b)}}},createChildViews:function(){var e=[],d,c,b=this.get("tabLocation"),a=this.get("tabHeight"),f=this.get("controlSize");if(b===SC.TOP_LOCATION){c={top:a/2+1,left:0,right:0,bottom:0,border:1}}else{if(b===SC.TOP_TOOLBAR_LOCATION){c={top:a+1,left:0,right:0,bottom:0,border:1}}else{c={top:0,left:0,right:0,bottom:(a/2)-1,border:1}}}d=this.containerView.extend({layout:c,ariaRole:"tabpanel"});this.containerView=this.createChildView(d);c=(b===SC.TOP_LOCATION||b===SC.TOP_TOOLBAR_LOCATION)?{height:a,left:0,right:0,top:0}:{height:a,left:0,right:0,bottom:0};this.segmentedView=this.get("segmentedView").extend({layout:c,controlSize:f,_sc_tab_segmented_valueDidChange:function(){var g=this.get("parentView");if(g){g.set("nowShowing",this.get("value"))}}.observes("value"),init:function(){var g=this.get("parentView");if(g){SC._TAB_ITEM_KEYS.forEach(function(h){this[h]=g.get(h)},this)}return arguments.callee.base.apply(this,arguments)}});this.segmentedView=this.createChildView(this.segmentedView);e.push(this.containerView);e.push(this.segmentedView);this.set("childViews",e);return this},containerView:SC.ContainerView.extend({renderDelegateName:"wellRenderDelegate"}),segmentedView:SC.SegmentedView});SC._TAB_ITEM_KEYS=["itemTitleKey","itemValueKey","itemIsEnabledKey","itemIconKey","itemWidthKey","itemToolTipKey","itemActionKey","itemTargetKey"];SC.ThumbView=SC.View.extend(SC.SplitThumb,{classNames:["sc-thumb-view"],init:function(){arguments.callee.base.apply(this,arguments);console.warn("SC.ThumbView is deprecated. Please use a normal view and mix in SC.SplitThumb instead.")}});SC.WebView=SC.View.extend(SC.Control,{classNames:"sc-web-view",displayProperties:["value","shouldAutoResize"],shouldAutoResize:NO,render:function(a,d){var c=this.get("value")||"",b;if(d){a.push('<iframe src="'+c+'" style="position: absolute; width: 100%; height: 100%; border: 0px; margin: 0px; padding: 0px;"></iframe>')}else{if(c!==this._lastSrc){b=this.$("iframe");b.attr("src","javascript:;");b.attr("src",c)}}this._lastSrc=c},didCreateLayer:function(){var a=this.$("iframe");SC.Event.add(a,"load",this,this.iframeDidLoad)},willDestroyLayer:function(){var a=this.$("iframe");SC.Event.remove(a,"load",this,this.iframeDidLoad)},iframeDidLoad:function(){if(this.get("shouldAutoResize")===YES){var a;var c=this.$("iframe")[0];if(c&&c.contentWindow){a=c.contentWindow;if(a&&a.document&&a.document.documentElement){var b=a.document.documentElement;if(!SC.browser.isIE){this.$().width(b.scrollWidth);this.$().height(b.scrollHeight)}else{this.$().width(b.scrollWidth+12);this.$().height(b.scrollHeight+5)}}}}}});SC.WELL_CONTAINER_PADDING=15;SC.WellView=SC.ContainerView.extend({classNames:"sc-well-view",contentLayout:{top:SC.WELL_CONTAINER_PADDING,bottom:SC.WELL_CONTAINER_PADDING,left:SC.WELL_CONTAINER_PADDING,right:SC.WELL_CONTAINER_PADDING},renderDelegateName:"wellRenderDelegate",createChildViews:function(){var a=this.get("contentView");if(a){a=this.contentView=this.createChildView(a);a.set("layout",this.contentLayout);this.childViews=[a]}},contentViewDidChange:function(){var a=this.get("contentView");a.set("layout",this.contentLayout);this.replaceContent(a)}.observes("contentView")});SC.MIXED_STATE="__MIXED__";SC.DataSource=SC.Object.extend({fetch:function(a,b){return NO},retrieveRecords:function(a,c,b){return this._handleEach(a,c,this.retrieveRecord,b)},commitRecords:function(c,b,g,f,h){var e,a,d;if(b.length>0){d=this.createRecords.call(this,c,b,h)}if(g.length>0){e=this.updateRecords.call(this,c,g,h);d=SC.none(d)?e:(d===e)?d:SC.MIXED_STATE}if(f.length>0){a=this.destroyRecords.call(this,c,f,h);d=SC.none(d)?a:(d===a)?d:SC.MIXED_STATE}return d||NO},cancel:function(a,b){return NO},updateRecords:function(a,b,c){return this._handleEach(a,b,this.updateRecord,null,c)},createRecords:function(a,b,c){return this._handleEach(a,b,this.createRecord,null,c)},destroyRecords:function(a,b,c){return this._handleEach(a,b,this.destroyRecord,null,c)},_handleEach:function(h,e,c,a,b){var f=e.length,i,g,j,d;for(i=0;i<f;i++){d=a?a[i]:b;j=c.call(this,h,e[i],d);if(g===undefined){g=j}else{if(g===YES){g=(j===YES)?YES:SC.MIXED_STATE}else{if(g===NO){g=(j===NO)?NO:SC.MIXED_STATE}}}}return !SC.none(g)?g:null},updateRecord:function(a,b,c){return NO},retrieveRecord:function(a,b,c){return NO},createRecord:function(a,b,c){return NO},destroyRecord:function(a,b,c){return NO}});sc_require("data_sources/data_source");SC.CascadeDataSource=SC.DataSource.extend({dataSources:null,from:function(a){var b=this.get("dataSources");if(!b){this.set("dataSources",b=[])}b.push(a);return this},fetch:function(c,g){var e=this.get("dataSources"),b=e?e.length:0,d=NO,h,f,a;for(a=0;(d!==YES)&&a<b;a++){f=e.objectAt(a);h=f.fetch?f.fetch.apply(f,arguments):NO;d=this._handleResponse(d,h)}return d},retrieveRecords:function(h,d,b){var c=this.get("dataSources"),e=c?c.length:0,f=NO,i,a,g;for(g=0;(f!==YES)&&g<e;g++){a=c.objectAt(g);i=a.retrieveRecords.apply(a,arguments);f=this._handleResponse(f,i)}return f},commitRecords:function(j,c,h,e,d){var b=this.get("dataSources"),f=b?b.length:0,g=NO,k,a,i;for(i=0;(g!==YES)&&i<f;i++){a=b.objectAt(i);k=a.commitRecords.apply(a,arguments);g=this._handleResponse(g,k)}return g},cancel:function(c,f){var e=this.get("dataSources"),b=e?e.length:0,d=NO,h,g,a;for(a=0;(d!==YES)&&a<b;a++){g=e.objectAt(a);h=g.cancel.apply(g,arguments);d=this._handleResponse(d,h)}return d},init:function(){arguments.callee.base.apply(this,arguments);var b=this.get("dataSources"),a=b?b.get("length"):0,c;while(--a>=0){c=b[a];if(SC.typeOf(c)===SC.T_STRING){b[a]=this.get(c)}}},_handleResponse:function(b,a){if(a===YES){return YES}else{if(b===NO){return(a===NO)?NO:SC.MIXED_STATE}else{return SC.MIXED_STATE}}}});sc_require("core");sc_require("models/record");SC.Query=SC.Object.extend(SC.Copyable,SC.Freezable,{isQuery:YES,conditions:null,orderBy:null,recordType:null,recordTypes:null,expandedRecordTypes:function(){var b=SC.CoreSet.create(),a,c;if(a=this.get("recordType")){this._scq_expandRecordType(a,b)}else{if(a=this.get("recordTypes")){a.forEach(function(d){this._scq_expandRecordType(d,b)},this)}else{this._scq_expandRecordType(SC.Record,b)}}c=SC.Query._scq_queriesWithExpandedRecordTypes;if(!c){c=SC.Query._scq_queriesWithExpandedRecordTypes=SC.CoreSet.create()}c.add(this);return b.freeze()}.property("recordType","recordTypes").cacheable(),_scq_expandRecordType:function(b,a){if(a.contains(b)){return}a.add(b);if(SC.typeOf(b)===SC.T_STRING){b=SC.objectForPropertyPath(b)}b.subclasses.forEach(function(c){this._scq_expandRecordType(c,a)},this)},parameters:null,location:"local",scope:null,isRemote:function(){return this.get("location")===SC.Query.REMOTE}.property("location").cacheable(),isLocal:function(){return this.get("location")===SC.Query.LOCAL}.property("location").cacheable(),isEditable:NO,contains:function(a,d){var e,b=YES;if(e=this.get("recordTypes")){b=e.find(function(f){return SC.kindOf(a,f)})}else{if(e=this.get("recordType")){b=SC.kindOf(a,e)}}if(!b){return NO}var c=this.get("scope");if(c&&!c.contains(a)){return NO}if(!this._isReady){this.parse()}if(!this._isReady){return NO}if(d===undefined){d=this.parameters||this}return this._tokenTree.evaluate(a,d)},containsRecordTypes:function(a){var b=this.get("recordType");if(b){return !!a.find(function(c){return SC.kindOf(c,b)})}else{if(b=this.get("recordTypes")){return !!b.find(function(c){return !!a.find(function(d){return SC.kindOf(d,c)})})}else{return YES}}},compare:function(g,d){var c=0,f,b,a,h,e;if(g===d){return 0}if(!this._isReady){this.parse()}if(!this._isReady){return SC.compare(g.get("storeKey"),d.get("storeKey"))}b=this._order;if(SC.typeOf(b)===SC.T_FUNCTION){c=b.call(null,g,d)}else{a=b?b.length:0;for(h=0;c===0&&(h<a);h++){f=b[h].propertyName;e=/\./.test(f)?"getPath":"get";if(SC.Query.comparisons[f]){c=SC.Query.comparisons[f](g[e](f),d[e](f))}else{c=SC.compare(g[e](f),d[e](f))}if((c!==0)&&b[h].descending){c=(-1)*c}}}if(c!==0){return c}else{return SC.compare(g.get("storeKey"),d.get("storeKey"))}},_isReady:NO,parse:function(){var c=this.get("conditions"),d=this.get("queryLanguage"),b,a;b=this._tokenList=this.tokenizeString(c,d);a=this._tokenTree=this.buildTokenTree(b,d);this._order=this.buildOrder(this.get("orderBy"));this._isReady=!!a&&!a.error;if(a&&a.error){throw a.error}return this._isReady},queryWithScope:function(c){var b=SC.keyFor("__query__",SC.guidFor(this)),a=c[b];if(!a){c[b]=a=this.copy();a.set("scope",c);a.freeze()}return a},copyKeys:["conditions","orderBy","recordType","recordTypes","parameters","location","scope"],concatenatedProperties:["copyKeys"],copy:function(){var d={},c=this.get("copyKeys"),f=c?c.length:0,b,e,a;while(--f>=0){b=c[f];e=this.get(b);if(e!==undefined){d[b]=e}}a=this.constructor.create(d);d=null;return a},queryLanguage:{UNKNOWN:{firstCharacter:/[^\s'"\w\d\(\)\{\}]/,notAllowed:/[\-\s'"\w\d\(\)\{\}]/},PROPERTY:{firstCharacter:/[a-zA-Z_]/,notAllowed:/[^a-zA-Z_0-9\.]/,evalType:"PRIMITIVE",evaluate:function(e,b){var f=this.tokenValue.split(".");var a=f.length;if(a<2){return e.get(this.tokenValue)}var c=e;for(var d=0;d<a;d++){if(!c){return}if(c.get){c=c.get(f[d])}else{c=c[f[d]]}}return c}},NUMBER:{firstCharacter:/[\d\-]/,notAllowed:/[^\d\-\.]/,format:/^-?\d+$|^-?\d+\.\d+$/,evalType:"PRIMITIVE",evaluate:function(b,a){return parseFloat(this.tokenValue)}},STRING:{firstCharacter:/['"]/,delimited:true,evalType:"PRIMITIVE",evaluate:function(b,a){return this.tokenValue}},PARAMETER:{firstCharacter:/\{/,lastCharacter:"}",delimited:true,evalType:"PRIMITIVE",evaluate:function(b,a){return a[this.tokenValue]}},"%@":{rememberCount:true,reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return a[this.tokenValue]}},OPEN_PAREN:{firstCharacter:/\(/,singleCharacter:true},CLOSE_PAREN:{firstCharacter:/\)/,singleCharacter:true},AND:{reservedWord:true,leftType:"BOOLEAN",rightType:"BOOLEAN",evalType:"BOOLEAN",evaluate:function(c,a){var d=this.leftSide.evaluate(c,a);var b=this.rightSide.evaluate(c,a);return d&&b}},OR:{reservedWord:true,leftType:"BOOLEAN",rightType:"BOOLEAN",evalType:"BOOLEAN",evaluate:function(c,a){var d=this.leftSide.evaluate(c,a);var b=this.rightSide.evaluate(c,a);return d||b}},NOT:{reservedWord:true,rightType:"BOOLEAN",evalType:"BOOLEAN",evaluate:function(c,a){var b=this.rightSide.evaluate(c,a);return !b}},"=":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var d=this.leftSide.evaluate(c,a);var b=this.rightSide.evaluate(c,a);return SC.isEqual(d,b)}},"!=":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var d=this.leftSide.evaluate(c,a);var b=this.rightSide.evaluate(c,a);return !SC.isEqual(d,b)}},"<":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var d=this.leftSide.evaluate(c,a);var b=this.rightSide.evaluate(c,a);return SC.compare(d,b)==-1}},"<=":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var d=this.leftSide.evaluate(c,a);var b=this.rightSide.evaluate(c,a);return SC.compare(d,b)!=1}},">":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var d=this.leftSide.evaluate(c,a);var b=this.rightSide.evaluate(c,a);return SC.compare(d,b)==1}},">=":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var d=this.leftSide.evaluate(c,a);var b=this.rightSide.evaluate(c,a);return SC.compare(d,b)!=-1}},BEGINS_WITH:{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var b=this.leftSide.evaluate(c,a);var d=this.rightSide.evaluate(c,a);return(b&&b.indexOf(d)===0)}},ENDS_WITH:{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(d,b){var c=this.leftSide.evaluate(d,b);var a=this.rightSide.evaluate(d,b);return(c&&c.length>=a.length&&c.lastIndexOf(a)===(c.length-a.length))}},CONTAINS:{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(e,a){var d=this.leftSide.evaluate(e,a)||[];var g=this.rightSide.evaluate(e,a);var c=SC.typeOf(d);if(c===SC.T_STRING){return(d.indexOf(g)!==-1)}else{if(c===SC.T_ARRAY||d.toArray){if(c!==SC.T_ARRAY){d=d.toArray()}var f=false;var b=0;while(f===false&&b<d.length){if(g==d[b]){f=true}b++}return f}}}},ANY:{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(d,a){var f=this.leftSide.evaluate(d,a);var b=this.rightSide.evaluate(d,a);var e=false;var c=0;while(e===false&&c<b.length){if(f==b[c]){e=true}c++}return e}},MATCHES:{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var d=this.leftSide.evaluate(c,a);var b=this.rightSide.evaluate(c,a);return b.test(d)}},TYPE_IS:{reservedWord:true,rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(d,a){var c=SC.Store.recordTypeFor(d.storeKey);var b=this.rightSide.evaluate(d,a);var e=SC.objectForPropertyPath(b);return c==e}},"null":{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return null}},"undefined":{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return undefined}},"false":{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return false}},"true":{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return true}},YES:{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return true}},NO:{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return false}}},tokenizeString:function(u,p){var j=[],r=null,g=null,f=null,s=null,a=null,h=null,d=null,v=null,q=false,b=false,l=false,m=false,n={};function e(w,c){g=p[w];if(g.format&&!g.format.test(c)){w="UNKNOWN"}if(g.delimited){m=true}if(!g.delimited){for(var i in p){if(p[i].reservedWord&&i==c){w=i}}}g=p[w];if(g&&g.rememberCount){if(!n[w]){n[w]=0}c=n[w];n[w]+=1}j.push({tokenType:w,tokenValue:c});a=null;h=null;d=null}if(!u){return[]}var k=u.length;for(var o=0;o<k;o++){q=(o===k-1);r=u.charAt(o);m=false;if(a){g=p[a];b=g.delimited?r===v:g.notAllowed.test(r);if(!b){d+=r}if(b||q){e(a,d)}if(q&&!b){m=true}}if(!a&&!m){for(f in p){g=p[f];if(g.firstCharacter&&g.firstCharacter.test(r)){a=f}}if(a){g=p[a];d=r;if(g.delimited){d="";if(g.lastCharacter){v=g.lastCharacter}else{v=r}}if(g.singleCharacter||q){e(a,d)}}}}return j},buildTokenTree:function(k,a){var o=k.slice();var q=0;var s=[];var c=false;var p=[];if(!k||k.length===0){return{evaluate:function(){return true}}}function r(i){var w=i;if(w<0){return false}var l=a[o[w].tokenType];if(!l){p.push("logic for token '"+o[w].tokenType+"' is not defined");return false}o[w].evaluate=l.evaluate;return l}function b(w,i){var x=i;var l=r(x);if(!l){return false}if(w=="left"){return l.leftType}if(w=="right"){return l.rightType}}function n(i){var w=i;var l=r(w);if(!l){return false}else{return l.evalType}}function f(i){o.splice(i,1);if(i<=q){q--}}function u(i){var l=i||q;if(l>0){return true}else{return false}}function j(i){var l=i;if(l<0){return true}return(b("left",l)&&!o[l].leftSide)||(b("right",l)&&!o[l].rightSide)}function h(l,w){var i=(w<l)?"left":"right";if(l<0||w<0){return false}if(!b(i,l)){return false}if(!n(w)){return false}if(b(i,l)==n(w)){return true}else{return false}}function m(i){var l=i;if(!j(l)){return false}if(!u(l)){return false}if(h(l,l-1)){return true}else{return false}}function d(i){var l=i;if(j(l)){return false}if(!u(l)){return false}if(!j(l-1)){return false}if(h(l-1,l)){return true}else{return false}}function g(i){var l=i;if(l<1){return false}o[l].leftSide=o[l-1];f(l-1)}function v(i){var l=i;if(l<1){return false}o[l-1].rightSide=o[l];f(l)}function e(i){f(i);f(s.pop())}for(q=0;q<o.length;q++){c=false;if(o[q].tokenType=="UNKNOWN"){p.push("found unknown token: "+o[q].tokenValue)}if(o[q].tokenType=="OPEN_PAREN"){s.push(q)}if(o[q].tokenType=="CLOSE_PAREN"){e(q)}if(m(q)){g(q)}if(d(q)){v(q);c=true}if(c){q--}}if(o.length==1){o=o[0]}else{p.push("string did not resolve to a single tree")}if(p.length>0){return{error:p.join(",\n"),tree:o}}else{return o}},buildOrder:function(a){if(!a){return[]}else{if(SC.typeOf(a)===SC.T_FUNCTION){return a}else{var d=a.split(",");for(var b=0;b<d.length;b++){var c=d[b];c=c.replace(/^\s+|\s+$/,"");c=c.replace(/\s+/,",");c=c.split(",");d[b]={propertyName:c[0]};if(c[1]&&c[1]=="DESC"){d[b].descending=true}}return d}}}});SC.Query.mixin({LOCAL:"local",REMOTE:"remote",storeKeyFor:function(a){return a?a.get("storeKey"):null},containsRecords:function(g,e,d){var f=[];for(var b=0,a=e.get("length");b<a;b++){var c=e.objectAt(b);if(c&&g.contains(c)){f.push(c.get("storeKey"))}}f=SC.Query.orderStoreKeys(f,g,d);return f},orderStoreKeys:function(c,d,a){if(c){var b=c.sort(function(f,e){return SC.Query.compareStoreKeys(d,a,f,e)})}return c},compareStoreKeys:function(f,c,e,d){var b=c.materializeRecord(e),a=c.materializeRecord(d);return f.compare(b,a)},build:function(g,c,f,i){var a=null,e,b,h,d;if(c&&c.isQuery){if(c.get("location")===g){return c}else{return c.copy().set("location",g).freeze()}}if(typeof c===SC.T_STRING){e=SC.objectForPropertyPath(c);if(!e){throw new Error("%@ did not resolve to a class".fmt(c))}c=e}else{if(c&&c.isEnumerable){e=[];c.forEach(function(j){if(typeof j===SC.T_STRING){j=SC.objectForPropertyPath(j)}if(!j){throw new Error("cannot resolve record types: %@".fmt(c))}e.push(j)},this);c=e}else{if(!c){c=SC.Record}}}if(i===undefined){i=null}if(f===undefined){f=null}if(!i&&(typeof f!==SC.T_STRING)){a=f;f=null}if(!i&&!a){d=SC.Query._scq_recordTypeCache;if(!d){d=SC.Query._scq_recordTypeCache={}}b=d[g];if(!b){b=d[g]={}}if(c.isEnumerable){h=c.map(function(j){return SC.guidFor(j)});h=h.sort().join(":")}else{h=SC.guidFor(c)}if(f){h=[h,f].join("::")}e=b[h];if(!e){if(c.isEnumerable){a={recordTypes:c.copy()}}else{a={recordType:c}}a.location=g;a.conditions=f;e=b[h]=SC.Query.create(a).freeze()}}else{if(!a){a={}}if(!a.location){a.location=g}if(c&&c.isEnumerable){a.recordTypes=c}else{a.recordType=c}if(f){a.conditions=f}if(i){a.parameters=i}e=SC.Query.create(a).freeze()}return e},local:function(c,a,b){return this.build(SC.Query.LOCAL,c,a,b)},remote:function(c,a,b){return this.build(SC.Query.REMOTE,c,a,b)},_scq_didDefineRecordType:function(){var a=SC.Query._scq_queriesWithExpandedRecordTypes;if(a){a.forEach(function(b){b.notifyPropertyChange("expandedRecordTypes")},this);a.clear()}}});SC.Query.comparisons={};SC.Query.registerComparison=function(a,b){SC.Query.comparisons[a]=b};SC.Query.registerQueryExtension=function(b,a){SC.Query.prototype.queryLanguage[b]=a};SC.Q=SC.Query.from;sc_require("system/query");SC.Record=SC.Object.extend({isRecord:YES,isParentRecord:NO,primaryKey:"guid",id:function(a,b){if(b!==undefined){this.writeAttribute(this.get("primaryKey"),b);return b}else{return SC.Store.idFor(this.storeKey)}}.property("storeKey").cacheable(),status:function(){return this.store.readStatus(this.storeKey)}.property("storeKey").cacheable(),store:null,storeKey:null,isDestroyed:function(){return !!(this.get("status")&SC.Record.DESTROYED)}.property("status").cacheable(),isEditable:function(a,b){if(b!==undefined){this._screc_isEditable=b}if(this.get("status")&SC.Record.READY){return this._screc_isEditable}else{return NO}}.property("status").cacheable(),_screc_isEditable:YES,isLoaded:function(){var b=SC.Record,a=this.get("status");return !((a===b.EMPTY)||(a===b.BUSY_LOADING)||(a===b.ERROR))}.property("status").cacheable(),relationships:null,attributes:function(){var a=this.get("store"),b=this.storeKey;return a.readEditableDataHash(b)}.property(),readOnlyAttributes:function(){var a=this.get("store"),c=this.storeKey,b=a.readDataHash(c);if(b){b=SC.clone(b,YES)}return b}.property(),nestedRecordNamespace:null,isNestedRecord:function(){var c=this.get("store"),d,b=this.get("storeKey"),a=c.parentStoreKeyExists(b);d=a?YES:NO;return d}.property().cacheable(),parentRecord:function(){var a=this.storeKey,b=this.get("store");return b.materializeParentRecord(a)}.property(),refresh:function(e,g){var c=this.get("store"),f,d,b=this.get("storeKey"),a=c.parentStoreKeyExists();d=e||(SC.none(e)&&SC.none(a));if(d){c.refreshRecord(null,null,b,g)}else{if(a){f=c.materializeRecord(a);f.refresh(e,g)}}return this},destroy:function(e){var c=this.get("store"),f,d,b=this.get("storeKey"),a=c.parentStoreKeyExists();d=e||(SC.none(e)&&SC.none(a));if(d){c.destroyRecord(null,null,b);this.notifyPropertyChange("status");this.propagateToAggregates()}else{if(a){f=c.materializeRecord(a);f.destroy(e)}}return this},recordDidChange:function(a){var b=this.get("parentRecord");if(b){b.recordDidChange()}this.get("store").recordDidChange(null,null,this.get("storeKey"),a);this.notifyPropertyChange("status");this.propagateToAggregates();return this},toJSON:function(){return this.get("attributes")},_editLevel:0,beginEditing:function(){this._editLevel++;return this},endEditing:function(a){if(--this._editLevel<=0){this._editLevel=0;this.recordDidChange(a)}return this},readAttribute:function(c){var a=this.get("store"),d=this.storeKey;var b=a.readDataHash(d);return b?b[c]:undefined},writeAttribute:function(c,f,e){var a=this.get("store"),d=this.storeKey,b;b=a.readEditableDataHash(d);if(!b){throw SC.Record.BAD_STATE_ERROR}if(f!==b[c]){if(!e){this.beginEditing()}b[c]=f;if(c===this.get("primaryKey")){SC.Store.replaceIdFor(d,f);this.propertyDidChange("id")}if(!e){this.endEditing(c)}else{a.dataHashDidChange(d,null,undefined,c)}}return this},propagateToAggregates:function(){var m=this.get("storeKey"),d=SC.Store.recordTypeFor(m),f=d.__sc_aggregate_keys,k,g,l,b,c,j;if(!f){f=[];for(l in this){b=this[l];if(b&&b.isRecordAttribute&&b.aggregate===YES){f.push(l)}}d.__sc_aggregate_keys=f}var i=SC.Record,a=i.DIRTY,e=i.READY_NEW,n=i.DESTROYED,o=i.READY_CLEAN,h;h=function(u){var p,q,r,s;if(u){p=this.get("status");if((p&a)||(p&e)||(p&n)){q=u.get("store");r=u.get("storeKey");s=q.peekStatus(r);if(s===o){u.get("store").recordDidChange(u.constructor,null,u.get("storeKey"),null,YES)}}}};for(k=0,g=f.length;k<g;++k){l=f[k];c=this.get(l);j=SC.kindOf(c,SC.ManyArray)?c:[c];j.forEach(h,this)}},storeDidChangeProperties:function(a,b){if(a){this.notifyPropertyChange("status")}else{if(b){this.beginPropertyChanges();b.forEach(function(e){this.notifyPropertyChange(e)},this);this.notifyPropertyChange("status");this.endPropertyChanges()}else{this.allPropertiesDidChange()}var d=this.relationships,c=d?d.length:0;while(--c>=0){d[c].recordPropertyDidChange(b)}}},normalize:function(a){var c=this.primaryKey,b=this.get("id"),f=this.get("store"),e=this.get("storeKey"),i={},r,o,d,q,j,p,l,g,n,h,m;var k=f.readEditableDataHash(e)||{};q=f.readDataHash(e);i[c]=YES;for(r in this){o=this[r];if(o){d=o.typeClass;if(d){h=o.get("key")||r;i[h]=YES;l=SC.typeOf(d.call(o))===SC.T_CLASS;g=o.isNestedRecordTransform;if(!l&&!g){j=this.get(r);if(j!==undefined&&(j!==null||a)){m=this[r];if(SC.kindOf(m,SC.RecordAttribute)){j=m.fromType(this,r,j)}k[h]=j}else{if(!a){i[h]=NO}}}else{if(g){j=this.get(r);if(j&&j.normalize){j.normalize()}}else{if(l){j=q[h];if(j!==undefined){k[h]=j}else{n=o.get("defaultValue");if(SC.typeOf(n)===SC.T_FUNCTION){k[h]=n(this,r,n)}else{k[h]=n}}}}}}}}for(r in k){if(!i[r]){SC.debug("%@:  Deleting key from underlying data hash due to normalization:  %@",this,r);delete k[r]}}return this},unknownProperty:function(b,d){if(d!==undefined){var c=this.get("storeKey"),e=SC.Store.recordTypeFor(c);if(e.ignoreUnknownProperties===YES){this[b]=d;return d}var a=this.get("primaryKey");this.writeAttribute(b,d);if(b===a){SC.Store.replaceIdFor(c,d)}}return this.readAttribute(b)},commitRecord:function(g,e,h){var c=this.get("store"),f,d,b=this.get("storeKey"),a=c.parentStoreKeyExists();d=e||(SC.none(e)&&SC.none(a));if(d){c.commitRecord(undefined,undefined,this.get("storeKey"),g,h)}else{if(a){f=c.materializeRecord(a);f.commitRecord(g,e,h)}}return this},isError:function(){return !!(this.get("status")&SC.Record.ERROR)}.property("status").cacheable(),errorValue:function(){return this.get("isError")?SC.val(this.get("errorObject")):null}.property("isError").cacheable(),errorObject:function(){if(this.get("isError")){var a=this.get("store");return a.readError(this.get("storeKey"))||SC.Record.GENERIC_ERROR}else{return null}}.property("isError").cacheable(),set:function(a,c){var b=this[a];if(b&&b.isProperty&&b.get&&!b.get("isEditable")){return this}return arguments.callee.base.apply(this,arguments)},registerNestedRecord:function(f,e,g){var c,d=this.get("storeKey"),b,a,h;if(SC.none(g)){g=e}if(f&&f.get&&f.get("isRecord")){a=f}else{h=this._materializeNestedRecordType(f,e);a=this.createNestedRecord(h,f,d,g)}if(a){this.isParentRecord=YES;c=this.get("store");b=a.get("storeKey");c.registerChildToParent(d,b,g)}return a},unregisterNestedRecord:function(d){var b,a,c;c=this.get("store");b=this.getPath(d);a=b.get("storeKey");c.unregisterChildFromParent(a)},_materializeNestedRecordType:function(d,c){var a,e,b;if(SC.typeOf(d)===SC.T_HASH){a=this.get("nestedRecordNamespace");if(d.type&&!SC.none(a)){e=a[d.type]}}if(!e&&c&&this[c]){e=this[c].get("typeClass")}if(!e||!SC.kindOf(e,SC.Record)){throw new Error("SC.Child: Error during transform: Invalid record type.")}return e},createNestedRecord:function(b,e,g,i){var h=this.get("store"),a,c,d,f=null;e=e||{};if(SC.none(h)){throw new Error("Error: during the creation of a child record: NO STORE ON PARENT!")}a=e[b.prototype.primaryKey];if(!a){this.generateIdForChild(f)}if(!a){a=g+"."+i}c=h.storeKeyExists(b,a);if(c){h.writeDataHash(c,e);f=h.materializeRecord(c)}else{f=h.createRecord(b,e,a)}return f},_nestedRecordKey:0,generateIdForChild:function(a){}});SC.Record.mixin({ignoreUnknownProperties:NO,CLEAN:1,DIRTY:2,EMPTY:256,ERROR:4096,READY:512,READY_CLEAN:513,READY_DIRTY:514,READY_NEW:515,DESTROYED:1024,DESTROYED_CLEAN:1025,DESTROYED_DIRTY:1026,BUSY:2048,BUSY_LOADING:2052,BUSY_CREATING:2056,BUSY_COMMITTING:2064,BUSY_REFRESH:2080,BUSY_REFRESH_CLEAN:2081,BUSY_REFRESH_DIRTY:2082,BUSY_DESTROYING:2112,BAD_STATE_ERROR:SC.$error("Internal Inconsistency"),RECORD_EXISTS_ERROR:SC.$error("Record Exists"),NOT_FOUND_ERROR:SC.$error("Not found "),BUSY_ERROR:SC.$error("Busy"),GENERIC_ERROR:SC.$error("Generic Error"),_nextChildKey:0,attr:function(a,b){return SC.RecordAttribute.attr(a,b)},fetch:function(b,a){return SC.FetchedAttribute.attr(b,a)},toMany:function(d,b){b=b||{};var c=b.nested||b.isNested;var a;this._throwUnlessRecordTypeDefined(d,"toMany");if(c){a=SC.ChildrenAttribute.attr(d,b)}else{a=SC.ManyAttribute.attr(d,b)}return a},toOne:function(d,b){b=b||{};var c=b.nested||b.isNested;var a;this._throwUnlessRecordTypeDefined(d,"toOne");if(c){a=SC.ChildAttribute.attr(d,b)}else{a=SC.SingleAttribute.attr(d,b)}return a},_throwUnlessRecordTypeDefined:function(b,a){if(!b){throw new Error("Attempted to create "+a+" attribute with undefined recordType. Did you forget to sc_require a dependency?")}},storeKeysById:function(){var b=SC.keyFor("storeKey",SC.guidFor(this)),a=this[b];if(!a){a=this[b]={}}return a},storeKeyFor:function(c){var b=this.storeKeysById(),a=b[c];if(!a){a=SC.Store.generateStoreKey();SC.Store.idsByStoreKey[a]=c;SC.Store.recordTypesByStoreKey[a]=this;b[c]=a}return a},storeKeyExists:function(c){var b=this.storeKeysById(),a=b[c];return a},find:function(a,b){return a.find(this,b)},extend:function(){var a=SC.Object.extend.apply(this,arguments);if(SC.Query){SC.Query._scq_didDefineRecordType(a)}return a}});sc_require("data_sources/data_source");sc_require("models/record");SC.FixturesDataSource=SC.DataSource.extend({simulateRemoteResponse:NO,latency:50,cancel:function(a,b){return NO},fetch:function(a,b){if(b.get("location")!==SC.Query.LOCAL){throw SC.$error("SC.Fixture data source can only fetch local queries")}if(!b.get("recordType")&&!b.get("recordTypes")){throw SC.$error("SC.Fixture data source can only fetch queries with one or more record types")}if(this.get("simulateRemoteResponse")){this.invokeLater(this._fetch,this.get("latency"),a,b)}else{this._fetch(a,b)}},_fetch:function(a,c){var d=c.get("recordType"),b=c.get("recordTypes")||[d];b.forEach(function(e){if(SC.typeOf(e)===SC.T_STRING){e=SC.objectForPropertyPath(e)}if(e){this.loadFixturesFor(a,e)}},this);a.dataSourceDidFetchQuery(c)},retrieveRecords:function(a,c){var d=this.get("latency"),b=this.hasFixturesFor(c);if(!b){return b}if(this.get("simulateRemoteResponse")){this.invokeLater(this._retrieveRecords,d,a,c)}else{this._retrieveRecords(a,c)}return b},_retrieveRecords:function(a,b){b.forEach(function(d){var c=[],g=SC.Store.recordTypeFor(d),f=a.idFor(d),e=this.fixtureForStoreKey(a,d);c.push(d);a.dataSourceDidComplete(d,e,f)},this)},updateRecords:function(a,c,e){var d=this.get("latency"),b=this.hasFixturesFor(c);if(!b){return b}if(this.get("simulateRemoteResponse")){this.invokeLater(this._updateRecords,d,a,c)}else{this._updateRecords(a,c)}return b},_updateRecords:function(a,b){b.forEach(function(c){var d=a.readDataHash(c);this.setFixtureForStoreKey(a,c,d);a.dataSourceDidComplete(c)},this)},createRecords:function(a,b,d){var c=this.get("latency");if(this.get("simulateRemoteResponse")){this.invokeLater(this._createRecords,c,a,b)}else{this._createRecords(a,b)}return YES},_createRecords:function(a,b){b.forEach(function(e){var g=a.idFor(e),f=a.recordTypeFor(e),d=a.readDataHash(e),c=this.fixturesFor(f);if(!g){g=this.generateIdFor(f,d,a,e)}this._invalidateCachesFor(f,e,g);c[g]=d;a.dataSourceDidComplete(e,null,g)},this)},destroyRecords:function(a,c,e){var d=this.get("latency"),b=this.hasFixturesFor(c);if(!b){return b}if(this.get("simulateRemoteResponse")){this.invokeLater(this._destroyRecords,d,a,c)}else{this._destroyRecords(a,c)}return b},_destroyRecords:function(a,b){b.forEach(function(d){var f=a.idFor(d),e=a.recordTypeFor(d),c=this.fixturesFor(e);this._invalidateCachesFor(e,d,f);if(f){delete c[f]}a.dataSourceDidDestroy(d)},this)},loadFixturesFor:function(a,g,c){var b=[],e,d,f;e=this.fixturesFor(g);for(d in e){f=g.storeKeyFor(d);if(a.peekStatus(f)===SC.Record.EMPTY){b.push(e[d])}if(c){c.push(f)}}if(b&&b.length>0){a.loadRecords(g,b)}return this},generateIdFor:function(d,b,a,c){return"@id%@".fmt(SC.Store.generateStoreKey())},fixtureForStoreKey:function(a,c){var e=a.idFor(c),d=a.recordTypeFor(c),b=this.fixturesFor(d);return b?b[e]:null},setFixtureForStoreKey:function(a,d,c){var f=a.idFor(d),e=a.recordTypeFor(d),b=this.fixturesFor(e);this._invalidateCachesFor(e,d,f);b[f]=c;return this},fixturesFor:function(h){if(!this._fixtures){this._fixtures={}}var f=this._fixtures[SC.guidFor(h)];if(f){return f}var e=h?h.FIXTURES:null,b=e?e.length:0,c=h?h.prototype.primaryKey:"guid",a,d,g;this._fixtures[SC.guidFor(h)]=f={};for(a=0;a<b;a++){d=e[a];g=d[c];if(!g){g=this.generateIdFor(h,d)}f[g]=d}return f},fixturesLoadedFor:function(c){if(!this._fixtures){return NO}var a=[],b=this._fixtures[SC.guidFor(c)];return b?YES:NO},reset:function(){this._fixtures=null;return this},hasFixturesFor:function(b){var a=NO;b.forEach(function(d){if(a!==SC.MIXED_STATE){var e=SC.Store.recordTypeFor(d),c=e?e.FIXTURES:null;if(c&&c.length&&c.length>0){if(a===NO){a=YES}}else{if(a===YES){a=SC.MIXED_STATE}}}},this);return a},_invalidateCachesFor:function(d,b,c){var a=this._storeKeyCache;if(a){delete a[SC.guidFor(d)]}return this}});SC.Record.fixtures=SC.FixturesDataSource.create();SC.RelationshipSupport={_srs_inverseDidRelinquishRelationships:function(d,c,a,b){c.forEach(function(e){this._srs_inverseDidRelinquishRelationship(d,e,a,b)},this)},_srs_inverseDidRelinquishRelationship:function(b,a,f,i){var h=b.storeKeyFor(a),e=this.readDataHash(h),g=f.inverse,d=b.prototype;if(!e||!g){return}if(SC.instanceOf(d[g],SC.SingleAttribute)){delete e[g]}else{if(SC.instanceOf(d[g],SC.ManyAttribute)&&SC.typeOf(e[g])===SC.T_ARRAY){e[g].removeObject(i);var c=this.records[h];if(c){c.get(g)._records=null}}}this.pushRetrieve(b,a,e,undefined,true)},_srs_inverseDidAddRelationships:function(d,c,a,b){c.forEach(function(e){this._srs_inverseDidAddRelationship(d,e,a,b)},this)},_srs_inverseDidAddRelationship:function(b,a,i,k){var j=b.storeKeyFor(a),g=this.readDataHash(j),d=this.peekStatus(j),f=b.prototype,h=i.inverse,l=f[h],c=f[f.primaryKey],e=false;l=(l&&l.get&&l.get("key")||l.key)||h;if((d===SC.Record.EMPTY)&&(SC.typeOf(i.lazilyInstantiate)===SC.T_FUNCTION&&i.lazilyInstantiate()||SC.typeOf(i.lazilyInstantiate)!==SC.T_FUNCTION&&i.lazilyInstantiate)){if(!SC.none(c)&&c.typeClass&&SC.typeOf(c.typeClass())===SC.T_CLASS){e=true}g={};g[f.primaryKey]=a}if(!g||!h){return}if(SC.instanceOf(f[h],SC.SingleAttribute)){g[l]=k}else{if(SC.instanceOf(f[h],SC.ManyAttribute)){g[l]=g[l]||[];if(g[l].indexOf(k)<0){g[l].push(k)}}}this.pushRetrieve(b,a,g,undefined,!e)},_srs_pushIterator:function(d,b,i,f){var e=d.prototype,g,c,h,a;if(typeof i==="undefined"){i=d.storeKeyFor(b)}c=this.readDataHash(i)||{};for(h in e){g=e[h];if(g&&g.typeClass&&g.inverse&&g.isMaster){a=g.typeClass();if(SC.typeOf(a)!==SC.T_CLASS){continue}f.apply(this,[a,c,g,g.get&&g.get("key")||h])}}},pushDestroy:function(a,e,d,c){var b;this._srs_pushIterator(e,d,c,function(f,g,i,h){b=[g[h]||null].flatten().compact().uniq();this._srs_inverseDidRelinquishRelationships(f,b,i,d)});return a(e,d,c)}.enhance(),pushRetrieve:function(b,h,g,c,e,f){if(!f){var d,a;this._srs_pushIterator(h,g,e,function(i,j,l,k){a=[c[k]||null].flatten().compact().uniq();d=[j[k]||null].flatten().compact().uniq();d=d.filter(function(m){return a.indexOf(m)===-1});this._srs_inverseDidRelinquishRelationships(i,d,l,g);this._srs_inverseDidAddRelationships(i,a,l,g)})}e=e||h.storeKeyFor(g);return b(h,g,c,e)}.enhance()};sc_require("models/record");SC.RecordAttribute=SC.Object.extend({isRecordAttribute:YES,defaultValue:null,type:String,key:null,isRequired:NO,isEditable:YES,useIsoDate:YES,aggregate:NO,lazilyInstantiate:NO,typeClass:function(){var a=this.get("type");if(SC.typeOf(a)===SC.T_STRING){a=SC.requiredObjectForPropertyPath(a)}return a}.property("type").cacheable(),transform:function(){var a=this.get("typeClass")||String,c=SC.RecordAttribute.transforms,b;while(a&&!(b=c[SC.guidFor(a)])){if(a.superclass.hasOwnProperty("create")){a=a.superclass}else{a=SC.T_FUNCTION}}return b}.property("typeClass").cacheable(),toType:function(e,j,h){var c=this.get("transform"),g=this.get("typeClass"),b;if(c&&c.to){h=c.to(h,this,g,e,j);if(!SC.none(h)&&(b=c.observesChildren)){var d,f=b.length,a={record:e,key:j};for(d=0;d<f;d++){h.addObserver(b[d],this,this._SCRA_childObserver,a)}}}return h},_SCRA_childObserver:function(d,b,c,a){this.call(a.record,a.key,d);a.record.notifyPropertyChange(a.key)},fromType:function(a,c,e){var b=this.get("transform"),d=this.get("typeClass");if(b&&b.from){e=b.from(e,this,d,a,c)}return e},call:function(a,b,c){var d=this.get("key")||b,e;if((c!==undefined)&&this.get("isEditable")){e=this.fromType(a,b,c);a.writeAttribute(d,e)}c=a.readAttribute(d);if(SC.none(c)&&(c=this.get("defaultValue"))){if(typeof c===SC.T_FUNCTION){c=c(a,b,this)}}c=this.toType(a,b,c);return c},apply:function(b,a){return this.call.apply(b,a)},isProperty:YES,isCacheable:YES,dependentKeys:[],init:function(){arguments.callee.base.apply(this,arguments);this.cacheKey="__cache__recattr__"+SC.guidFor(this);this.lastSetValueKey="__lastValue__recattr__"+SC.guidFor(this)}});SC.RecordAttribute.mixin({attr:function(a,b){if(!b){b={}}if(!b.type){b.type=a||String}return this.create(b)},transforms:{},registerTransform:function(a,b){SC.RecordAttribute.transforms[SC.guidFor(a)]=b}});SC.RecordAttribute.registerTransform(Boolean,{to:function(a){return SC.none(a)?null:!!a}});SC.RecordAttribute.registerTransform(Number,{to:function(a){return SC.none(a)?null:Number(a)}});SC.RecordAttribute.registerTransform(String,{to:function(a){if(!(typeof a===SC.T_STRING)&&!SC.none(a)&&a.toString){a=a.toString()}return a}});SC.RecordAttribute.registerTransform(Array,{to:function(a){if(!SC.isArray(a)&&!SC.none(a)){a=[]}return a},observesChildren:["[]"]});SC.RecordAttribute.registerTransform(Object,{to:function(a){if(!(typeof a==="object")&&!SC.none(a)){a={}}return a}});SC.RecordAttribute.registerTransform(SC.Record,{to:function(e,a,d,c){var b=c.get("store");if(SC.none(e)||(e==="")){return null}else{return b.find(d,e)}},from:function(a){return a?a.get("id"):null}});SC.RecordAttribute.registerTransform(SC.T_FUNCTION,{to:function(e,a,d,c){d=d.apply(c);var b=c.get("store");return b.find(d,e)},from:function(a){return a.get("id")}});SC.RecordAttribute.registerTransform(Date,{to:function(i,a){if(SC.none(i)){return i}var c;i=i.toString()||"";if(a.get("useIsoDate")){var e="([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(\\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?",h=i.match(new RegExp(e)),g=0,b=new Date(h[1],0,1),f;if(h[3]){b.setMonth(h[3]-1)}if(h[5]){b.setDate(h[5])}if(h[7]){b.setHours(h[7])}if(h[8]){b.setMinutes(h[8])}if(h[10]){b.setSeconds(h[10])}if(h[12]){b.setMilliseconds(Number("0."+h[12])*1000)}if(h[14]){g=(Number(h[16])*60)+Number(h[17]);g*=((h[15]==="-")?1:-1)}g-=b.getTimezoneOffset();f=(Number(b)+(g*60*1000));c=new Date();c.setTime(Number(f))}else{c=new Date(Date.parse(i))}return c},_dates:{},_zeropad:function(a){return((a<0)?"-":"")+((a<10)?"0":"")+Math.abs(a)},from:function(b){if(SC.none(b)){return null}var a=this._dates[b.getTime()];if(a){return a}var d=this._zeropad,c=0-b.getTimezoneOffset()/60;c=(c===0)?"Z":"%@:00".fmt(d(c));this._dates[b.getTime()]=a="%@-%@-%@T%@:%@:%@%@".fmt(d(b.getFullYear()),d(b.getMonth()+1),d(b.getDate()),d(b.getHours()),d(b.getMinutes()),d(b.getSeconds()),c);return a}});if(SC.DateTime&&!SC.RecordAttribute.transforms[SC.guidFor(SC.DateTime)]){SC.RecordAttribute.registerTransform(SC.DateTime,{to:function(c,a){if(SC.none(c)||SC.instanceOf(c,SC.DateTime)){return c}if(a.get("useUnixTime")){if(SC.typeOf(c)===SC.T_STRING){c=parseInt(c)}if(isNaN(c)||SC.typeOf(c)!==SC.T_NUMBER){c=0}return SC.DateTime.create({milliseconds:c*1000,timezone:0})}if(SC.instanceOf(c,Date)){return SC.DateTime.create(c.getTime())}var b=a.get("format");return SC.DateTime.parse(c,b?b:SC.DateTime.recordFormat)},from:function(b,a){if(SC.none(b)){return b}if(a.get("useUnixTime")){return b.get("milliseconds")/1000}var c=a.get("format");return b.toFormattedString(c?c:SC.DateTime.recordFormat)}})}SC.RecordAttribute.registerTransform(SC.Set,{to:function(e,a,d,b,c){return SC.Set.create(e)},from:function(e,a,d,b,c){return e.toArray()},observesChildren:["[]"]});sc_require("models/record");sc_require("models/record_attribute");SC.ChildAttribute=SC.RecordAttribute.extend({isNestedRecordTransform:YES,toType:function(b,d,e){var c=null,a,f=this.get("typeClass");if(!b){throw new Error("SC.Child: Error during transform: Unable to retrieve parent record.")}if(!SC.none(e)){c=b.registerNestedRecord(e,d)}return c},fromType:function(b,e,f){var a,c,d;if(b){if(b.readAttribute(e)){b.unregisterNestedRecord(e)}if(SC.none(f)){b.writeAttribute(e,f);d=f}else{d=b.registerNestedRecord(f,e);if(d){a=d.get("storeKey");c=d.get("store");b.writeAttribute(e,c.readDataHash(a))}else{if(f){b.writeAttribute(e,f)}}}}return d},call:function(a,b,c){var d=this.get("key")||b;if(c!==undefined){c=this.fromType(a,b,c)}else{c=a.readAttribute(d);if(SC.none(c)&&(c=this.get("defaultValue"))){if(typeof c===SC.T_FUNCTION){c=this.defaultValue(a,b,this);if(a.attributes()){a.writeAttribute(d,c,true)}}}else{c=this.toType(a,b,c)}}return c}});sc_require("models/record");SC.ChildRecord=SC.Record.extend({});SC.ChildRecord.extend=function(){return SC.Record.extend.apply(this,arguments)};SC.ChildArray=SC.Object.extend(SC.Enumerable,SC.Array,{defaultRecordType:null,record:null,propertyName:null,store:function(){return this.getPath("record.store")}.property("record").cacheable(),storeKey:function(){return this.getPath("record.storeKey")}.property("record").cacheable(),readOnlyChildren:function(){return this.get("record").readAttribute(this.get("propertyName"))}.property(),editableChildren:function(){var a=this.get("store"),d=this.get("storeKey"),c=this.get("propertyName"),b,e;b=a.readEditableProperty(d,c);if(!b){e=a.readEditableDataHash(d);b=e[c]=[]}return b}.property(),length:function(){var a=this.get("readOnlyChildren");return a?a.length:0}.property("readOnlyChildren"),objectAt:function(b){var g=this._records,e=this.get("readOnlyChildren"),h,c,d=this.get("propertyName"),f=this.get("record"),a=e?e.length:0;if(!e){return undefined}if(g&&(c=g[b])){return c}if(b>=a){return undefined}h=e.objectAt(b);if(!h){return undefined}if(!g){this._records=g=[]}g[b]=c=f.registerNestedRecord(h,d,d+"."+b);return c},replace:function(p,c,l){var d=this.get("editableChildren"),m=l?(l.get?l.get("length"):l.length):0,n=this.get("record"),f=this.get("propertyName"),o=this.get("store"),b,q,j,r,a,e,g,h;if(!this._records){this._records=[]}a=this._processRecordsToHashes(l);j=this.get("defaultRecordType");r=j.storeKeysById();for(g=p,h=p+c;g<h;g++){e=this._records[g];if(!e){e=n.registerNestedRecord(d[g],f,f+"."+g)}else{this._records[g]=null}r[e.get("id")]=null}for(g=p+c,h=this._records.length;g<h;g++){e=this._records[g];if(e){o.unregisterChildFromParent(e.get("storeKey"));this._records[g]=null}}b=d.length-p;q=d.length-p-c+m;this.arrayContentWillChange(p,b,q);if(a.length===0){d.splice(p,c)}else{var k=[p,c].concat(a);d.splice.apply(d,k)}for(g=p,h=d.length;g<h;g++){this._records[g]=n.registerNestedRecord(d[g],f,f+"."+g)}this.arrayContentDidChange(p,b,q);this._sc_prevChildren=d;n.recordDidChange(f);return this},normalize:function(){this.forEach(function(a){if(a.normalize){a.normalize()}})},_processRecordsToHashes:function(d){var b,a,c=[];d.forEach(function(f,e){if(f.isNestedRecord){b=f.get("store");a=f.storeKey;c[e]=b.readDataHash(a)}else{c[e]=f}});return c},recordPropertyDidChange:function(e){var d=this.get("length"),c=this.get("readOnlyChildren"),f=c?c.length:0,b=this.get("store"),a=this._sc_prevChildren;if(a===c){return}this._records=null;this.arrayContentDidChange(0,d,f);this._sc_prevChildren=c}});sc_require("models/record");sc_require("models/record_attribute");sc_require("models/child_attribute");sc_require("system/child_array");SC.ChildrenAttribute=SC.ChildAttribute.extend({toType:function(b,d,e){var g=this.get("key")||d,f=SC.keyFor("__kidsArray__",SC.guidFor(this)),c=b[f],h=this.get("typeClass"),a;if(!c){c=SC.ChildArray.create({record:b,propertyName:g,defaultRecordType:h});b[f]=c;a=b.get("relationships");if(!a){b.set("relationships",a=[])}a.push(c)}return c},fromType:function(b,e,f){var a,c,g=SC.keyFor("__kidsArray__",SC.guidFor(this)),d=b[g];if(b){b.writeAttribute(e,f);if(d){d=d.recordPropertyDidChange()}}return d}});sc_require("models/record");sc_require("models/record_attribute");SC.FetchedAttribute=SC.RecordAttribute.extend({paramValueKey:"link",paramOwnerKey:"owner",paramRelKey:"rel",queryKey:null,isEditable:NO,toType:function(d,i,g){var h=d.get("store");if(!h){return null}var b=this.get("paramValueKey"),a=this.get("paramOwnerKey"),f=this.get("paramRelKey"),e=this.get("queryKey")||this.get("typeClass"),c={};if(b){c[b]=g}if(a){c[a]=d}if(f){c[f]=this.get("key")||i}return h.find(e,c)},fromType:function(a,b,c){return c}});SC.ManyArray=SC.Object.extend(SC.Enumerable,SC.Array,{recordType:null,record:null,propertyName:null,manyAttribute:null,store:function(){return this.get("record").get("store")}.property("record").cacheable(),storeKey:function(){return this.get("record").get("storeKey")}.property("record").cacheable(),supportNewRecords:NO,readOnlyStoreIds:function(){return this.get("record").readAttribute(this.get("propertyName"))}.property(),editableStoreIds:function(){var a=this.get("store"),d=this.get("storeKey"),c=this.get("propertyName"),b,e;b=a.readEditableProperty(d,c);if(!b){e=a.readEditableDataHash(d);b=e[c]=[]}return b}.property(),isEditable:function(){var a=this.manyAttribute;return a?a.get("isEditable"):NO}.property("manyAttribute").cacheable(),inverse:function(){var a=this.manyAttribute;return a?a.get("inverse"):null}.property("manyAttribute").cacheable(),isMaster:function(){var a=this.manyAttribute;return a?a.get("isMaster"):null}.property("manyAttribute").cacheable(),orderBy:function(){var a=this.manyAttribute;return a?a.get("orderBy"):null}.property("manyAttribute").cacheable(),length:function(){var a=this.get("readOnlyStoreIds");return a?a.get("length"):0}.property("readOnlyStoreIds"),objectAt:function(g){var e=this._records,a=this.get("readOnlyStoreIds"),f=this.get("store"),b=this.get("recordType"),c=a?a.length:0,i,d,h;if(!a||!f){return undefined}if(e&&(d=e[g])){return d}if(g>=c){return undefined}h=a.objectAt(g);if(!h){return undefined}if(!e){this._records=e=[]}if(typeof h===SC.T_STRING&&h.indexOf("_sc_id_placeholder_")===0){i=h.replace("_sc_id_placeholder_","")}else{i=f.storeKeyFor(b,h)}if(f.readStatus(i)===SC.Record.EMPTY){f.retrieveRecord(b,null,i)}e[g]=d=f.materializeRecord(i);return d},replace:function(r,e,o){var c=this.get("editableStoreIds"),p=o?(o.get?o.get("length"):o.length):0,q=this.get("record"),g=this.get("propertyName"),n=this.get("supportNewRecords"),a,b,h,l,k,j;if(!this._records){this._records=[]}a=[];for(j=0;j<p;j++){var f=o.objectAt(j),d=f.get("id");if(SC.none(d)){if(n){a[j]="_sc_id_placeholder_"+f.get("storeKey")}else{throw new Error("Developer Error: Attempted to add a record without a primary key to a to-many relationship (%@). The record must have a real id or be given a temporary id before it can be used. ".fmt(g))}}else{a[j]=d}}h=this.get("inverse");if(h&&e>0){b=SC.ManyArray._toRemove;if(b){SC.ManyArray._toRemove=null}else{b=[]}for(j=0;j<e;j++){b[j]=this.objectAt(r+j)}}this.arrayContentWillChange(r,e,p);if(a.length===0){c.splice(r,e);this._records.splice(r,e)}else{var m=[r,e].concat(a);c.splice.apply(c,m);m=[r,e].concat(new Array(a.length));this._records.splice.apply(this._records,m)}if(h){for(j=0;j<e;j++){k=b[j];l=k?k[h]:null;if(l&&l.inverseDidRemoveRecord){l.inverseDidRemoveRecord(k,h,q,g)}}if(b){b.length=0;if(!SC.ManyArray._toRemove){SC.ManyArray._toRemove=b}}for(j=0;j<p;j++){k=o.objectAt(j);l=k?k[h]:null;if(l&&l.inverseDidAddRecord){l.inverseDidAddRecord(k,h,q,g)}}}this.arrayContentDidChange(r,e,p);this._sc_prevStoreIds=c;if(q&&(!h||this.get("isMaster"))){q.recordDidChange(g)}return this},removeInverseRecord:function(c){if(!c){return this}var e=c.get("id"),d=this.get("editableStoreIds"),a=(d&&e)?d.indexOf(e):-1,b;if(a>=0){this.arrayContentWillChange(a,1,0);d.splice(a,1);if(this._records){this._records.splice(a,1)}this.arrayContentDidChange(a,1,0);this._sc_prevStoreIds=d;if(this.get("isMaster")&&(b=this.get("record"))){b.recordDidChange(this.get("propertyName"))}}return this},addInverseRecord:function(d){if(!d){return this}var f=this.get("editableStoreIds"),h=this.get("orderBy"),b=f.get("length"),a,c,g,e;if(h){a=this._findInsertionLocation(d,0,b,h);g=f.length-a;e=f.length-a+1}else{a=b;g=0;e=1}this.arrayContentWillChange(a,g,e);f.splice(a,0,d.get("id"));if(this._records){this._records.splice(a,0,null)}this.arrayContentDidChange(a,g,e);this._sc_prevStoreIds=f;if(this.get("isMaster")&&(c=this.get("record"))){c.recordDidChange(this.get("propertyName"))}return this},_findInsertionLocation:function(g,d,c,f){var b=d+Math.floor((c-d)/2),e=this.objectAt(b),a=this._compare(g,e,f);if(a<0){if(b===0){return b}else{return this._findInsertionLocation(g,0,b-1,f)}}else{if(a>0){if(b>=c){return b+1}else{return this._findInsertionLocation(g,b+1,c,f)}}else{return b}}},_compare:function(f,e,i){var h=SC.typeOf(i),g,d,c;if(h===SC.T_FUNCTION){g=i(f,e)}else{if(h===SC.T_STRING){g=SC.compare(f,e)}else{c=i.get("length");g=0;for(d=0;g===0&&d<c;d++){g=SC.compare(f,e)}}}return g},updateNewRecordId:function(c){var b=this.get("editableStoreIds"),a;a=b.indexOf("_sc_id_placeholder_"+c.get("storeKey"));if(a>=0){b.replace(a,1,[c.get("id")])}},unknownProperty:function(b,c){var a;if(SC.typeOf(b)===SC.T_STRING){a=this.reducedProperty(b,c)}return a===undefined?arguments.callee.base.apply(this,arguments):a},init:function(){arguments.callee.base.apply(this,arguments);this.recordPropertyDidChange()},recordPropertyDidChange:function(c){if(c&&!c.contains(this.get("propertyName"))){return this}var a=this.get("length"),e=this.get("readOnlyStoreIds"),d=e?e.length:0,b=this._sc_prevStoreIds;if(e===b){return}this._records=null;this.arrayContentDidChange(0,a,d);this._sc_prevStoreIds=e}});sc_require("models/record");sc_require("models/record_attribute");sc_require("system/many_array");SC.ManyAttribute=SC.RecordAttribute.extend({inverse:null,isMaster:YES,orderBy:null,supportNewRecords:true,toType:function(c,h,g){var f=this.get("typeClass"),e=this.get("supportNewRecords"),a=this.get("key")||h,b=SC.keyFor("__manyArray__",SC.guidFor(this)),d=c[b],i;if(!d){d=SC.ManyArray.create({recordType:f,record:c,propertyName:a,manyAttribute:this,supportNewRecords:e});c[b]=d;i=c.get("relationships");if(!i){c.set("relationships",i=[])}i.push(d)}return d},fromType:function(b,e,f){var c=[];if(!SC.isArray(f)){throw new Error("Expects toMany attribute to be an array")}var a=f.get("length");for(var d=0;d<a;d++){c[d]=f.objectAt(d).get("id")}return c},inverseDidRemoveRecord:function(a,b,c,d){var e=a.get(b);if(e){e.removeInverseRecord(c)}},inverseDidAddRecord:function(a,b,c,d){var e=a.get(b);if(e){e.addInverseRecord(c)}}});sc_require("models/record");sc_require("models/record_attribute");SC.SingleAttribute=SC.RecordAttribute.extend({inverse:null,isMaster:YES,call:function(c,i,b){var a=this.get("key")||i,h,g,j,f,e,d;if(b!==undefined&&this.get("isEditable")){h=this.get("inverse");if(h){j=this._scsa_call(c,i)}d=this.fromType(c,i,b);c.writeAttribute(a,d,!this.get("isMaster"));e=b;if(h&&(j!==b)){if(j&&(f=j[h])){f.inverseDidRemoveRecord(j,h,c,i)}if(b&&(f=b[h])){f.inverseDidAddRecord(b,h,c,i)}}}else{e=this._scsa_call(c,i,b)}return e},_scsa_call:SC.RecordAttribute.prototype.call,inverseDidRemoveRecord:function(c,f,g,h){var b=this.get("inverse"),e=this._scsa_call(c,f),d=this.get("isMaster"),a;c.writeAttribute(this.get("key")||f,null,!d);c.notifyPropertyChange(f);if((e!==g)||(h!==b)){if(e&&(a=e[b])){a.inverseDidRemoveRecord(e,b,c,f)}}},inverseDidAddRecord:function(a,h,c,g){var e=this.get("inverse"),i=this._scsa_call(a,h),f=this.get("isMaster"),d,b;b=this.fromType(a,h,c);a.writeAttribute(this.get("key")||h,b,!f);a.notifyPropertyChange(h);if((i!==c)||(g!==e)){if(i&&(d=i[e])){d.inverseDidRemoveRecord(i,e,a,h)}}}});sc_require("models/record");SC.Store=SC.Object.extend({name:null,nestedStores:null,dataSource:null,isNested:NO,commitRecordsAutomatically:NO,from:function(a){this.set("dataSource",a);return this},_getDataSource:function(){var a=this.get("dataSource");if(typeof a===SC.T_STRING){a=SC.requiredObjectForPropertyPath(a);if(a.isClass){a=a.create()}this.set("dataSource",a)}return a},cascade:function(a){var b=SC.A(arguments);a=SC.CascadeDataSource.create({dataSources:b});return this.from(a)},chain:function(b,c){if(!b){b={}}b.parentStore=this;if(c){if(SC.typeOf(c)!=="class"){throw new Error("%@ is not a valid class".fmt(c))}if(!SC.kindOf(c,SC.NestedStore)){throw new Error("%@ is not a type of SC.NestedStore".fmt(c))}}else{c=SC.NestedStore}b.childRecords=this.childRecords?SC.clone(this.childRecords):{};b.parentRecords=this.parentRecords?SC.clone(this.parentRecords):{};var a=c.create(b),d=this.nestedStores;if(!d){d=this.nestedStores=[]}d.push(a);return a},chainAutonomousStore:function(a,d){var b=a?SC.clone(a):{};var c=this._getDataSource();b.dataSource=c;return this.chain(b,d)},willDestroyNestedStore:function(a){if(this.nestedStores){this.nestedStores.removeObject(a)}return this},hasNestedStore:function(a){while(a&&(a!==this)){a=a.get("parentStore")}return a===this},dataHashes:null,statuses:null,revisions:null,editables:null,changelog:null,recordErrors:null,queryErrors:null,childRecords:null,parentRecords:null,storeKeyEditState:function(b){var c=this.editables,a=this.locks;return(c&&c[b])?SC.Store.EDITABLE:SC.Store.LOCKED},readDataHash:function(a){return this.dataHashes[a]},readEditableDataHash:function(b){var a=this.dataHashes[b];if(!a){return a}var c=this.editables;if(!c){c=this.editables=[]}if(!c[b]){c[b]=1;a=this.dataHashes[b]=SC.clone(a,YES)}return a},readEditableProperty:function(c,a){var e=this.readEditableDataHash(c),d=this.editables[c],b=e[a];if(d===1){d=this.editables[c]={}}if(!d[a]){b=e[a];if(b&&b.isCopyable){b=e[a]=b.copy(YES)}d[a]=YES}return b},writeDataHash:function(j,d,c){if(d){this.dataHashes[j]=d}if(c){this.statuses[j]=c}var g=this.editables;if(!g){g=this.editables=[]}g[j]=1;var e={};if(!SC.none(this.parentRecords)){var a=this.parentRecords[j]||{},b;for(var i in a){if(a.hasOwnProperty(i)){if(d){var h=a[i];h=h.split(".");if(h.length>1){b=d[h[0]][h[1]]}else{b=d[h[0]]}if(!e[d[h[0]]]){this.writeDataHash(i,b,c)}if(h.length>1&&!e[d[h[0]]]){e[d[h[0]]]=true;var f=this;this.invokeLast(function(){f.records[j].get(h[0]).forEach(function(k){})})}}else{this.writeDataHash(i,null,c)}}}}return this},removeDataHash:function(b,a){this.dataHashes[b]=null;this.statuses[b]=a||SC.Record.EMPTY;var c=this.editables;if(c){c[b]=0}return this},readStatus:function(a){this.readDataHash(a);return this.statuses[a]||SC.Record.EMPTY},peekStatus:function(a){return this.statuses[a]||SC.Record.EMPTY},writeStatus:function(b,a){return this.writeDataHash(b,null,a)},dataHashDidChange:function(e,b,a,h){if(!b){b=SC.Store.generateStoreKey()}var c,f,g,i;c=SC.typeOf(e)===SC.T_ARRAY;if(c){f=e.length}else{f=1;i=e}var d=this;for(g=0;g<f;g++){if(c){i=e[g]}this.revisions[i]=b;this._notifyRecordPropertyChange(i,a,h);this._propagateToChildren(i,function(j){d.dataHashDidChange(j,null,a,h)})}return this},_notifyRecordPropertyChange:function(m,e,l){var a=this.records,g=this.get("nestedStores"),h=SC.Store,c,b,f,k,j,d,n;f=g?g.length:0;for(k=0;k<f;k++){j=g[k];d=j.peekStatus(m);b=j.storeKeyEditState(m);if(b===h.INHERITED){j._notifyRecordPropertyChange(m,e,l)}else{if(d&SC.Record.BUSY){if(j.get("hasChanges")){throw h.CHAIN_CONFLICT_ERROR}j.reset()}}}var i=this.recordPropertyChanges;if(!i){i=this.recordPropertyChanges={storeKeys:SC.CoreSet.create(),records:SC.CoreSet.create(),hasDataChanges:SC.CoreSet.create(),propertyForStoreKeys:{}}}i.storeKeys.add(m);if(a&&(c=a[m])){i.records.push(m);if(!e){i.hasDataChanges.push(m)}if(l){if(!(n=i.propertyForStoreKeys[m])){n=i.propertyForStoreKeys[m]=SC.CoreSet.create()}if(n!=="*"){n.add(l)}}else{i.propertyForStoreKeys[m]="*"}}this.invokeOnce(this.flush);return this},flush:function(){if(!this.recordPropertyChanges){return this}var i=this.recordPropertyChanges,h=i.storeKeys,l=i.hasDataChanges,a=i.records,f=i.propertyForStoreKeys,d=SC.CoreSet.create(),c,b,e,j,g,k,m;h.forEach(function(n){if(a.contains(n)){e=l.contains(n)?NO:YES;c=this.records[n];m=f?f[n]:null;if(m==="*"){m=null}a.remove(n);if(c){c.storeDidChangeProperties(e,m)}}b=SC.Store.recordTypeFor(n);d.add(b)},this);if(h.get("length")>0){this._notifyRecordArrays(h,d)}h.clear();l.clear();a.clear();this.recordPropertyChanges.propertyForStoreKeys={};return this},reset:function(){this.dataHashes={};this.revisions={};this.statuses={};this.childRecords={};this.parentRecords={};this.chainedChanges=this.locks=this.editables=null;this.changelog=null;this.recordErrors=null;this.queryErrors=null;var e=this.get("dataSource");if(e&&e.reset){e.reset()}var b=this.records,c;if(b){for(c in b){if(!b.hasOwnProperty(c)){continue}this._notifyRecordPropertyChange(parseInt(c,10),NO)}}var d,a=this.get("recordArrays");if(a){while(d=a.pop()){d.destroy()}a.clear();this.set("recordArrays",null)}this.set("hasChanges",NO)},commitChangesFromNestedStore:function(j,u,d){if(!d){this._verifyLockRevisions(u,j.locks)}var p=u.length,o,f,c,l,e,b,h,a,q,r,g,m,k;b=this.revisions;c=this.dataHashes;l=this.statuses;e=this.editables;h=this.parentRecords?this.parentRecords:this.parentRecords={};a=this.childRecords?this.childRecords:this.childRecords={};if(!e){e=this.editables=[]}q=j.dataHashes;g=j.revisions;r=j.statuses;m=j.parentRecords||{};k=j.childRecords||{};for(o=0;o<p;o++){f=u[o];c[f]=q[f];l[f]=r[f];b[f]=g[f];h[f]=m[f];a[f]=k[f];e[f]=0;this._notifyRecordPropertyChange(f,NO)}var n=this.changelog,s=j.changelog;if(s){if(!n){n=this.changelog=SC.CoreSet.create()}n.addEach(s)}this.changelog=n;if(!this.get("parentStore")){this.flush()}return this},_verifyLockRevisions:function(f,h){var a=f.length,c=this.revisions,e,g,d,b;if(h&&c){for(e=0;e<a;e++){g=f[e];d=h[g]||1;b=c[g]||1;if(d<b){throw SC.Store.CHAIN_CONFLICT_ERROR}}}return this},find:function(b,a){if(SC.typeOf(b)===SC.T_STRING){b=SC.objectForPropertyPath(b)}if((arguments.length===1)&&!(b&&b.get&&b.get("isRecord"))){if(!b){throw new Error("SC.Store#find() must pass recordType or query")}if(!b.isQuery){b=SC.Query.local(b)}return this._findQuery(b,YES,YES)}else{return this._findRecord(b,a)}},_findQuery:function(f,a,e){var b=this._scst_recordArraysByQuery,d=SC.guidFor(f),c,g;if(!b){b=this._scst_recordArraysByQuery={}}c=b[d];if(!c&&a){b[d]=c=SC.RecordArray.create({store:this,query:f});g=this.get("recordArrays");if(!g){this.set("recordArrays",g=SC.Set.create())}g.add(c);if(e){this.refreshQuery(f)}}this.flush();return c},_findRecord:function(c,b){var a;if(c&&c.get&&c.get("isRecord")){a=c.get("storeKey")}else{a=b?c.storeKeyFor(b):null}if(a&&(this.peekStatus(a)===SC.Record.EMPTY)){a=this.retrieveRecord(c,b)}return a?this.materializeRecord(a):null},recordArrayWillDestroy:function(b){var a=this._scst_recordArraysByQuery,c=this.get("recordArrays");if(a){delete a[SC.guidFor(b.get("query"))]}if(c){c.remove(b)}return this},refreshQuery:function(d){if(!d){throw new Error("refreshQuery() requires a query")}var a=this._scst_recordArraysByQuery,c=a?a[SC.guidFor(d)]:null,b=this._getDataSource();if(b&&b.fetch){if(c){c.storeWillFetchQuery(d)}b.fetch.call(b,this,d)}return this},_notifyRecordArrays:function(b,a){var c=this.get("recordArrays");if(!c){return this}c.forEach(function(d){if(d){d.storeDidChangeStoreKeys(b,a)}},this);return this},recordsFor:function(f){var d=[],a=f.storeKeysById(),e,c,b;for(e in a){c=a[e];if(this.readStatus(c)!==SC.RECORD_EMPTY){d.push(c)}}if(d.length>0){b=SC.RecordArray.create({store:this,storeKeys:d})}else{b=d}return b},_CACHED_REC_ATTRS:{},_CACHED_REC_INIT:function(){},materializeRecord:function(e){var b=this.records,d,f,c;if(!b){b=this.records={}}d=b[e];if(d){return d}f=SC.Store.recordTypeFor(e);if(!f){return null}c=this._CACHED_REC_ATTRS;c.storeKey=e;c.store=this;var a=f.prototype._object_init;f.prototype._object_init=this._CACHED_REC_INIT;d=b[e]=f.create();f.prototype._object_init=d._object_init=a;d._object_init([c]);return d},createRecord:function(d,f,b){var m,l,n,e,k=SC.Record,h,j,i;f=(f?f:{});if(!b&&(m=d.prototype.primaryKey)){b=f[m];j=d.prototype[m]?d.prototype[m].defaultValue:null;if(!b&&SC.typeOf(j)===SC.T_FUNCTION){b=f[m]=j()}}n=b?d.storeKeyFor(b):SC.Store.generateStoreKey();e=this.readStatus(n);if((e&k.BUSY)||(e&k.READY)||(e===k.DESTROYED_DIRTY)){throw b?k.RECORD_EXISTS_ERROR:k.BAD_STATE_ERROR}else{if(!b&&(e===SC.DESTROYED_CLEAN||e===SC.ERROR)){throw k.BAD_STATE_ERROR}}this.writeDataHash(n,f,k.READY_NEW);SC.Store.replaceRecordTypeFor(n,d);this.dataHashDidChange(n);i=this.materializeRecord(n);l=d.prototype;for(var a in l){var g=l[a];if(g&&g.isRecordAttribute){var c=g.key||a;if(!f.hasOwnProperty(c)){if(f.hasOwnProperty(a)){f[c]=f[a];delete f[a]}else{j=g.defaultValue;if(j){if(SC.typeOf(j)===SC.T_FUNCTION){f[c]=SC.copy(j(i,c),YES)}else{f[c]=SC.copy(j,YES)}}}}else{if(c!==a&&f.hasOwnProperty(a)){delete f[a]}}}}h=this.changelog;if(!h){h=SC.Set.create()}h.add(n);this.changelog=h;if(this.get("commitRecordsAutomatically")){this.invokeLast(this.commitRecords)}if(i){i.propagateToAggregates()}return i},createRecords:function(d,i,a){var g=[],c,b,e,f=i.length,h;e=SC.typeOf(d)===SC.T_ARRAY;if(!e){c=d}for(h=0;h<f;h++){if(e){c=d[h]||SC.Record}b=a?a[h]:undefined;g.push(this.createRecord(c,i[h],b))}return g},unloadRecord:function(g,f,e,c){if(e===undefined){e=g.storeKeyFor(f)}var b=this.readStatus(e),a=SC.Record;c=c||a.EMPTY;if((b===a.BUSY_DESTROYING)||(b&a.DESTROYED)){return this}else{if(b&a.BUSY){throw a.BUSY_ERROR}else{b=c}}this.removeDataHash(e,b);this.dataHashDidChange(e);var d=this;this._propagateToChildren(e,function(h){d.unloadRecord(null,null,h,c)});return this},unloadRecords:function(d,a,g,e){var h,f,i,b,c,j;if(g===undefined){f=SC.typeOf(d)===SC.T_ARRAY;if(!f){c=d}if(a===undefined){h=f?d.length:1;for(i=0;i<h;i++){if(f){c=d[i]}g=this.storeKeysFor(c);this.unloadRecords(undefined,undefined,g,e)}}else{h=a.length;for(i=0;i<h;i++){if(f){c=d[i]||SC.Record}b=a?a[i]:undefined;this.unloadRecord(c,b,undefined,e)}}}else{h=g.length;for(i=0;i<h;i++){j=g?g[i]:undefined;this.unloadRecord(undefined,undefined,j,e)}}return this},destroyRecord:function(g,f,e){if(e===undefined){e=g.storeKeyFor(f)}var b=this.readStatus(e),c,a=SC.Record;if((b===a.BUSY_DESTROYING)||(b&a.DESTROYED)){return this}else{if(b===a.EMPTY){throw a.NOT_FOUND_ERROR}else{if(b&a.BUSY){throw a.BUSY_ERROR}else{if(b===a.READY_NEW){b=a.DESTROYED_CLEAN;this.removeDataHash(e,b)}else{b=a.DESTROYED_DIRTY}}}}this.writeStatus(e,b);this.dataHashDidChange(e);c=this.changelog;if(!c){c=this.changelog=SC.Set.create()}((b&a.DIRTY)?c.add(e):c.remove(e));this.changelog=c;if(this.get("commitRecordsAutomatically")){this.invokeLast(this.commitRecords)}var d=this;this._propagateToChildren(e,function(h){d.destroyRecord(null,null,h)});return this},destroyRecords:function(d,a,f){var g,e,h,b,c,i;if(f===undefined){g=a.length;e=SC.typeOf(d)===SC.T_ARRAY;if(!e){c=d}for(h=0;h<g;h++){if(e){c=d[h]||SC.Record}b=a?a[h]:undefined;this.destroyRecord(c,b,undefined)}}else{g=f.length;for(h=0;h<g;h++){i=f?f[h]:undefined;this.destroyRecord(undefined,undefined,i)}}return this},registerChildToParent:function(c,f,e){var h,b,d,g,a;b=this.childRecords||{};h=this.parentRecords||{};d=b[f];if(d){g=h[d];delete g[f]}a=h[c]||{};a[f]=e||YES;h[c]=a;b[f]=c;this.writeStatus(f,this.statuses[c]);this.childRecords=b;this.parentRecords=h},unregisterChildFromParent:function(c){var a,b;a=this.childRecords;b=a[c];if(b){delete this.parentRecords[b][c]}this.removeDataHash(c);delete this.records[c];delete a[c]},materializeParentRecord:function(c){var b,a;if(SC.none(c)){return null}a=this.childRecords;b=a?this.childRecords[c]:null;if(SC.none(b)){return null}return this.materializeRecord(b)},parentStoreKeyExists:function(b){if(SC.none(b)){return}var a=this.childRecords||{};return a[b]},_propagateToChildren:function(d,c){if(SC.none(this.parentRecords)){return}var b=this.parentRecords[d]||{};if(SC.none(c)){return}for(var a in b){if(b.hasOwnProperty(a)){c(parseInt(a,10))}}},recordDidChange:function(h,g,f,d,c){if(f===undefined){f=h.storeKeyFor(g)}var b=this.readStatus(f),e,a=SC.Record;if(b&a.BUSY){throw a.BUSY_ERROR}else{if(!(b&a.READY)){throw a.NOT_FOUND_ERROR}else{if(b!=a.READY_NEW){this.writeStatus(f,a.READY_DIRTY)}}}this.dataHashDidChange(f,null,c,d);e=this.changelog;if(!e){e=this.changelog=SC.Set.create()}e.add(f);this.changelog=e;if(this.get("commitRecordsAutomatically")){this.invokeLast(this.commitRecords)}return this},recordsDidChange:function(d,a,f){var g,e,h,b,c,i;if(f===undefined){g=a.length;e=SC.typeOf(d)===SC.T_ARRAY;if(!e){c=d}for(h=0;h<g;h++){if(e){c=d[h]||SC.Record}b=a?a[h]:undefined;i=f?f[h]:undefined;this.recordDidChange(c,b,i)}}else{g=f.length;for(h=0;h<g;h++){i=f?f[h]:undefined;this.recordDidChange(undefined,undefined,i)}}return this},retrieveRecords:function(f,m,b,c,q){var l=this._getDataSource(),h=SC.typeOf(f)===SC.T_ARRAY,k=SC.typeOf(q)===SC.T_ARRAY,o=(!b)?m.length:b.length,r=[],p=SC.Store.generateStoreKey(),g=SC.Record,a,j,e,n,i,d;if(!h){a=f}for(j=0;j<o;j++){if(b){e=b[j]}else{if(h){a=f[j]}e=a.storeKeyFor(m[j])}d=k?q[j]:q;n=this.readStatus(e);if((n==g.EMPTY)||(n==g.ERROR)||(n==g.DESTROYED_CLEAN)){this.writeStatus(e,g.BUSY_LOADING);this.dataHashDidChange(e,p,YES);r.push(e);this._setCallbackForStoreKey(e,d,k,b)}else{if(c){if(n&g.READY){this.writeStatus(e,g.BUSY_REFRESH|(n&3));this.dataHashDidChange(e,p,YES);r.push(e);this._setCallbackForStoreKey(e,d,k,b)}else{if((n==g.BUSY_DESTROYING)||(n==g.BUSY_CREATING)||(n==g.BUSY_COMMITTING)){throw g.BUSY_ERROR}else{if(n==g.DESTROYED_DIRTY){throw g.BAD_STATE_ERROR}}}}}}i=NO;if(l){i=l.retrieveRecords.call(l,this,r,m)}if(!i){o=r.length;p=SC.Store.generateStoreKey();for(j=0;j<o;j++){e=r[j];n=this.readStatus(e);if(n===g.BUSY_LOADING){this.writeStatus(e,g.ERROR);this.dataHashDidChange(e,p,YES)}else{if(n&g.BUSY_REFRESH){this.writeStatus(e,g.READY|(n&3));this.dataHashDidChange(e,p,YES)}}}r.length=0}return r},_TMP_RETRIEVE_ARRAY:[],_callback_queue:{},_setCallbackForStoreKey:function(d,e,b,c){var a=this._callback_queue;if(b){a[d]={callback:e,otherKeys:c}}else{a[d]=e}},_retreiveCallbackForStoreKey:function(c){var a=this._callback_queue,e=a[c],d,b;if(e){if(SC.typeOf(e)===SC.T_FUNCTION){e.call();delete a[c]}else{if(SC.typeOf(e)==SC.T_HASH){e.completed=YES;b=e.storeKeys;b.forEach(function(f){if(!a[f].completed){d=YES}});if(d){e.callback.call();b.forEach(function(f){delete a[f]})}}}}},_cancelCallback:function(b){var a=this._callback_queue;if(a[b]){delete a[b]}},retrieveRecord:function(g,f,b,c,e){var d=this._TMP_RETRIEVE_ARRAY,a;if(b){d[0]=b;b=d;f=null}else{d[0]=f;f=d}a=this.retrieveRecords(g,f,b,c,e);d.length=0;return a[0]},refreshRecord:function(d,c,a,b){return !!this.retrieveRecord(d,c,a,YES,b)},refreshRecords:function(b,c,d,e){var a=this.retrieveRecords(b,c,d,YES,e);return a&&a.length>0},commitRecords:function(f,n,b,q,u){var m=this._getDataSource(),h=SC.typeOf(f)===SC.T_ARRAY,k=SC.typeOf(u)===SC.T_ARRAY,c=[],j=[],l=[],r=SC.Store.generateStoreKey(),g=SC.Record,a,i,e,o,v,s,p,d;if(!f&&!n&&!b){b=this.changelog}p=b?b.get("length"):(n?n.get("length"):0);for(i=0;i<p;i++){if(b){e=b[i]}else{if(h){a=f[i]||SC.Record}else{a=f}e=a.storeKeyFor(n[i])}d=k?u[i]:u;o=this.readStatus(e);if(o==g.ERROR){throw g.NOT_FOUND_ERROR}else{if(o==g.READY_NEW){this.writeStatus(e,g.BUSY_CREATING);this.dataHashDidChange(e,r,YES);c.push(e);this._setCallbackForStoreKey(e,d,k,b)}else{if(o==g.READY_DIRTY){this.writeStatus(e,g.BUSY_COMMITTING);this.dataHashDidChange(e,r,YES);j.push(e);this._setCallbackForStoreKey(e,d,k,b)}else{if(o==g.DESTROYED_DIRTY){this.writeStatus(e,g.BUSY_DESTROYING);this.dataHashDidChange(e,r,YES);l.push(e);this._setCallbackForStoreKey(e,d,k,b)}else{if(o==g.DESTROYED_CLEAN){this.dataHashDidChange(e,r,YES)}}}}}}if(m&&(p>0||q)){s=m.commitRecords.call(m,this,c,j,l,q)}if(s&&!f&&!n){if(b===this.changelog){this.changelog=null}else{this.changelog.removeEach(b)}}return s},commitRecord:function(g,f,b,c,e){var d=this._TMP_RETRIEVE_ARRAY,a;if(f===undefined&&b===undefined){return NO}if(b!==undefined){d[0]=b;b=d;f=null}else{d[0]=f;f=d}a=this.commitRecords(g,f,b,c,e);d.length=0;return a},cancelRecords:function(e,b,i){var a=this._getDataSource(),g=SC.typeOf(e)===SC.T_ARRAY,k=SC.Record,j=[],f,h,l,c,d,m;h=(i===undefined)?b.length:i.length;for(l=0;l<h;l++){if(g){d=e[l]||SC.Record}else{d=e||SC.Record}c=b?b[l]:undefined;if(i===undefined){m=d.storeKeyFor(c)}else{m=i?i[l]:undefined}if(m){f=this.readStatus(m);if((f==k.EMPTY)||(f==k.ERROR)){throw k.NOT_FOUND_ERROR}j.push(m);this._cancelCallback(m)}}if(a){a.cancel.call(a,this,j)}return this},cancelRecord:function(e,d,b){var c=this._TMP_RETRIEVE_ARRAY,a;if(b!==undefined){c[0]=b;b=c;d=null}else{c[0]=d;d=c}a=this.cancelRecords(e,d,b);c.length=0;return this},loadRecord:function(g,d,f){var a=SC.Record,c,b,e;g=g||SC.Record;b=g.prototype.primaryKey;f=f||d[b];c=e=g.storeKeyFor(f);if(this.readStatus(e)&a.BUSY){this.dataSourceDidComplete(e,d,f)}else{this.pushRetrieve(g,f,d,e)}return c},loadRecords:function(d,m,a){var f=SC.typeOf(d)===SC.T_ARRAY,g=m.get("length"),h=[],i=SC.Record,c,b,k,j,e,l;if(!f){c=d||SC.Record;k=c.prototype.primaryKey}for(j=0;j<g;j++){e=m.objectAt(j);if(f){c=d.objectAt(j)||SC.Record;k=c.prototype.primaryKey}b=(a)?a.objectAt(j):e[k];h[j]=this.loadRecord(c,e,b)}return h},readError:function(a){var b=this.recordErrors;return b?b[a]:undefined},readQueryError:function(a){var b=this.queryErrors;return b?b[SC.guidFor(a)]:undefined},dataSourceDidCancel:function(c){var b=this.readStatus(c),a=SC.Record;if(!(b&a.BUSY)){throw a.BAD_STATE_ERROR}switch(b){case a.BUSY_LOADING:b=a.EMPTY;break;case a.BUSY_CREATING:b=a.READY_NEW;break;case a.BUSY_COMMITTING:b=a.READY_DIRTY;break;case a.BUSY_REFRESH_CLEAN:b=a.READY_CLEAN;break;case a.BUSY_REFRESH_DIRTY:b=a.READY_DIRTY;break;case a.BUSY_DESTROYING:b=a.DESTROYED_DIRTY;break;default:throw a.BAD_STATE_ERROR}this.writeStatus(c,b);this.dataHashDidChange(c,null,YES);this._cancelCallback(c);return this},dataSourceDidComplete:function(g,f,e){var c=this.readStatus(g),b=SC.Record,d;if(!(c&b.BUSY)){throw b.BAD_STATE_ERROR}if(c===b.BUSY_DESTROYING){throw b.BAD_STATE_ERROR}else{c=b.READY_CLEAN}this.writeStatus(g,c);if(f){this.writeDataHash(g,f,c)}if(e){SC.Store.replaceIdFor(g,e)}d=f||e?NO:YES;this.dataHashDidChange(g,null,d);var a=this.materializeRecord(g);if(a!=null){a.notifyPropertyChange("status")}this._retreiveCallbackForStoreKey(g);return this},dataSourceDidDestroy:function(d){var c=this.readStatus(d),b=SC.Record;if(!(c&b.BUSY)){throw b.BAD_STATE_ERROR}else{c=b.DESTROYED_CLEAN}this.removeDataHash(d,c);this.dataHashDidChange(d);var a=this.materializeRecord(d);if(a!=null){a.notifyPropertyChange("status")}this._retreiveCallbackForStoreKey(d);return this},dataSourceDidError:function(e,d){var c=this.readStatus(e),f=this.recordErrors,b=SC.Record;if(!(c&b.BUSY)){throw b.BAD_STATE_ERROR}else{c=b.ERROR}if(d&&d.isError){if(!f){f=this.recordErrors=[]}f[e]=d}this.writeStatus(e,c);this.dataHashDidChange(e,null,YES);var a=this.materializeRecord(e);if(a!=null){a.notifyPropertyChange("status")}this._retreiveCallbackForStoreKey(e);return this},pushRetrieve:function(f,e,c,d){var b=SC.Record,a;if(d===undefined){d=f.storeKeyFor(e)}a=this.readStatus(d);if(a==b.EMPTY||a==b.ERROR||a==b.READY_CLEAN||a==b.DESTROYED_CLEAN){a=b.READY_CLEAN;if(c===undefined){this.writeStatus(d,a)}else{this.writeDataHash(d,c,a)}if(e&&this.idFor(d)!==e){SC.Store.replaceIdFor(d,e)}this.dataHashDidChange(d);return d}return NO},pushDestroy:function(e,d,c){var b=SC.Record,a;if(c===undefined){c=e.storeKeyFor(d)}a=this.readStatus(c);if(a==b.EMPTY||a==b.ERROR||a==b.READY_CLEAN||a==b.DESTROYED_CLEAN){a=b.DESTROYED_CLEAN;this.removeDataHash(c,a);this.dataHashDidChange(c);return c}return NO},pushError:function(g,f,c,d){var b=SC.Record,a,e=this.recordErrors;if(d===undefined){d=g.storeKeyFor(f)}a=this.readStatus(d);if(a==b.EMPTY||a==b.ERROR||a==b.READY_CLEAN||a==b.DESTROYED_CLEAN){a=b.ERROR;if(c&&c.isError){if(!e){e=this.recordErrors=[]}e[d]=c}this.writeStatus(d,a);this.dataHashDidChange(d,null,YES);return d}return NO},loadQueryResults:function(b,a){return this.dataSourceDidFetchQuery(b,a)},dataSourceDidFetchQuery:function(c,a){var b=this._findQuery(c,YES,NO);if(b&&c.get("isRemote")){b.set("storeKeys",a)}return this._scstore_dataSourceDidFetchQuery(c)},_scstore_dataSourceDidFetchQuery:function(c){var b=this._findQuery(c,NO,NO),a=this.get("nestedStores"),d=a?a.get("length"):0;if(b){b.storeDidFetchQuery(c)}while(--d>=0){a[d]._scstore_dataSourceDidFetchQuery(c)}return this},dataSourceDidCancelQuery:function(a){return this._scstore_dataSourceDidCancelQuery(a,YES)},_scstore_dataSourceDidCancelQuery:function(d,a){var c=this._findQuery(d,a,NO),b=this.get("nestedStores"),e=b?b.get("length"):0;if(c){c.storeDidCancelQuery(d)}while(--e>=0){b[e]._scstore_dataSourceDidCancelQuery(d,NO)}return this},dataSourceDidErrorQuery:function(b,a){var c=this.queryErrors;if(a&&a.isError){if(!c){c=this.queryErrors={}}c[SC.guidFor(b)]=a}return this._scstore_dataSourceDidErrorQuery(b,YES)},_scstore_dataSourceDidErrorQuery:function(d,a){var c=this._findQuery(d,a,NO),b=this.get("nestedStores"),e=b?b.get("length"):0;if(c){c.storeDidErrorQuery(d)}while(--e>=0){b[e]._scstore_dataSourceDidErrorQuery(d,NO)}return this},init:function(){arguments.callee.base.apply(this,arguments);this.reset()},toString:function(){var b=this.get("name");if(!b){return arguments.callee.base.apply(this,arguments)}else{var a=arguments.callee.base.apply(this,arguments);return"%@ (%@)".fmt(b,a)}},idFor:function(a){return SC.Store.idFor(a)},recordTypeFor:function(a){return SC.Store.recordTypeFor(a)},storeKeyFor:function(b,a){return b.storeKeyFor(a)},storeKeyExists:function(b,a){return b.storeKeyExists(a)},storeKeysFor:function(f){var a=[],e=f&&f.isEnumerable,c,d,b;if(!this.statuses){return a}for(d in SC.Store.recordTypesByStoreKey){c=SC.Store.recordTypesByStoreKey[d];if(e){b=f.contains(c)}else{b=c===f}if(b&&this.statuses[d]){a.push(parseInt(d,10))}}return a},storeKeys:function(){var a=[],b;if(!this.statuses){return a}for(b in this.statuses){if(this.statuses[b]!=SC.Record.EMPTY){a.push(parseInt(b,10))}}return a},statusString:function(a){var b=this.materializeRecord(a);return b.statusString()}});SC.Store.mixin({CHAIN_CONFLICT_ERROR:new Error("Nested Store Conflict"),NO_PARENT_STORE_ERROR:new Error("Parent Store Required"),NESTED_STORE_UNSUPPORTED_ERROR:new Error("Unsupported In Nested Store"),NESTED_STORE_RETRIEVE_DIRTY_ERROR:new Error("Cannot Retrieve Dirty Record in Nested Store"),EDITABLE:"editable",LOCKED:"locked",INHERITED:"inherited",idsByStoreKey:[],recordTypesByStoreKey:{},queriesByStoreKey:[],nextStoreKey:1,generateStoreKey:function(){return this.nextStoreKey++},idFor:function(a){return this.idsByStoreKey[a]},queryFor:function(a){return this.queriesByStoreKey[a]},recordTypeFor:function(a){return this.recordTypesByStoreKey[a]},replaceIdFor:function(c,a){var d=this.idsByStoreKey[c],e,b;if(d!==a){e=this.recordTypeFor(c);if(!e){throw new Error("replaceIdFor: storeKey %@ does not exist".fmt(c))}this.idsByStoreKey[c]=a;b=e.storeKeysById();delete b[d];b[a]=c}return this},replaceRecordTypeFor:function(a,b){this.recordTypesByStoreKey[a]=b;return this}});sc_require("system/store");SC.NestedStore=SC.Store.extend({hasChanges:NO,parentStore:null,isNested:YES,lockOnRead:YES,locks:null,chainedChanges:null,find:function(a){if(a&&a.isQuery&&a.get("location")!==SC.Query.LOCAL){throw new Error("SC.Store#find() can only accept LOCAL queries in nested stores")}return arguments.callee.base.apply(this,arguments)},commitChanges:function(b){if(this.get("hasChanges")){var a=this.get("parentStore");a.commitChangesFromNestedStore(this,this.chainedChanges,b)}this.reset();return this},commitSuccessfulChanges:function(b){if(this.get("hasChanges")&&this.chainedChanges){var a=this.chainedChanges,i=this.dataHashes,g=this.revisions,d=this.statuses,f=this.editables,h=this.locks;var e=a.filter(function(j){var k=this.readStatus(j);return k===SC.Record.READY_CLEAN||k===SC.Record.DESTROYED_CLEAN},this);var c=this.get("parentStore");c.commitChangesFromNestedStore(this,e,b);e.forEach(function(j){if(i&&i.hasOwnProperty(j)){delete i[j]}if(g&&g.hasOwnProperty(j)){delete g[j]}if(f){delete f[j]}if(h){delete h[j]}if(d&&d.hasOwnProperty(j)){delete d[j]}a.remove(j)},this)}return this},discardChanges:function(){var c,f;if((c=this.records)&&(f=this.locks)){var b=this.get("parentStore"),h=b.revisions;var g=this.revisions,e,d,a;for(e in c){if(!c.hasOwnProperty(e)){continue}if(!(d=f[e])){continue}a=h[e];if((a!==d)||(g[e]>a)){this._notifyRecordPropertyChange(parseInt(e,10))}}}this.reset();this.flush();return this},destroy:function(){this.discardChanges();var a=this.get("parentStore");if(a){a.willDestroyNestedStore(this)}arguments.callee.base.apply(this,arguments);return this},reset:function(){var c,d,a;var b=this.get("parentStore");if(!b){throw SC.Store.NO_PARENT_STORE_ERROR}this.dataHashes=SC.beget(b.dataHashes);this.revisions=SC.beget(b.revisions);this.statuses=SC.beget(b.statuses);this.childRecords=b.childRecords?SC.beget(b.childRecords):{};this.parentRecords=b.parentRecords?SC.beget(b.parentRecords):{};this.chainedChanges=this.locks=this.editables=null;this.changelog=null;this.set("hasChanges",NO)},refreshQuery:function(b){var a=this.get("parentStore");if(a){a.refreshQuery(b)}return this},readError:function(b){var a=this.get("parentStore");return a?a.readError(b):null},readQueryError:function(b){var a=this.get("parentStore");return a?a.readQueryError(b):null},chainAutonomousStore:function(a,b){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},storeKeyEditState:function(b){var c=this.editables,a=this.locks;return(c&&c[b])?SC.Store.EDITABLE:(a&&a[b])?SC.Store.LOCKED:SC.Store.INHERITED},_lock:function(j){var k=this.locks,f,h,d,a,l,g,e,i;if(k&&k[j]){return this}if(!k){k=this.locks=[]}h=this.editables;if(h){h[j]=0}var b=this.get("parentStore"),c;while(b&&(c=b.storeKeyEditState(j))===SC.Store.INHERITED){b=b.get("parentStore")}if(b&&c===SC.Store.EDITABLE){d=this.childRecords[j];if(d){this._lock(d);a=this.parentRecords[d];if(a){l=a[j];g=l?SC.tupleForPropertyPath(l,this.dataHashes[d]):null;if(g){e=g[0];i=g[1]}this.dataHashes[j]=e&&i?e[i]:null}}else{this.dataHashes[j]=SC.clone(b.dataHashes[j],YES)}if(!h){h=this.editables=[]}h[j]=1}else{this.dataHashes[j]=b.dataHashes[j]}this.statuses[j]=this.statuses[j];f=this.revisions[j]=this.revisions[j];k[j]=f||1;return this},readDataHash:function(a){if(this.get("lockOnRead")){this._lock(a)}return this.dataHashes[a]},readEditableDataHash:function(a){this._lock(a);return arguments.callee.base.apply(this,arguments)},writeDataHash:function(d,f,b){var c=this.locks,g=NO,a;if(f){this.dataHashes[d]=f}else{this._lock(d);g=YES}if(b){this.statuses[d]=b}else{if(!g){this.statuses[d]=(this.statuses[d]||SC.Record.READY_NEW)}}if(!g){a=this.revisions[d]=this.revisions[d];if(!c){c=this.locks=[]}if(!c[d]){c[d]=a||1}}var e=this.editables;if(!e){e=this.editables=[]}e[d]=1;return this},removeDataHash:function(c,a){var b=this.locks;if(!b){b=this.locks=[]}if(!b[c]){b[c]=this.revisions[c]||1}return arguments.callee.base.apply(this,arguments)},dataHashDidChange:function(d,b,a,h){if(!b){b=SC.Store.generateStoreKey()}var c,e,g,i;c=SC.typeOf(d)===SC.T_ARRAY;if(c){e=d.length}else{e=1;i=d}var f=this.chainedChanges;if(!f){f=this.chainedChanges=SC.Set.create()}for(g=0;g<e;g++){if(c){i=d[g]}this._lock(i);this.revisions[i]=b;f.add(i);this._notifyRecordPropertyChange(i,a,h)}this.setIfChanged("hasChanges",YES);return this},commitChangesFromNestedStore:function(e,f,a){arguments.callee.base.apply(this,arguments);var b=this.get("parentStore"),h=b.revisions,c;var k=this.locks,g=this.chainedChanges,d,j;if(!k){k=this.locks=[]}if(!g){g=this.chainedChanges=SC.Set.create()}d=f.length;for(c=0;c<d;c++){j=f[c];if(!k[j]){k[j]=h[j]||1}g.add(j)}this.setIfChanged("hasChanges",g.get("length")>0);this.flush();return this},queryFor:function(c,a,b){return this.get("parentStore").queryFor(c,a,b)},retrieveRecords:function(f,m,b,c,s){var a=this.get("parentStore"),k,d,p,o=(!b)?m.length:b.length,i=SC.Record,n;if(c){for(k=0;k<o;k++){d=!b?a.storeKeyFor(f,m[k]):b[k];n=this.peekStatus(d);if(n&i.DIRTY){throw SC.Store.NESTED_STORE_RETRIEVE_DIRTY_ERROR}else{var g=this.dataHashes,j=this.revisions,h=this.statuses,l=this.editables,r=this.locks;var e=NO;var q=NO;if(g&&g.hasOwnProperty(d)){delete g[d];e=YES}if(j&&j.hasOwnProperty(d)){delete j[d];e=YES}if(l){delete l[d]}if(r){delete r[d]}if(h&&h.hasOwnProperty(d)){delete h[d];if(!e){q=YES}e=YES}if(e){this._notifyRecordPropertyChange(d,q)}}}}return a.retrieveRecords(f,m,b,c,s)},commitRecords:function(a,b,c){if(this.get("dataSource")){return arguments.callee.base.apply(this,arguments)}else{throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR}},commitRecord:function(c,b,a){if(this.get("dataSource")){return arguments.callee.base.apply(this,arguments)}else{throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR}},cancelRecords:function(a,b,c){if(this.get("dataSource")){return arguments.callee.base.apply(this,arguments)}else{throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR}},cancelRecord:function(c,b,a){if(this.get("dataSource")){return arguments.callee.base.apply(this,arguments)}else{throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR}},dataSourceDidCancel:function(a){if(this.get("dataSource")){return arguments.callee.base.apply(this,arguments)}else{throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR}},dataSourceDidComplete:function(c,b,a){if(this.get("dataSource")){return arguments.callee.base.apply(this,arguments)}else{throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR}},dataSourceDidDestroy:function(a){if(this.get("dataSource")){return arguments.callee.base.apply(this,arguments)}else{throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR}},dataSourceDidError:function(b,a){if(this.get("dataSource")){return arguments.callee.base.apply(this,arguments)}else{throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR}},pushRetrieve:function(d,c,a,b){if(this.get("dataSource")){return arguments.callee.base.apply(this,arguments)}else{throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR}},pushDestroy:function(c,b,a){if(this.get("dataSource")){return arguments.callee.base.apply(this,arguments)}else{throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR}},pushError:function(d,c,a,b){if(this.get("dataSource")){return arguments.callee.base.apply(this,arguments)}else{throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR}}});sc_require("models/record");SC.RecordArray=SC.Object.extend(SC.Enumerable,SC.Array,{store:null,query:null,storeKeys:null,_prevStoreKeys:null,status:SC.Record.EMPTY,isEditable:function(){var a=this.get("query");return a?a.get("isEditable"):YES}.property("query").cacheable(),length:function(){this.flush();var a=this.get("storeKeys");return a?a.get("length"):0}.property("storeKeys").cacheable(),_scra_records:null,objectAt:function(a){this.flush();var f=this._scra_records,e=this.get("storeKeys"),b=this.get("store"),d,c;if(!e||!b){return undefined}if(f&&(c=f[a])){return c}if(!f){this._scra_records=f=[]}d=e.objectAt(a);if(d){if(b.peekStatus(d)===SC.Record.EMPTY){b.retrieveRecord(null,null,d)}f[a]=c=b.materializeRecord(d)}return c},forEach:function(h,d){this.flush();var e=this._scra_records,b=this.get("storeKeys"),f=this.get("store"),c=b?b.get("length"):0,g,i,a;if(!b||!f){return this}if(!e){e=this._scra_records=[]}if(!d){d=this}for(g=0;g<c;g++){a=e[g];if(!a){a=e[g]=f.materializeRecord(b.objectAt(g))}h.call(d,a,g,this)}return this},replace:function(b,g,f){this.flush();var e=this.get("storeKeys"),a=f?(f.get?f.get("length"):f.length):0,c,d;if(!e){throw new Error("Unable to edit an SC.RecordArray that does not have its storeKeys property set.")}if(!this.get("isEditable")){throw SC.RecordArray.NOT_EDITABLE}d=[];for(c=0;c<a;c++){d[c]=f.objectAt(c).get("storeKey")}e.replace(b,g,d);return this},contains:function(a){return this.indexOf(a)>=0},indexOf:function(b,a){if(!SC.kindOf(b,SC.Record)){return -1}this.flush();var d=b.get("storeKey"),c=this.get("storeKeys");return c?c.indexOf(d,a):-1},lastIndexOf:function(b,a){if(!SC.kindOf(b,SC.Record)){return -1}this.flush();var d=b.get("storeKey"),c=this.get("storeKeys");return c?c.lastIndexOf(d,a):-1},add:function(a){if(!SC.kindOf(a,SC.Record)){return this}if(this.indexOf(a)<0){this.pushObject(a)}return this},remove:function(a){if(!SC.kindOf(a,SC.Record)){return this}this.removeObject(a);return this},find:function(a,b,c){if(b&&b.isQuery){return this.get("store").find(b.queryWithScope(this))}else{return a.apply(this,SC.$A(arguments).slice(1))}}.enhance(),refresh:function(){this.get("store").refreshQuery(this.get("query"));return this},reload:function(){this.flush(YES);return this},destroy:function(){if(!this.get("isDestroyed")){this.get("store").recordArrayWillDestroy(this)}arguments.callee.base.apply(this,arguments)},storeWillFetchQuery:function(c){var b=this.get("status"),a=SC.Record;if((b===a.EMPTY)||(b===a.ERROR)){b=a.BUSY_LOADING}if(b&a.READY){b=a.BUSY_REFRESH}this.setIfChanged("status",b);return this},storeDidFetchQuery:function(a){this.setIfChanged("status",SC.Record.READY_CLEAN);return this},storeDidCancelQuery:function(c){var b=this.get("status"),a=SC.Record;if(b===a.BUSY_LOADING){b=a.EMPTY}else{if(b===a.BUSY_REFRESH){b=a.READY_CLEAN}}this.setIfChanged("status",b);return this},storeDidErrorQuery:function(a){this.setIfChanged("status",SC.Record.ERROR);return this},storeDidChangeStoreKeys:function(b,a){var c=this.get("query");if(c.get("location")!==SC.Query.LOCAL){return this}if(!c.containsRecordTypes(a)){return this}var d=this._scq_changedStoreKeys;if(!d){d=this._scq_changedStoreKeys=SC.IndexSet.create()}d.addEach(b);this.set("needsFlush",YES);if(this.get("storeKeys")){this.flush()}return this},flush:function(a){if(this._insideFlush){this.set("needsFlush",YES);return this}if(!this.get("needsFlush")&&!a){return this}this.set("needsFlush",NO);var j=this.get("query"),m=this.get("store");if(!m||!j||j.get("location")!==SC.Query.LOCAL){return this}this._insideFlush=YES;var h=this.get("storeKeys"),f=this._scq_changedStoreKeys,g=NO,k=SC.Record,o=[],b=new Date(),d,e,c,p,n,i;var l=h;if(h&&!a){if(f){f.forEach(function(q){if(o.length>0||new Date()-b>SC.RecordArray.QUERY_MATCHING_THRESHOLD){o.push(q);return}e=m.peekStatus(q);if(!(e&k.EMPTY)&&!((e&k.DESTROYED)||(e===k.BUSY_DESTROYING))){d=m.materializeRecord(q);i=!!(d&&j.contains(d))}else{i=NO}if(i){if(h.indexOf(q)<0){if(!g){h=h.copy()}h.pushObject(q)}}else{if(h.indexOf(q)>=0){if(!g){h=h.copy()}h.removeObject(q)}}},this);g=YES}}else{if(n=j.get("scope")){p=n.flush().get("storeKeys")}else{if(c=j.get("expandedRecordTypes")){p=SC.IndexSet.create();c.forEach(function(q){p.addEach(m.storeKeysFor(q))})}}h=[];p.forEach(function(q){if(o.length>0||new Date()-b>SC.RecordArray.QUERY_MATCHING_THRESHOLD){o.push(q);return}e=m.peekStatus(q);if(!(e&k.EMPTY)&&!((e&k.DESTROYED)||(e===k.BUSY_DESTROYING))){d=m.materializeRecord(q);if(d&&j.contains(d)){h.push(q)}}});g=YES}if(o.length>0){this.invokeNext(function(){if(!this||this.get("isDestroyed")){return}this.set("needsFlush",YES);this._scq_changedStoreKeys=SC.IndexSet.create().addEach(o);this.flush()})}if(f){f.clear()}this._insideFlush=NO;if(g){if(h&&(h===l)){h=h.copy()}h=SC.Query.orderStoreKeys(h,j,m);if(SC.compare(l,h)!==0){this.set("storeKeys",SC.clone(h))}}return this},needsFlush:YES,isError:function(){return !!(this.get("status")&SC.Record.ERROR)}.property("status").cacheable(),errorValue:function(){return this.get("isError")?SC.val(this.get("errorObject")):null}.property("isError").cacheable(),errorObject:function(){if(this.get("isError")){var a=this.get("store");return a.readQueryError(this.get("query"))||SC.Record.GENERIC_ERROR}else{return null}}.property("isError").cacheable(),propertyWillChange:function(b){if(b==="storeKeys"){var c=this.get("storeKeys");var a=c?c.get("length"):0;this.arrayContentWillChange(0,a,0)}return arguments.callee.base.apply(this,arguments)},_storeKeysDidChange:function(){var d=this.get("storeKeys");var c=this._prevStoreKeys,a,b;if(d===c){return}if(c){c.removeArrayObservers({target:this,willChange:this.arrayContentWillChange,didChange:this._storeKeysContentDidChange});a=c.get("length")}else{a=0}this._prevStoreKeys=d;if(d){d.addArrayObservers({target:this,willChange:this.arrayContentWillChange,didChange:this._storeKeysContentDidChange});b=d.get("length")}else{b=0}this._storeKeysContentDidChange(0,a,b)}.observes("storeKeys"),addArrayObservers:function(){this.flush();return SC.Array.addArrayObservers.apply(this,arguments)},_storeKeysContentDidChange:function(c,a,b){if(this._scra_records){this._scra_records.length=0}this.arrayContentDidChange(c,a,b)},init:function(){arguments.callee.base.apply(this,arguments);this._storeKeysDidChange()}});SC.RecordArray.mixin({NOT_EDITABLE:SC.Error.desc("SC.RecordArray is not editable"),QUERY_MATCHING_THRESHOLD:100});Function.prototype.handleEvents=function(){this.isEventHandler=YES;this.events=arguments;return this};Function.prototype.stateObserves=function(){this.isStateObserveHandler=YES;this.args=SC.A(arguments);return this};SC.StatechartDelegate={isStatechartDelegate:YES,statechartUpdateLocationForState:function(b,a,c){SC.routes.set("location",a)},statechartAcquireLocationForState:function(a,b){return SC.routes.get("location")},statechartBindStateToRoute:function(b,d,a,c){SC.routes.add(a,d,c)},statechartShouldStateHandleTriggeredRoute:function(a,c,b){return YES},statechartStateCancelledHandlingTriggeredRoute:function(a,c,b){}};SC.StatePathMatcher=SC.Object.extend({state:null,expression:null,tokens:null,init:function(){arguments.callee.base.apply(this,arguments);this._parseExpression()},_parseExpression:function(){var h=this.expression?this.expression.split("."):[],b=h.length,f=0,c,e=null,d,g=[];for(;f<b;f+=1){c=h[f];if(c.indexOf("~")>=0){c=c.split("~");if(c.length>2){throw new Error("Invalid use of '~' at part %@".fmt(f))}d=SC.StatePathMatcher._ExpandToken.create({start:c[0],end:c[1]})}else{if(c==="this"){if(g.length>0){throw new Error("Invalid use of 'this' at part %@".fmt(f))}d=SC.StatePathMatcher._ThisToken.create()}else{d=SC.StatePathMatcher._BasicToken.create({value:c})}}d.owner=this;g.push(d)}this.set("tokens",g);var a=SC.clone(g);this._chain=e=a.pop();while(d=a.pop()){e.nextToken=d;e=d}},lastPart:function(){var c=this.get("tokens"),a=c?c.length:0,b=a>0?c[a-1]:null;return b.get("lastPart")}.property("tokens").cacheable(),match:function(a){this._stack=a.split(".");if(SC.empty(a)||SC.typeOf(a)!==SC.T_STRING){return NO}return this._chain.match()},_pop:function(){this._lastPopped=this._stack.pop();return this._lastPopped}});SC.StatePathMatcher._Token=SC.Object.extend({type:null,owner:null,nextToken:null,lastPart:null,match:function(){return NO}});SC.StatePathMatcher._BasicToken=SC.StatePathMatcher._Token.extend({type:"basic",value:null,lastPart:function(){return this.value}.property("value").cacheable(),match:function(){var a=this.owner._pop(),b=this.nextToken;if(this.value!==a){return NO}return b?b.match():YES}});SC.StatePathMatcher._ExpandToken=SC.StatePathMatcher._Token.extend({type:"expand",start:null,end:null,lastPart:function(){return this.end}.property("end").cacheable(),match:function(){var d=this.start,a=this.end,b,c=this.nextToken;b=this.owner._pop();if(b!==a){return NO}while(b=this.owner._pop()){if(b===d){return c?c.match():YES}}return NO}});SC.StatePathMatcher._ThisToken=SC.StatePathMatcher._Token.extend({type:"this",lastPart:"this",match:function(){var e=this.owner.state,c=e.get("substates"),a=c.length,d=0,b;b=this.owner._lastPopped;if(!b||this.owner._stack.length!==0){return NO}for(;d<a;d+=1){if(c[d].get("name")===b){return YES}}return NO}});SC.Async=SC.Object.extend({func:null,arg1:null,arg2:null,tryToPerform:function(d){var c=this.get("func"),b=this.get("arg1"),a=this.get("arg2"),e=SC.typeOf(c);if(e===SC.T_STRING){d.tryToPerform(c,b,a)}else{if(e===SC.T_FUNCTION){c.apply(d,[b,a])}}}});SC.Async.mixin({perform:function(c,b,a){return SC.Async.create({func:c,arg1:b,arg2:a})}});SC.State=SC.Object.extend({name:null,parentState:null,historyState:null,initialSubstate:null,substatesAreConcurrent:NO,substates:null,statechart:null,stateIsInitialized:NO,currentSubstates:null,enteredSubstates:null,representRoute:null,owner:function(){var c=this.get("statechart"),b=c?c.get("statechartOwnerKey"):null,a=c?c.get(b):null;return a?a:c}.property().cacheable(),statechartDelegate:function(){return this.getPath("statechart.statechartDelegate")}.property().cacheable(),location:function(b,c){var d=this.get("statechart"),a=this.get("statechartDelegate");if(c!==undefined){a.statechartUpdateLocationForState(d,c,this)}return a.statechartAcquireLocationForState(d,this)}.property().idempotent(),init:function(){arguments.callee.base.apply(this,arguments);this._registeredEventHandlers={};this._registeredStringEventHandlers={};this._registeredRegExpEventHandlers=[];this._registeredStateObserveHandlers={};this._registeredSubstatePaths={};this._registeredSubstates=[];this._isEnteringState=NO;this._isExitingState=NO;var a=this.get("statechart"),b=a?a.get("statechartOwnerKey"):null;if(a){a.addObserver(b,this,"_statechartOwnerDidChange")}},destroy:function(){var b=this.get("statechart"),c=b?b.get("statechartOwnerKey"):null;if(b){b.removeObserver(c,this,"_statechartOwnerDidChange")}var a=this.get("substates");if(a){a.forEach(function(d){d.destroy()})}this._teardownAllStateObserveHandlers();this.set("substates",null);this.set("currentSubstates",null);this.set("enteredSubstates",null);this.set("parentState",null);this.set("historyState",null);this.set("initialSubstate",null);this.set("statechart",null);this.notifyPropertyChange("owner");this._registeredEventHandlers=null;this._registeredStringEventHandlers=null;this._registeredRegExpEventHandlers=null;this._registeredStateObserveHandlers=null;this._registeredSubstatePaths=null;this._registeredSubstates=null;arguments.callee.base.apply(this,arguments)},initState:function(){if(this.get("stateIsInitialized")){return}this._registerWithParentStates();this._setupRouteHandling();var l=null,k=null,b=null,m=[],j=NO,h=this.get("initialSubstate"),f=this.get("substatesAreConcurrent"),d=this.get("statechart"),c=0,g=0,e=NO,a=null;this.set("substates",m);if(SC.kindOf(h,SC.HistoryState)&&h.isClass){a=this.createSubstate(h);this.set("initialSubstate",a);if(SC.none(a.get("defaultState"))){this.stateLogError("Initial substate is invalid. History state requires the name of a default state to be set");this.set("initialSubstate",null);a=null}}for(l in this){k=this[l];e=SC.typeOf(k)===SC.T_FUNCTION;if(e&&k.isEventHandler){this._registerEventHandler(l,k);continue}if(e&&k.isStateObserveHandler){this._registerStateObserveHandler(l,k);continue}if(e&&k.statePlugin){k=k.apply(this)}if(SC.kindOf(k,SC.State)&&k.isClass&&this[l]!==this.constructor){b=this._addSubstate(l,k);if(l===h){this.set("initialSubstate",b);j=YES}else{if(a&&a.get("defaultState")===l){a.set("defaultState",b);j=YES}}}}if(!SC.none(h)&&!j){this.stateLogError("Unable to set initial substate %@ since it did not match any of state's %@ substates".fmt(h,this))}if(m.length===0){if(!SC.none(h)){this.stateLogWarning("Unable to make %@ an initial substate since state %@ has no substates".fmt(h,this))}}else{if(m.length>0){b=this._addEmptyInitialSubstateIfNeeded();if(!b&&h&&f){this.set("initialSubstate",null);this.stateLogWarning("Can not use %@ as initial substate since substates are all concurrent for state %@".fmt(h,this))}}}this.notifyPropertyChange("substates");this.set("currentSubstates",[]);this.set("enteredSubstates",[]);this.set("stateIsInitialized",YES)},_setupRouteHandling:function(){var b=this.get("representRoute"),c=this.get("statechart"),a=this.get("statechartDelegate");if(SC.none(b)){return}if(this.get("isConcurrentState")){this.stateLogError("State %@ cannot handle route '%@' since state is concurrent".fmt(this,b));return}a.statechartBindStateToRoute(c,this,b,this.routeTriggered)},routeTriggered:function(f){if(this._isEnteringState){return}var e=this.get("statechart"),b=this.get("statechartDelegate"),d=this.get("location");var a={state:this,location:d,params:f,handler:this.routeTriggered};var c=this.createStateRouteHandlerContext(a);if(b.statechartShouldStateHandleTriggeredRoute(e,this,c)){this.handleTriggeredRoute(c)}else{b.statechartStateCancelledHandlingTriggeredRoute(e,this,c)}},createStateRouteHandlerContext:function(a){return SC.StateRouteHandlerContext.create(a)},handleTriggeredRoute:function(a){this.gotoState(this,a)},_addEmptyInitialSubstateIfNeeded:function(){var c=this.get("initialSubstate"),b=this.get("substatesAreConcurrent");if(c||b){return null}var a=this.createSubstate(SC.EmptyState);this.set("initialSubstate",a);this.get("substates").push(a);this[a.get("name")]=a;a.initState();this.stateLogWarning("state %@ has no initial substate defined. Will default to using an empty state as initial substate".fmt(this));return a},_addSubstate:function(c,d,a){var b=this.get("substates");a=SC.clone(a)||{};a.name=c;d=this.createSubstate(d,a);b.push(d);this[c]=d;d.initState();return d},addSubstate:function(c,e,b){if(SC.empty(c)){this.stateLogError("Can not add substate. name required");return null}if(this[c]!==undefined){this.stateLogError("Can not add substate '%@'. Already a defined property".fmt(c));return null}if(!this.get("stateIsInitialized")){this.stateLogError("Can not add substate '%@'. this state is not yet initialized".fmt(c));return null}var a=arguments.length;if(a===1){e=SC.State}else{if(a===2&&SC.typeOf(e)===SC.T_HASH){b=e;e=SC.State}}var d=SC.kindOf(e,SC.State)&&e.isClass;if(!d){this.stateLogError("Can not add substate '%@'. must provide a state class".fmt(c));return null}e=this._addSubstate(c,e,b);this._addEmptyInitialSubstateIfNeeded();this.notifyPropertyChange("substates");return e},createSubstate:function(b,a){a=a||{};return b.create({parentState:this,statechart:this.get("statechart")},a)},_registerEventHandler:function(b,e){var d=e.events,f=null,a=d.length,c=0;this._registeredEventHandlers[b]=e;for(;c<a;c+=1){f=d[c];if(SC.typeOf(f)===SC.T_STRING){this._registeredStringEventHandlers[f]={name:b,handler:e};continue}if(f instanceof RegExp){this._registeredRegExpEventHandlers.push({name:b,handler:e,regexp:f});continue}this.stateLogError("Invalid event %@ for event handler %@ in state %@".fmt(f,b,this))}},_registerStateObserveHandler:function(d,f){var e=0,c=f.args,b=c.length,a,g=YES;for(;e<b;e+=1){a=c[e];if(SC.typeOf(a)!==SC.T_STRING||SC.empty(a)){this.stateLogError("Invalid argument %@ for state observe handler %@ in state %@".fmt(a,d,this));g=NO}}if(!g){return}this._registeredStateObserveHandlers[d]=f.args},_registerWithParentStates:function(){var a=this.get("parentState");while(!SC.none(a)){a._registerSubstate(this);a=a.get("parentState")}},_registerSubstate:function(b){var c=b.pathRelativeTo(this);if(SC.none(c)){return}this._registeredSubstates.push(b);var a=this._registeredSubstatePaths;if(a[b.get("name")]===undefined){a[b.get("name")]={}}var d=a[b.get("name")];d[c]=b},pathRelativeTo:function(b){var c=this.get("name"),a=this.get("parentState");while(!SC.none(a)&&a!==b){c="%@.%@".fmt(a.get("name"),c);a=a.get("parentState")}if(a!==b&&b!==this){this.stateLogError("Can not generate relative path from %@ since it not a parent state of %@".fmt(b,this));return null}return c},getSubstate:function(f,h,e){if(!f){return null}var b=SC.typeOf(f);if(b===SC.T_OBJECT){return this._registeredSubstates.indexOf(f)>-1?f:null}if(b!==SC.T_STRING){this.stateLogError("Can not find matching subtype. value must be an object or string: %@".fmt(f));return null}var d=SC.StatePathMatcher.create({state:this,expression:f}),c=[],g;if(d.get("tokens").length===0){return null}var j=this._registeredSubstatePaths[d.get("lastPart")];if(!j){return this._notifySubstateNotFound(h,e,f)}for(g in j){if(d.match(g)){c.push(j[g])}}if(c.length===1){return c[0]}if(c.length>1){var i=[];for(g in j){i.push(g)}if(h){return this._notifySubstateNotFound(h,e,f,i)}var a="Can not find substate matching '%@' in state %@. Ambiguous with the following: %@";this.stateLogError(a.fmt(f,this.get("fullPath"),i.join(", ")))}return this._notifySubstateNotFound(h,e,f)},_notifySubstateNotFound:function(d,c,b,a){return d?d.call(c||this,this,b,a):null},getState:function(a){if(a===this.get("name")){return this}if(SC.kindOf(a,SC.State)){return a}return this.getSubstate(a,this._handleSubstateNotFound)},_handleSubstateNotFound:function(d,c,a){var b=this.get("parentState");if(b){return b.getState(c)}if(a){var e="Can not find state matching '%@'. Ambiguous with the following: %@";this.stateLogError(e.fmt(c,a.join(", ")))}return null},gotoState:function(c,a){var b=this.getState(c);if(!b){var d="can not go to state %@ from state %@. Invalid value.";this.stateLogError(d.fmt(c,this));return}var e=this.findFirstRelativeCurrentState(b);this.get("statechart").gotoState(b,e,false,a)},gotoHistoryState:function(d,a,b){var c=this.getState(d);if(!c){var e="can not go to history state %@ from state %@. Invalid value.";this.stateLogError(e.fmt(d,this));return}var f=this.findFirstRelativeCurrentState(c);this.get("statechart").gotoHistoryState(c,f,a,b)},resumeGotoState:function(){this.get("statechart").resumeGotoState()},stateIsCurrentSubstate:function(a){if(SC.typeOf(a)===SC.T_STRING){a=this.get("statechart").getState(a)}var b=this.get("currentSubstates");return !!b&&b.indexOf(a)>=0},stateIsEnteredSubstate:function(b){if(SC.typeOf(b)===SC.T_STRING){b=this.get("statechart").getState(b)}var a=this.get("enteredSubstates");return !!a&&a.indexOf(b)>=0},isRootState:function(){return this.getPath("statechart.rootState")===this}.property(),isCurrentState:function(){return this.stateIsCurrentSubstate(this)}.property("currentSubstates").cacheable(),isConcurrentState:function(){return this.getPath("parentState.substatesAreConcurrent")}.property(),isEnteredState:function(){return this.stateIsEnteredSubstate(this)}.property("enteredSubstates").cacheable(),hasSubstates:function(){return this.getPath("substates.length")>0}.property("substates"),hasCurrentSubstates:function(){var a=this.get("currentSubstates");return !!a&&a.get("length")>0}.property("currentSubstates").cacheable(),hasEnteredSubstates:function(){var a=this.get("enteredSubstates");return !!a&&a.get("length")>0}.property("enteredSubstates").cacheable(),findFirstRelativeCurrentState:function(b){if(this.get("isCurrentState")){return this}var a=this.get("currentSubstates")||[],d=a.get("length"),c=this.get("parentState");if(d===0){return c?c.findFirstRelativeCurrentState():null}if(d>1){b=this.getSubstate(b);if(b){return b.findFirstRelativeCurrentState()}}return a[0]},reenter:function(){if(this.get("isEnteredState")){this.gotoState(this)}else{SC.Logger.error("Can not re-enter state %@ since it is not an entered state in the statechart".fmt(this))}},tryToHandleEvent:function(g,d,b){var h=this.get("statechart"),c;if(this._registeredEventHandlers[g]){this.stateLogWarning("state %@ can not handle event '%@' since it is a registered event handler".fmt(this,g));return NO}if(this._registeredStateObserveHandlers[g]){this.stateLogWarning("state %@ can not handle event '%@' since it is a registered state observe handler".fmt(this,g));return NO}if(SC.typeOf(this[g])===SC.T_FUNCTION){h.stateWillTryToHandleEvent(this,g,g);c=(this[g](d,b)!==NO);h.stateDidTryToHandleEvent(this,g,g,c);return c}var f=this._registeredStringEventHandlers[g];if(f){h.stateWillTryToHandleEvent(this,g,f.name);c=(f.handler.call(this,g,d,b)!==NO);h.stateDidTryToHandleEvent(this,g,f.name,c);return c}var a=this._registeredRegExpEventHandlers.length,e=0;for(;e<a;e+=1){f=this._registeredRegExpEventHandlers[e];if(g.match(f.regexp)){h.stateWillTryToHandleEvent(this,g,f.name);c=(f.handler.call(this,g,d,b)!==NO);h.stateDidTryToHandleEvent(this,g,f.name,c);return c}}if(SC.typeOf(this["unknownEvent"])===SC.T_FUNCTION){h.stateWillTryToHandleEvent(this,g,"unknownEvent");c=(this.unknownEvent(g,d,b)!==NO);h.stateDidTryToHandleEvent(this,g,"unknownEvent",c);return c}return NO},enterState:function(a){},stateWillBecomeEntered:function(a){this._isEnteringState=YES},stateDidBecomeEntered:function(a){this._setupAllStateObserveHandlers();this._isEnteringState=NO},exitState:function(a){},stateWillBecomeExited:function(a){this._isExitingState=YES;this._teardownAllStateObserveHandlers()},stateDidBecomeExited:function(a){this._isExitingState=NO},_setupAllStateObserveHandlers:function(){this._configureAllStateObserveHandlers("addObserver")},_teardownAllStateObserveHandlers:function(){this._configureAllStateObserveHandlers("removeObserver")},_configureAllStateObserveHandlers:function(b){var g,h,f,a,j,d,c,e;for(g in this._registeredStateObserveHandlers){h=this._registeredStateObserveHandlers[g];for(c=0;c<h.length;c+=1){j=h[c];d=g;a=j.indexOf(".");if(a<0){this[b](j,this,d)}else{if(j.indexOf("*")===0){this[b](j.slice(1),this,d)}else{e=null;if(a===0){e=this;j=j.slice(1)}else{if(a===4&&j.slice(0,5)==="this."){e=this;j=j.slice(5)}else{if(a<0&&j.length===4&&j==="this"){e=this;j=""}}}SC.Observers[b](j,this,d,e)}}}}},performAsync:function(c,b,a){return SC.Async.perform(c,b,a)},respondsToEvent:function(d){if(this._registeredEventHandlers[d]){return false}if(SC.typeOf(this[d])===SC.T_FUNCTION){return true}if(this._registeredStringEventHandlers[d]){return true}if(this._registeredStateObserveHandlers[d]){return false}var a=this._registeredRegExpEventHandlers.length,b=0,c;for(;b<a;b+=1){c=this._registeredRegExpEventHandlers[b];if(d.match(c.regexp)){return true}}return SC.typeOf(this["unknownEvent"])===SC.T_FUNCTION},fullPath:function(){var a=this.getPath("statechart.rootState");if(!a){return this.get("name")}return this.pathRelativeTo(a)}.property("name","parentState").cacheable(),toString:function(){return this.get("fullPath")},_enteredSubstatesDidChange:function(){this.notifyPropertyChange("enteredSubstates")}.observes("*enteredSubstates.[]"),_currentSubstatesDidChange:function(){this.notifyPropertyChange("currentSubstates")}.observes("*currentSubstates.[]"),_statechartOwnerDidChange:function(){this.notifyPropertyChange("owner")},stateLogWarning:function(b){var a=this.get("statechart");a.statechartLogWarning(b)},stateLogError:function(b){var a=this.get("statechart");a.statechartLogError(b)}});SC.State.plugin=function(c){var a=SC.A(arguments);a.shift();var b=function(){var d=SC.objectForPropertyPath(c);if(!d){console.error("SC.State.plugin: Unable to determine path %@".fmt(c));return undefined}if(!d.isClass||!d.kindOf(SC.State)){console.error("SC.State.plugin: Unable to extend. %@ must be a class extending from SC.State".fmt(c));return undefined}return d.extend.apply(d,a)};b.statePlugin=YES;return b};SC.State.design=SC.State.extend;sc_require("system/state");SC.EMPTY_STATE_NAME="__EMPTY_STATE__";SC.EmptyState=SC.State.extend({name:SC.EMPTY_STATE_NAME,enterState:function(){var a="No initial substate was defined for state %@. Entering default empty state";this.stateLogWarning(a.fmt(this.get("parentState")))}});sc_require("system/state");SC.HistoryState=SC.Object.extend({isRecursive:NO,defaultState:null,statechart:null,parentState:null,state:function(){var b=this.get("defaultState"),a=this.getPath("parentState.historyState");return !!a?a:b}.property().cacheable(),parentHistoryStateDidChange:function(){this.notifyPropertyChange("state")}.observes("*parentState.historyState")});SC.StateRouteHandlerContext=SC.Object.extend({state:null,location:null,params:null,handler:null,retry:function(){var b=this.get("state"),c=this.get("params"),a=this.get("handler");if(SC.typeOf(a)===SC.T_STRING){a=b[a]}if(SC.typeOf(a)===SC.T_FUNCTION){a.apply(b,[c])}}});sc_require("system/state");sc_require("mixins/statechart_delegate");SC.StatechartManager={isResponderContext:YES,isStatechart:YES,statechartIsInitialized:NO,name:null,rootState:null,rootStateExample:SC.State,initialState:null,statesAreConcurrent:NO,statechartOwnerKey:"owner",owner:null,autoInitStatechart:YES,suppressStatechartWarnings:NO,delegate:null,statechartDelegate:function(){var a=this.get("delegate");return this.delegateFor("isStatechartDelegate",a)}.property("delegate"),initMixin:function(){if(this.get("autoInitStatechart")){this.initStatechart()}},destroyMixin:function(){var a=this.get("rootState");a.destroy();this.set("rootState",null);this.notifyPropertyChange("currentStates")},initStatechart:function(){if(this.get("statechartIsInitialized")){return}this._gotoStateLocked=NO;this._sendEventLocked=NO;this._pendingStateTransitions=[];this._pendingSentEvents=[];this.sendAction=this.sendEvent;var b=this.get("rootState"),c;if(!b){b=this._constructRootStateClass()}else{if(SC.typeOf(b)===SC.T_FUNCTION&&b.statePlugin){b=b.apply(this)}}if(!(SC.kindOf(b,SC.State)&&b.isClass)){c="Unable to initialize statechart. Root state must be a state class";this.statechartLogError(c);throw c}b=this.createRootState(b,{statechart:this,name:SC.ROOT_STATE_NAME});this.set("rootState",b);b.initState();if(SC.kindOf(b.get("initialSubstate"),SC.EmptyState)){c="Unable to initialize statechart. Root state must have an initial substate explicitly defined";this.statechartLogError(c);throw c}if(!SC.empty(this.get("initialState"))){var a="initialState";this.set(a,b.get(this.get(a)))}this.set("statechartIsInitialized",YES);this.gotoState(b)},createRootState:function(b,a){if(!a){a={}}b=b.create(a);return b},currentStates:function(){return this.getPath("rootState.currentSubstates")}.property().cacheable(),firstCurrentState:function(){var a=this.get("currentStates");return a?a.objectAt(0):null}.property("currentStates").cacheable(),currentStateCount:function(){return this.getPath("currentStates.length")}.property("currentStates").cacheable(),stateIsCurrentState:function(a){return this.get("rootState").stateIsCurrentSubstate(a)},enteredStates:function(){return this.getPath("rootState.enteredSubstates")}.property().cacheable(),stateIsEntered:function(a){return this.get("rootState").stateIsEnteredSubstate(a)},doesContainState:function(a){return !SC.none(this.getState(a))},getState:function(b){var a=this.get("rootState");return a===b?a:a.getSubstate(b)},gotoState:function(a,i,j,b){if(!this.get("statechartIsInitialized")){this.statechartLogError("can not go to state %@. statechart has not yet been initialized".fmt(a));return}if(this.get("isDestroyed")){this.statechartLogError("can not go to state %@. statechart is destroyed".fmt(this));return}var g=this._processGotoStateArgs(arguments);a=g.state;i=g.fromCurrentState;j=g.useHistory;b=g.context;var l=null,h=[],k=[],f=a,d=i,c;a=this.getState(a);if(SC.none(a)){this.statechartLogError("Can not to goto state %@. Not a recognized state in statechart".fmt(f));return}if(this._gotoStateLocked){this._pendingStateTransitions.push({state:a,fromCurrentState:i,useHistory:j,context:b});return}this._gotoStateLocked=YES;if(i){i=this.getState(i);if(SC.none(i)||!i.get("isCurrentState")){c="Can not to goto state %@. %@ is not a recognized current state in statechart";this.statechartLogError(c.fmt(f,d));this._gotoStateLocked=NO;return}}else{i=a.findFirstRelativeCurrentState();if(!i){i=this.get("firstCurrentState")}}if(!SC.none(i)){h=this._createStateChain(i)}k=this._createStateChain(a);l=this._findPivotState(h,k);if(l){if(l.get("substatesAreConcurrent")&&l!==a){this.statechartLogError("Can not go to state %@ from %@. Pivot state %@ has concurrent substates.".fmt(a,i,l));this._gotoStateLocked=NO;return}}var e=[];this._traverseStatesToExit(h.shift(),h,l,e);if(l!==a){this._traverseStatesToEnter(k.pop(),k,l,j,e)}else{this._traverseStatesToExit(l,[],null,e);this._traverseStatesToEnter(l,null,null,j,e)}this._gotoStateActions=e;this._executeGotoStateActions(a,e,null,b)},gotoStateActive:function(){return this._gotoStateLocked}.property(),gotoStateSuspended:function(){return this._gotoStateLocked&&!!this._gotoStateSuspendedPoint}.property(),resumeGotoState:function(){if(!this.get("gotoStateSuspended")){this.statechartLogError("Can not resume goto state since it has not been suspended");return}var a=this._gotoStateSuspendedPoint;this._executeGotoStateActions(a.gotoState,a.actions,a.marker,a.context)},_executeGotoStateActions:function(g,f,b,c){var e=null,a=f.length,d=null;b=SC.none(b)?0:b;for(;b<a;b+=1){this._currentGotoStateAction=e=f[b];switch(e.action){case SC.EXIT_STATE:d=this._exitState(e.state,c);break;case SC.ENTER_STATE:d=this._enterState(e.state,e.currentState,c);break}if(SC.kindOf(d,SC.Async)){this._gotoStateSuspendedPoint={gotoState:g,actions:f,marker:b+1,context:c};d.tryToPerform(e.state);return}}this.beginPropertyChanges();this.notifyPropertyChange("currentStates");this.notifyPropertyChange("enteredStates");this.endPropertyChanges();this._cleanupStateTransition()},_cleanupStateTransition:function(){this._currentGotoStateAction=null;this._gotoStateSuspendedPoint=null;this._gotoStateActions=null;this._gotoStateLocked=NO;this._flushPendingStateTransition();if(!this._sendEventLocked&&!this._gotoStateLocked){this._flushPendingSentEvents()}},_exitState:function(d,b){var c;if(d.get("currentSubstates").indexOf(d)>=0){c=d.get("parentState");while(c){c.get("currentSubstates").removeObject(d);c=c.get("parentState")}}c=d;while(c){c.get("enteredSubstates").removeObject(d);c=c.get("parentState")}d.set("currentSubstates",[]);d.stateWillBecomeExited(b);var a=this.exitState(d,b);d.stateDidBecomeExited(b);d._traverseStatesToExit_skipState=NO;return a},exitState:function(b,a){return b.exitState(a)},_enterState:function(d,e,b){var c=d.get("parentState");if(c&&!d.get("isConcurrentState")){c.set("historyState",d)}if(e){c=d;while(c){c.get("currentSubstates").pushObject(d);c=c.get("parentState")}}c=d;while(c){c.get("enteredSubstates").pushObject(d);c=c.get("parentState")}d.stateWillBecomeEntered(b);var a=this.enterState(d,b);d.stateDidBecomeEntered(b);return a},enterState:function(b,a){if(b.enterStateByRoute&&SC.kindOf(a,SC.StateRouteHandlerContext)){return b.enterStateByRoute(a)}else{return b.enterState(a)}},gotoHistoryState:function(f,e,c,d){if(!this.get("statechartIsInitialized")){this.statechartLogError("can not go to state %@'s history state. Statechart has not yet been initialized".fmt(f));return}var b=this._processGotoStateArgs(arguments);f=b.state;e=b.fromCurrentState;c=b.useHistory;d=b.context;f=this.getState(f);if(!f){this.statechartLogError("Can not to goto state %@'s history state. Not a recognized state in statechart".fmt(f));return}var a=f.get("historyState");if(!c){if(a){this.gotoState(a,e,d)}else{this.gotoState(f,e,d)}}else{this.gotoState(f,e,YES,d)}},sendEvent:function(b,f,e){if(this.get("isDestroyed")){this.statechartLogError("can not send event %@. statechart is destroyed".fmt(b));return}var c=NO,l=this,k=NO,g=this.get("currentStates").slice(),j={},h=0,d=0,a=null;if(this._sendEventLocked||this._gotoStateLocked){this._pendingSentEvents.push({event:b,arg1:f,arg2:e});return}this._sendEventLocked=YES;h=g.get("length");for(;d<h;d+=1){k=NO;a=g[d];if(!a.get("isCurrentState")){continue}while(!k&&a){if(!j[a.get("fullPath")]){k=a.tryToHandleEvent(b,f,e);j[a.get("fullPath")]=YES}if(!k){a=a.get("parentState")}else{c=YES}}}this._sendEventLocked=NO;if(!this._sendEventLocked&&!this._gotoStateLocked){l=this._flushPendingSentEvents()}return c?this:(l?this:null)},stateWillTryToHandleEvent:function(c,b,a){this._stateHandleEventInfo={state:c,event:b,handler:a}},stateDidTryToHandleEvent:function(c,b,a,d){this._stateHandleEventInfo=null},_createStateChain:function(b){var a=[];while(b){a.push(b);b=b.get("parentState")}return a},_findPivotState:function(c,b){if(c.length===0||b.length===0){return null}var a=c.find(function(e,d){if(b.indexOf(e)>=0){return YES}});return a},_traverseStatesToExit:function(b,j,d,g){if(!b||b===d){return}if(b.get("substatesAreConcurrent")){var e=0,f=b.get("currentSubstates"),h=f.length,c=null;for(;e<h;e+=1){c=f[e];if(c._traverseStatesToExit_skipState===YES){continue}var a=this._createStateChain(c);this._traverseStatesToExit(a.shift(),a,b,g)}}g.push({action:SC.EXIT_STATE,state:b});if(b.get("isCurrentState")){b._traverseStatesToExit_skipState=YES}this._traverseStatesToExit(j.shift(),j,d,g)},_traverseStatesToEnter:function(b,d,h,f,c){if(!b){return}if(h){if(b!==h){this._traverseStatesToEnter(d.pop(),d,h,f,c)}else{this._traverseStatesToEnter(d.pop(),d,null,f,c)}}else{if(!d||d.length===0){var g={action:SC.ENTER_STATE,state:b,currentState:NO};c.push(g);var e=b.get("initialSubstate"),a=b.get("historyState");if(b.get("substatesAreConcurrent")){this._traverseConcurrentStatesToEnter(b.get("substates"),null,f,c)}else{if(b.get("hasSubstates")&&a&&f){this._traverseStatesToEnter(a,null,null,f,c)}else{if(e){if(SC.kindOf(e,SC.HistoryState)){if(!f){f=e.get("isRecursive")}e=e.get("state")}this._traverseStatesToEnter(e,null,null,f,c)}else{g.currentState=YES}}}}else{if(d.length>0){c.push({action:SC.ENTER_STATE,state:b});var i=d.pop();this._traverseStatesToEnter(i,d,null,f,c);if(b.get("substatesAreConcurrent")){this._traverseConcurrentStatesToEnter(b.get("substates"),i,f,c)}}}}},respondsTo:function(d){if(this.get("isDestroyed")){this.statechartLogError("can not respond to event %@. statechart is destroyed".fmt(d));return false}var b=this.get("currentStates"),a=b.get("length"),c=0,e=null;for(;c<a;c+=1){e=b.objectAt(c);while(e){if(e.respondsToEvent(d)){return true}e=e.get("parentState")}}return SC.typeOf(this[d])===SC.T_FUNCTION},tryToPerform:function(d,c,b){if(!this.respondsTo(d)){return NO}if(SC.typeOf(this[d])===SC.T_FUNCTION){var a=this[d](c,b);if(a!==NO){return YES}}return !!this.sendEvent(d,c,b)},invokeStateMethod:function(k,j,c){if(k==="unknownEvent"){this.statechartLogError("can not invoke method unkownEvent");return}j=SC.A(arguments);j.shift();var f=j.length,m=f>0?j[f-1]:null,l=SC.typeOf(m)===SC.T_FUNCTION?j.pop():null,e=this.get("currentStates"),d=0,b=null,h={},a,n,g=0;f=e.get("length");for(;d<f;d+=1){b=e.objectAt(d);while(b){if(h[b.get("fullPath")]){break}h[b.get("fullPath")]=YES;a=b[k];if(SC.typeOf(a)===SC.T_FUNCTION&&!a.isEventHandler){n=a.apply(b,j);if(l){l.call(this,b,n)}g+=1;break}b=b.get("parentState")}}return g===1?n:undefined},_traverseConcurrentStatesToEnter:function(d,c,f,b){var e=0,a=d.length,g=null;for(;e<a;e+=1){g=d[e];if(g!==c){this._traverseStatesToEnter(g,null,null,f,b)}}},_flushPendingStateTransition:function(){if(!this._pendingStateTransitions){this.statechartLogError("Unable to flush pending state transition. _pendingStateTransitions is invalid");return}var a=this._pendingStateTransitions.shift();if(!a){return}this.gotoState(a.state,a.fromCurrentState,a.useHistory,a.context)},_flushPendingSentEvents:function(){var a=this._pendingSentEvents.shift();if(!a){return null}return this.sendEvent(a.event,a.arg1,a.arg2)},_processGotoStateArgs:function(b){var d={state:null,fromCurrentState:null,useHistory:false,context:null},a=null,c=null;b=SC.$A(b);b=b.filter(function(e){return e!==undefined});a=b.length;if(a<1){return d}d.state=b[0];if(a===2){c=b[1];switch(SC.typeOf(c)){case SC.T_BOOL:d.useHistory=c;break;case SC.T_HASH:case SC.T_OBJECT:if(!SC.kindOf(c,SC.State)){d.context=c}break;default:d.fromCurrentState=c}}else{if(a===3){c=b[1];if(SC.typeOf(c)===SC.T_BOOL){d.useHistory=c;d.context=b[2]}else{d.fromCurrentState=c;c=b[2];if(SC.typeOf(c)===SC.T_BOOL){d.useHistory=c}else{d.context=c}}}else{d.fromCurrentState=b[1];d.useHistory=b[2];d.context=b[3]}}return d},_constructRootStateClass:function(){var d="rootStateExample",e=this.get(d),b=this.get("initialState"),c=this.get("statesAreConcurrent"),a=0,i,g,f,h={};if(SC.typeOf(e)===SC.T_FUNCTION&&e.statePlugin){e=e.apply(this)}if(!(SC.kindOf(e,SC.State)&&e.isClass)){this._logStatechartCreationError("Invalid root state example");return null}if(c&&!SC.empty(b)){this._logStatechartCreationError("Can not assign an initial state when states are concurrent")}else{if(c){h.substatesAreConcurrent=YES}else{if(SC.typeOf(b)===SC.T_STRING){h.initialSubstate=b}else{this._logStatechartCreationError("Must either define initial state or assign states as concurrent");return null}}}for(i in this){if(i===d){continue}g=this[i];f=SC.typeOf(g)===SC.T_FUNCTION;if(f&&g.statePlugin){g=g.apply(this)}if(SC.kindOf(g,SC.State)&&g.isClass&&this[i]!==this.constructor){h[i]=g;a+=1}}if(a===0){this._logStatechartCreationError("Must define one or more states");return null}return e.extend(h)},_logStatechartCreationError:function(a){SC.Logger.error("Unable to create statechart for %@: %@.".fmt(this,a))},statechartLogError:function(a){SC.Logger.error("ERROR %@: %@".fmt(this.get("statechartLogPrefix"),a))},statechartLogWarning:function(a){if(this.get("suppressStatechartWarnings")){return}SC.Logger.warn("WARN %@: %@".fmt(this.get("statechartLogPrefix"),a))},statechartLogPrefix:function(){var b=SC._object_className(this.constructor),a=this.get("name"),c;if(SC.empty(a)){c="%@<%@>".fmt(b,SC.guidFor(this))}else{c="%@<%@, %@>".fmt(b,a,SC.guidFor(this))}return c}.property().cacheable()};SC.mixin(SC.StatechartManager,SC.StatechartDelegate,SC.DelegateSupport);SC.ROOT_STATE_NAME="__ROOT_STATE__";SC.EXIT_STATE=0;SC.ENTER_STATE=1;SC.Statechart=SC.Object.extend(SC.StatechartManager,{autoInitStatechart:NO});SC.Statechart.design=SC.Statechart.extend;
/*!
 * ==========================================================================
 * SproutCore -- JavaScript Application Framework
 * Copyright ©2008-2011 Apple Inc. All rights reserved.
 * Copyright 2006-2011, Strobe Inc. and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a 
 * copy of this software and associated documentation files (the "Software"), 
 * to deal in the Software without restriction, including without limitation 
 * the rights to use, copy, modify, merge, publish, distribute, sublicense, 
 * and/or sell copies of the Software, and to permit persons to whom the 
 * Software is furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in 
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR 
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE 
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
 * DEALINGS IN THE SOFTWARE.
 * 
 * SproutCore and the SproutCore logo are trademarks of Strobe Inc.
 * 
 * For more information about SproutCore, visit http://www.sproutcore.com
 * 
 * ==========================================================================
 */
window.SCTable=SC.Object.create({SORT_DIRECTION_NONE:null,SORT_DIRECTION_ASCENDING:"asc",SORT_DIRECTION_DESCENDING:"desc"});SCTable.Column={isColumn:YES,name:null,valueKey:null,iconKey:null,width:100,canResize:YES,canSort:YES,classNames:null};SCTable.TableColumnsDelegate={isTableColumnsDelegate:YES,beginColumnResizeDrag:function(a,c,b){},updateColumnResizeDrag:function(a,c,b,d){},endColumnResizeDrag:function(a,c,b,d){},tableColumnDidRequestSort:function(b,a,c){}};SCTable.TableDelegate={isTableDelegate:YES,tableDidRequestSort:function(a,d,c,b,e){return NO},renderTableCellContent:function(a,b,e,f,d,c){return b.push('<div class="text">%@</div>'.fmt(SC.RenderContext.escapeHTML(String(e?e.get(d.get("valueKey")):null))))},mouseDownOnTableRow:function(a,c,b){}};SCTable.TableRowView=SC.View.extend(SC.Control,{classNames:"sctable-row-view",isMouseOver:NO,displayProperties:["isMouseOver"],shouldHighlightRowOnMouseOver:NO,tableDelegate:function(){return this.getPath("displayDelegate.tableDelegate")}.property("displayDelegate").cacheable(),willDestroyLayer:function(){this.set("content",null)},contentPropertyDidChange:function(b,a){this.displayDidChange()},render:function(d,a){var b=this.get("tableDelegate");var g=this.getPath("displayDelegate.columns");var e=0,j,c;var i=this.get("content");var h=this.get("contentIndex");var f=[(h%2===0)?"even":"odd"];if(this.get("isMouseOver")){f.push("hover")}d=d.addClass(f);if(g&&g.isEnumerable){g.forEach(function(l,k){var m=l.get("iconKey");c=l.get("width")||0;d=d.push('<div class="cell col-%@ %@" style="left: %@px; top: 0px; bottom: 0px; width: %@px;">'.fmt(k,(m?"has-icon":""),e,c));d=b.renderTableCellContent(this,d,i,h,l,k);d=m?d.push('<div class="icon %@"></div></div>'.fmt(i.get(m))):d.push("</div>");e+=c},this)}},mouseDown:function(b){var a=this.get("tableDelegate");if(a){a.mouseDownOnTableRow(this.get("displayDelegate"),this,b)}return NO},mouseEntered:function(a){if(this.get("shouldHighlightRowOnMouseOver")){this.set("isMouseOver",YES)}},mouseExited:function(a){if(this.get("isMouseOver")||this.get("shouldHighlightRowOnMouseOver")){this.set("isMouseOver",NO)}}});SCTable.TableRowView.mixin({isReusableInCollections:YES});sc_require("mixins/table_columns_delegate");SCTable.TableHeaderView=SC.CollectionView.extend(SCTable.TableColumnsDelegate,{classNames:"sctable-header-view",sort:null,ownerTableView:null,ghostActsLikeCursor:YES,isResizeDragInProgress:NO,shouldLiveResize:YES,insertionPointView:SC.View.extend({backgroundColor:"#57647F",layout:{left:0,top:0,bottom:0,width:2},render:function(a,b){if(b){a.push('<div class="anchor"></div>')}}}),layoutForContentIndex:function(e){var c=this.get("content");var d=0,b,a;if(c&&c.isEnumerable){c.forEach(function(g,f){if(f<e){d+=g.get("width")}else{if(f===e){b=g.get("width")}}});a={left:d,width:b}}return a},createItemView:function(e,a,b){var c=this.get("sort");var d=c?c.valueKey:null;if(b.content&&(b.content.get("valueKey")===d)){b.sortDirection=c?c.direction:null}else{delete b.sortDirection}return e.create(b)},tableColumnDidRequestSort:function(c,b,d){var a=this.get("ownerTableView");if(a&&a.tableColumnDidRequestSort){a.tableColumnDidRequestSort(c,b,d)}},collectionViewDragViewFor:function(b,d){var c;var a=30;var e=[];d.forEach(function(f){var g=this.itemViewForContentIndex(f);if(g){e.push(g.getPath("content.name"))}},this);c=SC.View.create({layout:{width:100,height:a*e.length},backgroundColor:"gray",content:e,rowHeight:a,createChildViews:function(){var j=[];var h=this.get("content"),f;var g=this.get("rowHeight");if(h){for(f=0;f<h.length;f++){j.push(this.createChildView(SC.LabelView,{layout:{left:0,right:0,top:g*f,height:g},value:h[f]}))}}this.set("childViews",j)}});return c},insertionIndexForLocation:function(e,f){var c=this.get("childViews");var b,d;var a=-1;if(c){for(b=0;b<c.length;b++){d=c[b].get("frame");if((e.x>=d.x)&&(e.x<=(d.x+d.width))){a=[b,SC.DROP_AFTER];if((e.x-d.x)<((d.x+d.width)-e.x)){a[1]=SC.DROP_BEFORE}break}}}return a},showInsertionPoint:function(b,e){var a=this._insertionPointView;var d=b.get("frame");var c=d.x;if(!a){a=this._insertionPointView=this.get("insertionPointView").create()}if(e&SC.DROP_AFTER){if(b.get("contentIndex")===(this.get("length")-1)){c=d.x+d.width-a.get("frame").width}else{c=d.x+d.width}}a.adjust({left:c});this.appendChild(a)},hideInsertionPoint:function(){if(this._insertionPointView){this._insertionPointView.removeFromParent().destroy()}this._insertionPointView=null},beginColumnResizeDrag:function(){this.set("isResizeDragInProgress",YES)},updateColumnResizeDrag:function(a,c,b,d){if(this.get("shouldLiveResize")){this._resizeData={evt:a,col:c,colIndex:b,newWidth:d};this.invokeOnce("_overrideColumnWidth")}},endColumnResizeDrag:function(){this.set("isResizeDragInProgress",NO);this._resizeData=null},_sortDidChange:function(){this.invokeOnce("_updateSortView")}.observes("sort"),_updateSortView:function(){var f=this.get("childViews"),d,b;var c=this.get("sort");var e=c?c.valueKey:null;var a=c?c.direction:null;if(f){for(d=0;d<f.length;d++){b=f[d].get("content");if(b){if(b.get("valueKey")===e){f[d].set("sortDirection",a)}else{f[d].set("sortDirection",null)}}}}},_overrideColumnWidth:function(){var b,d,a,c,e,f;if(this._resizeData){b=this.get("content");d=b?b.get("length"):0;this.beginPropertyChanges();if(this._resizeData.colIndex<d){c=this.itemViewForContentIndex(this._resizeData.colIndex);if(c){c.adjust({width:this._resizeData.newWidth});e=c.get("frame").x+this._resizeData.newWidth}for(a=this._resizeData.colIndex+1;a<d;a++){c=this.itemViewForContentIndex(a);f=c.get("frame");c.adjust({left:e});e=e+f.width}}this.endPropertyChanges()}},_resizeData:null,_insertionPointView:null});sc_require("views/table_row");sc_require("views/table_header");sc_require("mixins/table_columns_delegate");SCTable.TableView=SC.View.extend(SCTable.TableColumnsDelegate,SCTable.TableDelegate,{classNames:"sctable-table-view",content:null,selection:null,rowHeight:28,showAlternatingRows:NO,shouldHighlightRowOnMouseOver:NO,target:null,action:null,isVerticalScrollerVisible:YES,columns:null,columnSelection:null,canReorderColumns:YES,sort:null,headerHeight:28,delegate:null,tableDelegate:function(){var a=this.get("delegate"),b=this.get("content");return this.delegateFor("isTableDelegate",a,b)}.property("delegate","content").cacheable(),tableWidth:function(){var b=this.get("columns");var a=0;if(b&&b.isEnumerable){b.forEach(function(c){a+=(c.get("width")||0)},this)}return a}.property().cacheable(),init:function(){arguments.callee.base.apply(this,arguments);this._updateColumnObservers()},createChildViews:function(){var e=[],c,d;var b=this.get("headerHeight");var a=this.get("tableWidth");d=this.createChildView(SC.ScrollView,{classNames:"sctable-body-scroll-view",layout:{left:0,right:0,top:b+1,bottom:0},borderStyle:SC.BORDER_NONE,contentView:SC.ListView.extend({layout:{right:0,minWidth:a},contentBinding:SC.Binding.from("content",this),columnsBinding:SC.Binding.from("columns",this),selectionBinding:SC.Binding.from("selection",this),contentValueKey:"name",exampleView:SCTable.TableRowView.extend({shouldHighlightRowOnMouseOver:this.get("shouldHighlightRowOnMouseOver")}),rowHeight:this.get("rowHeight"),tableDelegateBinding:SC.Binding.from("tableDelegate",this).oneWay(),showAlternatingRowsBinding:SC.Binding.from("showAlternatingRows",this).oneWay(),targetBinding:SC.Binding.from("target",this).oneWay(),actionBinding:SC.Binding.from("action",this).oneWay()}),isVerticalScrollerVisibleBinding:SC.Binding.from("isVerticalScrollerVisible",this)});this._bodyScrollView=d;this._bodyView=d.get("contentView");c=this.createChildView(SC.ScrollView,{classNames:"sctable-header-scroll-view",layout:{left:0,right:0,top:0,height:b},borderStyle:SC.BORDER_NONE,contentView:SCTable.TableHeaderView.extend({layout:{right:0,minWidth:a},exampleView:SCTable.TableColumnHeaderView,contentBinding:SC.Binding.from("columns",this),selectionBinding:SC.Binding.from("columnSelection",this),sortBinding:SC.Binding.from("sort",this),tableDelegate:SC.Binding.from("tableDelegate",this).oneWay(),ownerTableView:this,allowDeselectAll:YES,canReorderContentBinding:SC.Binding.from("canReorderColumns",this),target:this,action:"_onColumnAction",actOnSelect:YES}),hasVerticalScroller:NO,horizontalScrollerView:SC.ScrollerView.extend({scrollbarThickness:0}),horizontalScrollOffsetBinding:SC.Binding.from("horizontalScrollOffset",d)});this._headerScrollView=c;this._headerView=c.get("contentView");this.set("childViews",[d,c])},reload:function(){if(this._headerView){this._headerView.reload()}if(this._bodyView){this._bodyView.reload()}},tableColumnDidRequestSort:function(b,a,c){if(b.get("canSort")){this._sortData={col:b,colIndex:a,direction:c};this.invokeOnce("_sortContent")}},_sortContent:function(){var a=this.get("tableDelegate");var f=this.get("content");var d=this._sortData?this._sortData.direction:SCTable.SORT_DIRECTION_NONE;var c=this._sortData?this._sortData.col:null;var b=this._sortData?this._sortData.colIndex:null;var g=NO,e;if(a&&a.tableDidRequestSort&&!a.tableDidRequestSort(this,f,c,b,d)){if(SC.kindOf(f,SC.ArrayController)){if(d===SCTable.SORT_DIRECTION_ASCENDING){f.set("orderBy","ASC %@".fmt(c.get("valueKey")))}else{if(d===SCTable.SORT_DIRECTION_DESCENDING){f.set("orderBy","DESC %@".fmt(c.get("valueKey")))}else{f.set("orderBy",null)}}g=YES}else{if(SC.typeOf(f)===SC.T_ARRAY){e=c.get("valueKey");if(d===SCTable.SORT_DIRECTION_ASCENDING){f.sort(function(i,h){i=i?i.get(e):null;h=h?h.get(e):null;if(i<h){return -1}else{if(i>h){return 1}}return 0})}else{if(d===SCTable.SORT_DIRECTION_DESCENDING){f.sort(function(i,h){i=i?i.get(e):null;h=h?h.get(e):null;if(i<h){return 1}else{if(i>h){return -1}}return 0})}}if(f.isEnumerable){f.enumerableContentDidChange()}g=YES}else{console.warn("Error in TableView(%@)._sortContent(): Content type is not recognized as sortable.".fmt(this))}}if(g){this.set("sort",{valueKey:c.get("valueKey"),direction:d})}}this._sortData=null},_isVerticalScrollerVisibleDidChange:function(){this.invokeOnce("_updateTableLayout")}.observes("isVerticalScrollerVisible"),_tableDelegateDidChange:function(){this.invokeOnce("reload")}.observes("tableDelegate"),_columnsDidChange:function(){this.notifyPropertyChange("tableWidth");this.invokeOnce("_updateColumnObservers");this.invokeOnce("reload")}.observes("*columns.[]"),_tableWidthDidChange:function(){this.invokeOnce("_updateTableLayout")}.observes("tableWidth"),_tv_frameDidChange:function(){this.invokeOnce("_updateTableLayout")}.observes("frame"),_updateTableLayout:function(){var a=this.get("tableWidth");var b=this._bodyScrollView.getPath("containerView.frame").width;var c=Math.max(a,b);this.beginPropertyChanges();if(this._headerScrollView){this._headerScrollView.adjust({right:this._bodyScrollView.get("frame").width-this._bodyScrollView.getPath("containerView.frame").width})}if(this._headerView){this._headerView.adjust({minWidth:c})}if(this._bodyView){this._bodyView.adjust({minWidth:c})}this.endPropertyChanges()},_updateColumnObservers:function(){var c=this.get("columns");var a={},b;if(!this._columnIndex){this._columnIndex={}}if(c&&c.isEnumerable){c.forEach(function(e,d){var f=SC.guidFor(e);if(!this._columnIndex[f]){this._columnIndex[f]=e;e.addObserver("width",this,"_columnWidthDidChange")}a[f]=YES},this)}for(b in this._columnIndex){if(this._columnIndex.hasOwnProperty(b)&&!a[b]){this._columnIndex[b].removeObserver("width",this,"_columnWidthDidChange");delete this._columnIndex[b]}}},_columnWidthDidChange:function(c,b,d,a){this.notifyPropertyChange("tableWidth");this.invokeOnce("reload")},_onColumnAction:function(d){var e=d?d.get("selection"):null;var b,c,a=SCTable.SORT_DIRECTION_ASCENDING;if(e&&(e.get("length")===1)&&this._lastColumnSelection&&(this._lastColumnSelection.get("firstObject")===e.get("firstObject"))){b=e.get("firstObject");c=this.get("sort");if(c&&(c.valueKey===b.get("valueKey"))&&(c.direction===SCTable.SORT_DIRECTION_ASCENDING)){a=SCTable.SORT_DIRECTION_DESCENDING}this.tableColumnDidRequestSort(b,this.get("columns").indexOf(b),a)}this._lastColumnSelection=e},_headerScrollView:null,_headerView:null,_bodyScrollView:null,_bodyView:null,_columnIndex:null,_sortData:null,_lastColumnSelection:null});SCTable.TableColumnHeaderView=SC.View.extend(SC.Control,{classNames:"sctable-column-header-view",sortDirection:null,displayProperties:["sortDirection","isMouseOver"],minWidth:30,isMouseOver:NO,contentPropertyDidChange:function(){this.displayDidChange()},render:function(b,e){var a=["sort-indicator"];var c=this.get("sortDirection");var d=this.getPath("content.classNames");if(!SC.none(c)){a.push(c)}b=b.addClass("col-%@".fmt(this.get("contentIndex")));if(this.get("isMouseOver")){b=b.addClass("hover")}if(d){b=b.addClass(d)}b=b.begin("div").addClass("col-border").end();b=b.begin("div").addClass("col-name").text(this.getPath("content.name")).end();if(this.getPath("content.canSort")){b=b.begin("div").addClass(a).end()}if(this.getPath("content.canResize")){b=b.begin("div").addClass("resize-handle").end()}},willDestroyLayer:function(){this.set("content",null);this.set("tableDelegate",null)},mouseDown:function(b){var c=NO,a;this._isDraggingHandle=NO;this._mouseDownInfo=null;if(b.target.className==="resize-handle"){this._isDraggingHandle=YES;this._mouseDownInfo={didMove:NO,startPageX:b.pageX,startWidth:this.get("frame").width};a=this.get("displayDelegate");if(a&&a.isTableColumnsDelegate){a.beginColumnResizeDrag(b,this.get("content"),this.get("contentIndex"))}c=YES}return c},mouseDragged:function(b){var a,c;if(this._isDraggingHandle){this._mouseDownInfo.didMove=YES;a=this.get("displayDelegate");if(a&&a.isTableColumnsDelegate){c=Math.max(this._mouseDownInfo.startWidth+b.pageX-this._mouseDownInfo.startPageX,this.get("minWidth"));a.updateColumnResizeDrag(b,this.get("content"),this.get("contentIndex"),c)}}return this._isDraggingHandle},mouseUp:function(b){var a,d,c=this._isDraggingHandle;if(this._isDraggingHandle){d=Math.max(this._mouseDownInfo.startWidth+b.pageX-this._mouseDownInfo.startPageX,this.get("minWidth"));this.setPathIfChanged("content.width",d);a=this.get("displayDelegate");if(a&&a.isTableColumnsDelegate){a.endColumnResizeDrag(b,this.get("content"),this.get("contentIndex"),d)}}this._isDraggingHandle=NO;this._mouseDownInfo=null;return c},mouseEntered:function(){if(!this.getPath("displayDelegate.isResizeDragInProgress")){this.setIfChanged("isMouseOver",YES)}},mouseExited:function(){if(!this.getPath("displayDelegate.isResizeDragInProgress")){this.set("isMouseOver",NO)}},_isDraggingHandle:NO,_mouseDownInfo:null});SC.EmptyTheme=SC.BaseTheme.create({name:"sc-empty-theme"});SC.Theme.addTheme(SC.EmptyTheme);SC.AceTheme=SC.BaseTheme.create({name:"ace",description:"A SproutCore built-in theme by Alex Iskander and contributors. Only supports browsers that implement CSS3."});SC.Theme.addTheme(SC.AceTheme);SC.AceTheme.PointLeft=SC.AceTheme.subtheme("point-left","point-left");SC.AceTheme.PointRight=SC.AceTheme.subtheme("point-right","point-right");SC.AceTheme.Capsule=SC.AceTheme.subtheme("capsule","capsule");SC.AceTheme.Dark=SC.AceTheme.subtheme("dark");SC.defaultTheme="ace";sc_require("theme");SC.AceTheme.Dark.PointLeft=SC.AceTheme.Dark.subtheme("point-left","point-left");SC.AceTheme.Dark.PointRight=SC.AceTheme.Dark.subtheme("point-right","point-right");SC.AceTheme.Dark.PointRight=SC.AceTheme.Dark.subtheme("capsule","capsule");SC.AceTheme.SourceList=SC.AceTheme.subtheme("source-list");sc_require("theme");SC.AceTheme.Popover=SC.AceTheme.Dark.subtheme("popover");SC.AceTheme.addTheme(SC.AceTheme.Popover);SC.AceTheme.SolidPopover=SC.AceTheme.Popover.subtheme("solid");SC.AceTheme.addTheme(SC.AceTheme.SolidPopover.create({name:"solid-popover"}));sc_require("resources/picker/popover/popover");SC.AceTheme.Popover.pickerRenderDelegate=SC.RenderDelegate.create({className:"picker",render:function(e,b){var a=e.get("preferType");var d=e.get("pointerPos");var c=e.get("pointerPosY");if(a==SC.PICKER_POINTER||a==SC.PICKER_MENU_POINTER){b.addClass(d)}},update:function(e,d){var a=e.get("preferType");var c=e.get("pointerPos");var b=e.get("pointerPosY");if(a==SC.PICKER_POINTER||a==SC.PICKER_MENU_POINTER){d.addClass(c)}}});SC.AceTheme.Popover.workspaceRenderDelegate=SC.RenderDelegate.create({className:"workspace",render:function(b,a){a.setClass({"top-toolbar":b.get("hasTopToolbar"),"bottom-toolbar":b.get("hasBottomToolbar")});a=a.begin("div").addClass("popover-background");this.includeSlices(b,a,SC.NINE_SLICE);a.push("<div class = 'sc-pointer'></div>");a=a.end()},update:function(b,a){a.setClass({"top-toolbar":b.get("hasTopToolbar"),"bottom-toolbar":b.get("hasBottomToolbar")})}});var map,latlng;var autocomplete,input;var drawingManager,selectedShape=[];var mapsengine=null;var acpStart,acpEnd,start,end;var directionsDisplay=null,directionsService;Google=SC.Application.create({NAMESPACE:"Google",VERSION:"0.1.0",store:SC.Store.create().from("Google.RailsDataSource"),getFormattedAddress:function(a){var b=SC.Request.getUrl(a).set("attachIdentifyingHeaders",NO).set("isAsynchronous",NO).json().notify(this,function(d){var c=d.response().results[0].formatted_address;Google.apiController.set("formatted_address",c)}).send()},showHideDirectionsService:function(){var a=document.getElementById("directions_view");if(a.classList.contains("hidden")){a.classList.remove("hidden")}else{a.classList.add("hidden")}},calcRoute:function(){var c=Google.apiController.get("directions_start");var a=Google.apiController.get("directions_end");var b={origin:c,destination:a,travelMode:google.maps.TravelMode.TRANSIT};if(directionsDisplay!=null){directionsDisplay.setMap(null);directionsDisplay.setpanel(null);directionsDisplay=null}directionsDisplay=new google.maps.DirectionsRenderer();directionsDisplay.setMap(map);directionsDisplay.setPanel(document.getElementById("directions_panel"));directionsService.route(b,function(e,d){if(d==google.maps.DirectionsStatus.OK){directionsDisplay.setDirections(e);directionsDisplay.getPanel().style.display="block"}});Google.apiController.set("directions_start",null);Google.apiController.set("directions_end",null)},showHideDrawing:function(){this.clearAll();if(drawingManager.get("drawingControl")){drawingManager.set("drawingControl",false);drawingManager.set("drawingMode",null)}else{drawingManager.set("drawingControl",true);this.hideGeocoder()}},clearAll:function(){if(selectedShape.length>0){for(var b=0;b<selectedShape.length;b++){selectedShape[b].overlay.setMap(null)}}selectedShape=[];drawingManager.set("drawingMode",null);var c=document.getElementById("directions_panel");c.style.display="none";if(directionsDisplay!=null){directionsDisplay.setMap(null);directionsDisplay.setPanel(null);directionsDisplay=null}var c=document.getElementById("directions_view");if(!c.classList.contains("hidden")){c.classList.add("hidden")}this.hideGeocoder();start.value="";end.value="";if(markerClusterer){markerClusterer.clearMarkers()}if(circle){circle.setMap(null)}google.maps.event.trigger(map,"rightclick");var d=document.getElementById("table_view");if(!d.classList.contains("hidden")){d.classList.add("hidden")}var a=document.getElementById("chart_view");if(!a.classList.contains("hidden")){a.classList.add("hidden")}drawingManager.set("drawingControl",false);if(mapsengine){mapsengine.setMap(null);mapsengine=null}},hideGeocoder:function(){var a=document.getElementById("autocomplete_view");if(!a.classList.contains("hidden")){a.classList.add("hidden")}},showGeocoder:function(){var a=document.getElementById("autocomplete_view");if(a.classList.contains("hidden")){a.classList.remove("hidden")}},showHideGeocoder:function(){this.clearAll();var a=document.getElementById("autocomplete_view");if(a.classList.contains("hidden")){this.showGeocoder()}else{this.hideGeocoder()}},showHideMapsEngine:function(){this.clearAll();if(mapsengine==null){mapsengine=new google.maps.visualization.MapsEngineLayer({mapId:"15448824248391641042-05414812628978701557",layerKey:"prov100"});mapsengine.setMap(map)}else{mapsengine.setMap(null);mapsengine=null}},showHideCluster:function(){this.clearAll();var a=Google.apiController.get("schools");if(a.length==0){Google.store.find("Google.SCHOOLS_QUERY")}else{if(markerClusterer.getMarkers().length>0){markerClusterer.clearMarkers()}else{markerClusterer.addMarkers(a)}}},showHideTable:function(){var g=[];var e=Google.apiController.get("schools");for(var c=0;c<e.length;c++){var f={id:e[c].id,name:e[c].title,lng:e[c].lng,lat:e[c].lat};g.push(f)}var a=[];var b=Google.sampleDataColumns;g.forEach(function(i,d){a.push(SC.Object.create(i))},this);Google.set("sampleRows",a);Google.set("sampleData",null);var h=document.getElementById("table_view");if(h.classList.contains("hidden")){h.classList.remove("hidden")}else{h.classList.add("hidden")}},showHideChart:function(){var b=Google.apiController.get("chartno");b=(b+1>2)?0:b+1;Google.apiController.set("chartno",b);if(b==0){$("#chart_view").highcharts({chart:{type:"bar"},title:{text:"Fruit Consumption"},xAxis:{categories:["Apples","Bananas","Oranges"]},yAxis:{title:{text:"Fruit eaten"}},series:[{name:"Jane",data:[1,0,4]},{name:"John",data:[5,7,3]}]})}else{if(b==1){$("#chart_view").highcharts({title:{text:"Monthly Average Temperature",x:-20},subtitle:{text:"Source: WorldClimate.com",x:-20},xAxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},yAxis:{title:{text:"Temperature (°C)"},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:"°C"},legend:{layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:0},series:[{name:"Tokyo",data:[7,6.9,9.5,14.5,18.2,21.5,25.2,26.5,23.3,18.3,13.9,9.6]},{name:"New York",data:[-0.2,0.8,5.7,11.3,17,22,24.8,24.1,20.1,14.1,8.6,2.5]},{name:"Berlin",data:[-0.9,0.6,3.5,8.4,13.5,17,18.6,17.9,14.3,9,3.9,1]},{name:"London",data:[3.9,4.2,5.7,8.5,11.9,15.2,17,16.6,14.2,10.3,6.6,4.8]}]})}else{if(b==2){$("#chart_view").highcharts({chart:{zoomType:"x"},title:{text:"USD to EUR exchange rate from 2006 through 2008"},subtitle:{text:document.ontouchstart===undefined?"Click and drag in the plot area to zoom in":"Pinch the chart to zoom in"},xAxis:{type:"datetime",minRange:14*24*3600000},yAxis:{title:{text:"Exchange rate"}},legend:{enabled:false},plotOptions:{area:{fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,Highcharts.getOptions().colors[0]],[1,Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get("rgba")]]},marker:{radius:2},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},series:[{type:"area",name:"USD to EUR",pointInterval:24*3600*1000,pointStart:Date.UTC(2006,0,1),data:[0.8446,0.8445,0.8444,0.8451,0.8418,0.8264,0.8258,0.8232,0.8233,0.8258,0.8283,0.8278,0.8256,0.8292,0.8239,0.8239,0.8245,0.8265,0.8261,0.8269,0.8273,0.8244,0.8244,0.8172,0.8139,0.8146,0.8164,0.82,0.8269,0.8269,0.8269,0.8258,0.8247,0.8286,0.8289,0.8316,0.832,0.8333,0.8352,0.8357,0.8355,0.8354,0.8403,0.8403,0.8406,0.8403,0.8396,0.8418,0.8409,0.8384,0.8386,0.8372,0.839,0.84,0.8389,0.84,0.8423,0.8423,0.8435,0.8422,0.838,0.8373,0.8316,0.8303,0.8303,0.8302,0.8369,0.84,0.8385,0.84,0.8401,0.8402,0.8381,0.8351,0.8314,0.8273,0.8213,0.8207,0.8207,0.8215,0.8242,0.8273,0.8301,0.8346,0.8312,0.8312,0.8312,0.8306,0.8327,0.8282,0.824,0.8255,0.8256,0.8273,0.8209,0.8151,0.8149,0.8213,0.8273,0.8273,0.8261,0.8252,0.824,0.8262,0.8258,0.8261,0.826,0.8199,0.8153,0.8097,0.8101,0.8119,0.8107,0.8105,0.8084,0.8069,0.8047,0.8023,0.7965,0.7919,0.7921,0.7922,0.7934,0.7918,0.7915,0.787,0.7861,0.7861,0.7853,0.7867,0.7827,0.7834,0.7766,0.7751,0.7739,0.7767,0.7802,0.7788,0.7828,0.7816,0.7829,0.783,0.7829,0.7781,0.7811,0.7831,0.7826,0.7855,0.7855,0.7845,0.7798,0.7777,0.7822,0.7785,0.7744,0.7743,0.7726,0.7766,0.7806,0.785,0.7907,0.7912,0.7913,0.7931,0.7952,0.7951,0.7928,0.791,0.7913,0.7912,0.7941,0.7953,0.7921,0.7919,0.7968,0.7999,0.7999,0.7974,0.7942,0.796,0.7969,0.7862,0.7821,0.7821,0.7821,0.7811,0.7833,0.7849,0.7819,0.7809,0.7809,0.7827,0.7848,0.785,0.7873,0.7894,0.7907,0.7909,0.7947,0.7987,0.799,0.7927,0.79,0.7878,0.7878,0.7907,0.7922,0.7937,0.786,0.787,0.7838,0.7838,0.7837,0.7836,0.7806,0.7825,0.7798,0.777,0.777,0.7772,0.7793,0.7788,0.7785,0.7832,0.7865,0.7865,0.7853,0.7847,0.7809,0.778,0.7799,0.78,0.7801,0.7765,0.7785,0.7811,0.782,0.7835,0.7845,0.7844,0.782,0.7811,0.7795,0.7794,0.7806,0.7794,0.7794,0.7778,0.7793,0.7808,0.7824,0.787,0.7894,0.7893,0.7882,0.7871,0.7882,0.7871,0.7878,0.79,0.7901,0.7898,0.7879,0.7886,0.7858,0.7814,0.7825,0.7826,0.7826,0.786,0.7878,0.7868,0.7883,0.7893,0.7892,0.7876,0.785,0.787,0.7873,0.7901,0.7936,0.7939,0.7938,0.7956,0.7975,0.7978,0.7972,0.7995,0.7995,0.7994,0.7976,0.7977,0.796,0.7922,0.7928,0.7929,0.7948,0.797,0.7953,0.7907,0.7872,0.7852,0.7852,0.786,0.7862,0.7836,0.7837,0.784,0.7867,0.7867,0.7869,0.7837,0.7827,0.7825,0.7779,0.7791,0.779,0.7787,0.78,0.7807,0.7803,0.7817,0.7799,0.7799,0.7795,0.7801,0.7765,0.7725,0.7683,0.7641,0.7639,0.7616,0.7608,0.759,0.7582,0.7539,0.75,0.75,0.7507,0.7505,0.7516,0.7522,0.7531,0.7577,0.7577,0.7582,0.755,0.7542,0.7576,0.7616,0.7648,0.7648,0.7641,0.7614,0.757,0.7587,0.7588,0.762,0.762,0.7617,0.7618,0.7615,0.7612,0.7596,0.758,0.758,0.758,0.7547,0.7549,0.7613,0.7655,0.7693,0.7694,0.7688,0.7678,0.7708,0.7727,0.7749,0.7741,0.7741,0.7732,0.7727,0.7737,0.7724,0.7712,0.772,0.7721,0.7717,0.7704,0.769,0.7711,0.774,0.7745,0.7745,0.774,0.7716,0.7713,0.7678,0.7688,0.7718,0.7718,0.7728,0.7729,0.7698,0.7685,0.7681,0.769,0.769,0.7698,0.7699,0.7651,0.7613,0.7616,0.7614,0.7614,0.7607,0.7602,0.7611,0.7622,0.7615,0.7598,0.7598,0.7592,0.7573,0.7566,0.7567,0.7591,0.7582,0.7585,0.7613,0.7631,0.7615,0.76,0.7613,0.7627,0.7627,0.7608,0.7583,0.7575,0.7562,0.752,0.7512,0.7512,0.7517,0.752,0.7511,0.748,0.7509,0.7531,0.7531,0.7527,0.7498,0.7493,0.7504,0.75,0.7491,0.7491,0.7485,0.7484,0.7492,0.7471,0.7459,0.7477,0.7477,0.7483,0.7458,0.7448,0.743,0.7399,0.7395,0.7395,0.7378,0.7382,0.7362,0.7355,0.7348,0.7361,0.7361,0.7365,0.7362,0.7331,0.7339,0.7344,0.7327,0.7327,0.7336,0.7333,0.7359,0.7359,0.7372,0.736,0.736,0.735,0.7365,0.7384,0.7395,0.7413,0.7397,0.7396,0.7385,0.7378,0.7366,0.74,0.7411,0.7406,0.7405,0.7414,0.7431,0.7431,0.7438,0.7443,0.7443,0.7443,0.7434,0.7429,0.7442,0.744,0.7439,0.7437,0.7437,0.7429,0.7403,0.7399,0.7418,0.7468,0.748,0.748,0.749,0.7494,0.7522,0.7515,0.7502,0.7472,0.7472,0.7462,0.7455,0.7449,0.7467,0.7458,0.7427,0.7427,0.743,0.7429,0.744,0.743,0.7422,0.7388,0.7388,0.7369,0.7345,0.7345,0.7345,0.7352,0.7341,0.7341,0.734,0.7324,0.7272,0.7264,0.7255,0.7258,0.7258,0.7256,0.7257,0.7247,0.7243,0.7244,0.7235,0.7235,0.7235,0.7235,0.7262,0.7288,0.7301,0.7337,0.7337,0.7324,0.7297,0.7317,0.7315,0.7288,0.7263,0.7263,0.7242,0.7253,0.7264,0.727,0.7312,0.7305,0.7305,0.7318,0.7358,0.7409,0.7454,0.7437,0.7424,0.7424,0.7415,0.7419,0.7414,0.7377,0.7355,0.7315,0.7315,0.732,0.7332,0.7346,0.7328,0.7323,0.734,0.734,0.7336,0.7351,0.7346,0.7321,0.7294,0.7266,0.7266,0.7254,0.7242,0.7213,0.7197,0.7209,0.721,0.721,0.721,0.7209,0.7159,0.7133,0.7105,0.7099,0.7099,0.7093,0.7093,0.7076,0.707,0.7049,0.7012,0.7011,0.7019,0.7046,0.7063,0.7089,0.7077,0.7077,0.7077,0.7091,0.7118,0.7079,0.7053,0.705,0.7055,0.7055,0.7045,0.7051,0.7051,0.7017,0.7,0.6995,0.6994,0.7014,0.7036,0.7021,0.7002,0.6967,0.695,0.695,0.6939,0.694,0.6922,0.6919,0.6914,0.6894,0.6891,0.6904,0.689,0.6834,0.6823,0.6807,0.6815,0.6815,0.6847,0.6859,0.6822,0.6827,0.6837,0.6823,0.6822,0.6822,0.6792,0.6746,0.6735,0.6731,0.6742,0.6744,0.6739,0.6731,0.6761,0.6761,0.6785,0.6818,0.6836,0.6823,0.6805,0.6793,0.6849,0.6833,0.6825,0.6825,0.6816,0.6799,0.6813,0.6809,0.6868,0.6933,0.6933,0.6945,0.6944,0.6946,0.6964,0.6965,0.6956,0.6956,0.695,0.6948,0.6928,0.6887,0.6824,0.6794,0.6794,0.6803,0.6855,0.6824,0.6791,0.6783,0.6785,0.6785,0.6797,0.68,0.6803,0.6805,0.676,0.677,0.677,0.6736,0.6726,0.6764,0.6821,0.6831,0.6842,0.6842,0.6887,0.6903,0.6848,0.6824,0.6788,0.6814,0.6814,0.6797,0.6769,0.6765,0.6733,0.6729,0.6758,0.6758,0.675,0.678,0.6833,0.6856,0.6903,0.6896,0.6896,0.6882,0.6879,0.6862,0.6852,0.6823,0.6813,0.6813,0.6822,0.6802,0.6802,0.6784,0.6748,0.6747,0.6747,0.6748,0.6733,0.665,0.6611,0.6583,0.659,0.659,0.6581,0.6578,0.6574,0.6532,0.6502,0.6514,0.6514,0.6507,0.651,0.6489,0.6424,0.6406,0.6382,0.6382,0.6341,0.6344,0.6378,0.6439,0.6478,0.6481,0.6481,0.6494,0.6438,0.6377,0.6329,0.6336,0.6333,0.6333,0.633,0.6371,0.6403,0.6396,0.6364,0.6356,0.6356,0.6368,0.6357,0.6354,0.632,0.6332,0.6328,0.6331,0.6342,0.6321,0.6302,0.6278,0.6308,0.6324,0.6324,0.6307,0.6277,0.6269,0.6335,0.6392,0.64,0.6401,0.6396,0.6407,0.6423,0.6429,0.6472,0.6485,0.6486,0.6467,0.6444,0.6467,0.6509,0.6478,0.6461,0.6461,0.6468,0.6449,0.647,0.6461,0.6452,0.6422,0.6422,0.6425,0.6414,0.6366,0.6346,0.635,0.6346,0.6346,0.6343,0.6346,0.6379,0.6416,0.6442,0.6431,0.6431,0.6435,0.644,0.6473,0.6469,0.6386,0.6356,0.634,0.6346,0.643,0.6452,0.6467,0.6506,0.6504,0.6503,0.6481,0.6451,0.645,0.6441,0.6414,0.6409,0.6409,0.6428,0.6431,0.6418,0.6371,0.6349,0.6333,0.6334,0.6338,0.6342,0.632,0.6318,0.637,0.6368,0.6368,0.6383,0.6371,0.6371,0.6355,0.632,0.6277,0.6276,0.6291,0.6274,0.6293,0.6311,0.631,0.6312,0.6312,0.6304,0.6294,0.6348,0.6378,0.6368,0.6368,0.6368,0.636,0.637,0.6418,0.6411,0.6435,0.6427,0.6427,0.6419,0.6446,0.6468,0.6487,0.6594,0.6666,0.6666,0.6678,0.6712,0.6705,0.6718,0.6784,0.6811,0.6811,0.6794,0.6804,0.6781,0.6756,0.6735,0.6763,0.6762,0.6777,0.6815,0.6802,0.678,0.6796,0.6817,0.6817,0.6832,0.6877,0.6912,0.6914,0.7009,0.7012,0.701,0.7005,0.7076,0.7087,0.717,0.7105,0.7031,0.7029,0.7006,0.7035,0.7045,0.6956,0.6988,0.6915,0.6914,0.6859,0.6778,0.6815,0.6815,0.6843,0.6846,0.6846,0.6923,0.6997,0.7098,0.7188,0.7232,0.7262,0.7266,0.7359,0.7368,0.7337,0.7317,0.7387,0.7467,0.7461,0.7366,0.7319,0.7361,0.7437,0.7432,0.7461,0.7461,0.7454,0.7549,0.7742,0.7801,0.7903,0.7876,0.7928,0.7991,0.8007,0.7823,0.7661,0.785,0.7863,0.7862,0.7821,0.7858,0.7731,0.7779,0.7844,0.7866,0.7864,0.7788,0.7875,0.7971,0.8004,0.7857,0.7932,0.7938,0.7927,0.7918,0.7919,0.7989,0.7988,0.7949,0.7948,0.7882,0.7745,0.771,0.775,0.7791,0.7882,0.7882,0.7899,0.7905,0.7889,0.7879,0.7855,0.7866,0.7865,0.7795,0.7758,0.7717,0.761,0.7497,0.7471,0.7473,0.7407,0.7288,0.7074,0.6927,0.7083,0.7191,0.719,0.7153,0.7156,0.7158,0.714,0.7119,0.7129,0.7129,0.7049,0.7095]}]})}}}var a=document.getElementById("chart_view");if(a.classList.contains("hidden")){a.classList.remove("hidden")}else{a.classList.add("hidden")}},goHome:function(){var a=new google.maps.LatLng(13.890328,100.562196);map.setCenter(a);map.setZoom(18);map.setMapTypeId(google.maps.MapTypeId.HYBRID)}});Google.apiController=SC.ObjectController.create({content:SC.Object.create({lat:13.890328,lng:100.562196,latlng:function(){var b=this.get("lat");var a=this.get("lng");return["Lat:"+b.toFixed(6)+" Lng:"+a.toFixed(6)]}.property("lat","lng").cacheable()}),formatted_address:null,thai_address:function(){var a="";if(this.formatted_address!=null){var c=this.formatted_address.split(" ");for(var b=0;b<c.length;b++){if(b==0){a=c[0]}else{if(c[b].match(/แขวง|ตำบล/)){a+="<br />"+c[b].replace(" ","")}else{if(c[b].match(/จังหวัด|กรุงเทพ|ประเทศ/)){a+="<br />"+c[b].replace(" ","")+" "}else{if(c[b].match(/เขต|อำเภอ/)){a+=c[b].replace(" ","")}else{a+=c[b].replace(" ","")+" "}}}}}}return a}.property("formatted_address").cacheable(),directions_start:null,directions_end:null,schools:[],chartno:0});Google.tableColumnsController=SC.ArrayController.create({contentBinding:"Google.sampleDataColumns"});var circle;Google.tableController=SC.ArrayController.create(SCTable.TableDelegate,{contentBinding:"Google.sampleRows",focusSchool:function(a){},renderTableCellContent:function(a,b,e,f,d,c){if(d.get("valueKey")==="stars"){return this._renderStars(a,b,e,f,d,c)}else{return b.push('<div class="text">%@</div>'.fmt(SC.RenderContext.escapeHTML(String(e?e.get(d.get("valueKey")):null))))}},_renderStars:function(e,b,g,j,c,h){var a=g.get("stars")*1,d;var f=["","","","",""];for(d=0;d<a;d++){f[d]="on"}return b.push(this._STARS_TEMPLATE.fmt.apply(this._STARS_TEMPLATE,f))},mouseDownOnTableRow:function(a,c,b){var h=c.content;var d=h.lng;var e=h.lat;var g=new google.maps.LatLng(e,d);if(markerClusterer.getMarkers.length==0){var f=Google.apiController.get("schools");markerClusterer.addMarkers(f)}if(circle){circle.setMap(null);circle=null}circle=new google.maps.Circle({center:g,map:map,radius:500,strokeColor:"green",strokeOpacity:0.5,strokeWeight:1,fillColor:"green"});map.setCenter(g)},_STARS_TEMPLATE:'<div class="stars-0"></div><div class="stars-1 %@"></div><div class="stars-2 %@"></div><div class="stars-3 %@"></div><div class="stars-4 %@"></div><div class="stars-5 %@"></div>'});Google.School=SC.Record.extend({name:SC.Record.attr(String),lng:SC.Record.attr(Number),lat:SC.Record.attr(Number),primaryKey:"id"});var markerClusterer=null;sc_require("models/school_model");Google.SCHOOLS_QUERY=SC.Query.local(Google.School);Google.RailsDataSource=SC.DataSource.extend({fetch:function(a,c){var b=Google.apiController.get("schools");if(c===Google.SCHOOLS_QUERY){if(b.length>0){markerClusterer.addMarkers(b)}else{SC.Request.getUrl("/schools.json").json().notify(this,this._didFetchAllSchools,{store:a,query:c}).send()}return YES}return NO},_didFetchAllSchools:function(b,w){if(SC.ok(b)){var h=b.get("body");var e=w.store;var d=w.query;var c=e.loadRecords(Google.School,h.content);var n=h.content;var v=[];var j=new google.maps.InfoWindow();function o(B,A,z,i){google.maps.event.addListener(i,"click",function(){A.setContent(z);A.open(B,i)})}for(var s=0;s<n.length;s++){var a=n[s];var l=a.id;var f=a.lat;var y=a.lng;var x=a.name;var m=new google.maps.LatLng(f,y);var k={url:"/static/google/en/4420604b1367510b3654794b0b17dcc9a6247514/source/resources/images/school.png",origin:new google.maps.Point(0,0),anchor:new google.maps.Point(16,16),scaledSize:new google.maps.Size(32,32)};var g=new google.maps.Marker({position:m,icon:k,title:x,id:l,lng:y,lat:f});var u="http://maps.googleapis.com/maps/api/streetview?size=150x100&location=";u+=a.lat+","+a.lng;var q="<img src='"+u+"'/>";var r="http://maps.google.com/maps?q=&layer=c&cbp=11,0,0,0,0&cbll=";r+=a.lat+","+a.lng;var p="<h3>"+a.name+"</h3><p>";p+='<a href="'+r+'" target="_blank">';p+=q+"</a>";o(map,j,p,g);v.push(g)}markerClusterer=new MarkerClusterer(map,v);Google.apiController.set("schools",v);return YES}return NO},createRecord:function(a,b){return NO},updateRecord:function(a,b){return NO},destroyRecord:function(a,b){return NO}});(function(){function av(q,p){var r;q||(q={});for(r in p){q[r]=p[r]}return q}function ap(){var q,p=arguments,u,s={},r=function(w,v){var z,x;typeof w!=="object"&&(w={});for(x in v){v.hasOwnProperty(x)&&(z=v[x],w[x]=z&&typeof z==="object"&&Object.prototype.toString.call(z)!=="[object Array]"&&x!=="renderTo"&&typeof z.nodeType!=="number"?r(w[x]||{},z):v[x])}return w};p[0]===!0&&(s=p[1],p=Array.prototype.slice.call(p,2));u=p.length;for(q=0;q<u;q++){s=r(s,p[q])}return s}function al(q,p){return parseInt(q,p||10)}function j(p){return typeof p==="string"}function R(p){return p&&typeof p==="object"}function n(p){return Object.prototype.toString.call(p)==="[object Array]"}function aC(p){return typeof p==="number"}function br(p){return aQ.log(p)/aQ.LN10}function ac(p){return aQ.pow(10,p)}function i(q,p){for(var r=q.length;r--;){if(q[r]===p){q.splice(r,1);break}}}function au(p){return p!==at&&p!==null}function bc(q,p,u){var s,r;if(j(p)){au(u)?q.setAttribute(p,u):q&&q.getAttribute&&(r=q.getAttribute(p))}else{if(au(p)&&R(p)){for(s in p){q.setAttribute(s,p[s])}}}return r}function bX(p){return n(p)?p:[p]}function ax(){var q=arguments,p,s,r=q.length;for(p=0;p<r;p++){if(s=q[p],s!==at&&s!==null){return s}}}function bk(q,p){if(bQ&&!aY&&p&&p.opacity!==at){p.filter="alpha(opacity="+p.opacity*100+")"}av(q.style,p)}function bD(q,p,u,s,r){q=ao.createElement(q);p&&av(q,p);r&&bk(q,{padding:0,border:aV,margin:0});u&&bk(q,u);s&&s.appendChild(q);return q}function bT(q,p){var r=function(){return at};r.prototype=new q;av(r.prototype,p);return r}function bU(q,p,w,v){var u=a1.lang,q=+q||0,s=p===-1?(q.toString().split(".")[1]||"").length:isNaN(p=aU(p))?2:p,p=w===void 0?u.decimalPoint:w,v=v===void 0?u.thousandsSep:v,u=q<0?"-":"",w=String(al(q=aU(q).toFixed(s))),r=w.length>3?w.length%3:0;return u+(r?w.substr(0,r)+v:"")+w.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+v)+(s?p+aU(q-w).toFixed(s).slice(2):"")}function bC(q,p){return Array((p||2)+1-String(q).length).join(0)+q}function bY(q,p,s){var r=q[p];q[p]=function(){var u=Array.prototype.slice.call(arguments);u.unshift(r);return s.apply(this,u)}}function bg(A,z){for(var x="{",w=!1,v,u,s,r,q,p=[];(x=A.indexOf(x))!==-1;){v=A.slice(0,x);if(w){u=v.split(":");s=u.shift().split(".");q=s.length;v=z;for(r=0;r<q;r++){v=v[s[r]]}if(u.length){u=u.join(":"),s=/\.([0-9])/,r=a1.lang,q=void 0,/f$/.test(u)?(q=(q=u.match(s))?q[1]:-1,v!==null&&(v=bU(v,q,r.decimalPoint,u.indexOf(",")>-1?r.thousandsSep:""))):v=aW(u,v)}}p.push(v);A=A.slice(x+1);x=(w=!w)?"}":"{"}p.push(A);return p.join("")}function bR(p){return aQ.pow(10,aR(aQ.log(p)/aQ.LN10))}function bz(q,p,u,s){var r,u=ax(u,1);r=q/u;p||(p=[1,2,2.5,5,10],s&&s.allowDecimals===!1&&(u===1?p=[1,2,5,10]:u<=0.1&&(p=[1/u])));for(s=0;s<p.length;s++){if(q=p[s],r<=(p[s]+(p[s+1]||p[s]))/2){break}}q*=u;return q}function bd(q,p){var u=q.length,s,r;for(r=0;r<u;r++){q[r].ss_i=r}q.sort(function(v,w){s=p(v,w);return s===0?v.ss_i-w.ss_i:s});for(r=0;r<u;r++){delete q[r].ss_i}}function bH(q){for(var p=q.length,r=q[0];p--;){q[p]<r&&(r=q[p])}return r}function by(q){for(var p=q.length,r=q[0];p--;){q[p]>r&&(r=q[p])}return r}function bo(q,p){for(var r in q){q[r]&&q[r]!==p&&q[r].destroy&&q[r].destroy(),delete q[r]}}function aK(p){ay||(ay=bD(aG));p&&ay.appendChild(p);ay.innerHTML=""}function f(p){return parseFloat(p.toPrecision(14))}function ak(q,p){aj=ax(q,p.animation)}function bO(){var q=a1.global.useUTC,p=q?"getUTC":"get",r=q?"setUTC":"set";D=(q&&a1.global.timezoneOffset||0)*60000;I=q?Date.UTC:function(u,s,z,x,w,v){return(new Date(u,s,ax(z,1),ax(x,0),ax(w,0),ax(v,0))).getTime()};aE=p+"Minutes";ae=p+"Hours";k=p+"Day";an=p+"Date";e=p+"Month";bN=p+"FullYear";bw=r+"Minutes";a6=r+"Hours";bV=r+"Date";aB=r+"Month";Y=r+"FullYear"}function a9(){}function c(q,p,s,r){this.axis=q;this.pos=p;this.type=s||"";this.isNew=!0;!s&&!r&&this.addLabel()}function bB(){this.init.apply(this,arguments)}function E(){this.init.apply(this,arguments)}function h(q,p,v,u,s){var r=q.chart.inverted;this.axis=q;this.isNegative=v;this.options=p;this.x=u;this.total=null;this.points={};this.stack=s;this.alignOptions={align:p.align||(r?v?"left":"right":"center"),verticalAlign:p.verticalAlign||(r?"middle":v?"bottom":"top"),y:ax(p.y,r?4:v?14:-6),x:ax(p.x,r?v?-6:6:0)};this.textAlign=p.textAlign||(r?v?"right":"left":"center")}var at,ao=document,a8=window,aQ=Math,aq=aQ.round,aR=aQ.floor,ag=aQ.ceil,ar=aQ.max,bi=aQ.min,aU=aQ.abs,bu=aQ.cos,bP=aQ.sin,bf=aQ.PI,a7=bf*2/360,y=navigator.userAgent,bS=a8.opera,bQ=/msie/i.test(y)&&!bS,bv=ao.documentMode===8,bE=/AppleWebKit/.test(y),bL=/Firefox/.test(y),bA=/(Mobile|Android|Windows Phone)/.test(y),b="http://www.w3.org/2000/svg",aY=!!ao.createElementNS&&!!ao.createElementNS(b,"svg").createSVGRect,bG=bL&&parseInt(y.split("Firefox/")[1],10)<4,bx=!aY&&!bQ&&!!ao.createElement("canvas").getContext,d,bM,be={},bl=0,ay,a1,aW,aj,aH,bj,aF,bF=function(){return at},aP=[],bh=0,aG="div",aV="none",bn=/^[0-9]+$/,aJ="stroke-width",I,D,aE,ae,k,an,e,bN,bw,a6,bV,aB,Y,a5={},aT;a8.Highcharts?aF(16,!0):aT=a8.Highcharts={};aW=function(C,B,A){if(!au(B)||isNaN(B)){return"Invalid date"}var C=ax(C,"%Y-%m-%d %H:%M:%S"),z=new Date(B-D),x,w=z[ae](),v=z[k](),u=z[an](),s=z[e](),r=z[bN](),q=a1.lang,p=q.weekdays,z=av({a:p[v].substr(0,3),A:p[v],d:bC(u),e:u,b:q.shortMonths[s],B:q.months[s],m:bC(s+1),y:r.toString().substr(2,2),Y:r,H:bC(w),I:bC(w%12||12),l:w%12||12,M:bC(z[aE]()),p:w<12?"AM":"PM",P:w<12?"am":"pm",S:bC(z.getSeconds()),L:bC(aq(B%1000),3)},aT.dateFormats);for(x in z){for(;C.indexOf("%"+x)!==-1;){C=C.replace("%"+x,typeof z[x]==="function"?z[x](B):z[x])}}return A?C.substr(0,1).toUpperCase()+C.substr(1):C};aF=function(q,p){var r="Highcharts error #"+q+": www.highcharts.com/errors/"+q;if(p){throw r}a8.console&&console.log(r)};bj={millisecond:1,second:1000,minute:60000,hour:3600000,day:86400000,week:604800000,month:2678400000,year:31556952000};aH={init:function(A,z,x){var z=z||"",w=A.shift,v=z.indexOf("C")>-1,u=v?7:3,s,z=z.split(" "),x=[].concat(x),r,q,p=function(B){for(s=B.length;s--;){B[s]==="M"&&B.splice(s+1,0,B[s+1],B[s+2],B[s+1],B[s+2])}};v&&(p(z),p(x));A.isArea&&(r=z.splice(z.length-6,6),q=x.splice(x.length-6,6));if(w<=x.length/u&&z.length===x.length){for(;w--;){x=[].concat(x).splice(0,u).concat(x)}}A.shift=0;if(z.length){for(A=x.length;z.length<A;){w=[].concat(z).splice(z.length-u,u),v&&(w[u-6]=w[u-2],w[u-5]=w[u-1]),z=z.concat(w)}}r&&(z=z.concat(r),x=x.concat(q));return[z,x]},step:function(q,p,v,u){var s=[],r=q.length;if(v===1){s=u}else{if(r===p.length&&v<1){for(;r--;){u=parseFloat(q[r]),s[r]=isNaN(u)?q[r]:v*parseFloat(p[r]-u)+u}}else{s=p}}return s}};(function(p){a8.HighchartsAdapter=a8.HighchartsAdapter||p&&{init:function(q){var w=p.fx,v=w.step,u,s=p.Tween,r=s&&s.propHooks;u=p.cssHooks.opacity;p.extend(p.easing,{easeOutQuad:function(z,x,C,B,A){return -B*(x/=A)*(x-2)+C}});p.each(["cur","_default","width","height","opacity"],function(z,x){var B=v,A;x==="cur"?B=w.prototype:x==="_default"&&s&&(B=r[x],x="set");(A=B[x])&&(B[x]=function(F){var C,F=z?F:this;if(F.prop!=="align"){return C=F.elem,C.attr?C.attr(F.prop,x==="cur"?at:F.now):A.apply(this,arguments)}})});bY(u,"get",function(z,x,A){return x.attr?x.opacity||0:z.call(this,x,A)});u=function(x){var A=x.elem,z;if(!x.started){z=q.init(A,A.d,A.toD),x.start=z[0],x.end=z[1],x.started=!0}A.attr("d",q.step(x.start,x.end,x.pos,A.toD))};s?r.d={set:u}:v.d=u;this.each=Array.prototype.forEach?function(z,x){return Array.prototype.forEach.call(z,x)}:function(z,x){var B,A=z.length;for(B=0;B<A;B++){if(x.call(z[B],z[B],B,z)===!1){return B}}};p.fn.highcharts=function(){var z="Chart",x=arguments,B,A;if(this[0]){j(x[0])&&(z=x[0],x=Array.prototype.slice.call(x,1));B=x[0];if(B!==at){B.chart=B.chart||{},B.chart.renderTo=this[0],new aT[z](B,x[1]),A=this}B===at&&(A=aP[bc(this[0],"data-highcharts-chart")])}return A}},getScript:p.getScript,inArray:p.inArray,adapterRun:function(q,r){return p(q)[r]()},grep:p.grep,map:function(q,v){for(var u=[],s=0,r=q.length;s<r;s++){u[s]=v.call(q[s],q[s],s,q)}return u},offset:function(q){return p(q).offset()},addEvent:function(q,s,r){p(q).bind(s,r)},removeEvent:function(q,u,s){var r=ao.removeEventListener?"removeEventListener":"detachEvent";ao[r]&&q&&!q[r]&&(q[r]=function(){});p(q).unbind(u,s)},fireEvent:function(q,x,w,v){var u=p.Event(x),s="detached"+x,r;!bQ&&w&&(delete w.layerX,delete w.layerY,delete w.returnValue);av(u,w);q[x]&&(q[s]=q[x],q[x]=null);p.each(["preventDefault","stopPropagation"],function(A,z){var B=u[z];u[z]=function(){try{B.call(u)}catch(C){z==="preventDefault"&&(r=!0)}}});p(q).trigger(u);q[s]&&(q[x]=q[s],q[s]=null);v&&!u.isDefaultPrevented()&&!r&&v(u)},washMouseEvent:function(q){var r=q.originalEvent||q;if(r.pageX===at){r.pageX=q.pageX,r.pageY=q.pageY}return r},animate:function(q,u,s){var r=p(q);if(!q.style){q.style={}}if(u.d){q.toD=u.d,u.d=1}r.stop();u.opacity!==at&&q.attr&&(u.opacity+="px");r.animate(u,s)},stop:function(q){p(q).stop()}}})(a8.jQuery);var aS=a8.HighchartsAdapter,a0=aS||{};aS&&aS.init.call(aS,aH);var a3=a0.adapterRun,ai=a0.getScript,aD=a0.inArray,aw=a0.each,ah=a0.grep,o=a0.offset,bs=a0.map,aZ=a0.addEvent,aO=a0.removeEvent,a2=a0.fireEvent,a=a0.washMouseEvent,aA=a0.animate,bt=a0.stop,a0={enabled:!0,x:0,y:15,style:{color:"#606060",cursor:"default",fontSize:"11px"}};a1={colors:"#7cb5ec,#434348,#90ed7d,#f7a35c,#8085e9,#f15c80,#e4d354,#8085e8,#8d4653,#91e8e1".split(","),symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),decimalPoint:".",numericSymbols:"k,M,G,T,P,E".split(","),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/4.0.3/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/4.0.3/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#333333",fontSize:"18px"}},subtitle:{text:"",align:"center",style:{color:"#555555"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1000},events:{},lineWidth:2,marker:{lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0,lineWidthPlus:1,radiusPlus:2},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:ap(a0,{align:"center",enabled:!1,formatter:function(){return this.y===null?"":bU(this.y,-1)},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,states:{hover:{lineWidthPlus:1,marker:{},halo:{size:10,opacity:0.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1000}},labels:{style:{position:"absolute",color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#909090",borderRadius:0,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"white",opacity:0.5,textAlign:"center"}},tooltip:{enabled:!0,animation:aY,backgroundColor:"rgba(249, 249, 249, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">●</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,snap:bA?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var az=a1.plotOptions,aS=az.line;bO();var bK=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,bq=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,aM=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,bJ=function(q){var p=[],s,r;(function(u){u&&u.stops?r=bs(u.stops,function(v){return bJ(v[1])}):(s=bK.exec(u))?p=[al(s[1]),al(s[2]),al(s[3]),parseFloat(s[4],10)]:(s=bq.exec(u))?p=[al(s[1],16),al(s[2],16),al(s[3],16),1]:(s=aM.exec(u))&&(p=[al(s[1]),al(s[2]),al(s[3]),1])})(q);return{get:function(v){var u;r?(u=ap(q),u.stops=[].concat(u.stops),aw(r,function(x,w){u.stops[w]=[u.stops[w][0],x.get(v)]})):u=p&&!isNaN(p[0])?v==="rgb"?"rgb("+p[0]+","+p[1]+","+p[2]+")":v==="a"?p[3]:"rgba("+p.join(",")+")":q;return u},brighten:function(u){if(r){aw(r,function(w){w.brighten(u)})}else{if(aC(u)&&u!==0){var v;for(v=0;v<3;v++){p[v]+=al(u*255),p[v]<0&&(p[v]=0),p[v]>255&&(p[v]=255)}}}return this},rgba:p,setOpacity:function(u){p[3]=u;return this}}};a9.prototype={opacity:1,textProps:"fontSize,fontWeight,fontFamily,color,lineHeight,width,textDecoration,textShadow,HcTextStroke".split(","),init:function(q,p){this.element=p==="span"?bD(p):ao.createElementNS(b,p);this.renderer=q},animate:function(q,p,r){p=ax(p,aj,!0);bt(this);if(p){p=ap(p,{});if(r){p.complete=r}aA(this,q,p)}else{this.attr(q),r&&r()}return this},colorGradient:function(H,G,F){var C=this.renderer,B,A,z,x,w,v,u,s,r,q,p=[];H.linearGradient?A="linearGradient":H.radialGradient&&(A="radialGradient");if(A){z=H[A];x=C.gradients;v=H.stops;r=F.radialReference;n(z)&&(H[A]=z={x1:z[0],y1:z[1],x2:z[2],y2:z[3],gradientUnits:"userSpaceOnUse"});A==="radialGradient"&&r&&!au(z.gradientUnits)&&(z=ap(z,{cx:r[0]-r[2]/2+z.cx*r[2],cy:r[1]-r[2]/2+z.cy*r[2],r:z.r*r[2],gradientUnits:"userSpaceOnUse"}));for(q in z){q!=="id"&&p.push(q,z[q])}for(q in v){p.push(v[q])}p=p.join(",");x[p]?H=x[p].attr("id"):(z.id=H="highcharts-"+bl++,x[p]=w=C.createElement(A).attr(z).add(C.defs),w.stops=[],aw(v,function(J){J[1].indexOf("rgba")===0?(B=bJ(J[1]),u=B.get("rgb"),s=B.get("a")):(u=J[1],s=1);J=C.createElement("stop").attr({offset:J[0],"stop-color":u,"stop-opacity":s}).add(w);w.stops.push(J)}));F.setAttribute(G,"url("+C.url+"#"+H+")")}},attr:function(q,p){var x,w,v=this.element,u,s=this,r;typeof q==="string"&&p!==at&&(x=q,q={},q[x]=p);if(typeof q==="string"){s=(this[q+"Getter"]||this._defaultGetter).call(this,q,v)}else{for(x in q){w=q[x];r=!1;this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(x)&&(u||(this.symbolAttr(q),u=!0),r=!0);if(this.rotation&&(x==="x"||x==="y")){this.doTransform=!0}r||(this[x+"Setter"]||this._defaultSetter).call(this,w,x,v);this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(x)&&this.updateShadows(x,w)}if(this.doTransform){this.updateTransform(),this.doTransform=!1}}return s},updateShadows:function(q,p){for(var s=this.shadows,r=s.length;r--;){s[r].setAttribute(q,q==="height"?ar(p-(s[r].cutHeight||0),0):q==="d"?this.d:p)}},addClass:function(q){var p=this.element,r=bc(p,"class")||"";r.indexOf(q)===-1&&bc(p,"class",r+" "+q);return this},symbolAttr:function(q){var p=this;aw("x,y,r,start,end,width,height,innerR,anchorX,anchorY".split(","),function(r){p[r]=ax(q[r],p[r])});p.attr({d:p.renderer.symbols[p.symbolName](p.x,p.y,p.width,p.height,p)})},clip:function(p){return this.attr("clip-path",p?"url("+this.renderer.url+"#"+p.id+")":aV)},crisp:function(q){var p,u={},s,r=q.strokeWidth||this.strokeWidth||0;s=aq(r)%2/2;q.x=aR(q.x||this.x||0)+s;q.y=aR(q.y||this.y||0)+s;q.width=aR((q.width||this.width||0)-2*s);q.height=aR((q.height||this.height||0)-2*s);q.strokeWidth=r;for(p in q){this[p]!==q[p]&&(this[p]=u[p]=q[p])}return u},css:function(q){var p=this.styles,w={},v=this.element,u,s,r="";u=!p;if(q&&q.color){q.fill=q.color}if(p){for(s in q){q[s]!==p[s]&&(w[s]=q[s],u=!0)}}if(u){u=this.textWidth=q&&q.width&&v.nodeName.toLowerCase()==="text"&&al(q.width);p&&(q=av(p,w));this.styles=q;u&&(bx||!aY&&this.renderer.forExport)&&delete q.width;if(bQ&&!aY){bk(this.element,q)}else{p=function(z,x){return"-"+x.toLowerCase()};for(s in q){r+=s.replace(/([A-Z])/g,p)+":"+q[s]+";"}bc(v,"style",r)}u&&this.added&&this.renderer.buildText(this)}return this},on:function(q,p){var s=this,r=s.element;bM&&q==="click"?(r.ontouchstart=function(u){s.touchEventFired=Date.now();u.preventDefault();p.call(r,u)},r.onclick=function(u){(y.indexOf("Android")===-1||Date.now()-(s.touchEventFired||0)>1100)&&p.call(r,u)}):r["on"+q]=p;return this},setRadialReference:function(p){this.element.radialReference=p;return this},translate:function(q,p){return this.attr({translateX:q,translateY:p})},invert:function(){this.inverted=!0;this.updateTransform();return this},updateTransform:function(){var q=this.translateX||0,p=this.translateY||0,w=this.scaleX,v=this.scaleY,u=this.inverted,s=this.rotation,r=this.element;u&&(q+=this.attr("width"),p+=this.attr("height"));q=["translate("+q+","+p+")"];u?q.push("rotate(90) scale(-1,1)"):s&&q.push("rotate("+s+" "+(r.getAttribute("x")||0)+" "+(r.getAttribute("y")||0)+")");(au(w)||au(v))&&q.push("scale("+ax(w,1)+" "+ax(v,1)+")");q.length&&r.setAttribute("transform",q.join(" "))},toFront:function(){var p=this.element;p.parentNode.appendChild(p);return this},align:function(q,p,x){var w,v,u,s,r={};v=this.renderer;u=v.alignedObjects;if(q){if(this.alignOptions=q,this.alignByTranslate=p,!x||j(x)){this.alignTo=w=x||"renderer",i(u,this),u.push(this),x=null}}else{q=this.alignOptions,p=this.alignByTranslate,w=this.alignTo}x=ax(x,v[w],v);w=q.align;v=q.verticalAlign;u=(x.x||0)+(q.x||0);s=(x.y||0)+(q.y||0);if(w==="right"||w==="center"){u+=(x.width-(q.width||0))/{right:1,center:2}[w]}r[p?"translateX":"x"]=aq(u);if(v==="bottom"||v==="middle"){s+=(x.height-(q.height||0))/({bottom:1,middle:2}[v]||1)}r[p?"translateY":"y"]=aq(s);this[this.placed?"animate":"attr"](r);this.placed=!0;this.alignAttr=r;return this},getBBox:function(){var z=this.bBox,x=this.renderer,w,v,u=this.rotation;w=this.element;var s=this.styles,r=u*a7;v=this.textStr;var q;if(v===""||bn.test(v)){q="num."+v.toString().length+(s?"|"+s.fontSize+"|"+s.fontFamily:"")}q&&(z=x.cache[q]);if(!z){if(w.namespaceURI===b||x.forExport){try{z=w.getBBox?av({},w.getBBox()):{width:w.offsetWidth,height:w.offsetHeight}}catch(p){}if(!z||z.width<0){z={width:0,height:0}}}else{z=this.htmlGetBBox()}if(x.isSVG){w=z.width;v=z.height;if(bQ&&s&&s.fontSize==="11px"&&v.toPrecision(3)==="16.9"){z.height=v=14}if(u){z.width=aU(v*bP(r))+aU(w*bu(r)),z.height=aU(v*bu(r))+aU(w*bP(r))}}this.bBox=z;q&&(x.cache[q]=z)}return z},show:function(p){return p&&this.element.namespaceURI===b?(this.element.removeAttribute("visibility"),this):this.attr({visibility:p?"inherit":"visible"})},hide:function(){return this.attr({visibility:"hidden"})},fadeOut:function(q){var p=this;p.animate({opacity:0},{duration:q||150,complete:function(){p.hide()}})},add:function(q){var p=this.renderer,x=q||p,w=x.element||p.box,v=this.element,u=this.zIndex,s,r;if(q){this.parentGroup=q}this.parentInverted=q&&q.inverted;this.textStr!==void 0&&p.buildText(this);if(u){x.handleZ=!0,u=al(u)}if(x.handleZ){q=w.childNodes;for(s=0;s<q.length;s++){if(p=q[s],x=bc(p,"zIndex"),p!==v&&(al(x)>u||!au(u)&&au(x))){w.insertBefore(v,p);r=!0;break}}}r||w.appendChild(v);this.added=!0;if(this.onAdd){this.onAdd()}return this},safeRemoveChild:function(q){var p=q.parentNode;p&&p.removeChild(q)},destroy:function(){var q=this,p=q.element||{},v=q.shadows,u=q.renderer.isSVG&&p.nodeName==="SPAN"&&q.parentGroup,s,r;p.onclick=p.onmouseout=p.onmouseover=p.onmousemove=p.point=null;bt(q);if(q.clipPath){q.clipPath=q.clipPath.destroy()}if(q.stops){for(r=0;r<q.stops.length;r++){q.stops[r]=q.stops[r].destroy()}q.stops=null}q.safeRemoveChild(p);for(v&&aw(v,function(w){q.safeRemoveChild(w)});u&&u.div&&u.div.childNodes.length===0;){p=u.parentGroup,q.safeRemoveChild(u.div),delete u.div,u=p}q.alignTo&&i(q.renderer.alignedObjects,q);for(s in q){delete q[s]}return null},shadow:function(B,A,z){var x=[],w,v,u=this.element,s,r,q,p;if(B){r=ax(B.width,3);q=(B.opacity||0.15)/r;p=this.parentInverted?"(-1,-1)":"("+ax(B.offsetX,1)+", "+ax(B.offsetY,1)+")";for(w=1;w<=r;w++){v=u.cloneNode(0);s=r*2+1-2*w;bc(v,{isShadow:"true",stroke:B.color||"black","stroke-opacity":q*w,"stroke-width":s,transform:"translate"+p,fill:aV});if(z){bc(v,"height",ar(bc(v,"height")-s,0)),v.cutHeight=s}A?A.element.appendChild(v):u.parentNode.insertBefore(v,u);x.push(v)}this.shadows=x}return this},xGetter:function(p){this.element.nodeName==="circle"&&(p={x:"cx",y:"cy"}[p]||p);return this._defaultGetter(p)},_defaultGetter:function(p){p=ax(this[p],this.element?this.element.getAttribute(p):null,0);/^[\-0-9\.]+$/.test(p)&&(p=parseFloat(p));return p},dSetter:function(q,p,r){q&&q.join&&(q=q.join(" "));/(NaN| {2}|^$)/.test(q)&&(q="M 0 0");r.setAttribute(p,q);this[p]=q},dashstyleSetter:function(q){var p;if(q=q&&q.toLowerCase()){q=q.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").replace("solid",1).split(",");for(p=q.length;p--;){q[p]=al(q[p])*this["stroke-width"]}q=q.join(",");this.element.setAttribute("stroke-dasharray",q)}},alignSetter:function(p){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[p])},opacitySetter:function(q,p,r){this[p]=q;r.setAttribute(p,q)},titleSetter:function(q){var p=this.element.getElementsByTagName("title")[0];p||(p=ao.createElementNS(b,"title"),this.element.appendChild(p));p.textContent=q},textSetter:function(p){if(p!==this.textStr){delete this.bBox,this.textStr=p,this.added&&this.renderer.buildText(this)}},fillSetter:function(q,p,r){typeof q==="string"?r.setAttribute(p,q):q&&this.colorGradient(q,p,r)},zIndexSetter:function(q,p,r){r.setAttribute(p,q);this[p]=q},_defaultSetter:function(q,p,r){r.setAttribute(p,q)}};a9.prototype.yGetter=a9.prototype.xGetter;a9.prototype.translateXSetter=a9.prototype.translateYSetter=a9.prototype.rotationSetter=a9.prototype.verticalAlignSetter=a9.prototype.scaleXSetter=a9.prototype.scaleYSetter=function(q,p){this[p]=q;this.doTransform=!0};a9.prototype["stroke-widthSetter"]=a9.prototype.strokeSetter=function(q,p,r){this[p]=q;if(this.stroke&&this["stroke-width"]){this.strokeWidth=this["stroke-width"],a9.prototype.fillSetter.call(this,this.stroke,"stroke",r),r.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0}else{if(p==="stroke-width"&&q===0&&this.hasStroke){r.removeAttribute("stroke"),this.hasStroke=!1}}};var bm=function(){this.init.apply(this,arguments)};bm.prototype={Element:a9,init:function(q,p,x,w,v){var u=location,s,w=this.createElement("svg").attr({version:"1.1"}).css(this.getStyle(w));s=w.element;q.appendChild(s);q.innerHTML.indexOf("xmlns")===-1&&bc(s,"xmlns",b);this.isSVG=!0;this.box=s;this.boxWrapper=w;this.alignedObjects=[];this.url=(bL||bE)&&ao.getElementsByTagName("base").length?u.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"";this.createElement("desc").add().element.appendChild(ao.createTextNode("Created with Highcharts 4.0.3"));this.defs=this.createElement("defs").add();this.forExport=v;this.gradients={};this.cache={};this.setSize(p,x,!1);var r;if(bL&&q.getBoundingClientRect){this.subPixelFix=p=function(){bk(q,{left:0,top:0});r=q.getBoundingClientRect();bk(q,{left:ag(r.left)-r.left+"px",top:ag(r.top)-r.top+"px"})},p(),aZ(a8,"resize",p)}},getStyle:function(p){return this.style=av({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},p)},isHidden:function(){return !this.boxWrapper.getBBox().width},destroy:function(){var p=this.defs;this.box=null;this.boxWrapper=this.boxWrapper.destroy();bo(this.gradients||{});this.gradients=null;if(p){this.defs=p.destroy()}this.subPixelFix&&aO(a8,"resize",this.subPixelFix);return this.alignedObjects=null},createElement:function(q){var p=new this.Element;p.init(this,q);return p},draw:function(){},buildText:function(J){for(var H=J.element,G=this,F=G.forExport,C=ax(J.textStr,"").toString(),B=C.indexOf("<")!==-1,A=H.childNodes,z,x,w=bc(H,"x"),v=J.styles,u=J.textWidth,s=v&&v.lineHeight,r=v&&v.HcTextStroke,q=A.length,p=function(K){return s?al(s):G.fontMetrics(/(px|em)$/.test(K&&K.style.fontSize)?K.style.fontSize:v&&v.fontSize||G.style.fontSize||12,K).h};q--;){H.removeChild(A[q])}!B&&!r&&C.indexOf(" ")===-1?H.appendChild(ao.createTextNode(C)):(z=/<.*style="([^"]+)".*>/,x=/<.*href="(http[^"]+)".*>/,u&&!J.added&&this.box.appendChild(H),C=B?C.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[C],C[C.length-1]===""&&C.pop(),aw(C,function(N,M){var L,K=0,N=N.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||");L=N.split("|||");aw(L,function(T){if(T!==""||L.length===1){var S={},Q=ao.createElementNS(b,"tspan"),P;z.test(T)&&(P=T.match(z)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),bc(Q,"style",P));x.test(T)&&!F&&(bc(Q,"onclick",'location.href="'+T.match(x)[1]+'"'),bk(Q,{cursor:"pointer"}));T=(T.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">");if(T!==" "){Q.appendChild(ao.createTextNode(T));if(K){S.dx=0}else{if(M&&w!==null){S.x=w}}bc(Q,S);H.appendChild(Q);!K&&M&&(!aY&&F&&bk(Q,{display:"block"}),bc(Q,"dy",p(Q)));if(u){for(var T=T.replace(/([^\^])-/g,"$1- ").split(" "),S=L.length>1||T.length>1&&v.whiteSpace!=="nowrap",O,X,Z=v.HcHeight,V=[],W=p(Q),U=1;S&&(T.length||V.length);){delete J.bBox,O=J.getBBox(),X=O.width,!aY&&G.forExport&&(X=G.measureSpanWidth(Q.firstChild.data,J.styles)),O=X>u,!O||T.length===1?(T=V,V=[],T.length&&(U++,Z&&U*W>Z?(T=["..."],J.attr("title",J.textStr)):(Q=ao.createElementNS(b,"tspan"),bc(Q,{dy:W,x:w}),P&&bc(Q,"style",P),H.appendChild(Q))),X>u&&(u=X)):(Q.removeChild(Q.firstChild),V.unshift(T.pop())),T.length&&Q.appendChild(ao.createTextNode(T.join(" ").replace(/- /g,"-")))}}K++}}})}))},button:function(M,L,K,J,H,G,F,C,B){var A=this.label(M,L,K,B,null,null,null,null,"button"),z=0,x,w,v,u,s,r,M={x1:0,y1:0,x2:0,y2:1},H=ap({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:M,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},H);v=H.style;delete H.style;G=ap(H,{stroke:"#68A",fill:{linearGradient:M,stops:[[0,"#FFF"],[1,"#ACF"]]}},G);u=G.style;delete G.style;F=ap(H,{stroke:"#68A",fill:{linearGradient:M,stops:[[0,"#9BD"],[1,"#CDF"]]}},F);s=F.style;delete F.style;C=ap(H,{style:{color:"#CCC"}},C);r=C.style;delete C.style;aZ(A.element,bQ?"mouseover":"mouseenter",function(){z!==3&&A.attr(G).css(u)});aZ(A.element,bQ?"mouseout":"mouseleave",function(){z!==3&&(x=[H,G,F][z],w=[v,u,s][z],A.attr(x).css(w))});A.setState=function(p){(A.state=z=p)?p===2?A.attr(F).css(s):p===3&&A.attr(C).css(r):A.attr(H).css(v)};return A.on("click",function(){z!==3&&J.call(A)}).attr(H).css(av({cursor:"default"},v))},crispLine:function(q,p){q[1]===q[4]&&(q[1]=q[4]=aq(q[1])-p%2/2);q[2]===q[5]&&(q[2]=q[5]=aq(q[2])+p%2/2);return q},path:function(q){var p={fill:aV};n(q)?p.d=q:R(q)&&av(p,q);return this.createElement("path").attr(p)},circle:function(q,p,r){q=R(q)?q:{x:q,y:p,r:r};p=this.createElement("circle");p.xSetter=function(s){this.element.setAttribute("cx",s)};p.ySetter=function(s){this.element.setAttribute("cy",s)};return p.attr(q)},arc:function(q,p,v,u,s,r){if(R(q)){p=q.y,v=q.r,u=q.innerR,s=q.start,r=q.end,q=q.x}q=this.symbol("arc",q||0,p||0,v||0,v||0,{innerR:u||0,start:s||0,end:r||0});q.r=v;return q},rect:function(q,p,w,v,u,s){var u=R(q)?q.r:u,r=this.createElement("rect"),q=R(q)?q:q===at?{}:{x:q,y:p,width:ar(w,0),height:ar(v,0)};if(s!==at){q.strokeWidth=s,q=r.crisp(q)}if(u){q.r=u}r.rSetter=function(x){bc(this.element,{rx:x,ry:x})};return r.attr(q)},setSize:function(q,p,u){var s=this.alignedObjects,r=s.length;this.width=q;this.height=p;for(this.boxWrapper[ax(u,!0)?"animate":"attr"]({width:q,height:p});r--;){s[r].align()}},g:function(q){var p=this.createElement("g");return au(q)?p.attr({"class":"highcharts-"+q}):p},image:function(q,p,v,u,s){var r={preserveAspectRatio:aV};arguments.length>1&&av(r,{x:p,y:v,width:u,height:s});r=this.createElement("image").attr(r);r.element.setAttributeNS?r.element.setAttributeNS("http://www.w3.org/1999/xlink","href",q):r.element.setAttribute("hc-svg-href",q);return r},symbol:function(B,A,z,x,w,v){var u,s=this.symbols[B],s=s&&s(aq(A),aq(z),x,w,v),r=/^url\((.*?)\)$/,q,p;if(s){u=this.path(s),av(u,{symbolName:B,x:A,y:z,width:x,height:w}),v&&av(u,v)}else{if(r.test(B)){p=function(F,C){F.element&&(F.attr({width:C[0],height:C[1]}),F.alignByTranslate||F.translate(aq((x-C[0])/2),aq((w-C[1])/2)))},q=B.match(r)[1],B=be[q],u=this.image(q).attr({x:A,y:z}),u.isImg=!0,B?p(u,B):(u.attr({width:0,height:0}),bD("img",{onload:function(){p(u,be[q]=[this.width,this.height])},src:q}))}}return u},symbols:{circle:function(q,p,u,s){var r=0.166*u;return["M",q+u/2,p,"C",q+u+r,p,q+u+r,p+s,q+u/2,p+s,"C",q-r,p+s,q-r,p,q+u/2,p,"Z"]},square:function(q,p,s,r){return["M",q,p,"L",q+s,p,q+s,p+r,q,p+r,"Z"]},triangle:function(q,p,s,r){return["M",q+s/2,p,"L",q+s,p+r,q,p+r,"Z"]},"triangle-down":function(q,p,s,r){return["M",q,p,"L",q+s,p,q+s/2,p+r,"Z"]},diamond:function(q,p,s,r){return["M",q+s/2,p,"L",q+s,p+r/2,q+s/2,p+r,q,p+r/2,"Z"]},arc:function(B,A,z,x,w){var v=w.start,z=w.r||z||x,u=w.end-0.001,x=w.innerR,s=w.open,r=bu(v),q=bP(v),p=bu(u),u=bP(u),w=w.end-v<bf?0:1;return["M",B+z*r,A+z*q,"A",z,z,0,w,1,B+z*p,A+z*u,s?"M":"L",B+x*p,A+x*u,"A",x,x,0,w,0,B+x*r,A+x*q,s?"":"Z"]},callout:function(z,x,w,v,u){var s=bi(u&&u.r||0,w,v),r=s+6,q=u&&u.anchorX,p=u&&u.anchorY,u=aq(u.strokeWidth||0)%2/2;z+=u;x+=u;u=["M",z+s,x,"L",z+w-s,x,"C",z+w,x,z+w,x,z+w,x+s,"L",z+w,x+v-s,"C",z+w,x+v,z+w,x+v,z+w-s,x+v,"L",z+s,x+v,"C",z,x+v,z,x+v,z,x+v-s,"L",z,x+s,"C",z,x,z,x,z+s,x];q&&q>w&&p>x+r&&p<x+v-r?u.splice(13,3,"L",z+w,p-6,z+w+6,p,z+w,p+6,z+w,x+v-s):q&&q<0&&p>x+r&&p<x+v-r?u.splice(33,3,"L",z,p+6,z-6,p,z,p-6,z,x+s):p&&p>v&&q>z+r&&q<z+w-r?u.splice(23,3,"L",q+6,x+v,q,x+v+6,q-6,x+v,z+s,x+v):p&&p<0&&q>z+r&&q<z+w-r&&u.splice(3,3,"L",q-6,x,q,x-6,q+6,x,w-s,x);return u}},clipRect:function(q,p,v,u){var s="highcharts-"+bl++,r=this.createElement("clipPath").attr({id:s}).add(this.defs),q=this.rect(q,p,v,u,0).add(r);q.id=s;q.clipPath=r;return q},text:function(q,p,v,u){var s=bx||!aY&&this.forExport,r={};if(u&&!this.forExport){return this.html(q,p,v)}r.x=Math.round(p||0);if(v){r.y=Math.round(v)}if(q||q===0){r.text=q}q=this.createElement("text").attr(r);s&&q.css({position:"absolute"});if(!u){q.xSetter=function(z,x,F){var C=F.getElementsByTagName("tspan"),B,A=F.getAttribute(x),w;for(w=0;w<C.length;w++){B=C[w],B.getAttribute(x)===A&&B.setAttribute(x,z)}F.setAttribute(x,z)}}return q},fontMetrics:function(q,p){q=q||this.style.fontSize;if(p&&a8.getComputedStyle){p=p.element||p,q=a8.getComputedStyle(p,"").fontSize}var q=/px/.test(q)?al(q):/em/.test(q)?parseFloat(q)*12:12,s=q<24?q+4:aq(q*1.2),r=aq(s*0.8);return{h:s,b:r,f:q}},label:function(ba,ab,aa,Z,X,W,V,U,T){function Q(){var u,p;u=L.element.style;G=(F===void 0||w===void 0||M.styles.textAlign)&&L.textStr&&L.getBBox();M.width=(F||G.width||0)+2*H+bb;M.height=(w||G.height||0)+2*H;r=H+N.fontMetrics(u&&u.fontSize,L).b;if(s){if(!K){u=aq(-B*H),p=U?-r:0,M.box=K=Z?N.symbol(Z,u,p,M.width,M.height,v):N.rect(u,p,M.width,M.height,0,v[aJ]),K.attr("fill",aV).add(M)}K.isImg||K.attr(av({width:aq(M.width),height:aq(M.height)},v));v=null}}function P(){var u=M.styles,u=u&&u.textAlign,p=bb+H*(1-B),x;x=U?0:r;if(au(F)&&G&&(u==="center"||u==="right")){p+={center:0.5,right:1}[u]*(F-G.width)}if(p!==L.x||x!==L.y){L.attr("x",p),x!==at&&L.attr("y",x)}L.x=p;L.y=x}function O(u,p){K?K.attr(u,p):v[u]=p}var N=this,M=N.g(T),L=N.text("",0,0,V).attr({zIndex:1}),K,G,B=0,H=3,bb=0,F,w,S,A,q=0,v={},r,s;M.onAdd=function(){L.add(M);M.attr({text:ba||"",x:ab,y:aa});K&&au(X)&&M.attr({anchorX:X,anchorY:W})};M.widthSetter=function(p){F=p};M.heightSetter=function(p){w=p};M.paddingSetter=function(p){au(p)&&p!==H&&(H=p,P())};M.paddingLeftSetter=function(p){au(p)&&p!==bb&&(bb=p,P())};M.alignSetter=function(p){B={left:0,center:0.5,right:1}[p]};M.textSetter=function(p){p!==at&&L.textSetter(p);Q();P()};M["stroke-widthSetter"]=function(u,p){u&&(s=!0);q=u%2/2;O(p,u)};M.strokeSetter=M.fillSetter=M.rSetter=function(u,p){p==="fill"&&u&&(s=!0);O(p,u)};M.anchorXSetter=function(u,p){X=u;O(p,u+q-S)};M.anchorYSetter=function(u,p){W=u;O(p,u-A)};M.xSetter=function(p){M.x=p;B&&(p-=B*((F||G.width)+H));S=aq(p);M.attr("translateX",S)};M.ySetter=function(p){A=M.y=aq(p);M.attr("translateY",A)};var J=M.css;return av(M,{css:function(u){if(u){var p={},u=ap(u);aw(M.textProps,function(x){u[x]!==at&&(p[x]=u[x],delete u[x])});L.css(p)}return J.call(M,u)},getBBox:function(){return{width:G.width+2*H,height:G.height+2*H,x:G.x-H,y:G.y-H}},shadow:function(p){K&&K.shadow(p);return M},destroy:function(){aO(M.element,"mouseenter");aO(M.element,"mouseleave");L&&(L=L.destroy());K&&(K=K.destroy());a9.prototype.destroy.call(M);M=N=Q=P=O=null}})}};d=bm;av(a9.prototype,{htmlCss:function(q){var p=this.element;if(p=q&&p.tagName==="SPAN"&&q.width){delete q.width,this.textWidth=p,this.updateTransform()}this.styles=av(this.styles,q);bk(this.element,q);return this},htmlGetBBox:function(){var q=this.element,p=this.bBox;if(!p){if(q.nodeName==="text"){q.style.position="absolute"}p=this.bBox={x:q.offsetLeft,y:q.offsetTop,width:q.offsetWidth,height:q.offsetHeight}}return p},htmlUpdateTransform:function(){if(this.added){var F=this.renderer,C=this.element,B=this.translateX||0,A=this.translateY||0,z=this.x||0,x=this.y||0,w=this.textAlign||"left",v={left:0,center:0.5,right:1}[w],u=this.shadows;bk(C,{marginLeft:B,marginTop:A});u&&aw(u,function(G){bk(G,{marginLeft:B+1,marginTop:A+1})});this.inverted&&aw(C.childNodes,function(G){F.invertChild(G,C)});if(C.tagName==="SPAN"){var s=this.rotation,r,q=al(this.textWidth),p=[s,w,C.innerHTML,this.textWidth].join(",");if(p!==this.cTT){r=F.fontMetrics(C.style.fontSize).b;au(s)&&this.setSpanRotation(s,v,r);u=ax(this.elemWidth,C.offsetWidth);if(u>q&&/[ \-]/.test(C.textContent||C.innerText)){bk(C,{width:q+"px",display:"block",whiteSpace:"normal"}),u=q}this.getSpanCorrection(u,r,v,s,w)}bk(C,{left:z+(this.xCorr||0)+"px",top:x+(this.yCorr||0)+"px"});if(bE){r=C.offsetHeight}this.cTT=p}}else{this.alignOnAdd=!0}},setSpanRotation:function(q,p,u){var s={},r=bQ?"-ms-transform":bE?"-webkit-transform":bL?"MozTransform":bS?"-o-transform":"";s[r]=s.transform="rotate("+q+"deg)";s[r+(bL?"Origin":"-origin")]=s.transformOrigin=p*100+"% "+u+"px";bk(this.element,s)},getSpanCorrection:function(q,p,r){this.xCorr=-q*r;this.yCorr=-p}});av(bm.prototype,{html:function(q,p,v){var u=this.createElement("span"),s=u.element,r=u.renderer;u.textSetter=function(w){w!==s.innerHTML&&delete this.bBox;s.innerHTML=this.textStr=w};u.xSetter=u.ySetter=u.alignSetter=u.rotationSetter=function(x,w){w==="align"&&(w="textAlign");u[w]=x;u.htmlUpdateTransform()};u.attr({text:q,x:aq(p),y:aq(v)}).css({position:"absolute",whiteSpace:"nowrap",fontFamily:this.style.fontFamily,fontSize:this.style.fontSize});u.css=u.htmlCss;if(r.isSVG){u.add=function(x){var w,A=r.box.parentNode,z=[];if(this.parentGroup=x){if(w=x.div,!w){for(;x;){z.push(x),x=x.parentGroup}aw(z.reverse(),function(B){var C;w=B.div=B.div||bD(aG,{className:bc(B.element,"class")},{position:"absolute",left:(B.translateX||0)+"px",top:(B.translateY||0)+"px"},w||A);C=w.style;av(B,{translateXSetter:function(F,G){C.left=F+"px";B[G]=F;B.doTransform=!0},translateYSetter:function(F,G){C.top=F+"px";B[G]=F;B.doTransform=!0},visibilitySetter:function(G,F){C[F]=G}})})}}else{w=A}w.appendChild(s);u.added=!0;u.alignOnAdd&&u.htmlUpdateTransform();return u}}return u}});var aL;if(!aY&&!bx){aL={init:function(q,p){var u=["<",p,' filled="f" stroked="f"'],s=["position: ","absolute",";"],r=p===aG;(p==="shape"||r)&&s.push("left:0;top:0;width:1px;height:1px;");s.push("visibility: ",r?"hidden":"visible");u.push(' style="',s.join(""),'"/>');if(p){u=r||p==="span"||p==="img"?u.join(""):q.prepVML(u),this.element=bD(u)}this.renderer=q},add:function(q){var p=this.renderer,s=this.element,r=p.box,r=q?q.element||q:r;q&&q.inverted&&p.invertChild(s,r);r.appendChild(s);this.added=!0;this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform();if(this.onAdd){this.onAdd()}return this},updateTransform:a9.prototype.htmlUpdateTransform,setSpanRotation:function(){var q=this.rotation,p=bu(q*a7),r=bP(q*a7);bk(this.element,{filter:q?["progid:DXImageTransform.Microsoft.Matrix(M11=",p,", M12=",-r,", M21=",r,", M22=",p,", sizingMethod='auto expand')"].join(""):aV})},getSpanCorrection:function(z,x,w,v,u){var s=v?bu(v*a7):1,r=v?bP(v*a7):0,q=ax(this.elemHeight,this.element.offsetHeight),p;this.xCorr=s<0&&-z;this.yCorr=r<0&&-q;p=s*r<0;this.xCorr+=r*x*(p?1-w:w);this.yCorr-=s*x*(v?p?w:1-w:1);u&&u!=="left"&&(this.xCorr-=z*w*(s<0?-1:1),v&&(this.yCorr-=q*w*(r<0?-1:1)),bk(this.element,{textAlign:u}))},pathToVML:function(q){for(var p=q.length,r=[];p--;){if(aC(q[p])){r[p]=aq(q[p]*10)-5}else{if(q[p]==="Z"){r[p]="x"}else{if(r[p]=q[p],q.isArc&&(q[p]==="wa"||q[p]==="at")){r[p+5]===r[p+7]&&(r[p+7]+=q[p+7]>q[p+5]?1:-1),r[p+6]===r[p+8]&&(r[p+8]+=q[p+8]>q[p+6]?1:-1)}}}}return r.join(" ")||"x"},clip:function(q){var p=this,r;q?(r=q.members,i(r,p),r.push(p),p.destroyClip=function(){i(r,p)},q=q.getCSS(p)):(p.destroyClip&&p.destroyClip(),q={clip:bv?"inherit":"rect(auto)"});return p.css(q)},css:a9.prototype.htmlCss,safeRemoveChild:function(p){p.parentNode&&aK(p)},destroy:function(){this.destroyClip&&this.destroyClip();return a9.prototype.destroy.apply(this)},on:function(q,p){this.element["on"+q]=function(){var r=a8.event;r.target=r.srcElement;p(r)};return this},cutOffPath:function(q,p){var r,q=q.split(/[ ,]/);r=q.length;if(r===9||r===11){q[r-4]=q[r-2]=al(q[r-2])-10*p}return q.join(" ")},shadow:function(H,G,F){var C=[],B,A=this.element,z=this.renderer,x,w=A.style,v,u=A.path,s,r,q,p;u&&typeof u.value!=="string"&&(u="x");r=u;if(H){q=ax(H.width,3);p=(H.opacity||0.15)/q;for(B=1;B<=3;B++){s=q*2+1-2*B;F&&(r=this.cutOffPath(u.value,s+0.5));v=['<shape isShadow="true" strokeweight="',s,'" filled="false" path="',r,'" coordsize="10 10" style="',A.style.cssText,'" />'];x=bD(z.prepVML(v),null,{left:al(w.left)+ax(H.offsetX,1),top:al(w.top)+ax(H.offsetY,1)});if(F){x.cutOff=s+1}v=['<stroke color="',H.color||"black",'" opacity="',p*B,'"/>'];bD(z.prepVML(v),null,null,x);G?G.element.appendChild(x):A.parentNode.insertBefore(x,A);C.push(x)}this.shadows=C}return this},updateShadows:bF,setAttr:function(q,p){bv?this.element[q]=p:this.element.setAttribute(q,p)},classSetter:function(p){this.element.className=p},dashstyleSetter:function(q,p,r){(r.getElementsByTagName("stroke")[0]||bD(this.renderer.prepVML(["<stroke/>"]),null,null,r))[p]=q||"solid";this[p]=q},dSetter:function(q,p,s){var r=this.shadows,q=q||[];this.d=q.join&&q.join(" ");s.path=q=this.pathToVML(q);if(r){for(s=r.length;s--;){r[s].path=r[s].cutOff?this.cutOffPath(q,r[s].cutOff):q}}this.setAttr(p,q)},fillSetter:function(q,p,s){var r=s.nodeName;if(r==="SPAN"){s.style.color=q}else{if(r!=="IMG"){s.filled=q!==aV,this.setAttr("fillcolor",this.renderer.color(q,s,p,this))}}},opacitySetter:bF,rotationSetter:function(q,p,r){r=r.style;this[p]=r[p]=q;r.left=-aq(bP(q*a7)+1)+"px";r.top=aq(bu(q*a7))+"px"},strokeSetter:function(q,p,r){this.setAttr("strokecolor",this.renderer.color(q,r,p))},"stroke-widthSetter":function(q,p,r){r.stroked=!!q;this[p]=q;aC(q)&&(q+="px");this.setAttr("strokeweight",q)},titleSetter:function(q,p){this.setAttr(p,q)},visibilitySetter:function(q,p,r){q==="inherit"&&(q="visible");this.shadows&&aw(this.shadows,function(s){s.style[p]=q});r.nodeName==="DIV"&&(q=q==="hidden"?"-999em":0,bv||(r.style[p]=q?"visible":"hidden"),p="top");r.style[p]=q},xSetter:function(q,p,r){this[p]=q;p==="x"?p="left":p==="y"&&(p="top");this.updateClipping?(this[p]=q,this.updateClipping()):r.style[p]=q},zIndexSetter:function(q,p,r){r.style[p]=q}};aT.VMLElement=aL=bT(a9,aL);aL.prototype.ySetter=aL.prototype.widthSetter=aL.prototype.heightSetter=aL.prototype.xSetter;var a4={Element:aL,isIE8:y.indexOf("MSIE 8.0")>-1,init:function(q,p,v,u){var s;this.alignedObjects=[];u=this.createElement(aG).css(av(this.getStyle(u),{position:"relative"}));s=u.element;q.appendChild(u.element);this.isVML=!0;this.box=s;this.boxWrapper=u;this.cache={};this.setSize(p,v,!1);if(!ao.namespaces.hcv){ao.namespaces.add("hcv","urn:schemas-microsoft-com:vml");try{ao.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}catch(r){ao.styleSheets[0].cssText+="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}}},isHidden:function(){return !this.box.offsetWidth},clipRect:function(q,p,v,u){var s=this.createElement(),r=R(q);return av(s,{members:[],left:(r?q.x:q)+1,top:(r?q.y:p)+1,width:(r?q.width:v)-1,height:(r?q.height:u)-1,getCSS:function(x){var w=x.element,C=w.nodeName,x=x.inverted,B=this.top-(C==="shape"?w.offsetTop:0),A=this.left,w=A+this.width,z=B+this.height,B={clip:"rect("+aq(x?A:B)+"px,"+aq(x?z:w)+"px,"+aq(x?w:z)+"px,"+aq(x?B:A)+"px)"};!x&&bv&&C==="DIV"&&av(B,{width:w+"px",height:z+"px"});return B},updateClipping:function(){aw(s.members,function(w){w.element&&w.css(s.getCSS(w))})}})},color:function(bZ,bb,ba,ab){var aa=this,Z,X=/^rgba/,W,V,U=aV;bZ&&bZ.linearGradient?V="gradient":bZ&&bZ.radialGradient&&(V="pattern");if(V){var T,S,Q=bZ.linearGradient||bZ.radialGradient,P,O,N,J,B,L="",bZ=bZ.stops,G,K=[],H=function(){W=['<fill colors="'+K.join(",")+'" opacity="',N,'" o:opacity2="',O,'" type="',V,'" ',L,'focus="100%" method="any" />'];bD(aa.prepVML(W),null,null,bb)};P=bZ[0];G=bZ[bZ.length-1];P[0]>0&&bZ.unshift([0,P[1]]);G[0]<1&&bZ.push([1,G[1]]);aw(bZ,function(r,p){X.test(r[1])?(Z=bJ(r[1]),T=Z.get("rgb"),S=Z.get("a")):(T=r[1],S=1);K.push(r[0]*100+"% "+T);p?(N=S,J=T):(O=S,B=T)});if(ba==="fill"){if(V==="gradient"){ba=Q.x1||Q[0]||0,bZ=Q.y1||Q[1]||0,P=Q.x2||Q[2]||0,Q=Q.y2||Q[3]||0,L='angle="'+(90-aQ.atan((Q-bZ)/(P-ba))*180/bf)+'"',H()}else{var U=Q.r,M=U*2,F=U*2,A=Q.cx,z=Q.cy,q=bb.radialReference,C,U=function(){q&&(C=ab.getBBox(),A+=(q[0]-C.x)/C.width-0.5,z+=(q[1]-C.y)/C.height-0.5,M*=q[2]/C.width,F*=q[2]/C.height);L='src="'+a1.global.VMLRadialGradientURL+'" size="'+M+","+F+'" origin="0.5,0.5" position="'+A+","+z+'" color2="'+B+'" ';H()};ab.added?U():ab.onAdd=U;U=J}}else{U=T}}else{if(X.test(bZ)&&bb.tagName!=="IMG"){Z=bJ(bZ),W=["<",ba,' opacity="',Z.get("a"),'"/>'],bD(this.prepVML(W),null,null,bb),U=Z.get("rgb")}else{U=bb.getElementsByTagName(ba);if(U.length){U[0].opacity=1,U[0].type="solid"}U=bZ}}return U},prepVML:function(q){var p=this.isIE8,q=q.join("");p?(q=q.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),q=q.indexOf('style="')===-1?q.replace("/>",' style="display:inline-block;behavior:url(#default#VML);" />'):q.replace('style="','style="display:inline-block;behavior:url(#default#VML);')):q=q.replace("<","<hcv:");return q},text:bm.prototype.html,path:function(q){var p={coordsize:"10 10"};n(q)?p.d=q:R(q)&&av(p,q);return this.createElement("shape").attr(p)},circle:function(q,p,s){var r=this.symbol("circle");if(R(q)){s=q.r,p=q.y,q=q.x}r.isCircle=!0;r.r=s;return r.attr({x:q,y:p})},g:function(q){var p;q&&(p={className:"highcharts-"+q,"class":"highcharts-"+q});return this.createElement(aG).attr(p)},image:function(q,p,v,u,s){var r=this.createElement("img").attr({src:q});arguments.length>1&&r.attr({x:p,y:v,width:u,height:s});return r},createElement:function(p){return p==="rect"?this.symbol(p):bm.prototype.createElement.call(this,p)},invertChild:function(q,p){var u=this,s=p.style,r=q.tagName==="IMG"&&q.style;bk(q,{flip:"x",left:al(s.width)-(r?al(r.top):1),top:al(s.height)-(r?al(r.left):1),rotation:-90});aw(q.childNodes,function(v){u.invertChild(v,q)})},symbols:{arc:function(B,A,z,x,w){var v=w.start,u=w.end,s=w.r||z||x,z=w.innerR,x=bu(v),r=bP(v),q=bu(u),p=bP(u);if(u-v===0){return["x"]}v=["wa",B-s,A-s,B+s,A+s,B+s*x,A+s*r,B+s*q,A+s*p];w.open&&!z&&v.push("e","M",B,A);v.push("at",B-z,A-z,B+z,A+z,B+z*q,A+z*p,B+z*x,A+z*r,"x","e");v.isArc=!0;return v},circle:function(q,p,u,s,r){r&&(u=s=2*r.r);r&&r.isCircle&&(q-=u/2,p-=s/2);return["wa",q,p,q+u,p+s,q+u,p+s/2,q+u,p+s/2,"e"]},rect:function(q,p,u,s,r){return bm.prototype.symbols[!au(r)||!r.r?"square":"callout"].call(0,q,p,u,s,r)}}};aT.VMLRenderer=aL=function(){this.init.apply(this,arguments)};aL.prototype=ap(bm.prototype,a4);d=aL}bm.prototype.measureSpanWidth=function(q,p){var s=ao.createElement("span"),r;r=ao.createTextNode(q);s.appendChild(r);bk(s,p);this.box.appendChild(s);r=s.offsetWidth;aK(s);return r};var m;if(bx){aT.CanVGRenderer=aL=function(){b="http://www.w3.org/1999/xhtml"},aL.prototype.symbols={},m=function(){function q(){var r=p.length,s;for(s=0;s<r;s++){p[s]()}p=[]}var p=[];return{push:function(s,r){p.length===0&&ai(r,q);p.push(s)}}}(),d=aL}c.prototype={addLabel:function(){var G=this.axis,F=G.options,C=G.chart,B=G.horiz,A=G.categories,z=G.names,x=this.pos,w=F.labels,v=w.rotation,u=G.tickPositions,B=B&&A&&!w.step&&!w.staggerLines&&!w.rotation&&C.plotWidth/u.length||!B&&(C.margin[3]||C.chartWidth*0.33),s=x===u[0],r=x===u[u.length-1],q,z=A?ax(A[x],z[x],x):x,A=this.label,p=u.info;G.isDatetimeAxis&&p&&(q=F.dateTimeLabelFormats[p.higherRanks[x]||p.unitName]);this.isFirst=s;this.isLast=r;F=G.labelFormatter.call({axis:G,chart:C,isFirst:s,isLast:r,dateTimeLabelFormat:q,value:G.isLog?f(ac(z)):z});x=B&&{width:ar(1,aq(B-2*(w.padding||10)))+"px"};x=av(x,w.style);if(au(A)){A&&A.attr({text:F}).css(x)}else{q={align:G.labelAlign};if(aC(v)){q.rotation=v}if(B&&w.ellipsis){x.HcHeight=G.len/u.length}this.label=A=au(F)&&w.enabled?C.renderer.text(F,0,0,w.useHTML).attr(q).css(x).add(G.labelGroup):null;G.tickBaseline=C.renderer.fontMetrics(w.style.fontSize,A).b;v&&G.side===2&&(G.tickBaseline*=bu(v*a7))}this.yOffset=A?ax(w.y,G.tickBaseline+(G.side===2?8:-(A.getBBox().height/2))):0},getLabelSize:function(){var q=this.label,p=this.axis;return q?q.getBBox()[p.horiz?"height":"width"]:0},getLabelSides:function(){var q=this.label.getBBox(),p=this.axis,s=p.horiz,r=p.options.labels,q=s?q.width:q.height,p=s?r.x-q*{left:0,center:0.5,right:1}[p.labelAlign]:0;return[p,s?q+p:q]},handleOverflow:function(H,G){var F=!0,C=this.axis,B=this.isFirst,A=this.isLast,z=C.horiz?G.x:G.y,x=C.reversed,w=C.tickPositions,v=this.getLabelSides(),u=v[0],v=v[1],s,r,q,p=this.label.line||0;s=C.labelEdge;r=C.justifyLabels&&(B||A);s[p]===at||z+u>s[p]?s[p]=z+v:r||(F=!1);if(r){s=(r=C.justifyToPlot)?C.pos:0;r=r?s+C.len:C.chart.chartWidth;do{H+=B?1:-1,q=C.ticks[w[H]]}while(w[H]&&(!q||!q.label||q.label.line!==p));C=q&&q.label.xy&&q.label.xy.x+q.getLabelSides()[B?0:1];B&&!x||A&&x?z+u<s&&(z=s-u,q&&z+v>C&&(F=!1)):z+v>r&&(z=r-v,q&&z+u<C&&(F=!1));G.x=z}return F},getPosition:function(q,p,w,v){var u=this.axis,s=u.chart,r=v&&s.oldChartHeight||s.chartHeight;return{x:q?u.translate(p+w,null,null,v)+u.transB:u.left+u.offset+(u.opposite?(v&&s.oldChartWidth||s.chartWidth)-u.right-u.left:0),y:q?r-u.bottom+u.offset-(u.opposite?u.height:0):r-u.translate(p+w,null,null,v)-u.transB}},getLabelPosition:function(C,B,A,z,x,w,v,u){var s=this.axis,r=s.transA,q=s.reversed,p=s.staggerLines,C=C+x.x-(w&&z?w*r*(q?-1:1):0),B=B+this.yOffset-(w&&!z?w*r*(q?1:-1):0);if(p){A.line=v/(u||1)%p,B+=A.line*(s.labelOffset/p)}return{x:C,y:B}},getMarkPath:function(q,p,v,u,s,r){return r.crispLine(["M",q,p,"L",q+(s?0:-v),p+(s?v:0)],u)},render:function(ba,ab,aa){var Z=this.axis,X=Z.options,W=Z.chart.renderer,V=Z.horiz,U=this.type,T=this.label,S=this.pos,Q=X.labels,P=this.gridLine,O=U?U+"Grid":"grid",N=U?U+"Tick":"tick",M=X[O+"LineWidth"],L=X[O+"LineColor"],G=X[O+"LineDashStyle"],A=X[N+"Length"],O=X[N+"Width"]||0,J=X[N+"Color"],F=X[N+"Position"],N=this.mark,H=Q.step,K=!0,C=Z.tickmarkOffset,B=this.getPosition(V,S,C,ab),z=B.x,B=B.y,p=V&&z===Z.pos+Z.len||!V&&B===Z.pos?-1:1,aa=ax(aa,1);this.isActive=!0;if(M){S=Z.getPlotLinePath(S+C,M*p,ab,!0);if(P===at){P={stroke:L,"stroke-width":M};if(G){P.dashstyle=G}if(!U){P.zIndex=1}if(ab){P.opacity=0}this.gridLine=P=M?W.path(S).attr(P).add(Z.gridGroup):null}if(!ab&&P&&S){P[this.isNew?"attr":"animate"]({d:S,opacity:aa})}}if(O&&A){F==="inside"&&(A=-A),Z.opposite&&(A=-A),U=this.getMarkPath(z,B,A,O*p,V,W),N?N.animate({d:U,opacity:aa}):this.mark=W.path(U).attr({stroke:J,"stroke-width":O,opacity:aa}).add(Z.axisGroup)}if(T&&!isNaN(z)){T.xy=B=this.getLabelPosition(z,B,T,V,Q,C,ba,H),this.isFirst&&!this.isLast&&!ax(X.showFirstLabel,1)||this.isLast&&!this.isFirst&&!ax(X.showLastLabel,1)?K=!1:!Z.isRadial&&!Q.step&&!Q.rotation&&!ab&&aa!==0&&(K=this.handleOverflow(ba,B)),H&&ba%H&&(K=!1),K&&!isNaN(B.y)?(B.opacity=aa,T[this.isNew?"attr":"animate"](B),this.isNew=!1):T.attr("y",-9999)}},destroy:function(){bo(this,this.axis)}};aT.PlotLineOrBand=function(q,p){this.axis=q;if(p){this.options=p,this.id=p.id}};aT.PlotLineOrBand.prototype={render:function(){var S=this,Q=S.axis,P=Q.horiz,O=(Q.pointRange||0)/2,N=S.options,M=N.label,L=S.label,K=N.width,J=N.to,H=N.from,G=au(H)&&au(J),F=N.value,C=N.dashStyle,B=S.svgElem,A=[],z,x=N.color,s=N.zIndex,v=N.events,w={},u=Q.chart.renderer;Q.isLog&&(H=br(H),J=br(J),F=br(F));if(K){if(A=Q.getPlotLinePath(F,K),w={stroke:x,"stroke-width":K},C){w.dashstyle=C}}else{if(G){H=ar(H,Q.min-O);J=bi(J,Q.max+O);A=Q.getPlotBandPath(H,J,N);if(x){w.fill=x}if(N.borderWidth){w.stroke=N.borderColor,w["stroke-width"]=N.borderWidth}}else{return}}if(au(s)){w.zIndex=s}if(B){if(A){B.animate({d:A},null,B.onGetPath)}else{if(B.hide(),B.onGetPath=function(){B.show()},L){S.label=L=L.destroy()}}}else{if(A&&A.length&&(S.svgElem=B=u.path(A).attr(w).add(),v)){for(z in O=function(p){B.on(p,function(q){v[p].apply(S,[q])})},v){O(z)}}}if(M&&au(M.text)&&A&&A.length&&Q.width>0&&Q.height>0){M=ap({align:P&&G&&"center",x:P?!G&&4:10,verticalAlign:!P&&G&&"middle",y:P?G?16:10:G?6:-4,rotation:P&&!G&&90},M);if(!L){w={align:M.textAlign||M.align,rotation:M.rotation};if(au(s)){w.zIndex=s}S.label=L=u.text(M.text,0,0,M.useHTML).attr(w).css(M.style).add()}Q=[A[1],A[4],G?A[6]:A[1]];G=[A[2],A[5],G?A[7]:A[2]];A=bH(Q);P=bH(G);L.align(M,!1,{x:A,y:P,width:by(Q)-A,height:by(G)-P});L.show()}else{L&&L.hide()}return S},destroy:function(){i(this.axis.plotLinesAndBands,this);delete this.axis;bo(this)}};bB.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:a0,lineColor:"#C0D0E0",lineWidth:1,minPadding:0.01,maxPadding:0.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#707070"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:0.05,minPadding:0.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return bU(this.total,-1)},style:a0.style}},defaultLeftAxisOptions:{labels:{x:-15,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{x:0,y:null},title:{rotation:0}},defaultTopAxisOptions:{labels:{x:0,y:-15},title:{rotation:0}},init:function(q,p){var v=p.isX;this.horiz=q.inverted?!v:v;this.coll=(this.isXAxis=v)?"xAxis":"yAxis";this.opposite=p.opposite;this.side=p.side||(this.horiz?this.opposite?0:2:this.opposite?1:3);this.setOptions(p);var u=this.options,s=u.type;this.labelFormatter=u.labels.formatter||this.defaultLabelFormatter;this.userOptions=p;this.minPixelPadding=0;this.chart=q;this.reversed=u.reversed;this.zoomEnabled=u.zoomEnabled!==!1;this.categories=u.categories||s==="category";this.names=[];this.isLog=s==="logarithmic";this.isDatetimeAxis=s==="datetime";this.isLinked=au(u.linkedTo);this.tickmarkOffset=this.categories&&u.tickmarkPlacement==="between"?0.5:0;this.ticks={};this.labelEdge=[];this.minorTicks={};this.plotLinesAndBands=[];this.alternateBands={};this.len=0;this.minRange=this.userMinRange=u.minRange||u.maxZoom;this.range=u.range;this.offset=u.offset||0;this.stacks={};this.oldStacks={};this.min=this.max=null;this.crosshair=ax(u.crosshair,bX(q.options.tooltip.crosshairs)[v?0:1],!1);var r,u=this.options.events;aD(this,q.axes)===-1&&(v&&!this.isColorAxis?q.axes.splice(q.xAxis.length,0,this):q.axes.push(this),q[this.coll].push(this));this.series=this.series||[];if(q.inverted&&v&&this.reversed===at){this.reversed=!0}this.removePlotLine=this.removePlotBand=this.removePlotBandOrLine;for(r in u){aZ(this,r,u[r])}if(this.isLog){this.val2lin=br,this.lin2val=ac}},setOptions:function(p){this.options=ap(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],ap(a1[this.coll],p))},defaultLabelFormatter:function(){var q=this.axis,p=this.value,x=q.categories,w=this.dateTimeLabelFormat,v=a1.lang.numericSymbols,u=v&&v.length,s,r=q.options.labels.format,q=q.isLog?p:q.tickInterval;if(r){s=bg(r,this)}else{if(x){s=p}else{if(w){s=aW(w,p)}else{if(u&&q>=1000){for(;u--&&s===at;){x=Math.pow(1000,u+1),q>=x&&v[u]!==null&&(s=bU(p/x,-1)+v[u])}}}}}s===at&&(s=aU(p)>=10000?bU(p,0):bU(p,-1,at,""));return s},getSeriesExtremes:function(){var q=this,p=q.chart;q.hasVisibleSeries=!1;q.dataMin=q.dataMax=null;q.buildStacks&&q.buildStacks();aw(q.series,function(u){if(u.visible||!p.options.chart.ignoreHiddenSeries){var s;s=u.options.threshold;var r;q.hasVisibleSeries=!0;q.isLog&&s<=0&&(s=null);if(q.isXAxis){if(s=u.xData,s.length){q.dataMin=bi(ax(q.dataMin,s[0]),bH(s)),q.dataMax=ar(ax(q.dataMax,s[0]),by(s))}}else{u.getExtremes();r=u.dataMax;u=u.dataMin;if(au(u)&&au(r)){q.dataMin=bi(ax(q.dataMin,u),u),q.dataMax=ar(ax(q.dataMax,r),r)}if(au(s)){if(q.dataMin>=s){q.dataMin=s,q.ignoreMinPadding=!0}else{if(q.dataMax<s){q.dataMax=s,q.ignoreMaxPadding=!0}}}}}})},translate:function(A,z,x,w,v,u){var s=1,r=0,q=w?this.oldTransA:this.transA,w=w?this.oldMin:this.min,p=this.minPixelPadding,v=(this.options.ordinal||this.isLog&&v)&&this.lin2val;if(!q){q=this.transA}if(x){s*=-1,r=this.len}this.reversed&&(s*=-1,r-=s*(this.sector||this.len));z?(A=A*s+r,A-=p,A=A/q+w,v&&(A=this.lin2val(A))):(v&&(A=this.val2lin(A)),u==="between"&&(u=0.5),A=s*(A-w)*q+r+s*p+(aC(u)?q*u*this.pointRange:0));return A},toPixels:function(q,p){return this.translate(q,!1,!this.horiz,null,!0)+(p?0:this.pos)},toValue:function(q,p){return this.translate(q-(p?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(F,C,B,A,z){var x=this.chart,w=this.left,v=this.top,u,s,r=B&&x.oldChartHeight||x.chartHeight,q=B&&x.oldChartWidth||x.chartWidth,p;u=this.transB;z=ax(z,this.translate(F,null,null,B));F=B=aq(z+u);u=s=aq(r-z-u);if(isNaN(z)){p=!0}else{if(this.horiz){if(u=v,s=r-this.bottom,F<w||F>w+this.width){p=!0}}else{if(F=w,B=q-this.right,u<v||u>v+this.height){p=!0}}}return p&&!A?null:x.renderer.crispLine(["M",F,u,"L",B,s],C||1)},getLinearTickPositions:function(q,p,w){var v,u=f(aR(p/q)*q),s=f(ag(w/q)*q),r=[];if(p===w&&aC(p)){return[p]}for(p=u;p<=s;){r.push(p);p=f(p+q);if(p===v){break}v=p}return r},getMinorTickPositions:function(){var q=this.options,p=this.tickPositions,u=this.minorTickInterval,s=[],r;if(this.isLog){r=p.length;for(q=1;q<r;q++){s=s.concat(this.getLogTickPositions(u,p[q-1],p[q],!0))}}else{if(this.isDatetimeAxis&&q.minorTickInterval==="auto"){s=s.concat(this.getTimeTicks(this.normalizeTimeTickInterval(u),this.min,this.max,q.startOfWeek)),s[0]<this.min&&s.shift()}else{for(p=this.min+(p[0]-this.min)%u;p<=this.max;p+=u){s.push(p)}}}return s},adjustForMinRange:function(){var B=this.options,A=this.min,z=this.max,x,w=this.dataMax-this.dataMin>=this.minRange,v,u,s,r,q;if(this.isXAxis&&this.minRange===at&&!this.isLog){au(B.min)||au(B.max)?this.minRange=null:(aw(this.series,function(C){r=C.xData;for(u=q=C.xIncrement?1:r.length-1;u>0;u--){if(s=r[u]-r[u-1],v===at||s<v){v=s}}}),this.minRange=bi(v*5,this.dataMax-this.dataMin))}if(z-A<this.minRange){var p=this.minRange;x=(p-z+A)/2;x=[A-x,ax(B.min,A-x)];if(w){x[2]=this.dataMin}A=by(x);z=[A+p,ax(B.max,A+p)];if(w){z[2]=this.dataMax}z=bH(z);z-A<p&&(x[0]=z-p,x[1]=ax(B.min,z-p),A=by(x))}this.min=A;this.max=z},setAxisTranslation:function(A){var z=this,x=z.max-z.min,w=z.axisPointRange||0,v,u=0,s=0,r=z.linkedParent,q=!!z.categories,p=z.transA;if(z.isXAxis||q||w){r?(u=r.minPointOffset,s=r.pointRangePadding):aw(z.series,function(B){var F=q?1:z.isXAxis?B.pointRange:z.axisPointRange||0,C=B.options.pointPlacement,G=B.closestPointRange;F>x&&(F=0);w=ar(w,F);u=ar(u,j(C)?0:F/2);s=ar(s,C==="on"?0:F);!B.noSharedTooltip&&au(G)&&(v=au(v)?bi(v,G):G)}),r=z.ordinalSlope&&v?z.ordinalSlope/v:1,z.minPointOffset=u*=r,z.pointRangePadding=s*=r,z.pointRange=bi(w,x),z.closestPointRange=v}if(A){z.oldTransA=p}z.translationSlope=z.transA=p=z.len/(x+s||1);z.transB=z.horiz?z.left:z.bottom;z.minPixelPadding=p*u},setTickPositions:function(L){var K=this,J=K.chart,H=K.options,G=H.startOnTick,F=H.endOnTick,C=K.isLog,B=K.isDatetimeAxis,A=K.isXAxis,z=K.isLinked,x=K.options.tickPositioner,w=H.maxPadding,v=H.minPadding,u=H.tickInterval,s=H.minTickInterval,p=H.tickPixelInterval,r,q=K.categories;z?(K.linkedParent=J[K.coll][H.linkedTo],J=K.linkedParent.getExtremes(),K.min=ax(J.min,J.dataMin),K.max=ax(J.max,J.dataMax),H.type!==K.linkedParent.options.type&&aF(11,1)):(K.min=ax(K.userMin,H.min,K.dataMin),K.max=ax(K.userMax,H.max,K.dataMax));if(C){!L&&bi(K.min,ax(K.dataMin,K.min))<=0&&aF(10,1),K.min=f(br(K.min)),K.max=f(br(K.max))}if(K.range&&au(K.max)){K.userMin=K.min=ar(K.min,K.max-K.range),K.userMax=K.max,K.range=null}K.beforePadding&&K.beforePadding();K.adjustForMinRange();if(!q&&!K.axisPointRange&&!K.usePercentage&&!z&&au(K.min)&&au(K.max)&&(J=K.max-K.min)){if(!au(H.min)&&!au(K.userMin)&&v&&(K.dataMin<0||!K.ignoreMinPadding)){K.min-=J*v}if(!au(H.max)&&!au(K.userMax)&&w&&(K.dataMax>0||!K.ignoreMaxPadding)){K.max+=J*w}}if(aC(H.floor)){K.min=ar(K.min,H.floor)}if(aC(H.ceiling)){K.max=bi(K.max,H.ceiling)}K.min===K.max||K.min===void 0||K.max===void 0?K.tickInterval=1:z&&!u&&p===K.linkedParent.options.tickPixelInterval?K.tickInterval=K.linkedParent.tickInterval:(K.tickInterval=ax(u,q?1:(K.max-K.min)*p/ar(K.len,p)),!au(u)&&K.len<p&&!this.isRadial&&!this.isLog&&!q&&G&&F&&(r=!0,K.tickInterval/=4));A&&!L&&aw(K.series,function(M){M.processData(K.min!==K.oldMin||K.max!==K.oldMax)});K.setAxisTranslation(!0);K.beforeSetTickPositions&&K.beforeSetTickPositions();if(K.postProcessTickInterval){K.tickInterval=K.postProcessTickInterval(K.tickInterval)}if(K.pointRange){K.tickInterval=ar(K.pointRange,K.tickInterval)}if(!u&&K.tickInterval<s){K.tickInterval=s}if(!B&&!C&&!u){K.tickInterval=bz(K.tickInterval,null,bR(K.tickInterval),H)}K.minorTickInterval=H.minorTickInterval==="auto"&&K.tickInterval?K.tickInterval/5:H.minorTickInterval;K.tickPositions=L=H.tickPositions?[].concat(H.tickPositions):x&&x.apply(K,[K.min,K.max]);if(!L){!K.ordinalPositions&&(K.max-K.min)/K.tickInterval>ar(2*K.len,200)&&aF(19,!0),L=B?K.getTimeTicks(K.normalizeTimeTickInterval(K.tickInterval,H.units),K.min,K.max,H.startOfWeek,K.ordinalPositions,K.closestPointRange,!0):C?K.getLogTickPositions(K.tickInterval,K.min,K.max):K.getLinearTickPositions(K.tickInterval,K.min,K.max),r&&L.splice(1,L.length-2),K.tickPositions=L}if(!z){H=L[0],C=L[L.length-1],B=K.minPointOffset||0,!G&&!F&&!q&&L.length===2&&L.splice(1,0,(C+H)/2),G?K.min=H:K.min-B>H&&L.shift(),F?K.max=C:K.max+B<C&&L.pop(),L.length===1&&(G=aU(K.max)>10000000000000?1:0.001,K.min-=G,K.max+=G)}},setMaxTicks:function(){var q=this.chart,p=q.maxTicks||{},s=this.tickPositions,r=this._maxTicksKey=[this.coll,this.pos,this.len].join("-");if(!this.isLinked&&!this.isDatetimeAxis&&s&&s.length>(p[r]||0)&&this.options.alignTicks!==!1){p[r]=s.length}q.maxTicks=p},adjustTickAmount:function(){var q=this._maxTicksKey,p=this.tickPositions,u=this.chart.maxTicks;if(u&&u[q]&&!this.isDatetimeAxis&&!this.categories&&!this.isLinked&&this.options.alignTicks!==!1&&this.min!==at){var s=this.tickAmount,r=p.length;this.tickAmount=q=u[q];if(r<q){for(;p.length<q;){p.push(f(p[p.length-1]+this.tickInterval))}this.transA*=(r-1)/(q-1);this.max=p[p.length-1]}if(au(s)&&q!==s){this.isDirty=!0}}},setScale:function(){var q=this.stacks,p,u,s,r;this.oldMin=this.min;this.oldMax=this.max;this.oldAxisLength=this.len;this.setAxisSize();r=this.len!==this.oldAxisLength;aw(this.series,function(v){if(v.isDirtyData||v.isDirty||v.xAxis.isDirty){s=!0}});if(r||s||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax){if(!this.isXAxis){for(p in q){for(u in q[p]){q[p][u].total=null,q[p][u].cum=0}}}this.forceRedraw=!1;this.getSeriesExtremes();this.setTickPositions();this.oldUserMin=this.userMin;this.oldUserMax=this.userMax;if(!this.isDirty){this.isDirty=r||this.min!==this.oldMin||this.max!==this.oldMax}}else{if(!this.isXAxis){if(this.oldStacks){q=this.stacks=this.oldStacks}for(p in q){for(u in q[p]){q[p][u].cum=q[p][u].total}}}}this.setMaxTicks()},setExtremes:function(q,p,w,v,u){var s=this,r=s.chart,w=ax(w,!0),u=av(u,{min:q,max:p});a2(s,"setExtremes",u,function(){s.userMin=q;s.userMax=p;s.eventArgs=u;s.isDirtyExtremes=!0;w&&r.redraw(v)})},zoom:function(q,p){var u=this.dataMin,s=this.dataMax,r=this.options;this.allowZoomOutside||(au(u)&&q<=bi(u,ax(r.min,u))&&(q=at),au(s)&&p>=ar(s,ax(r.max,s))&&(p=at));this.displayBtn=q!==at||p!==at;this.setExtremes(q,p,!1,at,{trigger:"zoom"});return !0},setAxisSize:function(){var q=this.chart,p=this.options,w=p.offsetLeft||0,v=this.horiz,u=ax(p.width,q.plotWidth-w+(p.offsetRight||0)),s=ax(p.height,q.plotHeight),r=ax(p.top,q.plotTop),p=ax(p.left,q.plotLeft+w),w=/%$/;w.test(s)&&(s=parseInt(s,10)/100*q.plotHeight);w.test(r)&&(r=parseInt(r,10)/100*q.plotHeight+q.plotTop);this.left=p;this.top=r;this.width=u;this.height=s;this.bottom=q.chartHeight-s-r;this.right=q.chartWidth-u-p;this.len=ar(v?u:s,0);this.pos=v?p:r},getExtremes:function(){var p=this.isLog;return{min:p?f(ac(this.min)):this.min,max:p?f(ac(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(q){var p=this.isLog,r=p?ac(this.min):this.min,p=p?ac(this.max):this.max;r>q||q===null?q=r:p<q&&(q=p);return this.translate(q,0,1,0,1)},autoLabelAlign:function(p){p=(ax(p,0)-this.side*90+720)%360;return p>15&&p<165?"right":p>195&&p<345?"left":"center"},getOffset:function(){var ba=this,ab=ba.chart,aa=ab.renderer,Z=ba.options,X=ba.tickPositions,W=ba.ticks,V=ba.horiz,U=ba.side,T=ab.inverted?[1,0,3,2][U]:U,S,Q,P=0,O,N=0,M=Z.title,p=Z.labels,H=0,B=ab.axisOffset,ab=ab.clipOffset,J=[-1,1,1,-1][U],L,G=1,F=ax(p.maxStaggerLines,5),A,s,K,u,q;ba.hasData=S=ba.hasVisibleSeries||au(ba.min)&&au(ba.max)&&!!X;ba.showAxis=Q=S||ax(Z.showEmpty,!0);ba.staggerLines=ba.horiz&&p.staggerLines;if(!ba.axisGroup){ba.gridGroup=aa.g("grid").attr({zIndex:Z.gridZIndex||1}).add(),ba.axisGroup=aa.g("axis").attr({zIndex:Z.zIndex||2}).add(),ba.labelGroup=aa.g("axis-labels").attr({zIndex:p.zIndex||7}).addClass("highcharts-"+ba.coll.toLowerCase()+"-labels").add()}if(S||ba.isLinked){ba.labelAlign=ax(p.align||ba.autoLabelAlign(p.rotation));aw(X,function(r){W[r]?W[r].addLabel():W[r]=new c(ba,r)});if(ba.horiz&&!ba.staggerLines&&F&&!p.rotation){for(S=ba.reversed?[].concat(X).reverse():X;G<F;){A=[];s=!1;for(L=0;L<S.length;L++){K=S[L],u=(u=W[K].label&&W[K].label.getBBox())?u.width:0,q=L%G,u&&(K=ba.translate(K),A[q]!==at&&K<A[q]&&(s=!0),A[q]=K+u)}if(s){G++}else{break}}if(G>1){ba.staggerLines=G}}aw(X,function(r){if(U===0||U===2||{1:"left",3:"right"}[U]===ba.labelAlign){H=ar(W[r].getLabelSize(),H)}});if(ba.staggerLines){H*=ba.staggerLines,ba.labelOffset=H}}else{for(L in W){W[L].destroy(),delete W[L]}}if(M&&M.text&&M.enabled!==!1){if(!ba.axisTitle){ba.axisTitle=aa.text(M.text,0,0,M.useHTML).attr({zIndex:7,rotation:M.rotation||0,align:M.textAlign||{low:"left",middle:"center",high:"right"}[M.align]}).addClass("highcharts-"+this.coll.toLowerCase()+"-title").css(M.style).add(ba.axisGroup),ba.axisTitle.isNew=!0}if(Q){P=ba.axisTitle.getBBox()[V?"height":"width"],O=M.offset,N=au(O)?0:ax(M.margin,V?5:10)}ba.axisTitle[Q?"show":"hide"]()}ba.offset=J*ax(Z.offset,B[U]);aa=U===2?ba.tickBaseline:0;V=H+N+(H&&J*(V?ax(p.y,ba.tickBaseline+8):p.x)-aa);ba.axisTitleMargin=ax(O,V);B[U]=ar(B[U],ba.axisTitleMargin+P+J*ba.offset,V);ab[T]=ar(ab[T],aR(Z.lineWidth/2)*2)},getLinePath:function(q){var p=this.chart,v=this.opposite,u=this.offset,s=this.horiz,r=this.left+(v?this.width:0)+u,u=p.chartHeight-this.bottom-(v?this.height:0)+u;v&&(q*=-1);return p.renderer.crispLine(["M",s?this.left:r,s?u:this.top,"L",s?p.chartWidth-this.right:r,s?u:p.chartHeight-this.bottom],q)},getTitlePosition:function(){var z=this.horiz,x=this.left,w=this.top,v=this.len,u=this.options.title,s=z?x:w,r=this.opposite,q=this.offset,p=al(u.style.fontSize||12),v={low:s+(z?0:v),middle:s+v/2,high:s+(z?v:0)}[u.align],x=(z?w+this.height:x)+(z?1:-1)*(r?-1:1)*this.axisTitleMargin+(this.side===2?p:0);return{x:z?v:x+(r?this.width:0)+q+(u.x||0),y:z?x-(r?this.height:0)+q:v+(u.y||0)}},render:function(){var ab=this,aa=ab.horiz,Z=ab.reversed,X=ab.chart,W=X.renderer,V=ab.options,U=ab.isLog,T=ab.isLinked,S=ab.tickPositions,Q,P=ab.axisTitle,O=ab.ticks,N=ab.minorTicks,M=ab.alternateBands,L=V.stackLabels,K=V.alternateGridColor,G=ab.tickmarkOffset,A=V.lineWidth,H=X.hasRendered&&au(ab.oldMin)&&!isNaN(ab.oldMin),J=ab.hasData,F=ab.showAxis,C,B=V.labels.overflow,s=ab.justifyLabels=aa&&B!==!1,q;ab.labelEdge.length=0;ab.justifyToPlot=B==="justify";aw([O,N,M],function(r){for(var p in r){r[p].isActive=!1}});if(J||T){if(ab.minorTickInterval&&!ab.categories&&aw(ab.getMinorTickPositions(),function(p){N[p]||(N[p]=new c(ab,p,"minor"));H&&N[p].isNew&&N[p].render(null,!0);N[p].render(null,!1,1)}),S.length&&(Q=S.slice(),(aa&&Z||!aa&&!Z)&&Q.reverse(),s&&(Q=Q.slice(1).concat([Q[0]])),aw(Q,function(p,r){s&&(r=r===Q.length-1?0:r+1);if(!T||p>=ab.min&&p<=ab.max){O[p]||(O[p]=new c(ab,p)),H&&O[p].isNew&&O[p].render(r,!0,0.1),O[p].render(r)}}),G&&ab.min===0&&(O[-1]||(O[-1]=new c(ab,-1,null,!0)),O[-1].render(-1))),K&&aw(S,function(p,r){if(r%2===0&&p<ab.max){M[p]||(M[p]=new aT.PlotLineOrBand(ab)),C=p+G,q=S[r+1]!==at?S[r+1]+G:ab.max,M[p].options={from:U?ac(C):C,to:U?ac(q):q,color:K},M[p].render(),M[p].isActive=!0}}),!ab._addedPlotLB){aw((V.plotLines||[]).concat(V.plotBands||[]),function(p){ab.addPlotBandOrLine(p)}),ab._addedPlotLB=!0}}aw([O,N,M],function(r){var p,x,w=[],v=aj?aj.duration||500:0,u=function(){for(x=w.length;x--;){r[w[x]]&&!r[w[x]].isActive&&(r[w[x]].destroy(),delete r[w[x]])}};for(p in r){if(!r[p].isActive){r[p].render(p,!1,0),r[p].isActive=!1,w.push(p)}}r===M||!X.hasRendered||!v?u():v&&setTimeout(u,v)});if(A){aa=ab.getLinePath(A),ab.axisLine?ab.axisLine.animate({d:aa}):ab.axisLine=W.path(aa).attr({stroke:V.lineColor,"stroke-width":A,zIndex:7}).add(ab.axisGroup),ab.axisLine[F?"show":"hide"]()}if(P&&F){P[P.isNew?"attr":"animate"](ab.getTitlePosition()),P.isNew=!1}L&&L.enabled&&ab.renderStackTotals();ab.isDirty=!1},redraw:function(){this.render();aw(this.plotLinesAndBands,function(p){p.render()});aw(this.series,function(p){p.isDirty=!0})},destroy:function(q){var p=this,u=p.stacks,s,r=p.plotLinesAndBands;q||aO(p);for(s in u){bo(u[s]),u[s]=null}aw([p.ticks,p.minorTicks,p.alternateBands],function(v){bo(v)});for(q=r.length;q--;){r[q].destroy()}aw("stackTotalGroup,axisLine,axisTitle,axisGroup,cross,gridGroup,labelGroup".split(","),function(v){p[v]&&(p[v]=p[v].destroy())});this.cross&&this.cross.destroy()},drawCrosshair:function(q,p){if(this.crosshair){if((au(p)||!ax(this.crosshair.snap,!0))===!1){this.hideCrosshair()}else{var u,s=this.crosshair,r=s.animation;ax(s.snap,!0)?au(p)&&(u=this.chart.inverted!=this.horiz?p.plotX:this.len-p.plotY):u=this.horiz?q.chartX-this.pos:this.len-q.chartY+this.pos;u=this.isRadial?this.getPlotLinePath(this.isXAxis?p.x:ax(p.stackY,p.y)):this.getPlotLinePath(null,null,null,null,u);if(u===null){this.hideCrosshair()}else{if(this.cross){this.cross.attr({visibility:"visible"})[r?"animate":"attr"]({d:u},r)}else{r={"stroke-width":s.width||1,stroke:s.color||"#C0C0C0",zIndex:s.zIndex||2};if(s.dashStyle){r.dashstyle=s.dashStyle}this.cross=this.chart.renderer.path(u).attr(r).add()}}}}},hideCrosshair:function(){this.cross&&this.cross.hide()}};av(bB.prototype,{getPlotBandPath:function(q,p){var s=this.getPlotLinePath(p),r=this.getPlotLinePath(q);r&&s?r.push(s[4],s[5],s[1],s[2]):r=null;return r},addPlotBand:function(p){return this.addPlotBandOrLine(p,"plotBands")},addPlotLine:function(p){return this.addPlotBandOrLine(p,"plotLines")},addPlotBandOrLine:function(q,p){var s=(new aT.PlotLineOrBand(this,q)).render(),r=this.userOptions;s&&(p&&(r[p]=r[p]||[],r[p].push(q)),this.plotLinesAndBands.push(s));return s},removePlotBandOrLine:function(q){for(var p=this.plotLinesAndBands,u=this.options,s=this.userOptions,r=p.length;r--;){p[r].id===q&&p[r].destroy()}aw([u.plotLines||[],s.plotLines||[],u.plotBands||[],s.plotBands||[]],function(v){for(r=v.length;r--;){v[r].id===q&&i(v,v[r])}})}});bB.prototype.getTimeTicks=function(G,F,C,B){var A=[],z={},x=a1.global.useUTC,w,v=new Date(F-D),u=G.unitRange,s=G.count;if(au(F)){u>=bj.second&&(v.setMilliseconds(0),v.setSeconds(u>=bj.minute?0:s*aR(v.getSeconds()/s)));if(u>=bj.minute){v[bw](u>=bj.hour?0:s*aR(v[aE]()/s))}if(u>=bj.hour){v[a6](u>=bj.day?0:s*aR(v[ae]()/s))}if(u>=bj.day){v[bV](u>=bj.month?1:s*aR(v[an]()/s))}u>=bj.month&&(v[aB](u>=bj.year?0:s*aR(v[e]()/s)),w=v[bN]());u>=bj.year&&(w-=w%s,v[Y](w));if(u===bj.week){v[bV](v[an]()-v[k]()+ax(B,1))}F=1;D&&(v=new Date(v.getTime()+D));w=v[bN]();for(var B=v.getTime(),r=v[e](),q=v[an](),p=x?D:(86400000+v.getTimezoneOffset()*60000)%86400000;B<C;){A.push(B),u===bj.year?B=I(w+F*s,0):u===bj.month?B=I(w,r+F*s):!x&&(u===bj.day||u===bj.week)?B=I(w,r,q+F*s*(u===bj.day?1:7)):B+=u*s,F++}A.push(B);aw(ah(A,function(H){return u<=bj.hour&&H%bj.day===p}),function(H){z[H]="day"})}A.info=av(G,{higherRanks:z,totalRange:u*s});return A};bB.prototype.normalizeTimeTickInterval=function(q,p){var w=p||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],v=w[w.length-1],u=bj[v[0]],s=v[1],r;for(r=0;r<w.length;r++){if(v=w[r],u=bj[v[0]],s=v[1],w[r+1]&&q<=(u*s[s.length-1]+bj[w[r+1][0]])/2){break}}u===bj.year&&q<5*u&&(s=[1,2,5]);w=bz(q/u,s,v[0]==="year"?ar(bR(q/u),1):1);return{unitRange:u,count:w,unitName:v[0]}};bB.prototype.getLogTickPositions=function(C,B,A,z){var x=this.options,w=this.len,v=[];if(!z){this._minorAutoInterval=null}if(C>=0.5){C=aq(C),v=this.getLinearTickPositions(C,B,A)}else{if(C>=0.08){for(var w=aR(B),u,s,r,q,p,x=C>0.3?[1,2,4]:C>0.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];w<A+1&&!p;w++){s=x.length;for(u=0;u<s&&!p;u++){r=br(ac(w)*x[u]),r>B&&(!z||q<=A)&&q!==at&&v.push(q),q>A&&(p=!0),q=r}}}else{if(B=ac(B),A=ac(A),C=x[z?"minorTickInterval":"tickInterval"],C=ax(C==="auto"?null:C,this._minorAutoInterval,(A-B)*(x.tickPixelInterval/(z?5:1))/((z?w/this.tickPositions.length:w)||1)),C=bz(C,null,bR(C)),v=bs(this.getLinearTickPositions(C,B,A),br),!z){this._minorAutoInterval=C/5}}}if(!z){this.tickInterval=C}return v};var bW=aT.Tooltip=function(){this.init.apply(this,arguments)};bW.prototype={init:function(q,p){var u=p.borderWidth,s=p.style,r=al(s.padding);this.chart=q;this.options=p;this.crosshairs=[];this.now={x:0,y:0};this.isHidden=!0;this.label=q.renderer.label("",0,0,p.shape||"callout",null,null,p.useHTML,null,"tooltip").attr({padding:r,fill:p.backgroundColor,"stroke-width":u,r:p.borderRadius,zIndex:8}).css(s).css({padding:0}).add().attr({y:-9999});bx||this.label.shadow(p.shadow);this.shared=p.shared},destroy:function(){if(this.label){this.label=this.label.destroy()}clearTimeout(this.hideTimer);clearTimeout(this.tooltipTimeout)},move:function(q,p,x,w){var v=this,u=v.now,s=v.options.animation!==!1&&!v.isHidden&&(aU(q-u.x)>1||aU(p-u.y)>1),r=v.followPointer||v.len>1;av(u,{x:s?(2*u.x+q)/3:q,y:s?(u.y+p)/2:p,anchorX:r?at:s?(2*u.anchorX+x)/3:x,anchorY:r?at:s?(u.anchorY+w)/2:w});v.label.attr(u);if(s){clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){v&&v.move(q,p,x,w)},32)}},hide:function(){var q=this,p;clearTimeout(this.hideTimer);if(!this.isHidden){p=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){q.label.fadeOut();q.isHidden=!0},ax(this.options.hideDelay,500)),p&&aw(p,function(r){r.setState()}),this.chart.hoverPoints=null}},getAnchor:function(z,x){var w,v=this.chart,u=v.inverted,s=v.plotTop,r=0,q=0,p,z=bX(z);w=z[0].tooltipPos;this.followPointer&&x&&(x.chartX===at&&(x=v.pointer.normalize(x)),w=[x.chartX-v.plotLeft,x.chartY-s]);w||(aw(z,function(A){p=A.series.yAxis;r+=A.plotX;q+=(A.plotLow?(A.plotLow+A.plotHigh)/2:A.plotY)+(!u&&p?p.top-s:0)}),r/=z.length,q/=z.length,w=[u?v.plotWidth-q:r,this.shared&&!u&&z.length>1&&x?x.chartY-s:u?v.plotHeight-r:q]);return bs(w,aq)},getPosition:function(G,F,C){var B=this.chart,A=this.distance,z={},x,w=["y",B.chartHeight,F,C.plotY+B.plotTop],v=["x",B.chartWidth,G,C.plotX+B.plotLeft],u=C.ttBelow||B.inverted&&!C.negative||!B.inverted&&C.negative,s=function(J,H,M,L){var K=M<L-A,H=L+A+M<H,M=L-A-M;L+=A;if(u&&H){z[J]=L}else{if(!u&&K){z[J]=M}else{if(K){z[J]=M}else{if(H){z[J]=L}else{return !1}}}}},r=function(J,H,L,K){if(K<A||K>H-A){return !1}else{z[J]=K<L/2?1:K>H-L/2?H-L-2:K-L/2}},q=function(J){var H=w;w=v;v=H;x=J},p=function(){s.apply(0,w)!==!1?r.apply(0,v)===!1&&!x&&(q(!0),p()):x?z.x=z.y=0:(q(!0),p())};(B.inverted||this.len>1)&&q();p();return z},defaultFormatter:function(q){var p=this.points||bX(this),s=p[0].series,r;r=[q.tooltipHeaderFormatter(p[0])];aw(p,function(u){s=u.series;r.push(s.tooltipFormatter&&s.tooltipFormatter(u)||u.point.tooltipFormatter(s.tooltipOptions.pointFormat))});r.push(q.options.footerFormat||"");return r.join("")},refresh:function(C,B){var A=this.chart,z=this.label,x=this.options,w,v,u={},s,r=[];s=x.formatter||this.defaultFormatter;var u=A.hoverPoints,q,p=this.shared;clearTimeout(this.hideTimer);this.followPointer=bX(C)[0].series.tooltipOptions.followPointer;v=this.getAnchor(C,B);w=v[0];v=v[1];p&&(!C.series||!C.series.noSharedTooltip)?(A.hoverPoints=C,u&&aw(u,function(F){F.setState()}),aw(C,function(F){F.setState("hover");r.push(F.getLabelConfig())}),u={x:C[0].category,y:C[0].y},u.points=r,this.len=r.length,C=C[0]):u=C.getLabelConfig();s=s.call(u,this);u=C.series;this.distance=ax(u.tooltipOptions.distance,16);s===!1?this.hide():(this.isHidden&&(bt(z),z.attr("opacity",1).show()),z.attr({text:s}),q=x.borderColor||C.color||u.color||"#606060",z.attr({stroke:q}),this.updatePosition({plotX:w,plotY:v,negative:C.negative,ttBelow:C.ttBelow}),this.isHidden=!1);a2(A,"tooltipRefresh",{text:s,x:w+A.plotLeft,y:v+A.plotTop,borderColor:q})},updatePosition:function(q){var p=this.chart,r=this.label,r=(this.options.positioner||this.getPosition).call(this,r.width,r.height,q);this.move(aq(r.x),aq(r.y),q.plotX+p.plotLeft,q.plotY+p.plotTop)},tooltipHeaderFormatter:function(q){var p=q.series,x=p.tooltipOptions,w=x.dateTimeLabelFormats,v=x.xDateFormat,u=p.xAxis,s=u&&u.options.type==="datetime"&&aC(q.key),x=x.headerFormat,u=u&&u.closestPointRange,r;if(s&&!v){if(u){for(r in bj){if(bj[r]>=u||bj[r]<=bj.day&&q.key%bj[r]>0){v=w[r];break}}}else{v=w.day}v=v||w.year}s&&v&&(x=x.replace("{point.key}","{point.key:"+v+"}"));return bg(x,{point:q,series:p})}};var af;bM=ao.documentElement.ontouchstart!==at;var aN=aT.Pointer=function(q,p){this.init(q,p)};aN.prototype={init:function(q,p){var v=p.chart,u=v.events,s=bx?"":v.zoomType,v=q.inverted,r;this.options=p;this.chart=q;this.zoomX=r=/x/.test(s);this.zoomY=s=/y/.test(s);this.zoomHor=r&&!v||s&&v;this.zoomVert=s&&!v||r&&v;this.hasZoom=r||s;this.runChartClick=u&&!!u.click;this.pinchDown=[];this.lastValidTouch={};if(aT.Tooltip&&p.tooltip.enabled){q.tooltip=new bW(q,p.tooltip),this.followTouchMove=p.tooltip.followTouchMove}this.setDOMEvents()},normalize:function(q,p){var s,r,q=q||window.event,q=a(q);if(!q.target){q.target=q.srcElement}r=q.touches?q.touches.length?q.touches.item(0):q.changedTouches[0]:q;if(!p){this.chartPosition=p=o(this.chart.container)}r.pageX===at?(s=ar(q.x,q.clientX-p.left),r=q.y):(s=r.pageX-p.left,r=r.pageY-p.top);return av(q,{chartX:aq(s),chartY:aq(r)})},getCoordinates:function(q){var p={xAxis:[],yAxis:[]};aw(this.chart.axes,function(r){p[r.isXAxis?"xAxis":"yAxis"].push({axis:r,value:r.toValue(q[r.horiz?"chartX":"chartY"])})});return p},getIndex:function(q){var p=this.chart;return p.inverted?p.plotHeight+p.plotTop-q.chartY:q.chartX-p.plotLeft},runPointActions:function(C){var B=this.chart,A=B.series,z=B.tooltip,x,w,v=B.hoverPoint,u=B.hoverSeries,s,r,q=B.chartWidth,p=this.getIndex(C);if(z&&this.options.tooltip.shared&&(!u||!u.noSharedTooltip)){w=[];s=A.length;for(r=0;r<s;r++){if(A[r].visible&&A[r].options.enableMouseTracking!==!1&&!A[r].noSharedTooltip&&A[r].singularTooltips!==!0&&A[r].tooltipPoints.length&&(x=A[r].tooltipPoints[p])&&x.series){x._dist=aU(p-x.clientX),q=bi(q,x._dist),w.push(x)}}for(s=w.length;s--;){w[s]._dist>q&&w.splice(s,1)}if(w.length&&w[0].clientX!==this.hoverX){z.refresh(w,C),this.hoverX=w[0].clientX}}A=u&&u.tooltipOptions.followPointer;if(u&&u.tracker&&!A){if((x=u.tooltipPoints[p])&&x!==v){x.onMouseOver(C)}}else{z&&A&&!z.isHidden&&(u=z.getAnchor([{}],C),z.updatePosition({plotX:u[0],plotY:u[1]}))}if(z&&!this._onDocumentMouseMove){this._onDocumentMouseMove=function(F){if(aP[af]){aP[af].pointer.onDocumentMouseMove(F)}},aZ(ao,"mousemove",this._onDocumentMouseMove)}aw(B.axes,function(F){F.drawCrosshair(C,ax(x,v))})},reset:function(q){var p=this.chart,v=p.hoverSeries,u=p.hoverPoint,s=p.tooltip,r=s&&s.shared?p.hoverPoints:u;(q=q&&s&&r)&&bX(r)[0].plotX===at&&(q=!1);if(q){s.refresh(r),u&&u.setState(u.state,!0)}else{if(u){u.onMouseOut()}if(v){v.onMouseOut()}s&&s.hide();if(this._onDocumentMouseMove){aO(ao,"mousemove",this._onDocumentMouseMove),this._onDocumentMouseMove=null}aw(p.axes,function(w){w.hideCrosshair()});this.hoverX=null}},scaleGroups:function(q,p){var s=this.chart,r;aw(s.series,function(u){r=q||u.getPlotBox();u.xAxis&&u.xAxis.zoomEnabled&&(u.group.attr(r),u.markerGroup&&(u.markerGroup.attr(r),u.markerGroup.clip(p?s.clipRect:null)),u.dataLabelsGroup&&u.dataLabelsGroup.attr(r))});s.clipRect.attr(p||s.clipBox)},dragStart:function(q){var p=this.chart;p.mouseIsDown=q.type;p.cancelClick=!1;p.mouseDownX=this.mouseDownX=q.chartX;p.mouseDownY=this.mouseDownY=q.chartY},drag:function(H){var G=this.chart,F=G.options.chart,C=H.chartX,B=H.chartY,A=this.zoomHor,z=this.zoomVert,x=G.plotLeft,w=G.plotTop,v=G.plotWidth,u=G.plotHeight,s,r=this.mouseDownX,q=this.mouseDownY,p=F.panKey&&H[F.panKey+"Key"];C<x?C=x:C>x+v&&(C=x+v);B<w?B=w:B>w+u&&(B=w+u);this.hasDragged=Math.sqrt(Math.pow(r-C,2)+Math.pow(q-B,2));if(this.hasDragged>10){s=G.isInsidePlot(r-x,q-w);if(G.hasCartesianSeries&&(this.zoomX||this.zoomY)&&s&&!p&&!this.selectionMarker){this.selectionMarker=G.renderer.rect(x,w,A?1:v,z?1:u,0).attr({fill:F.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add()}this.selectionMarker&&A&&(C-=r,this.selectionMarker.attr({width:aU(C),x:(C>0?0:C)+r}));this.selectionMarker&&z&&(C=B-q,this.selectionMarker.attr({height:aU(C),y:(C>0?0:C)+q}));s&&!this.selectionMarker&&F.panning&&G.pan(H,F.panning)}},drop:function(A){var z=this.chart,x=this.hasPinched;if(this.selectionMarker){var w={xAxis:[],yAxis:[],originalEvent:A.originalEvent||A},v=this.selectionMarker,u=v.attr?v.attr("x"):v.x,s=v.attr?v.attr("y"):v.y,r=v.attr?v.attr("width"):v.width,q=v.attr?v.attr("height"):v.height,p;if(this.hasDragged||x){aw(z.axes,function(B){if(B.zoomEnabled){var G=B.horiz,C=A.type==="touchend"?B.minPixelPadding:0,F=B.toValue((G?u:s)+C),G=B.toValue((G?u+r:s+q)-C);!isNaN(F)&&!isNaN(G)&&(w[B.coll].push({axis:B,min:bi(F,G),max:ar(F,G)}),p=!0)}}),p&&a2(z,"selection",w,function(B){z.zoom(av(B,x?{animation:!1}:null))})}this.selectionMarker=this.selectionMarker.destroy();x&&this.scaleGroups()}if(z){bk(z.container,{cursor:z._cursor}),z.cancelClick=this.hasDragged>10,z.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[]}},onContainerMouseDown:function(p){p=this.normalize(p);p.preventDefault&&p.preventDefault();this.dragStart(p)},onDocumentMouseUp:function(p){aP[af]&&aP[af].pointer.drop(p)},onDocumentMouseMove:function(q){var p=this.chart,s=this.chartPosition,r=p.hoverSeries,q=this.normalize(q,s);s&&r&&!this.inClass(q.target,"highcharts-tracker")&&!p.isInsidePlot(q.chartX-p.plotLeft,q.chartY-p.plotTop)&&this.reset()},onContainerMouseLeave:function(){var p=aP[af];if(p){p.pointer.reset(),p.pointer.chartPosition=null}},onContainerMouseMove:function(q){var p=this.chart;af=p.index;q=this.normalize(q);q.returnValue=!1;p.mouseIsDown==="mousedown"&&this.drag(q);(this.inClass(q.target,"highcharts-tracker")||p.isInsidePlot(q.chartX-p.plotLeft,q.chartY-p.plotTop))&&!p.openMenu&&this.runPointActions(q)},inClass:function(q,p){for(var r;q;){if(r=bc(q,"class")){if(r.indexOf(p)!==-1){return !0}else{if(r.indexOf("highcharts-container")!==-1){return !1}}}q=q.parentNode}},onTrackerMouseOut:function(q){var p=this.chart.hoverSeries,r=(q=q.relatedTarget||q.toElement)&&q.point&&q.point.series;if(p&&!p.options.stickyTracking&&!this.inClass(q,"highcharts-tooltip")&&r!==p){p.onMouseOut()}},onContainerClick:function(q){var p=this.chart,u=p.hoverPoint,s=p.plotLeft,r=p.plotTop,q=this.normalize(q);q.cancelBubble=!0;p.cancelClick||(u&&this.inClass(q.target,"highcharts-tracker")?(a2(u.series,"click",av(q,{point:u})),p.hoverPoint&&u.firePointEvent("click",q)):(av(q,this.getCoordinates(q)),p.isInsidePlot(q.chartX-s,q.chartY-r)&&a2(p,"click",q)))},setDOMEvents:function(){var q=this,p=q.chart.container;p.onmousedown=function(r){q.onContainerMouseDown(r)};p.onmousemove=function(r){q.onContainerMouseMove(r)};p.onclick=function(r){q.onContainerClick(r)};aZ(p,"mouseleave",q.onContainerMouseLeave);bh===1&&aZ(ao,"mouseup",q.onDocumentMouseUp);if(bM){p.ontouchstart=function(r){q.onContainerTouchStart(r)},p.ontouchmove=function(r){q.onContainerTouchMove(r)},bh===1&&aZ(ao,"touchend",q.onDocumentTouchEnd)}},destroy:function(){var p;aO(this.chart.container,"mouseleave",this.onContainerMouseLeave);bh||(aO(ao,"mouseup",this.onDocumentMouseUp),aO(ao,"touchend",this.onDocumentTouchEnd));clearInterval(this.tooltipTimeout);for(p in this){this[p]=null}}};av(aT.Pointer.prototype,{pinchTranslate:function(q,p,v,u,s,r){(this.zoomHor||this.pinchHor)&&this.pinchTranslateDirection(!0,q,p,v,u,s,r);(this.zoomVert||this.pinchVert)&&this.pinchTranslateDirection(!1,q,p,v,u,s,r)},pinchTranslateDirection:function(ba,ab,aa,Z,X,W,V,U){var T=this.chart,S=ba?"x":"y",Q=ba?"X":"Y",P="chart"+Q,O=ba?"width":"height",N=T["plot"+(ba?"Left":"Top")],M,L,K=U||1,J=T.inverted,H=T.bounds[ba?"h":"v"],C=ab.length===1,G=ab[0][P],B=aa[0][P],F=!C&&ab[1][P],A=!C&&aa[1][P],z,aa=function(){!C&&aU(G-F)>20&&(K=U||aU(B-A)/aU(G-F));L=(N-B)/K+G;M=T["plot"+(ba?"Width":"Height")]/K};aa();ab=L;ab<H.min?(ab=H.min,z=!0):ab+M>H.max&&(ab=H.max-M,z=!0);z?(B-=0.8*(B-V[S][0]),C||(A-=0.8*(A-V[S][1])),aa()):V[S]=[B,A];J||(W[S]=L-N,W[O]=M);W=J?1/K:K;X[O]=M;X[S]=ab;Z[J?ba?"scaleY":"scaleX":"scale"+Q]=K;Z["translate"+Q]=W*N+(B-W*G)},pinch:function(F){var C=this,B=C.chart,A=C.pinchDown,z=C.followTouchMove,x=F.touches,w=x.length,v=C.lastValidTouch,u=C.hasZoom,s=C.selectionMarker,r={},q=w===1&&(C.inClass(F.target,"highcharts-tracker")&&B.runTrackerClick||B.runChartClick),p={};(u||z)&&!q&&F.preventDefault();bs(x,function(G){return C.normalize(G)});if(F.type==="touchstart"){aw(x,function(H,G){A[G]={chartX:H.chartX,chartY:H.chartY}}),v.x=[A[0].chartX,A[1]&&A[1].chartX],v.y=[A[0].chartY,A[1]&&A[1].chartY],aw(B.axes,function(H){if(H.zoomEnabled){var G=B.bounds[H.horiz?"h":"v"],M=H.minPixelPadding,L=H.toPixels(ax(H.options.min,H.dataMin)),K=H.toPixels(ax(H.options.max,H.dataMax)),J=bi(L,K),L=ar(L,K);G.min=bi(H.pos,J-M);G.max=ar(H.pos+H.len,L+M)}})}else{if(A.length){if(!s){C.selectionMarker=s=av({destroy:bF},B.plotBox)}C.pinchTranslate(A,x,r,s,p,v);C.hasPinched=u;C.scaleGroups(r,p);!u&&z&&w===1&&this.runPointActions(C.normalize(F))}}},onContainerTouchStart:function(q){var p=this.chart;af=p.index;q.touches.length===1?(q=this.normalize(q),p.isInsidePlot(q.chartX-p.plotLeft,q.chartY-p.plotTop)?(this.runPointActions(q),this.pinch(q)):this.reset()):q.touches.length===2&&this.pinch(q)},onContainerTouchMove:function(p){(p.touches.length===1||p.touches.length===2)&&this.pinch(p)},onDocumentTouchEnd:function(p){aP[af]&&aP[af].pointer.drop(p)}});if(a8.PointerEvent||a8.MSPointerEvent){var aI={},bI=!!a8.PointerEvent,am=function(){var q,p=[];p.item=function(r){return this[r]};for(q in aI){aI.hasOwnProperty(q)&&p.push({pageX:aI[q].pageX,pageY:aI[q].pageY,target:aI[q].target})}return p},bp=function(q,p,s,r){q=q.originalEvent||q;if((q.pointerType==="touch"||q.pointerType===q.MSPOINTER_TYPE_TOUCH)&&aP[af]){r(q),r=aP[af].pointer,r[p]({type:s,target:q.currentTarget,preventDefault:bF,touches:am()})}};av(aN.prototype,{onContainerPointerDown:function(p){bp(p,"onContainerTouchStart","touchstart",function(q){aI[q.pointerId]={pageX:q.pageX,pageY:q.pageY,target:q.currentTarget}})},onContainerPointerMove:function(p){bp(p,"onContainerTouchMove","touchmove",function(q){aI[q.pointerId]={pageX:q.pageX,pageY:q.pageY};if(!aI[q.pointerId].target){aI[q.pointerId].target=q.currentTarget}})},onDocumentPointerUp:function(p){bp(p,"onContainerTouchEnd","touchend",function(q){delete aI[q.pointerId]})},batchMSEvents:function(p){p(this.chart.container,bI?"pointerdown":"MSPointerDown",this.onContainerPointerDown);p(this.chart.container,bI?"pointermove":"MSPointerMove",this.onContainerPointerMove);p(ao,bI?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}});bY(aN.prototype,"init",function(q,p,r){q.call(this,p,r);(this.hasZoom||this.followTouchMove)&&bk(p.container,{"-ms-touch-action":aV,"touch-action":aV})});bY(aN.prototype,"setDOMEvents",function(p){p.apply(this);(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(aZ)});bY(aN.prototype,"destroy",function(p){this.batchMSEvents(aO);p.call(this)})}var g=aT.Legend=function(q,p){this.init(q,p)};g.prototype={init:function(q,p){var v=this,u=p.itemStyle,s=ax(p.padding,8),r=p.itemMarginTop||0;this.options=p;if(p.enabled){v.itemStyle=u,v.itemHiddenStyle=ap(u,p.itemHiddenStyle),v.itemMarginTop=r,v.padding=s,v.initialItemX=s,v.initialItemY=s-5,v.maxItemWidth=0,v.chart=q,v.itemHeight=0,v.lastLineHeight=0,v.symbolWidth=ax(p.symbolWidth,16),v.pages=[],v.render(),aZ(v.chart,"endResize",function(){v.positionCheckboxes()})}},colorizeItem:function(A,z){var x=this.options,w=A.legendItem,v=A.legendLine,u=A.legendSymbol,s=this.itemHiddenStyle.color,x=z?x.itemStyle.color:s,r=z?A.legendColor||A.color||"#CCC":s,s=A.options&&A.options.marker,q={fill:r},p;w&&w.css({fill:x,color:x});v&&v.attr({stroke:r});if(u){if(s&&u.isMarker){for(p in q.stroke=r,s=A.convertAttribs(s),s){w=s[p],w!==at&&(q[p]=w)}}u.attr(q)}},positionItem:function(q){var p=this.options,v=p.symbolPadding,p=!p.rtl,u=q._legendItemPos,s=u[0],u=u[1],r=q.checkbox;q.legendGroup&&q.legendGroup.translate(p?s:this.legendWidth-s-2*v-4,u);if(r){r.x=s,r.y=u}},destroyItem:function(q){var p=q.checkbox;aw(["legendItem","legendLine","legendSymbol","legendGroup"],function(r){q[r]&&(q[r]=q[r].destroy())});p&&aK(q.checkbox)},destroy:function(){var q=this.group,p=this.box;if(p){this.box=p.destroy()}if(q){this.group=q.destroy()}},positionCheckboxes:function(q){var p=this.group.alignAttr,s,r=this.clipHeight||this.legendHeight;if(p){s=p.translateY,aw(this.allItems,function(w){var v=w.checkbox,u;v&&(u=s+v.y+(q||0)+3,bk(v,{left:p.translateX+w.checkboxOffset+v.x-20+"px",top:u+"px",display:u>s-6&&u<s+r-6?"":aV}))})}},renderTitle:function(){var q=this.padding,p=this.options.title,r=0;if(p.text){if(!this.title){this.title=this.chart.renderer.label(p.text,q-3,q-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(p.style).add(this.group)}q=this.title.getBBox();r=q.height;this.offsetWidth=q.width;this.contentGroup.attr({translateY:r})}this.titleHeight=r},renderItem:function(Q){var P=this.chart,O=P.renderer,N=this.options,M=N.layout==="horizontal",L=this.symbolWidth,K=N.symbolPadding,J=this.itemStyle,H=this.itemHiddenStyle,G=this.padding,F=M?ax(N.itemDistance,20):0,C=!N.rtl,B=N.width,A=N.itemMarginBottom||0,z=this.itemMarginTop,x=this.initialItemX,w=Q.legendItem,v=Q.series&&Q.series.drawLegendSymbol?Q.series:Q,u=v.options,u=this.createCheckboxForItem&&u&&u.showCheckbox,p=N.useHTML;if(!w){Q.legendGroup=O.g("legend-item").attr({zIndex:1}).add(this.scrollGroup);Q.legendItem=w=O.text(N.labelFormat?bg(N.labelFormat,Q):N.labelFormatter.call(Q),C?L+K:-K,this.baseline||0,p).css(ap(Q.visible?J:H)).attr({align:C?"left":"right",zIndex:2}).add(Q.legendGroup);if(!this.baseline){this.baseline=O.fontMetrics(J.fontSize,w).f+3+z,w.attr("y",this.baseline)}v.drawLegendSymbol(this,Q);this.setItemEvents&&this.setItemEvents(Q,w,p,J,H);this.colorizeItem(Q,Q.visible);u&&this.createCheckboxForItem(Q)}O=w.getBBox();L=Q.checkboxOffset=N.itemWidth||Q.legendItemWidth||L+K+O.width+F+(u?20:0);this.itemHeight=K=aq(Q.legendItemHeight||O.height);if(M&&this.itemX-x+L>(B||P.chartWidth-2*G-x-N.x)){this.itemX=x,this.itemY+=z+this.lastLineHeight+A,this.lastLineHeight=0}this.maxItemWidth=ar(this.maxItemWidth,L);this.lastItemY=z+this.itemY+A;this.lastLineHeight=ar(K,this.lastLineHeight);Q._legendItemPos=[this.itemX,this.itemY];M?this.itemX+=L:(this.itemY+=z+K+A,this.lastLineHeight=K);this.offsetWidth=B||ar((M?this.itemX-x-F:L)+G,this.offsetWidth)},getAllItems:function(){var p=[];aw(this.chart.series,function(q){var r=q.options;if(ax(r.showInLegend,!au(r.linkedTo)?at:!1,!0)){p=p.concat(q.legendItems||(r.legendType==="point"?q.data:q))}});return p},render:function(){var F=this,C=F.chart,B=C.renderer,A=F.group,z,x,w,v,u=F.box,s=F.options,r=F.padding,q=s.borderWidth,p=s.backgroundColor;F.itemX=F.initialItemX;F.itemY=F.initialItemY;F.offsetWidth=0;F.lastItemY=0;if(!A){F.group=A=B.g("legend").attr({zIndex:7}).add(),F.contentGroup=B.g().attr({zIndex:1}).add(A),F.scrollGroup=B.g().add(F.contentGroup)}F.renderTitle();z=F.getAllItems();bd(z,function(H,G){return(H.options&&H.options.legendIndex||0)-(G.options&&G.options.legendIndex||0)});s.reversed&&z.reverse();F.allItems=z;F.display=x=!!z.length;aw(z,function(G){F.renderItem(G)});w=s.width||F.offsetWidth;v=F.lastItemY+F.lastLineHeight+F.titleHeight;v=F.handleOverflow(v);if(q||p){w+=r;v+=r;if(u){if(w>0&&v>0){u[u.isNew?"attr":"animate"](u.crisp({width:w,height:v})),u.isNew=!1}}else{F.box=u=B.rect(0,0,w,v,s.borderRadius,q||0).attr({stroke:s.borderColor,"stroke-width":q||0,fill:p||aV}).add(A).shadow(s.shadow),u.isNew=!0}u[x?"show":"hide"]()}F.legendWidth=w;F.legendHeight=v;aw(z,function(G){F.positionItem(G)});x&&A.align(av({width:w,height:v},s),!0,"spacingBox");C.isResizing||this.positionCheckboxes()},handleOverflow:function(K){var J=this,H=this.chart,G=H.renderer,F=this.options,C=F.y,C=H.spacingBox.height+(F.verticalAlign==="top"?-C:C)-this.padding,B=F.maxHeight,A,z=this.clipRect,x=F.navigation,w=ax(x.animation,!0),v=x.arrowSize||12,u=this.nav,s=this.pages,q,p=this.allItems;F.layout==="horizontal"&&(C/=2);B&&(C=bi(C,B));s.length=0;if(K>C&&!F.useHTML){this.clipHeight=A=ar(C-20-this.titleHeight-this.padding,0);this.currentPage=ax(this.currentPage,1);this.fullHeight=K;aw(p,function(L,r){var O=L._legendItemPos[1],N=aq(L.legendItem.getBBox().height),M=s.length;if(!M||O-s[M-1]>A&&(q||O)!==s[M-1]){s.push(q||O),M++}r===p.length-1&&O+N-s[M-1]>A&&s.push(O);O!==q&&(q=O)});if(!z){z=J.clipRect=G.clipRect(0,this.padding,9999,0),J.contentGroup.clip(z)}z.attr({height:A});if(!u){this.nav=u=G.g().attr({zIndex:1}).add(this.group),this.up=G.symbol("triangle",0,0,v,v).on("click",function(){J.scroll(-1,w)}).add(u),this.pager=G.text("",15,10).css(x.style).add(u),this.down=G.symbol("triangle-down",0,0,v,v).on("click",function(){J.scroll(1,w)}).add(u)}J.scroll(0);K=C}else{if(u){z.attr({height:H.chartHeight}),u.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0}}return K},scroll:function(A,z){var x=this.pages,w=x.length,v=this.currentPage+A,u=this.clipHeight,s=this.options.navigation,r=s.activeColor,s=s.inactiveColor,q=this.pager,p=this.padding;v>w&&(v=w);if(v>0){z!==at&&ak(z,this.chart),this.nav.attr({translateX:p,translateY:u+this.padding+7+this.titleHeight,visibility:"visible"}),this.up.attr({fill:v===1?s:r}).css({cursor:v===1?"default":"pointer"}),q.attr({text:v+"/"+w}),this.down.attr({x:18+this.pager.getBBox().width,fill:v===w?s:r}).css({cursor:v===w?"default":"pointer"}),x=-x[v-1]+this.initialItemY,this.scrollGroup.animate({translateY:x}),this.currentPage=v,this.positionCheckboxes(x)}}};a0=aT.LegendSymbolMixin={drawRectangle:function(q,p){var r=q.options.symbolHeight||12;p.legendSymbol=this.chart.renderer.rect(0,q.baseline-5-r/2,q.symbolWidth,r,q.options.symbolRadius||0).attr({zIndex:3}).add(p.legendGroup)},drawLineMarker:function(q){var p=this.options,w=p.marker,v;v=q.symbolWidth;var u=this.chart.renderer,s=this.legendGroup,q=q.baseline-aq(u.fontMetrics(q.options.itemStyle.fontSize,this.legendItem).b*0.3),r;if(p.lineWidth){r={"stroke-width":p.lineWidth};if(p.dashStyle){r.dashstyle=p.dashStyle}this.legendLine=u.path(["M",0,q,"L",v,q]).attr(r).add(s)}if(w&&w.enabled!==!1){p=w.radius,this.legendSymbol=v=u.symbol(this.symbol,v/2-p,q-p,2*p,2*p).add(s),v.isMarker=!0}}};(/Trident\/7\.0/.test(y)||bL)&&bY(g.prototype,"positionItem",function(q,p){var s=this,r=function(){p._legendItemPos&&q.call(s,p)};r();setTimeout(r)});E.prototype={init:function(q,p){var w,v=q.series;q.series=null;w=ap(a1,q);w.series=q.series=v;this.userOptions=q;v=w.chart;this.margin=this.splashArray("margin",v);this.spacing=this.splashArray("spacing",v);var u=v.events;this.bounds={h:{},v:{}};this.callback=p;this.isResizing=0;this.options=w;this.axes=[];this.series=[];this.hasCartesianSeries=v.showAxes;var s=this,r;s.index=aP.length;aP.push(s);bh++;v.reflow!==!1&&aZ(s,"load",function(){s.initReflow()});if(u){for(r in u){aZ(s,r,u[r])}}s.xAxis=[];s.yAxis=[];s.animation=bx?!1:ax(v.animation,!0);s.pointCount=s.colorCounter=s.symbolCounter=0;s.firstRender()},initSeries:function(q){var p=this.options.chart;(p=a5[q.type||p.type||p.defaultSeriesType])||aF(17,!0);p=new p;p.init(this,q);return p},isInsidePlot:function(q,p,s){var r=s?p:q,q=s?q:p;return r>=0&&r<=this.plotWidth&&q>=0&&q<=this.plotHeight},adjustTickAmounts:function(){this.options.chart.alignTicks!==!1&&aw(this.axes,function(p){p.adjustTickAmount()});this.maxTicks=null},redraw:function(H){var G=this.axes,F=this.series,C=this.pointer,B=this.legend,A=this.isDirtyLegend,z,x,w=this.hasCartesianSeries,v=this.isDirtyBox,u=F.length,s=u,r=this.renderer,q=r.isHidden(),p=[];ak(H,this);q&&this.cloneRenderTo();for(this.layOutTitles();s--;){if(H=F[s],H.options.stacking&&(z=!0,H.isDirty)){x=!0;break}}if(x){for(s=u;s--;){if(H=F[s],H.options.stacking){H.isDirty=!0}}}aw(F,function(J){J.isDirty&&J.options.legendType==="point"&&(A=!0)});if(A&&B.options.enabled){B.render(),this.isDirtyLegend=!1}z&&this.getStacks();if(w){if(!this.isResizing){this.maxTicks=null,aw(G,function(J){J.setScale()})}this.adjustTickAmounts()}this.getMargins();w&&(aw(G,function(J){J.isDirty&&(v=!0)}),aw(G,function(J){if(J.isDirtyExtremes){J.isDirtyExtremes=!1,p.push(function(){a2(J,"afterSetExtremes",av(J.eventArgs,J.getExtremes()));delete J.eventArgs})}(v||z)&&J.redraw()}));v&&this.drawChartBox();aw(F,function(J){J.isDirty&&J.visible&&(!J.isCartesian||J.xAxis)&&J.redraw()});C&&C.reset(!0);r.draw();a2(this,"redraw");q&&this.cloneRenderTo(!0);aw(p,function(J){J.call()})},get:function(q){var p=this.axes,u=this.series,s,r;for(s=0;s<p.length;s++){if(p[s].options.id===q){return p[s]}}for(s=0;s<u.length;s++){if(u[s].options.id===q){return u[s]}}for(s=0;s<u.length;s++){r=u[s].points||[];for(p=0;p<r.length;p++){if(r[p].id===q){return r[p]}}}return null},getAxes:function(){var q=this,p=this.options,r=p.xAxis=bX(p.xAxis||{}),p=p.yAxis=bX(p.yAxis||{});aw(r,function(u,s){u.index=s;u.isX=!0});aw(p,function(u,s){u.index=s});r=r.concat(p);aw(r,function(s){new bB(q,s)});q.adjustTickAmounts()},getSelectedPoints:function(){var p=[];aw(this.series,function(q){p=p.concat(ah(q.points||[],function(r){return r.selected}))});return p},getSelectedSeries:function(){return ah(this.series,function(p){return p.selected})},getStacks:function(){var p=this;aw(p.yAxis,function(q){if(q.stacks&&q.hasVisibleSeries){q.oldStacks=q.stacks}});aw(p.series,function(q){if(q.options.stacking&&(q.visible===!0||p.options.chart.ignoreHiddenSeries===!1)){q.stackKey=q.type+ax(q.options.stack,"")}})},setTitle:function(q,p,w){var r;var v=this,u=v.options,s;s=u.title=ap(u.title,q);r=u.subtitle=ap(u.subtitle,p),u=r;aw([["title",q,s],["subtitle",p,u]],function(z){var x=z[0],B=v[x],A=z[1],z=z[2];B&&A&&(v[x]=B=B.destroy());z&&z.text&&!B&&(v[x]=v.renderer.text(z.text,0,0,z.useHTML).attr({align:z.align,"class":"highcharts-"+x,zIndex:z.zIndex||4}).css(z.style).add())});v.layOutTitles(w)},layOutTitles:function(q){var p=0,x=this.title,w=this.subtitle,v=this.options,u=v.title,v=v.subtitle,s=this.renderer,r=this.spacingBox.width-44;if(x&&(x.css({width:(u.width||r)+"px"}).align(av({y:s.fontMetrics(u.style.fontSize,x).b-3},u),!1,"spacingBox"),!u.floating&&!u.verticalAlign)){p=x.getBBox().height}w&&(w.css({width:(v.width||r)+"px"}).align(av({y:p+(u.margin-13)+s.fontMetrics(u.style.fontSize,w).b},v),!1,"spacingBox"),!v.floating&&!v.verticalAlign&&(p=ag(p+w.getBBox().height)));x=this.titleOffset!==p;this.titleOffset=p;if(!this.isDirtyBox&&x){this.isDirtyBox=x,this.hasRendered&&ax(q,!0)&&this.isDirtyBox&&this.redraw()}},getChartSize:function(){var q=this.options.chart,p=q.width,q=q.height,r=this.renderToClone||this.renderTo;if(!au(p)){this.containerWidth=a3(r,"width")}if(!au(q)){this.containerHeight=a3(r,"height")}this.chartWidth=ar(0,p||this.containerWidth||600);this.chartHeight=ar(0,ax(q,this.containerHeight>19?this.containerHeight:400))},cloneRenderTo:function(q){var p=this.renderToClone,r=this.container;q?p&&(this.renderTo.appendChild(r),aK(p),delete this.renderToClone):(r&&r.parentNode===this.renderTo&&this.renderTo.removeChild(r),this.renderToClone=p=this.renderTo.cloneNode(0),bk(p,{position:"absolute",top:"-9999px",display:"block"}),p.style.setProperty&&p.style.setProperty("display","block","important"),ao.body.appendChild(p),r&&p.appendChild(r))},getContainer:function(){var q,p=this.options.chart,u,s,r;this.renderTo=q=p.renderTo;r="highcharts-"+bl++;if(j(q)){this.renderTo=q=ao.getElementById(q)}q||aF(13,!0);u=al(bc(q,"data-highcharts-chart"));!isNaN(u)&&aP[u]&&aP[u].hasRendered&&aP[u].destroy();bc(q,"data-highcharts-chart",this.index);q.innerHTML="";!p.skipClone&&!q.offsetWidth&&this.cloneRenderTo();this.getChartSize();u=this.chartWidth;s=this.chartHeight;this.container=q=bD(aG,{className:"highcharts-container"+(p.className?" "+p.className:""),id:r},av({position:"relative",overflow:"hidden",width:u+"px",height:s+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},p.style),this.renderToClone||q);this._cursor=q.style.cursor;this.renderer=p.forExport?new bm(q,u,s,p.style,!0):new d(q,u,s,p.style);bx&&this.renderer.create(this,q,u,s)},getMargins:function(){var B=this.spacing,A,z=this.legend,x=this.margin,w=this.options.legend,v=ax(w.margin,20),u=w.x,s=w.y,r=w.align,q=w.verticalAlign,p=this.titleOffset;this.resetMargins();A=this.axisOffset;if(p&&!au(x[0])){this.plotTop=ar(this.plotTop,p+this.options.title.margin+B[0])}if(z.display&&!w.floating){if(r==="right"){if(!au(x[1])){this.marginRight=ar(this.marginRight,z.legendWidth-u+v+B[1])}}else{if(r==="left"){if(!au(x[3])){this.plotLeft=ar(this.plotLeft,z.legendWidth+u+v+B[3])}}else{if(q==="top"){if(!au(x[0])){this.plotTop=ar(this.plotTop,z.legendHeight+s+v+B[0])}}else{if(q==="bottom"&&!au(x[2])){this.marginBottom=ar(this.marginBottom,z.legendHeight-s+v+B[2])}}}}}this.extraBottomMargin&&(this.marginBottom+=this.extraBottomMargin);this.extraTopMargin&&(this.plotTop+=this.extraTopMargin);this.hasCartesianSeries&&aw(this.axes,function(C){C.getOffset()});au(x[3])||(this.plotLeft+=A[3]);au(x[0])||(this.plotTop+=A[0]);au(x[2])||(this.marginBottom+=A[2]);au(x[1])||(this.marginRight+=A[1]);this.setChartSize()},reflow:function(q){var p=this,v=p.options.chart,u=p.renderTo,s=v.width||a3(u,"width"),r=v.height||a3(u,"height"),v=q?q.target:a8,u=function(){if(p.container){p.setSize(s,r,!1),p.hasUserSize=null}};if(!p.hasUserSize&&s&&r&&(v===a8||v===ao)){if(s!==p.containerWidth||r!==p.containerHeight){clearTimeout(p.reflowTimeout),q?p.reflowTimeout=setTimeout(u,100):u()}p.containerWidth=s;p.containerHeight=r}},initReflow:function(){var q=this,p=function(r){q.reflow(r)};aZ(a8,"resize",p);aZ(q,"destroy",function(){aO(a8,"resize",p)})},setSize:function(q,p,w){var v=this,u,s,r;v.isResizing+=1;r=function(){v&&a2(v,"endResize",null,function(){v.isResizing-=1})};ak(w,v);v.oldChartHeight=v.chartHeight;v.oldChartWidth=v.chartWidth;if(au(q)){v.chartWidth=u=ar(0,aq(q)),v.hasUserSize=!!u}if(au(p)){v.chartHeight=s=ar(0,aq(p))}(aj?aA:bk)(v.container,{width:u+"px",height:s+"px"},aj);v.setChartSize(!0);v.renderer.setSize(u,s,w);v.maxTicks=null;aw(v.axes,function(x){x.isDirty=!0;x.setScale()});aw(v.series,function(x){x.isDirty=!0});v.isDirtyLegend=!0;v.isDirtyBox=!0;v.layOutTitles();v.getMargins();v.redraw(w);v.oldChartHeight=null;a2(v,"resize");aj===!1?r():setTimeout(r,aj&&aj.duration||500)},setChartSize:function(C){var B=this.inverted,A=this.renderer,z=this.chartWidth,x=this.chartHeight,w=this.options.chart,v=this.spacing,u=this.clipOffset,s,r,q,p;this.plotLeft=s=aq(this.plotLeft);this.plotTop=r=aq(this.plotTop);this.plotWidth=q=ar(0,aq(z-s-this.marginRight));this.plotHeight=p=ar(0,aq(x-r-this.marginBottom));this.plotSizeX=B?p:q;this.plotSizeY=B?q:p;this.plotBorderWidth=w.plotBorderWidth||0;this.spacingBox=A.spacingBox={x:v[3],y:v[0],width:z-v[3]-v[1],height:x-v[0]-v[2]};this.plotBox=A.plotBox={x:s,y:r,width:q,height:p};z=2*aR(this.plotBorderWidth/2);B=ag(ar(z,u[3])/2);A=ag(ar(z,u[0])/2);this.clipBox={x:B,y:A,width:aR(this.plotSizeX-ar(z,u[1])/2-B),height:ar(0,aR(this.plotSizeY-ar(z,u[2])/2-A))};C||aw(this.axes,function(F){F.setAxisSize();F.setAxisTranslation()})},resetMargins:function(){var q=this.spacing,p=this.margin;this.plotTop=ax(p[0],q[0]);this.marginRight=ax(p[1],q[1]);this.marginBottom=ax(p[2],q[2]);this.plotLeft=ax(p[3],q[3]);this.axisOffset=[0,0,0,0];this.clipOffset=[0,0,0,0]},drawChartBox:function(){var V=this.options.chart,U=this.renderer,T=this.chartWidth,S=this.chartHeight,Q=this.chartBackground,P=this.plotBackground,O=this.plotBorder,N=this.plotBGImage,M=V.borderWidth||0,L=V.backgroundColor,K=V.plotBackgroundColor,J=V.plotBackgroundImage,H=V.plotBorderWidth||0,G,F=this.plotLeft,C=this.plotTop,B=this.plotWidth,A=this.plotHeight,x=this.plotBox,z=this.clipRect,w=this.clipBox;G=M+(V.shadow?8:0);if(M||L){if(Q){Q.animate(Q.crisp({width:T-G,height:S-G}))}else{Q={fill:L||aV};if(M){Q.stroke=V.borderColor,Q["stroke-width"]=M}this.chartBackground=U.rect(G/2,G/2,T-G,S-G,V.borderRadius,M).attr(Q).addClass("highcharts-background").add().shadow(V.shadow)}}if(K){P?P.animate(x):this.plotBackground=U.rect(F,C,B,A,0).attr({fill:K}).add().shadow(V.plotShadow)}if(J){N?N.animate(x):this.plotBGImage=U.image(J,F,C,B,A).add()}z?z.animate({width:w.width,height:w.height}):this.clipRect=U.clipRect(w);if(H){O?O.animate(O.crisp({x:F,y:C,width:B,height:A})):this.plotBorder=U.rect(F,C,B,A,0,-H).attr({stroke:V.plotBorderColor,"stroke-width":H,fill:aV,zIndex:1}).add()}this.isDirtyBox=!1},propFromSeries:function(){var q=this,p=q.options.chart,v,u=q.options.series,s,r;aw(["inverted","angular","polar"],function(w){v=a5[p.type||p.defaultSeriesType];r=q[w]||p[w]||v&&v.prototype[w];for(s=u&&u.length;!r&&s--;){(v=a5[u[s].type])&&v.prototype[w]&&(r=!0)}q[w]=r})},linkSeries:function(){var q=this,p=q.series;aw(p,function(r){r.linkedSeries.length=0});aw(p,function(r){var s=r.options.linkedTo;if(j(s)&&(s=s===":previous"?q.series[r.index-1]:q.get(s))){s.linkedSeries.push(r),r.linkedParent=s}})},renderSeries:function(){aw(this.series,function(p){p.translate();p.setTooltipPoints&&p.setTooltipPoints();p.render()})},renderLabels:function(){var q=this,p=q.options.labels;p.items&&aw(p.items,function(v){var u=av(p.style,v.style),s=al(u.left)+q.plotLeft,r=al(u.top)+q.plotTop+12;delete u.left;delete u.top;q.renderer.text(v.html,s,r).attr({zIndex:2}).css(u).add()})},render:function(){var q=this.axes,p=this.renderer,r=this.options;this.setTitle();this.legend=new g(this,r.legend);this.getStacks();aw(q,function(s){s.setScale()});this.getMargins();this.maxTicks=null;aw(q,function(s){s.setTickPositions(!0);s.setMaxTicks()});this.adjustTickAmounts();this.getMargins();this.drawChartBox();this.hasCartesianSeries&&aw(q,function(s){s.render()});if(!this.seriesGroup){this.seriesGroup=p.g("series-group").attr({zIndex:3}).add()}this.renderSeries();this.renderLabels();this.showCredits(r.credits);this.hasRendered=!0},showCredits:function(p){if(p.enabled&&!this.credits){this.credits=this.renderer.text(p.text,0,0).on("click",function(){if(p.href){location.href=p.href}}).attr({align:p.position.align,zIndex:8}).css(p.style).add().align(p.position)}},destroy:function(){var q=this,p=q.axes,v=q.series,u=q.container,s,r=u&&u.parentNode;a2(q,"destroy");aP[q.index]=at;bh--;q.renderTo.removeAttribute("data-highcharts-chart");aO(q);for(s=p.length;s--;){p[s]=p[s].destroy()}for(s=v.length;s--;){v[s]=v[s].destroy()}aw("title,subtitle,chartBackground,plotBackground,plotBGImage,plotBorder,seriesGroup,clipRect,credits,pointer,scroller,rangeSelector,legend,resetZoomButton,tooltip,renderer".split(","),function(w){var x=q[w];x&&x.destroy&&(q[w]=x.destroy())});if(u){u.innerHTML="",aO(u),r&&aK(u)}for(s in q){delete q[s]}},isReadyToRender:function(){var p=this;return !aY&&a8==a8.top&&ao.readyState!=="complete"||bx&&!a8.canvg?(bx?m.push(function(){p.firstRender()},p.options.global.canvasToolsURL):ao.attachEvent("onreadystatechange",function(){ao.detachEvent("onreadystatechange",p.firstRender);ao.readyState==="complete"&&p.firstRender()}),!1):!0},firstRender:function(){var q=this,p=q.options,r=q.callback;if(q.isReadyToRender()){q.getContainer();a2(q,"init");q.resetMargins();q.setChartSize();q.propFromSeries();q.getAxes();aw(p.series||[],function(s){q.initSeries(s)});q.linkSeries();a2(q,"beforeRender");if(aT.Pointer){q.pointer=new aN(q,p)}q.render();q.renderer.draw();r&&r.apply(q,[q]);aw(q.callbacks,function(s){s.apply(q,[q])});q.cloneRenderTo(!0);a2(q,"load")}},splashArray:function(q,p){var r=p[q],r=R(r)?r:[r,r,r,r];return[ax(p[q+"Top"],r[0]),ax(p[q+"Right"],r[1]),ax(p[q+"Bottom"],r[2]),ax(p[q+"Left"],r[3])]}};E.prototype.callbacks=[];aL=aT.CenteredSeriesMixin={getCenter:function(){var q=this.options,p=this.chart,x=2*(q.slicedOffset||0),w,v=p.plotWidth-2*x,u=p.plotHeight-2*x,p=q.center,q=[ax(p[0],"50%"),ax(p[1],"50%"),q.size||"100%",q.innerSize||0],s=bi(v,u),r;return bs(q,function(A,z){r=/%$/.test(A);w=z<2||z===2&&r;return(r?[v,u,s,s][z]*al(A)/100:A)+(w?x:0)})}};var ad=function(){};ad.prototype={init:function(q,p,r){this.series=q;this.applyOptions(p,r);this.pointAttr={};if(q.options.colorByPoint&&(p=q.options.colors||q.chart.options.colors,this.color=this.color||p[q.colorCounter++],q.colorCounter===p.length)){q.colorCounter=0}q.chart.pointCount++;return this},applyOptions:function(q,p){var s=this.series,r=s.options.pointValKey||s.pointValKey,q=ad.prototype.optionsToObject.call(this,q);av(this,q);this.options=this.options?av(this.options,q):q;if(r){this.y=this[r]}if(this.x===at&&s){this.x=p===at?s.autoIncrement():p}return this},optionsToObject:function(q){var p={},w=this.series,v=w.pointArrayMap||["y"],u=v.length,s=0,r=0;if(typeof q==="number"||q===null){p[v[0]]=q}else{if(n(q)){if(q.length>u){w=typeof q[0];if(w==="string"){p.name=q[0]}else{if(w==="number"){p.x=q[0]}}s++}for(;r<u;){p[v[r++]]=q[s++]}}else{if(typeof q==="object"){p=q;if(q.dataLabels){w._hasPointLabels=!0}if(q.marker){w._hasPointMarkers=!0}}}}return p},destroy:function(){var q=this.series.chart,p=q.hoverPoints,r;q.pointCount--;if(p&&(this.setState(),i(p,this),!p.length)){q.hoverPoints=null}if(this===q.hoverPoint){this.onMouseOut()}if(this.graphic||this.dataLabel){aO(this),this.destroyElements()}this.legendItem&&q.legend.destroyItem(this);for(r in this){this[r]=null}},destroyElements:function(){for(var q="graphic,dataLabel,dataLabelUpper,group,connector,shadowGroup".split(","),p,r=6;r--;){p=q[r],this[p]&&(this[p]=this[p].destroy())}},getLabelConfig:function(){return{x:this.category,y:this.y,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(q){var p=this.series,v=p.tooltipOptions,u=ax(v.valueDecimals,""),s=v.valuePrefix||"",r=v.valueSuffix||"";aw(p.pointArrayMap||["y"],function(w){w="{point."+w;if(s||r){q=q.replace(w+"}",s+w+"}"+r)}q=q.replace(w+"}",w+":,."+u+"f}")});return bg(q,{point:this,series:this.series})},firePointEvent:function(q,p,u){var s=this,r=this.series.options;(r.point.events[q]||s.options&&s.options.events&&s.options.events[q])&&this.importEvents();q==="click"&&r.allowPointSelect&&(u=function(v){s.select(null,v.ctrlKey||v.metaKey||v.shiftKey)});a2(this,q,p,u)}};var aX=function(){};aX.prototype={isCartesian:!0,type:"line",pointClass:ad,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(q,p){var w=this,v,u,s=q.series,r=function(z,x){return ax(z.options.index,z._i)-ax(x.options.index,x._i)};w.chart=q;w.options=p=w.setOptions(p);w.linkedSeries=[];w.bindAxes();av(w,{name:p.name,state:"",pointAttr:{},visible:p.visible!==!1,selected:p.selected===!0});if(bx){p.animation=!1}u=p.events;for(v in u){aZ(w,v,u[v])}if(u&&u.click||p.point&&p.point.events&&p.point.events.click||p.allowPointSelect){q.runTrackerClick=!0}w.getColor();w.getSymbol();aw(w.parallelArrays,function(x){w[x+"Data"]=[]});w.setData(p.data,!1);if(w.isCartesian){q.hasCartesianSeries=!0}s.push(w);w._i=s.length-1;bd(s,r);this.yAxis&&bd(this.yAxis.series,r);aw(s,function(z,x){z.index=x;z.name=z.name||"Series "+(x+1)})},bindAxes:function(){var q=this,p=q.options,s=q.chart,r;aw(q.axisTypes||[],function(u){aw(s[u],function(v){r=v.options;if(p[u]===r.index||p[u]!==at&&p[u]===r.id||p[u]===at&&r.index===0){v.series.push(q),q[u]=v,v.isDirty=!0}});!q[u]&&q.optionalAxis!==u&&aF(18,!0)})},updateParallelArrays:function(q,p){var s=q.series,r=arguments;aw(s.parallelArrays,typeof p==="number"?function(v){var u=v==="y"&&s.toYData?s.toYData(q):q[v];s[v+"Data"][p]=u}:function(u){Array.prototype[p].apply(s[u+"Data"],Array.prototype.slice.call(r,2))})},autoIncrement:function(){var q=this.options,p=this.xIncrement,p=ax(p,q.pointStart,0);this.pointInterval=ax(this.pointInterval,q.pointInterval,1);this.xIncrement=p+this.pointInterval;return p},getSegments:function(){var q=-1,p=[],u,s=this.points,r=s.length;if(r){if(this.options.connectNulls){for(u=r;u--;){s[u].y===null&&s.splice(u,1)}s.length&&(p=[s])}else{aw(s,function(w,v){w.y===null?(v>q+1&&p.push(s.slice(q+1,v)),q=v):v===r-1&&p.push(s.slice(q+1,v+1))})}}this.segments=p},setOptions:function(q){var p=this.chart,u=p.options.plotOptions,p=p.userOptions||{},s=p.plotOptions||{},r=u[this.type];this.userOptions=q;u=ap(r,u.series,q);this.tooltipOptions=ap(a1.tooltip,a1.plotOptions[this.type].tooltip,p.tooltip,s.series&&s.series.tooltip,s[this.type]&&s[this.type].tooltip,q.tooltip);r.marker===null&&delete u.marker;return u},getCyclic:function(q,p,v){var u=this.userOptions,s="_"+q+"Index",r=q+"Counter";p||(au(u[s])?p=u[s]:(u[s]=p=this.chart[r]%v.length,this.chart[r]+=1),p=v[p]);this[q]=p},getColor:function(){this.options.colorByPoint||this.getCyclic("color",this.options.color||az[this.type].color,this.chart.options.colors)},getSymbol:function(){var p=this.options.marker;this.getCyclic("symbol",p.symbol,this.chart.options.symbols);if(/^url/.test(this.symbol)){p.radius=0}},drawLegendSymbol:a0.drawLineMarker,setData:function(O,N,M,L){var K=this,J=K.points,H=J&&J.length||0,G,F=K.options,C=K.chart,B=null,A=K.xAxis,z=A&&!!A.categories,x=K.tooltipPoints,w=F.turboThreshold,v=this.xData,p=this.yData,q=(G=K.pointArrayMap)&&G.length,O=O||[];G=O.length;N=ax(N,!0);if(L!==!1&&G&&H===G&&!K.cropped&&!K.hasGroupedData){aw(O,function(s,r){J[r].update(s,!1)})}else{K.xIncrement=null;K.pointRange=z?1:F.pointRange;K.colorCounter=0;aw(this.parallelArrays,function(r){K[r+"Data"].length=0});if(w&&G>w){for(M=0;B===null&&M<G;){B=O[M],M++}if(aC(B)){z=ax(F.pointStart,0);F=ax(F.pointInterval,1);for(M=0;M<G;M++){v[M]=z,p[M]=O[M],z+=F}K.xIncrement=z}else{if(n(B)){if(q){for(M=0;M<G;M++){F=O[M],v[M]=F[0],p[M]=F.slice(1,q+1)}}else{for(M=0;M<G;M++){F=O[M],v[M]=F[0],p[M]=F[1]}}}else{aF(12)}}}else{for(M=0;M<G;M++){if(O[M]!==at&&(F={series:K},K.pointClass.prototype.applyOptions.apply(F,[O[M]]),K.updateParallelArrays(F,M),z&&F.name)){A.names[F.x]=F.name}}}j(p[0])&&aF(14,!0);K.data=[];K.options.data=O;for(M=H;M--;){J[M]&&J[M].destroy&&J[M].destroy()}if(x){x.length=0}if(A){A.minRange=A.userMinRange}K.isDirty=K.isDirtyData=C.isDirtyBox=!0;M=!1}N&&C.redraw(M)},processData:function(G){var F=this.xData,C=this.yData,B=F.length,A;A=0;var z,x,w=this.xAxis,v=this.options,u=v.cropThreshold,s=0,r=this.isCartesian,q,p;if(r&&!this.isDirty&&!w.isDirty&&!this.yAxis.isDirty&&!G){return !1}if(r&&this.sorted&&(!u||B>u||this.forceCrop)){if(q=w.getExtremes(),p=q.min,q=q.max,F[B-1]<p||F[0]>q){F=[],C=[]}else{if(F[0]<p||F[B-1]>q){A=this.cropData(this.xData,this.yData,p,q),F=A.xData,C=A.yData,A=A.start,z=!0,s=F.length}}}for(G=F.length-1;G>=0;G--){B=F[G]-F[G-1],!z&&F[G]>p&&F[G]<q&&s++,B>0&&(x===at||B<x)?x=B:B<0&&this.requireSorting&&aF(15)}this.cropped=z;this.cropStart=A;this.processedXData=F;this.processedYData=C;this.activePointCount=s;if(v.pointRange===null){this.pointRange=x||1}this.closestPointRange=x},cropData:function(z,x,w,v){var u=z.length,s=0,r=u,q=ax(this.cropShoulder,1),p;for(p=0;p<u;p++){if(z[p]>=w){s=ar(0,p-q);break}}for(;p<u;p++){if(z[p]>v){r=p+q;break}}return{xData:z.slice(s,r),yData:x.slice(s,r),start:s,end:r}},generatePoints:function(){var F=this.options.data,C=this.data,B,A=this.processedXData,z=this.processedYData,x=this.pointClass,w=A.length,v=this.cropStart||0,u,s=this.hasGroupedData,r,q=[],p;if(!C&&!s){C=[],C.length=F.length,C=this.data=C}for(p=0;p<w;p++){u=v+p,s?q[p]=(new x).init(this,[A[p]].concat(bX(z[p]))):(C[u]?r=C[u]:F[u]!==at&&(C[u]=r=(new x).init(this,F[u],A[p])),q[p]=r)}if(C&&(w!==(B=C.length)||s)){for(p=0;p<B;p++){if(p===v&&!s&&(p+=w),C[p]){C[p].destroyElements(),C[p].plotX=at}}}this.data=C;this.points=q},getExtremes:function(C){var B=this.yAxis,A=this.processedXData,z,x=[],w=0;z=this.xAxis.getExtremes();var v=z.min,u=z.max,s,r,q,p,C=C||this.stackedYData||this.processedYData;z=C.length;for(p=0;p<z;p++){if(r=A[p],q=C[p],s=q!==null&&q!==at&&(!B.isLog||q.length||q>0),r=this.getExtremesFromAll||this.cropped||(A[p+1]||r)>=v&&(A[p-1]||r)<=u,s&&r){if(s=q.length){for(;s--;){q[s]!==null&&(x[w++]=q[s])}}else{x[w++]=q}}}this.dataMin=ax(void 0,bH(x));this.dataMax=ax(void 0,by(x))},translate:function(){this.processedXData||this.processData();this.generatePoints();for(var K=this.options,J=K.stacking,H=this.xAxis,G=H.categories,F=this.yAxis,C=this.points,B=C.length,A=!!this.modifyValue,z=K.pointPlacement,x=z==="between"||aC(z),w=K.threshold,K=0;K<B;K++){var v=C[K],u=v.x,s=v.y,r=v.low,p=J&&F.stacks[(this.negStacks&&s<w?"-":"")+this.stackKey];if(F.isLog&&s<=0){v.y=s=null}v.plotX=H.translate(u,0,0,0,1,z,this.type==="flags");if(J&&this.visible&&p&&p[u]){p=p[u],s=p.points[this.index+","+K],r=s[0],s=s[1],r===0&&(r=ax(w,F.min)),F.isLog&&r<=0&&(r=null),v.total=v.stackTotal=p.total,v.percentage=p.total&&v.y/p.total*100,v.stackY=s,p.setOffset(this.pointXOffset||0,this.barW||0)}v.yBottom=au(r)?F.translate(r,0,1,0,1):null;A&&(s=this.modifyValue(s,v));v.plotY=typeof s==="number"&&s!==Infinity?F.translate(s,0,1,0,1):at;v.clientX=x?H.translate(u,0,0,0,1):v.plotX;v.negative=v.y<(w||0);v.category=G&&G[v.x]!==at?G[v.x]:v.x}this.getSegments()},animate:function(q){var p=this.chart,w=p.renderer,v;v=this.options.animation;var u=this.clipBox||p.clipBox,s=p.inverted,r;if(v&&!R(v)){v=az[this.type].animation}r=["_sharedClip",v.duration,v.easing,u.height].join(",");q?(q=p[r],v=p[r+"m"],q||(p[r]=q=w.clipRect(av(u,{width:0})),p[r+"m"]=v=w.clipRect(-99,s?-p.plotLeft:-p.plotTop,99,s?p.chartWidth:p.chartHeight)),this.group.clip(q),this.markerGroup.clip(v),this.sharedClipKey=r):((q=p[r])&&q.animate({width:p.plotSizeX},v),p[r+"m"]&&p[r+"m"].animate({width:p.plotSizeX+99},v),this.animate=null)},afterAnimate:function(){var q=this.chart,p=this.sharedClipKey,s=this.group,r=this.clipBox;if(s&&this.options.clip!==!1){if(!p||!r){s.clip(r?q.renderer.clipRect(r):q.clipRect)}this.markerGroup.clip()}a2(this,"afterAnimate");setTimeout(function(){p&&q[p]&&(r||(q[p]=q[p].destroy()),q[p+"m"]&&(q[p+"m"]=q[p+"m"].destroy()))},100)},drawPoints:function(){var H,G=this.points,F=this.chart,C,B,A,z,x,w,v,u;C=this.options.marker;var s=this.pointAttr[""],r,q=this.markerGroup,p=ax(C.enabled,this.activePointCount<0.5*this.xAxis.len/C.radius);if(C.enabled!==!1||this._hasPointMarkers){for(A=G.length;A--;){if(z=G[A],C=aR(z.plotX),B=z.plotY,u=z.graphic,w=z.marker||{},H=p&&w.enabled===at||w.enabled,r=F.isInsidePlot(aq(C),B,F.inverted),H&&B!==at&&!isNaN(B)&&z.y!==null){if(H=z.pointAttr[z.selected?"select":""]||s,x=H.r,w=ax(w.symbol,this.symbol),v=w.indexOf("url")===0,u){u[r?"show":"hide"](!0).animate(av({x:C-x,y:B-x},u.symbolName?{width:2*x,height:2*x}:{}))}else{if(r&&(x>0||v)){z.graphic=F.renderer.symbol(w,C-x,B-x,2*x,2*x).attr(H).add(q)}}}else{if(u){z.graphic=u.destroy()}}}}},convertAttribs:function(q,p,x,w){var v=this.pointAttrToOptions,u,s,r={},q=q||{},p=p||{},x=x||{},w=w||{};for(u in v){s=v[u],r[u]=ax(q[s],p[u],x[u],w[u])}return r},getAttribs:function(){var K=this,J=K.options,H=az[K.type].marker?J.marker:J,G=H.states,F=G.hover,C,B=K.color;C={stroke:B,fill:B};var A=K.points||[],z,x=[],w,v=K.pointAttrToOptions;w=K.hasPointSpecificOptions;var u=J.negativeColor,s=H.lineColor,r=H.fillColor;z=J.turboThreshold;var q;J.marker?(F.radius=F.radius||H.radius+F.radiusPlus,F.lineWidth=F.lineWidth||H.lineWidth+F.lineWidthPlus):F.color=F.color||bJ(F.color||B).brighten(F.brightness).get();x[""]=K.convertAttribs(H,C);aw(["hover","select"],function(p){x[p]=K.convertAttribs(G[p],x[""])});K.pointAttr=x;B=A.length;if(!z||B<z||w){for(;B--;){z=A[B];if((H=z.options&&z.options.marker||z.options)&&H.enabled===!1){H.radius=0}if(z.negative&&u){z.color=z.fillColor=u}w=J.colorByPoint||z.color;if(z.options){for(q in v){au(H[v[q]])&&(w=!0)}}if(w){H=H||{};w=[];G=H.states||{};C=G.hover=G.hover||{};if(!J.marker){C.color=C.color||!z.options.color&&F.color||bJ(z.color).brighten(C.brightness||F.brightness).get()}C={color:z.color};if(!r){C.fillColor=z.color}if(!s){C.lineColor=z.color}w[""]=K.convertAttribs(av(C,H),x[""]);w.hover=K.convertAttribs(G.hover,x.hover,w[""]);w.select=K.convertAttribs(G.select,x.select,w[""])}else{w=x}z.pointAttr=w}}},destroy:function(){var z=this,x=z.chart,w=/AppleWebKit\/533/.test(y),v,u,s=z.data||[],r,q,p;a2(z,"destroy");aO(z);aw(z.axisTypes||[],function(A){if(p=z[A]){i(p.series,z),p.isDirty=p.forceRedraw=!0}});z.legendItem&&z.chart.legend.destroyItem(z);for(u=s.length;u--;){(r=s[u])&&r.destroy&&r.destroy()}z.points=null;clearTimeout(z.animationTimeout);aw("area,graph,dataLabelsGroup,group,markerGroup,tracker,graphNeg,areaNeg,posClip,negClip".split(","),function(A){z[A]&&(v=w&&A==="group"?"hide":"destroy",z[A][v]())});if(x.hoverSeries===z){x.hoverSeries=null}i(x.series,z);for(q in z){delete z[q]}},getSegmentPath:function(q){var p=this,s=[],r=p.options.step;aw(q,function(z,x){var w=z.plotX,v=z.plotY,u;p.getPointSpline?s.push.apply(s,p.getPointSpline(q,z,x)):(s.push(x?"L":"M"),r&&x&&(u=q[x-1],r==="right"?s.push(u.plotX,v):r==="center"?s.push((u.plotX+w)/2,u.plotY,(u.plotX+w)/2,v):s.push(w,u.plotY)),s.push(z.plotX,z.plotY))});return s},getGraphPath:function(){var q=this,p=[],s,r=[];aw(q.segments,function(u){s=q.getSegmentPath(u);u.length>1?p=p.concat(s):r.push(u[0])});q.singlePoints=r;return q.graphPath=p},drawGraph:function(){var q=this,p=this.options,x=[["graph",p.lineColor||this.color]],w=p.lineWidth,v=p.dashStyle,u=p.linecap!=="square",s=this.getGraphPath(),r=p.negativeColor;r&&x.push(["graphNeg",r]);aw(x,function(C,B){var A=C[0],z=q[A];if(z){bt(z),z.animate({d:s})}else{if(w&&s.length){z={stroke:C[1],"stroke-width":w,fill:aV,zIndex:1},v?z.dashstyle=v:u&&(z["stroke-linecap"]=z["stroke-linejoin"]="round"),q[A]=q.chart.renderer.path(s).attr(z).add(q.group).shadow(!B&&p.shadow)}}})},clipNeg:function(){var C=this.options,B=this.chart,A=B.renderer,z=C.negativeColor||C.negativeFillColor,x,w=this.graph,v=this.area,u=this.posClip,s=this.negClip;x=B.chartWidth;var r=B.chartHeight,q=ar(x,r),p=this.yAxis;if(z&&(w||v)){z=aq(p.toPixels(C.threshold||0,!0));z<0&&(q-=z);C={x:0,y:0,width:q,height:z};q={x:0,y:z,width:q,height:q};if(B.inverted){C.height=q.y=B.plotWidth-z,A.isVML&&(C={x:B.plotWidth-z-B.plotLeft,y:0,width:x,height:r},q={x:z+B.plotLeft-x,y:0,width:B.plotLeft+z,height:x})}p.reversed?(B=q,x=C):(B=C,x=q);u?(u.animate(B),s.animate(x)):(this.posClip=u=A.clipRect(B),this.negClip=s=A.clipRect(x),w&&this.graphNeg&&(w.clip(u),this.graphNeg.clip(s)),v&&(v.clip(u),this.areaNeg.clip(s)))}},invertGroups:function(){function q(){var s={width:p.yAxis.len,height:p.xAxis.len};aw(["group","markerGroup"],function(u){p[u]&&p[u].attr(s).invert()})}var p=this,r=p.chart;if(p.xAxis){aZ(r,"resize",q),aZ(p,"destroy",function(){aO(r,"resize",q)}),q(),p.invertGroups=q}},plotGroup:function(q,p,w,v,u){var s=this[q],r=!s;r&&(this[q]=s=this.chart.renderer.g(p).attr({visibility:w,zIndex:v||0.1}).add(u));s[r?"attr":"animate"](this.getPlotBox());return s},getPlotBox:function(){var q=this.chart,p=this.xAxis,r=this.yAxis;if(q.inverted){p=r,r=this.xAxis}return{translateX:p?p.left:q.plotLeft,translateY:r?r.top:q.plotTop,scaleX:1,scaleY:1}},render:function(){var z=this,x=z.chart,w,v=z.options,u=(w=v.animation)&&!!z.animate&&x.renderer.isSVG&&ax(w.duration,500)||0,s=z.visible?"visible":"hidden",r=v.zIndex,q=z.hasRendered,p=x.seriesGroup;w=z.plotGroup("group","series",s,r,p);z.markerGroup=z.plotGroup("markerGroup","markers",s,r,p);u&&z.animate(!0);z.getAttribs();w.inverted=z.isCartesian?x.inverted:!1;z.drawGraph&&(z.drawGraph(),z.clipNeg());z.drawDataLabels&&z.drawDataLabels();z.visible&&z.drawPoints();z.drawTracker&&z.options.enableMouseTracking!==!1&&z.drawTracker();x.inverted&&z.invertGroups();v.clip!==!1&&!z.sharedClipKey&&!q&&w.clip(x.clipRect);u&&z.animate();if(!q){u?z.animationTimeout=setTimeout(function(){z.afterAnimate()},u):z.afterAnimate()}z.isDirty=z.isDirtyData=!1;z.hasRendered=!0},redraw:function(){var q=this.chart,p=this.isDirtyData,u=this.group,s=this.xAxis,r=this.yAxis;u&&(q.inverted&&u.attr({width:q.plotWidth,height:q.plotHeight}),u.animate({translateX:ax(s&&s.left,q.plotLeft),translateY:ax(r&&r.top,q.plotTop)}));this.translate();this.setTooltipPoints&&this.setTooltipPoints(!0);this.render();p&&a2(this,"updatedData")}};h.prototype={destroy:function(){bo(this,this.axis)},render:function(q){var p=this.options,r=p.format,r=r?bg(r,this):p.formatter.call(this);this.label?this.label.attr({text:r,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(r,null,null,p.useHTML).css(p.style).attr({align:this.textAlign,rotation:p.rotation,visibility:"hidden"}).add(q)},setOffset:function(z,x){var w=this.axis,v=w.chart,u=v.inverted,s=this.isNegative,r=w.translate(w.usePercentage?100:this.total,0,0,0,1),w=w.translate(0),w=aU(r-w),q=v.xAxis[0].translate(this.x)+z,p=v.plotHeight,s={x:u?s?r:r-w:q,y:u?p-q-x:s?p-r-w:p-r,width:u?w:x,height:u?x:w};if(u=this.label){u.align(this.alignOptions,null,s),s=u.alignAttr,u[this.options.crop===!1||v.isInsidePlot(s.x,s.y)?"show":"hide"](!0)}}};bB.prototype.buildStacks=function(){var q=this.series,p=ax(this.options.reversedStacks,!0),r=q.length;if(!this.isXAxis){for(this.usePercentage=!1;r--;){q[p?r:q.length-r-1].setStackedPoints()}if(this.usePercentage){for(r=0;r<q.length;r++){q[r].setPercentStacks()}}}};bB.prototype.renderStackTotals=function(){var q=this.chart,p=q.renderer,v=this.stacks,u,s,r=this.stackTotalGroup;if(!r){this.stackTotalGroup=r=p.g("stack-labels").attr({visibility:"visible",zIndex:6}).add()}r.translate(q.plotLeft,q.plotTop);for(u in v){for(s in q=v[u],q){q[s].render(r)}}};aX.prototype.setStackedPoints=function(){if(this.options.stacking&&!(this.visible!==!0&&this.chart.options.chart.ignoreHiddenSeries!==!1)){var Q=this.processedXData,P=this.processedYData,O=[],N=P.length,M=this.options,L=M.threshold,K=M.stack,M=M.stacking,J=this.stackKey,H="-"+J,G=this.negStacks,F=this.yAxis,C=F.stacks,B=F.oldStacks,A,z,x,w,v,u;for(w=0;w<N;w++){v=Q[w];u=P[w];x=this.index+","+w;z=(A=G&&u<L)?H:J;C[z]||(C[z]={});if(!C[z][v]){B[z]&&B[z][v]?(C[z][v]=B[z][v],C[z][v].total=null):C[z][v]=new h(F,F.options.stackLabels,A,v,K)}z=C[z][v];z.points[x]=[z.cum||0];M==="percent"?(A=A?J:H,G&&C[A]&&C[A][v]?(A=C[A][v],z.total=A.total=ar(A.total,z.total)+aU(u)||0):z.total=f(z.total+(aU(u)||0))):z.total=f(z.total+(u||0));z.cum=(z.cum||0)+(u||0);z.points[x].push(z.cum);O[w]=z.cum}if(M==="percent"){F.usePercentage=!0}this.stackedYData=O;F.oldStacks={}}};aX.prototype.setPercentStacks=function(){var q=this,p=q.stackKey,s=q.yAxis.stacks,r=q.processedXData;aw([p,"-"+p],function(u){var z;for(var x=r.length,w,v;x--;){if(w=r[x],z=(v=s[u]&&s[u][w])&&v.points[q.index+","+x],w=z){v=v.total?100/v.total:0,w[0]=f(w[0]*v),w[1]=f(w[1]*v),q.stackedYData[x]=w[1]}}})};av(E.prototype,{addSeries:function(q,p,u){var s,r=this;q&&(p=ax(p,!0),a2(r,"addSeries",{options:q},function(){s=r.initSeries(q);r.isDirtyLegend=!0;r.linkSeries();p&&r.redraw(u)}));return s},addAxis:function(q,p,v,u){var s=p?"xAxis":"yAxis",r=this.options;new bB(this,ap(q,{index:this[s].length,isX:p}));r[s]=bX(r[s]||{});r[s].push(q);ax(v,!0)&&this.redraw(u)},showLoading:function(q){var p=this,v=p.options,u=p.loadingDiv,s=v.loading,r=function(){u&&bk(u,{left:p.plotLeft+"px",top:p.plotTop+"px",width:p.plotWidth+"px",height:p.plotHeight+"px"})};if(!u){p.loadingDiv=u=bD(aG,{className:"highcharts-loading"},av(s.style,{zIndex:10,display:aV}),p.container),p.loadingSpan=bD("span",null,s.labelStyle,u),aZ(p,"redraw",r)}p.loadingSpan.innerHTML=q||v.lang.loading;if(!p.loadingShown){bk(u,{opacity:0,display:""}),aA(u,{opacity:s.style.opacity},{duration:s.showDuration||0}),p.loadingShown=!0}r()},hideLoading:function(){var q=this.options,p=this.loadingDiv;p&&aA(p,{opacity:0},{duration:q.loading.hideDuration||100,complete:function(){bk(p,{display:aV})}});this.loadingShown=!1}});av(ad.prototype,{update:function(A,z,x){var w=this,v=w.series,u=w.graphic,s,r=v.data,q=v.chart,p=v.options,z=ax(z,!0);w.firePointEvent("update",{options:A},function(){w.applyOptions(A);if(R(A)){v.getAttribs();if(u){A&&A.marker&&A.marker.symbol?w.graphic=u.destroy():u.attr(w.pointAttr[w.state||""])}if(A&&A.dataLabels&&w.dataLabel){w.dataLabel=w.dataLabel.destroy()}}s=aD(w,r);v.updateParallelArrays(w,s);p.data[s]=w.options;v.isDirty=v.isDirtyData=!0;if(!v.fixedBox&&v.hasCartesianSeries){q.isDirtyBox=!0}p.legendType==="point"&&q.legend.destroyItem(w);z&&q.redraw(x)})},remove:function(q,p){var x=this,w=x.series,v=w.points,u=w.chart,s,r=w.data;ak(p,u);q=ax(q,!0);x.firePointEvent("remove",null,function(){s=aD(x,r);r.length===v.length&&v.splice(s,1);r.splice(s,1);w.options.data.splice(s,1);w.updateParallelArrays(x,"splice",s,1);x.destroy();w.isDirty=!0;w.isDirtyData=!0;q&&u.redraw()})}});av(aX.prototype,{addPoint:function(G,F,C,B){var A=this.options,z=this.data,x=this.graph,w=this.area,v=this.chart,u=this.xAxis&&this.xAxis.names,s=x&&x.shift||0,r=A.data,q,p=this.xData;ak(B,v);C&&aw([x,w,this.graphNeg,this.areaNeg],function(H){if(H){H.shift=s+1}});if(w){w.isArea=!0}F=ax(F,!0);B={series:this};this.pointClass.prototype.applyOptions.apply(B,[G]);x=B.x;w=p.length;if(this.requireSorting&&x<p[w-1]){for(q=!0;w&&p[w-1]>x;){w--}}this.updateParallelArrays(B,"splice",w,0,0);this.updateParallelArrays(B,w);if(u){u[x]=B.name}r.splice(w,0,G);q&&(this.data.splice(w,0,null),this.processData());A.legendType==="point"&&this.generatePoints();C&&(z[0]&&z[0].remove?z[0].remove(!1):(z.shift(),this.updateParallelArrays(B,"shift"),r.shift()));this.isDirtyData=this.isDirty=!0;F&&(this.getAttribs(),v.redraw())},remove:function(q,p){var s=this,r=s.chart,q=ax(q,!0);if(!s.isRemoving){s.isRemoving=!0,a2(s,"remove",null,function(){s.destroy();r.isDirtyLegend=r.isDirtyBox=!0;r.linkSeries();q&&r.redraw(p)})}s.isRemoving=!1},update:function(z,x){var w=this,v=this.chart,u=this.userOptions,s=this.type,r=a5[s].prototype,q=["group","markerGroup","dataLabelsGroup"],p;aw(q,function(A){q[A]=w[A];delete w[A]});z=ap(u,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},z);this.remove(!1);for(p in r){r.hasOwnProperty(p)&&(this[p]=at)}av(this,a5[z.type||s].prototype);aw(q,function(A){w[A]=q[A]});this.init(v,z);v.linkSeries();ax(x,!0)&&v.redraw(!1)}});av(bB.prototype,{update:function(q,p){var r=this.chart,q=r.options[this.coll][this.options.index]=ap(this.userOptions,q);this.destroy(!0);this._addedPlotLB=at;this.init(r,av(q,{events:at}));r.isDirtyBox=!0;ax(p,!0)&&r.redraw()},remove:function(q){for(var p=this.chart,u=this.coll,s=this.series,r=s.length;r--;){s[r]&&s[r].remove(!1)}i(p.axes,this);i(p[u],this);p.options[u].splice(this.options.index,1);aw(p[u],function(w,v){w.options.index=v});this.destroy();p.isDirtyBox=!0;ax(q,!0)&&p.redraw()},setTitle:function(q,p){this.update({title:q},p)},setCategories:function(q,p){this.update({categories:q},p)}});a4=bT(aX);a5.line=a4;az.area=ap(aS,{threshold:0});var l=bT(aX,{type:"area",getSegments:function(){var G=this,F=[],C=[],B=[],A=this.xAxis,z=this.yAxis,x=z.stacks[this.stackKey],w={},v,u,s=this.points,r=this.options.connectNulls,q,p;if(this.options.stacking&&!this.cropped){for(q=0;q<s.length;q++){w[s[q].x]=s[q]}for(p in x){x[p].total!==null&&B.push(+p)}B.sort(function(J,H){return J-H});aw(B,function(H){var K=0,J;if(!r||w[H]&&w[H].y!==null){if(w[H]){C.push(w[H])}else{for(q=G.index;q<=z.series.length;q++){if(J=x[H].points[q+","+H]){K=J[1];break}}v=A.translate(H);u=z.toPixels(K,!0);C.push({y:null,plotX:v,clientX:v,plotY:u,yBottom:u,onMouseOver:bF})}}});C.length&&F.push(C)}else{aX.prototype.getSegments.call(this),F=this.segments}this.segments=F},getSegmentPath:function(q){var p=aX.prototype.getSegmentPath.call(this,q),w=[].concat(p),v,u=this.options;v=p.length;var s=this.yAxis.getThreshold(u.threshold),r;v===3&&w.push("L",p[1],p[2]);if(u.stacking&&!this.closedStacks){for(v=q.length-1;v>=0;v--){r=ax(q[v].yBottom,s),v<q.length-1&&u.step&&w.push(q[v+1].plotX,r),w.push(q[v].plotX,r)}}else{this.closeSegment(w,q,s)}this.areaPath=this.areaPath.concat(w);return p},closeSegment:function(q,p,r){q.push("L",p[p.length-1].plotX,r,"L",p[0].plotX,r)},drawGraph:function(){this.areaPath=[];aX.prototype.drawGraph.apply(this);var q=this,p=this.areaPath,v=this.options,u=v.negativeColor,s=v.negativeFillColor,r=[["area",this.color,v.fillColor]];(u||s)&&r.push(["areaNeg",u,s]);aw(r,function(z){var x=z[0],w=q[x];w?w.animate({d:p}):q[x]=q.chart.renderer.path(p).attr({fill:ax(z[2],bJ(z[1]).setOpacity(ax(v.fillOpacity,0.75)).get()),zIndex:0}).add(q.group)})},drawLegendSymbol:a0.drawRectangle});a5.area=l;az.spline=ap(aS);a4=bT(aX,{type:"spline",getPointSpline:function(C,B,A){var z=B.plotX,x=B.plotY,w=C[A-1],v=C[A+1],u,s,r,q;if(w&&v){C=w.plotY;r=v.plotX;var v=v.plotY,p;u=(1.5*z+w.plotX)/2.5;s=(1.5*x+C)/2.5;r=(1.5*z+r)/2.5;q=(1.5*x+v)/2.5;p=(q-s)*(r-z)/(r-u)+x-q;s+=p;q+=p;s>C&&s>x?(s=ar(C,x),q=2*x-s):s<C&&s<x&&(s=bi(C,x),q=2*x-s);q>v&&q>x?(q=ar(v,x),s=2*x-q):q<v&&q<x&&(q=bi(v,x),s=2*x-q);B.rightContX=r;B.rightContY=q}A?(B=["C",w.rightContX||w.plotX,w.rightContY||w.plotY,u||z,s||x,z,x],w.rightContX=w.rightContY=null):B=["M",z,x];return B}});a5.spline=a4;az.areaspline=ap(az.area);l=l.prototype;a4=bT(a4,{type:"areaspline",closedStacks:!0,getSegmentPath:l.getSegmentPath,closeSegment:l.closeSegment,drawGraph:l.drawGraph,drawLegendSymbol:a0.drawRectangle});a5.areaspline=a4;az.column=ap(aS,{borderColor:"#FFFFFF",borderRadius:0,groupPadding:0.2,marker:null,pointPadding:0.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:0.1,shadow:!1,halo:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},stickyTracking:!1,tooltip:{distance:6},threshold:0});a4=bT(aX,{type:"column",pointAttrToOptions:{stroke:"borderColor",fill:"color",r:"borderRadius"},cropShoulder:0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){aX.prototype.init.apply(this,arguments);var q=this,p=q.chart;p.hasRendered&&aw(p.series,function(r){if(r.type===q.type){r.isDirty=!0}})},getColumnMetrics:function(){var C=this,B=C.options,A=C.xAxis,z=C.yAxis,x=A.reversed,w,v={},u,s=0;B.grouping===!1?s=1:aw(C.chart.series,function(F){var H=F.options,G=F.yAxis;if(F.type===C.type&&F.visible&&z.len===G.len&&z.pos===G.pos){H.stacking?(w=F.stackKey,v[w]===at&&(v[w]=s++),u=v[w]):H.grouping!==!1&&(u=s++),F.columnIndex=u}});var A=bi(aU(A.transA)*(A.ordinalSlope||B.pointRange||A.closestPointRange||A.tickInterval||1),A.len),r=A*B.groupPadding,q=(A-2*r)/s,p=B.pointWidth,B=au(p)?(q-p)/2:q*B.pointPadding,p=ax(p,q-2*B);return C.columnMetrics={width:p,offset:B+(r+((x?s-(C.columnIndex||0):C.columnIndex)||0)*q-A/2)*(x?-1:1)}},translate:function(){var F=this,C=F.chart,B=F.options,A=F.borderWidth=ax(B.borderWidth,F.activePointCount>0.5*F.xAxis.len?0:1),z=F.yAxis,x=F.translatedThreshold=z.getThreshold(B.threshold),w=ax(B.minPointLength,5),v=F.getColumnMetrics(),u=v.width,s=F.barW=ar(u,1+2*A),r=F.pointXOffset=v.offset,q=-(A%2?0.5:0),p=A%2?0.5:1;C.renderer.isVML&&C.inverted&&(p+=1);B.pointPadding&&(s=ag(s));aX.prototype.translate.apply(F);aw(F.points,function(N){var M=ax(N.yBottom,x),J=bi(ar(-999-M,N.plotY),z.len+999+M),L=N.plotX+r,K=s,H=bi(J,M),G;G=ar(J,M)-H;aU(G)<w&&w&&(G=w,H=aq(aU(H-x)>w?M-w:x-(z.translate(N.y,0,1,0,1)<=x?w:0)));N.barX=L;N.pointWidth=u;N.tooltipPos=C.inverted?[z.len-J,F.xAxis.len-L-K/2]:[L+K/2,J];K=aq(L+K)+q;L=aq(L)+q;K-=L;M=aU(H)<0.5;G=aq(H+G)+p;H=aq(H)+p;G-=H;M&&(H-=1,G+=1);N.shapeType="rect";N.shapeArgs={x:L,y:H,width:K,height:G}})},getSymbol:bF,drawLegendSymbol:a0.drawRectangle,drawGraph:bF,drawPoints:function(){var q=this,p=this.chart,w=q.options,v=p.renderer,u=w.animationLimit||250,s,r;aw(q.points,function(A){var z=A.plotY,x=A.graphic;if(z!==at&&!isNaN(z)&&A.y!==null){s=A.shapeArgs,z=au(q.borderWidth)?{"stroke-width":q.borderWidth}:{},r=A.pointAttr[A.selected?"select":""]||q.pointAttr[""],x?(bt(x),x.attr(z)[p.pointCount<u?"animate":"attr"](ap(s))):A.graphic=v[A.shapeType](s).attr(r).attr(z).add(q.group).shadow(w.shadow,null,w.stacking&&!w.borderRadius)}else{if(x){A.graphic=x.destroy()}}})},animate:function(q){var p=this.yAxis,u=this.options,s=this.chart.inverted,r={};if(aY){q?(r.scaleY=0.001,q=bi(p.pos+p.len,ar(p.pos,p.toPixels(u.threshold))),s?r.translateX=q-p.len:r.translateY=q,this.group.attr(r)):(r.scaleY=1,r[s?"translateX":"translateY"]=p.pos,this.group.animate(r,this.options.animation),this.animate=null)}},remove:function(){var q=this,p=q.chart;p.hasRendered&&aw(p.series,function(r){if(r.type===q.type){r.isDirty=!0}});aX.prototype.remove.apply(q,arguments)}});a5.column=a4;az.bar=ap(az.column);l=bT(a4,{type:"bar",inverted:!0});a5.bar=l;az.scatter=ap(aS,{lineWidth:0,tooltip:{headerFormat:'<span style="color:{series.color}">●</span> <span style="font-size: 10px;"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"},stickyTracking:!1});l=bT(aX,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,singularTooltips:!0,drawGraph:function(){this.options.lineWidth&&aX.prototype.drawGraph.call(this)}});a5.scatter=l;az.pie=ap(aS,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name}},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:0.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}});aS={type:"pie",isCartesian:!1,pointClass:bT(ad,{init:function(){ad.prototype.init.apply(this,arguments);var q=this,p;if(q.y<0){q.y=null}av(q,{visible:q.visible!==!1,name:ax(q.name,"Slice")});p=function(r){q.slice(r.type==="select")};aZ(q,"select",p);aZ(q,"unselect",p);return q},setVisible:function(q){var p=this,s=p.series,r=s.chart;p.visible=p.options.visible=q=q===at?!p.visible:q;s.options.data[aD(p,s.data)]=p.options;aw(["graphic","dataLabel","connector","shadowGroup"],function(u){if(p[u]){p[u][q?"show":"hide"](!0)}});p.legendItem&&r.legend.colorizeItem(p,q);if(!s.isDirty&&s.options.ignoreHiddenPoint){s.isDirty=!0,r.redraw()}},slice:function(q,p,s){var r=this.series;ak(s,r.chart);ax(p,!0);this.sliced=this.options.sliced=q=au(q)?q:!this.sliced;r.options.data[aD(this,r.data)]=this.options;q=q?this.slicedTranslation:{translateX:0,translateY:0};this.graphic.animate(q);this.shadowGroup&&this.shadowGroup.animate(q)},haloPath:function(q){var p=this.shapeArgs,r=this.series.chart;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(r.plotLeft+p.x,r.plotTop+p.y,p.r+q,p.r+q,{innerR:this.shapeArgs.r,start:p.start,end:p.end})}}),requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},singularTooltips:!0,getColor:bF,animate:function(q){var p=this,s=p.points,r=p.startAngleRad;if(!q){aw(s,function(u){var v=u.graphic,u=u.shapeArgs;v&&(v.attr({r:p.center[3]/2,start:r,end:r}),v.animate({r:u.r,start:u.start,end:u.end},p.options.animation))}),p.animate=null}},setData:function(q,p,s,r){aX.prototype.setData.call(this,q,!1,s,r);this.processData();this.generatePoints();ax(p,!0)&&this.chart.redraw(s)},generatePoints:function(){var q,p=0,v,u,s,r=this.options.ignoreHiddenPoint;aX.prototype.generatePoints.call(this);v=this.points;u=v.length;for(q=0;q<u;q++){s=v[q],p+=r&&!s.visible?0:s.y}this.total=p;for(q=0;q<u;q++){s=v[q],s.percentage=p>0?s.y/p*100:0,s.total=p}},translate:function(H){this.generatePoints();var G=0,F=this.options,C=F.slicedOffset,B=C+F.borderWidth,A,z,x,w=F.startAngle||0,v=this.startAngleRad=bf/180*(w-90),w=(this.endAngleRad=bf/180*(ax(F.endAngle,w+360)-90))-v,u=this.points,s=F.dataLabels.distance,F=F.ignoreHiddenPoint,r,q=u.length,p;if(!H){this.center=H=this.getCenter()}this.getX=function(J,K){x=aQ.asin(bi((J-H[1])/(H[2]/2+s),1));return H[0]+(K?-1:1)*bu(x)*(H[2]/2+s)};for(r=0;r<q;r++){p=u[r];A=v+G*w;if(!F||p.visible){G+=p.percentage/100}z=v+G*w;p.shapeType="arc";p.shapeArgs={x:H[0],y:H[1],r:H[2]/2,innerR:H[3]/2,start:aq(A*1000)/1000,end:aq(z*1000)/1000};x=(z+A)/2;x>1.5*bf?x-=2*bf:x<-bf/2&&(x+=2*bf);p.slicedTranslation={translateX:aq(bu(x)*C),translateY:aq(bP(x)*C)};A=bu(x)*H[2]/2;z=bP(x)*H[2]/2;p.tooltipPos=[H[0]+A*0.7,H[1]+z*0.7];p.half=x<-bf/2||x>bf/2?1:0;p.angle=x;B=bi(B,s/2);p.labelPos=[H[0]+A+bu(x)*s,H[1]+z+bP(x)*s,H[0]+A+bu(x)*B,H[1]+z+bP(x)*B,H[0]+A,H[1]+z,s<0?"center":p.half?"right":"left",x]}},drawGraph:null,drawPoints:function(){var q=this,p=q.chart.renderer,w,v,u=q.options.shadow,s,r;if(u&&!q.shadowGroup){q.shadowGroup=p.g("shadow").add(q.group)}aw(q.points,function(x){v=x.graphic;r=x.shapeArgs;s=x.shadowGroup;if(u&&!s){s=x.shadowGroup=p.g("shadow").add(q.shadowGroup)}w=x.sliced?x.slicedTranslation:{translateX:0,translateY:0};s&&s.attr(w);v?v.animate(av(r,w)):x.graphic=v=p[x.shapeType](r).setRadialReference(q.center).attr(x.pointAttr[x.selected?"select":""]).attr({"stroke-linejoin":"round"}).attr(w).add(q.group).shadow(u,s);x.visible!==void 0&&x.setVisible(x.visible)})},sortByAngle:function(q,p){q.sort(function(r,s){return r.angle!==void 0&&(s.angle-r.angle)*p})},drawLegendSymbol:a0.drawRectangle,getCenter:aL.getCenter,getSymbol:bF};aS=bT(aX,aS);a5.pie=aS;aX.prototype.drawDataLabels=function(){var z=this,x=z.options,w=x.cursor,v=x.dataLabels,u=z.points,s,r,q,p;if(v.enabled||z._hasPointLabels){z.dlProcessOptions&&z.dlProcessOptions(v),p=z.plotGroup("dataLabelsGroup","data-labels",v.defer?"hidden":"visible",v.zIndex||6),!z.hasRendered&&ax(v.defer,!0)&&(p.attr({opacity:0}),aZ(z,"afterAnimate",function(){z.visible&&p.show();p[x.animation?"animate":"attr"]({opacity:1},{duration:200})})),r=v,aw(u,function(B){var G,C=B.dataLabel,A,J,H=B.connector,F=!0;s=B.options&&B.options.dataLabels;G=ax(s&&s.enabled,r.enabled);if(C&&!G){B.dataLabel=C.destroy()}else{if(G){v=ap(r,s);G=v.rotation;A=B.getLabelConfig();q=v.format?bg(v.format,A):v.formatter.call(A,v);v.style.color=ax(v.color,v.style.color,z.color,"black");if(C){if(au(q)){C.attr({text:q}),F=!1}else{if(B.dataLabel=C=C.destroy(),H){B.connector=H.destroy()}}}else{if(au(q)){C={fill:v.backgroundColor,stroke:v.borderColor,"stroke-width":v.borderWidth,r:v.borderRadius||0,rotation:G,padding:v.padding,zIndex:1};for(J in C){C[J]===at&&delete C[J]}C=B.dataLabel=z.chart.renderer[G?"text":"label"](q,0,-999,null,null,null,v.useHTML).attr(C).css(av(v.style,w&&{cursor:w})).add(p).shadow(v.shadow)}}C&&z.alignDataLabel(B,C,v,null,F)}}})}};aX.prototype.alignDataLabel=function(A,z,x,w,v){var u=this.chart,s=u.inverted,r=ax(A.plotX,-999),q=ax(A.plotY,-999),p=z.getBBox();if(A=this.visible&&(A.series.forceDL||u.isInsidePlot(r,aq(q),s)||w&&u.isInsidePlot(r,s?w.x+1:w.y+w.height-1,s))){w=av({x:s?u.plotWidth-q:r,y:aq(s?u.plotHeight-r:q),width:0,height:0},w),av(x,{width:p.width,height:p.height}),x.rotation?z[v?"attr":"animate"]({x:w.x+x.x+w.width/2,y:w.y+x.y+w.height/2}).attr({align:x.align}):(z.align(x,null,w),s=z.alignAttr,ax(x.overflow,"justify")==="justify"?this.justifyDataLabel(z,x,s,p,w,v):ax(x.crop,!0)&&(A=u.isInsidePlot(s.x,s.y)&&u.isInsidePlot(s.x+p.width,s.y+p.height)))}if(!A){z.attr({y:-999}),z.placed=!1}};aX.prototype.justifyDataLabel=function(B,A,z,x,w,v){var u=this.chart,s=A.align,r=A.verticalAlign,q,p;q=z.x;if(q<0){s==="right"?A.align="left":A.x=-q,p=!0}q=z.x+x.width;if(q>u.plotWidth){s==="left"?A.align="right":A.x=u.plotWidth-q,p=!0}q=z.y;if(q<0){r==="bottom"?A.verticalAlign="top":A.y=-q,p=!0}q=z.y+x.height;if(q>u.plotHeight){r==="top"?A.verticalAlign="bottom":A.y=u.plotHeight-q,p=!0}if(p){B.placed=!v,B.align(A,null,w)}};if(a5.pie){a5.pie.prototype.drawDataLabels=function(){var cg=this,cf=cg.data,ce,cd=cg.chart,cc=cg.options.dataLabels,cb=ax(cc.connectorPadding,10),ca=ax(cc.connectorWidth,1),b9=cd.plotWidth,b8=cd.plotHeight,b7,b6,b5=ax(cc.softConnector,!0),b4=cc.distance,b3=cg.center,b2=b3[2]/2,bZ=b3[1],bb=b4>0,ba,Z,W,T=[[],[]],b0,b1,Q,V,U,q=[0,0,0,0],v=function(s,r){return r.y-s.y};if(cg.visible&&(cc.enabled||cg._hasPointLabels)){aX.prototype.drawDataLabels.apply(cg);aw(cf,function(r){r.dataLabel&&r.visible&&T[r.half].push(r)});for(V=2;V--;){var X=[],C=[],ab=T[V],O=ab.length,aa;if(O){cg.sortByAngle(ab,V-0.5);for(U=cf=0;!cf&&ab[U];){cf=ab[U]&&ab[U].dataLabel&&(ab[U].dataLabel.getBBox().height||21),U++}if(b4>0){Z=bi(bZ+b2+b4,cd.plotHeight);for(U=ar(0,bZ-b2-b4);U<=Z;U+=cf){X.push(U)}Z=X.length;if(O>Z){ce=[].concat(ab);ce.sort(v);for(U=O;U--;){ce[U].rank=U}for(U=O;U--;){ab[U].rank>=Z&&ab.splice(U,1)}O=ab.length}for(U=0;U<O;U++){ce=ab[U];W=ce.labelPos;ce=9999;var p,u;for(u=0;u<Z;u++){p=aU(X[u]-W[1]),p<ce&&(ce=p,aa=u)}if(aa<U&&X[U]!==null){aa=U}else{for(Z<O-U+aa&&X[U]!==null&&(aa=Z-O+U);X[aa]===null;){aa++}}C.push({i:aa,y:X[aa]});X[aa]=null}C.sort(v)}for(U=0;U<O;U++){ce=ab[U];W=ce.labelPos;ba=ce.dataLabel;Q=ce.visible===!1?"hidden":"visible";ce=W[1];if(b4>0){if(Z=C.pop(),aa=Z.i,b1=Z.y,ce>b1&&X[aa+1]!==null||ce<b1&&X[aa-1]!==null){b1=bi(ar(0,ce),cd.plotHeight)}}else{b1=ce}b0=cc.justify?b3[0]+(V?-1:1)*(b2+b4):cg.getX(b1===bZ-b2-b4||b1===bZ+b2+b4?ce:b1,V);ba._attr={visibility:Q,align:W[6]};ba._pos={x:b0+cc.x+({left:cb,right:-cb}[W[6]]||0),y:b1+cc.y-10};ba.connX=b0;ba.connY=b1;if(this.options.size===null){Z=ba.width,b0-Z<cb?q[3]=ar(aq(Z-b0+cb),q[3]):b0+Z>b9-cb&&(q[1]=ar(aq(b0+Z-b9+cb),q[1])),b1-cf/2<0?q[0]=ar(aq(-b1+cf/2),q[0]):b1+cf/2>b8&&(q[2]=ar(aq(b1+cf/2-b8),q[2]))}}}}if(by(q)===0||this.verifyDataLabelOverflow(q)){this.placeDataLabels(),bb&&ca&&aw(this.points,function(r){b7=r.connector;W=r.labelPos;if((ba=r.dataLabel)&&ba._pos){Q=ba._attr.visibility,b0=ba.connX,b1=ba.connY,b6=b5?["M",b0+(W[6]==="left"?5:-5),b1,"C",b0,b1,2*W[2]-W[4],2*W[3]-W[5],W[2],W[3],"L",W[4],W[5]]:["M",b0+(W[6]==="left"?5:-5),b1,"L",W[2],W[3],"L",W[4],W[5]],b7?(b7.animate({d:b6}),b7.attr("visibility",Q)):r.connector=b7=cg.chart.renderer.path(b6).attr({"stroke-width":ca,stroke:cc.connectorColor||r.color||"#606060",visibility:Q}).add(cg.dataLabelsGroup)}else{if(b7){r.connector=b7.destroy()}}})}}},a5.pie.prototype.placeDataLabels=function(){aw(this.points,function(q){var q=q.dataLabel,p;if(q){(p=q._pos)?(q.attr(q._attr),q[q.moved?"animate":"attr"](p),q.moved=!0):q&&q.attr({y:-999})}})},a5.pie.prototype.alignDataLabel=bF,a5.pie.prototype.verifyDataLabelOverflow=function(q){var p=this.center,v=this.options,u=v.center,s=v=v.minSize||80,r;u[0]!==null?s=ar(p[2]-ar(q[1],q[3]),v):(s=ar(p[2]-q[1]-q[3],v),p[0]+=(q[3]-q[1])/2);u[1]!==null?s=ar(bi(s,p[2]-ar(q[0],q[2])),v):(s=ar(bi(s,p[2]-q[0]-q[2]),v),p[1]+=(q[0]-q[2])/2);s<p[2]?(p[2]=s,this.translate(p),aw(this.points,function(w){if(w.dataLabel){w.dataLabel._pos=null}}),this.drawDataLabels&&this.drawDataLabels()):r=!0;return r}}if(a5.column){a5.column.prototype.alignDataLabel=function(A,z,x,w,v){var u=this.chart,s=u.inverted,r=A.dlBox||A.shapeArgs,q=A.below||A.plotY>ax(this.translatedThreshold,u.plotSizeY),p=ax(x.inside,!!this.options.stacking);if(r&&(w=ap(r),s&&(w={x:u.plotWidth-w.y-w.height,y:u.plotHeight-w.x-w.width,width:w.height,height:w.width}),!p)){s?(w.x+=q?0:w.width,w.width=0):(w.y+=q?w.height:0,w.height=0)}x.align=ax(x.align,!s||p?"center":q?"right":"left");x.verticalAlign=ax(x.verticalAlign,s||p?"middle":q?"top":"bottom");aX.prototype.alignDataLabel.call(this,A,z,x,w,v)}}aS=aT.TrackerMixin={drawTrackerPoint:function(){var q=this,p=q.chart,v=p.pointer,u=q.options.cursor,s=u&&{cursor:u},r=function(z){var x=z.target,w;if(p.hoverSeries!==q){q.onMouseOver()}for(;x&&!w;){w=x.point,x=x.parentNode}if(w!==at&&w!==p.hoverPoint){w.onMouseOver(z)}};aw(q.points,function(w){if(w.graphic){w.graphic.element.point=w}if(w.dataLabel){w.dataLabel.element.point=w}});if(!q._hasTracking){aw(q.trackerGroups,function(w){if(q[w]&&(q[w].addClass("highcharts-tracker").on("mouseover",r).on("mouseout",function(x){v.onTrackerMouseOut(x)}).css(s),bM)){q[w].on("touchstart",r)}}),q._hasTracking=!0}},drawTrackerGraph:function(){var H=this,G=H.options,F=G.trackByArea,C=[].concat(F?H.areaPath:H.graphPath),B=C.length,A=H.chart,z=A.pointer,x=A.renderer,w=A.options.tooltip.snap,v=H.tracker,u=G.cursor,s=u&&{cursor:u},u=H.singlePoints,r,q=function(){if(A.hoverSeries!==H){H.onMouseOver()}},p="rgba(192,192,192,"+(aY?0.0001:0.002)+")";if(B&&!F){for(r=B+1;r--;){C[r]==="M"&&C.splice(r+1,0,C[r+1]-w,C[r+2],"L"),(r&&C[r]==="M"||r===B)&&C.splice(r,0,"L",C[r-2]+w,C[r-1])}}for(r=0;r<u.length;r++){B=u[r],C.push("M",B.plotX-w,B.plotY,"L",B.plotX+w,B.plotY)}v?v.attr({d:C}):(H.tracker=x.path(C).attr({"stroke-linejoin":"round",visibility:H.visible?"visible":"hidden",stroke:p,fill:F?p:aV,"stroke-width":G.lineWidth+(F?0:2*w),zIndex:2}).add(H.group),aw([H.tracker,H.markerGroup],function(J){J.addClass("highcharts-tracker").on("mouseover",q).on("mouseout",function(K){z.onTrackerMouseOut(K)}).css(s);if(bM){J.on("touchstart",q)}}))}};if(a5.column){a4.prototype.drawTracker=aS.drawTrackerPoint}if(a5.pie){a5.pie.prototype.drawTracker=aS.drawTrackerPoint}if(a5.scatter){l.prototype.drawTracker=aS.drawTrackerPoint}av(g.prototype,{setItemEvents:function(q,p,v,u,s){var r=this;(v?p:q.legendGroup).on("mouseover",function(){q.setState("hover");p.css(r.options.itemHoverStyle)}).on("mouseout",function(){p.css(q.visible?u:s);q.setState()}).on("click",function(w){var x=function(){q.setVisible()},w={browserEvent:w};q.firePointEvent?q.firePointEvent("legendItemClick",w,x):a2(q,"legendItemClick",w,x)})},createCheckboxForItem:function(p){p.checkbox=bD("input",{type:"checkbox",checked:p.selected,defaultChecked:p.selected},this.options.itemCheckboxStyle,this.chart.container);aZ(p.checkbox,"click",function(q){a2(p,"checkboxClick",{checked:q.target.checked},function(){p.select()})})}});a1.legend.itemStyle.cursor="pointer";av(E.prototype,{showResetZoom:function(){var q=this,p=a1.lang,v=q.options.chart.resetZoomButton,u=v.theme,s=u.states,r=v.relativeTo==="chart"?null:"plotBox";this.resetZoomButton=q.renderer.button(p.resetZoom,null,null,function(){q.zoomOut()},u,s&&s.hover).attr({align:v.position.align,title:p.resetZoomTitle}).add().align(v.position,!1,r)},zoomOut:function(){var p=this;a2(p,"selection",{resetSelection:!0},function(){p.zoom()})},zoom:function(q){var p,u=this.pointer,s=!1,r;!q||q.resetSelection?aw(this.axes,function(v){p=v.zoom()}):aw(q.xAxis.concat(q.yAxis),function(v){var x=v.axis,w=x.isXAxis;if(u[w?"zoomX":"zoomY"]||u[w?"pinchX":"pinchY"]){p=x.zoom(v.min,v.max),x.displayBtn&&(s=!0)}});r=this.resetZoomButton;if(s&&!r){this.showResetZoom()}else{if(!s&&R(r)){this.resetZoomButton=r.destroy()}}p&&this.redraw(ax(this.options.chart.animation,q&&q.animation,this.pointCount<100))},pan:function(q,p){var u=this,s=u.hoverPoints,r;s&&aw(s,function(v){v.setState()});aw(p==="xy"?[1,0]:[1],function(v){var C=q[v?"chartX":"chartY"],B=u[v?"xAxis":"yAxis"][0],A=u[v?"mouseDownX":"mouseDownY"],z=(B.pointRange||0)/2,x=B.getExtremes(),w=B.toValue(A-C,!0)+z,A=B.toValue(A+u[v?"plotWidth":"plotHeight"]-C,!0)-z;B.series.length&&w>bi(x.dataMin,x.min)&&A<ar(x.dataMax,x.max)&&(B.setExtremes(w,A,!1,!1,{trigger:"pan"}),r=!0);u[v?"mouseDownX":"mouseDownY"]=C});r&&u.redraw(!1);bk(u.container,{cursor:"move"})}});av(ad.prototype,{select:function(q,p){var u=this,s=u.series,r=s.chart,q=ax(q,!u.selected);u.firePointEvent(q?"select":"unselect",{accumulate:p},function(){u.selected=u.options.selected=q;s.options.data[aD(u,s.data)]=u.options;u.setState(q&&"select");p||aw(r.getSelectedPoints(),function(v){if(v.selected&&v!==u){v.selected=v.options.selected=!1,s.options.data[aD(v,s.data)]=v.options,v.setState(""),v.firePointEvent("unselect")}})})},onMouseOver:function(q){var p=this.series,u=p.chart,s=u.tooltip,r=u.hoverPoint;if(r&&r!==this){r.onMouseOut()}this.firePointEvent("mouseOver");s&&(!s.shared||p.noSharedTooltip)&&s.refresh(this,q);this.setState("hover");u.hoverPoint=this},onMouseOut:function(){var q=this.series.chart,p=q.hoverPoints;this.firePointEvent("mouseOut");if(!p||aD(this,p)===-1){this.setState(),q.hoverPoint=null}},importEvents:function(){if(!this.hasImportedEvents){var q=ap(this.series.options.point,this.options).events,p;this.events=q;for(p in q){aZ(this,p,q[p])}this.hasImportedEvents=!0}},setState:function(H,G){var F=this.plotX,C=this.plotY,B=this.series,A=B.options.states,z=az[B.type].marker&&B.options.marker,x=z&&!z.enabled,w=z&&z.states[H],v=w&&w.enabled===!1,u=B.stateMarkerGraphic,s=this.marker||{},r=B.chart,q=B.halo,p,H=H||"";p=this.pointAttr[H]||B.pointAttr[H];if(!(H===this.state&&!G||this.selected&&H!=="select"||A[H]&&A[H].enabled===!1||H&&(v||x&&w.enabled===!1)||H&&s.states&&s.states[H]&&s.states[H].enabled===!1)){if(this.graphic){z=z&&this.graphic.symbolName&&p.r,this.graphic.attr(ap(p,z?{x:F-z,y:C-z,width:2*z,height:2*z}:{})),u&&u.hide()}else{if(H&&w){if(z=w.radius,s=s.symbol||B.symbol,u&&u.currentSymbol!==s&&(u=u.destroy()),u){u[G?"animate":"attr"]({x:F-z,y:C-z})}else{if(s){B.stateMarkerGraphic=u=r.renderer.symbol(s,F-z,C-z,2*z,2*z).attr(p).add(B.markerGroup),u.currentSymbol=s}}}if(u){u[H&&r.isInsidePlot(F,C,r.inverted)?"show":"hide"]()}}if((F=A[H]&&A[H].halo)&&F.size){if(!q){B.halo=q=r.renderer.path().add(B.seriesGroup)}q.attr(av({fill:bJ(this.color||B.color).setOpacity(F.opacity).get()},F.attributes))[G?"animate":"attr"]({d:this.haloPath(F.size)})}else{q&&q.attr({d:[]})}this.state=H}},haloPath:function(q){var p=this.series,u=p.chart,s=p.getPlotBox(),r=u.inverted;return u.renderer.symbols.circle(s.translateX+(r?p.yAxis.len-this.plotY:this.plotX)-q,s.translateY+(r?p.xAxis.len-this.plotX:this.plotY)-q,q*2,q*2)}});av(aX.prototype,{onMouseOver:function(){var q=this.chart,p=q.hoverSeries;if(p&&p!==this){p.onMouseOut()}this.options.events.mouseOver&&a2(this,"mouseOver");this.setState("hover");q.hoverSeries=this},onMouseOut:function(){var q=this.options,p=this.chart,s=p.tooltip,r=p.hoverPoint;if(r){r.onMouseOut()}this&&q.events.mouseOut&&a2(this,"mouseOut");s&&!q.stickyTracking&&(!s.shared||this.noSharedTooltip)&&s.hide();this.setState();p.hoverSeries=null},setState:function(q){var p=this.options,u=this.graph,s=this.graphNeg,r=p.states,p=p.lineWidth,q=q||"";if(this.state!==q){this.state=q,r[q]&&r[q].enabled===!1||(q&&(p=r[q].lineWidth||p+(r[q].lineWidthPlus||0)),u&&!u.dashstyle&&(q={"stroke-width":p},u.attr(q),s&&s.attr(q)))}},setVisible:function(q,p){var x=this,w=x.chart,v=x.legendItem,u,s=w.options.chart.ignoreHiddenSeries,r=x.visible;u=(x.visible=q=x.userOptions.visible=q===at?!r:q)?"show":"hide";aw(["group","dataLabelsGroup","markerGroup","tracker"],function(z){if(x[z]){x[z][u]()}});if(w.hoverSeries===x){x.onMouseOut()}v&&w.legend.colorizeItem(x,q);x.isDirty=!0;x.options.stacking&&aw(w.series,function(z){if(z.options.stacking&&z.visible){z.isDirty=!0}});aw(x.linkedSeries,function(z){z.setVisible(q,!1)});if(s){w.isDirtyBox=!0}p!==!1&&w.redraw();a2(x,u)},setTooltipPoints:function(A){var z=[],x,w,v=this.xAxis,u=v&&v.getExtremes(),s=v?v.tooltipLen||v.len:this.chart.plotSizeX,r,q,p=[];if(!(this.options.enableMouseTracking===!1||this.singularTooltips)){if(A){this.tooltipPoints=null}aw(this.segments||this.points,function(B){z=z.concat(B)});v&&v.reversed&&(z=z.reverse());this.orderTooltipPoints&&this.orderTooltipPoints(z);A=z.length;for(q=0;q<A;q++){if(v=z[q],x=v.x,x>=u.min&&x<=u.max){r=z[q+1];x=w===at?0:w+1;for(w=z[q+1]?bi(ar(0,aR((v.clientX+(r?r.wrappedClientX||r.clientX:s))/2)),s):s;x>=0&&x<=w;){p[x++]=v}}}this.tooltipPoints=p}},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(p){this.selected=p=p===at?!this.selected:p;if(this.checkbox){this.checkbox.checked=p}a2(this,p?"select":"unselect")},drawTracker:aS.drawTrackerGraph});av(aT,{Axis:bB,Chart:E,Color:bJ,Point:ad,Tick:c,Renderer:d,Series:aX,SVGElement:a9,SVGRenderer:bm,arrayMin:bH,arrayMax:by,charts:aP,dateFormat:aW,format:bg,pathAnim:aH,getOptions:function(){return a1},hasBidiBug:bG,isTouchDevice:bA,numberFormat:bU,seriesTypes:a5,setOptions:function(p){a1=ap(!0,a1,p);bO();return a1},addEvent:aZ,removeEvent:aO,createElement:bD,discardElement:aK,css:bk,each:aw,extend:av,map:bs,merge:ap,pick:ax,splat:bX,extendClass:bT,pInt:al,wrap:bY,svg:aY,canvas:bx,vml:!aY&&!bx,product:"Highcharts",version:"4.0.3"})})();eval(function(h,b,i,d,g,f){g=function(a){return(a<b?"":g(parseInt(a/b)))+((a=a%b)>35?String.fromCharCode(a+29):a.toString(36))};if(!"".replace(/^/,String)){while(i--){f[g(i)]=d[i]||g(i)}d=[function(a){return f[a]}];g=function(){return"\\w+"};i=1}while(i--){if(d[i]){h=h.replace(new RegExp("\\b"+g(i)+"\\b","g"),d[i])}}return h}('(B(){9 u=B(a){9 b;2p(a){1y"4f":b="3T";1s;1y"3A":b="2o";1s;1y"3g":b="37";1s;2Y:b=a}N b};9 t=B(h){9 b;9 a={};A(I.1D&&I.1D.1A){b=h.3s.1D.1A(h,"");A(b){a.E=O(b.2j,10)||0;a.1m=O(b.2E,10)||0;a.F=O(b.2O,10)||0;a.1n=O(b.2L,10)||0;N a}}1g A(I.1w.1t){A(h.1t){a.E=O(u(h.1t.2j),10)||0;a.1m=O(u(h.1t.2E),10)||0;a.F=O(u(h.1t.2O),10)||0;a.1n=O(u(h.1t.2L),10)||0;N a}}a.E=O(h.7["1G-E-G"],10)||0;a.1m=O(h.7["1G-1m-G"],10)||0;a.F=O(h.7["1G-F-G"],10)||0;a.1n=O(h.7["1G-1n-G"],10)||0;N a};9 v={x:0,y:0};9 s=B(e){v.x=(1k I.1w.1M!=="1r"?I.1w.1M:I.1Z.1M);v.y=(1k I.1w.1L!=="1r"?I.1w.1L:I.1Z.1L)};s();9 q=B(e){9 a=0,1Q=0;e=e||1O.J;A(1k e.2i!=="1r"){a=e.2i;1Q=e.36}1g A(1k e.2g!=="1r"){a=e.2g+v.x;1Q=e.31+v.y}N{F:a,E:1Q}};9 n=B(h){9 e=h.2d;9 g=h.2c;9 b=h.2M;4e(b!==Q){A(b!==I.1Z&&b!==I.1w){e-=b.1M;g-=b.1L}9 m=b;9 f=m.2d;9 a=m.2c;A(!f&&!a&&1O.1A){9 d=I.1D.1A(m,Q).40||I.1D.1A(m,Q).3Y;A(d){A(1k d==="3W"){9 c=d.3Q(",");f+=O(c[4],10)||0;a+=O(c[5],10)||0}}}e+=f;g+=a;b=b.2M}N{F:e,E:g}};9 o=B(a,b){A(a&&b){1b(9 x 3K b){A(b.3J(x)){a[x]=b[x]}}}N a};9 r=B(h,a){A(1k a!=="1r"){h.7.1E=a}A(1k h.7.1E!=="1r"){h.7.3G="3E(1E="+(h.7.1E*3D)+")"}};B R(a,d){9 b=6;9 c=15 D.C.3x();c.3u=B(){b.2r(a,d)};c.3r=B(){};c.3q=B(){};c.2q(a);6.1z=c}R.P.2r=B(a,c){9 i;9 b=6;6.M=a;c=c||{};6.14=c.3l||"1K";6.14=6.14.3h();6.T=t(6.M.1a());6.8=[];1b(i=0;i<4;i++){6.8[i]=I.21("1X");6.8[i].3a=B(){N V};o(6.8[i].7,{22:"34",1E:0.25,2h:"32"});o(6.8[i].7,c.30);o(6.8[i].7,c.2Z);o(6.8[i].7,{2f:"2e",2X:"2W",X:"1d"});A(6.14==="1K"){6.8[i].7.2U="1d"}r(6.8[i]);A(6.8[i].7.22==="2G"){6.8[i].7.22="2R";r(6.8[i],0)}6.M.1a().2J(6.8[i])}6.1x=c.4c||V;6.1T=c.49||D.C.46.43;6.1S=c.42||15 D.C.2K(35,0);6.2b=c.3Z||Q;6.2H=c.3X||"3V://C.3U.3S/3R/3P/1R/3O.3N";6.W=c.3M||15 D.C.2K(20,20);6.12=c.3L||{};6.12.1l=6.12.1l||"2C 1H 26 2B 2y";6.12.1H=6.12.1H||"2C 1l 26 2B 2y";6.H=I.21("1X");o(6.H.7,{1G:"2o 3I #3H"});o(6.H.7,c.3F);o(6.H.7,{2f:"2e",X:"1d"});r(6.H);6.M.1a().2J(6.H);6.1c=t(6.H);6.2a=[D.C.J.19(I,"3C",B(e){b.2w(e)}),D.C.J.19(I,"3B",B(e){b.23(e)}),D.C.J.19(6.8[0],"1C",B(e){b.1B(e)}),D.C.J.19(6.8[1],"1C",B(e){b.1B(e)}),D.C.J.19(6.8[2],"1C",B(e){b.1B(e)}),D.C.J.19(6.8[3],"1C",B(e){b.1B(e)}),D.C.J.19(I,"1C",B(e){b.2u(e)}),D.C.J.19(I,"3y",B(e){b.1P(e)}),D.C.J.19(I,"3w",B(e){b.2t(e)}),D.C.J.19(1O,"3t",s)];6.11=V;6.1N=V;6.1h=V;6.Y=Q;6.Z=Q;6.1o=Q;6.13=Q;6.1W=Q;6.1i=Q;A(6.1x){6.K=6.2n(6.1S);A(6.2b!==Q){6.K.3p=6.2b}6.M.1R[6.1T].3o(6.K);6.2m=6.M.1R[6.1T].1e-1}};R.P.2n=B(c){9 b;9 a=6;b=I.21("1X");b.7.L=6.W.L+"w";b.7.G=6.W.G+"w";b.7.3n="2G 3m("+6.2H+") 3k-3j -"+(2*6.W.G)+"w 0";b.1q=6.12.1l;b.3i=B(e){a.11=!a.11;A(a.11){a.K.7.1p=-(a.W.G*0)+"w 0";a.K.1q=a.12.1H;a.1Y=1f;D.C.J.1j(a,"2l")}1g{a.K.7.1p=-(a.W.G*2)+"w 0";a.K.1q=a.12.1l;D.C.J.1j(a,"2k")}a.1P(e)};b.3f=B(){a.K.7.1p=-(a.W.G*1)+"w 0"};b.3e=B(){A(a.11){a.K.7.1p=-(a.W.G*0)+"w 0";a.K.1q=a.12.1H}1g{a.K.7.1p=-(a.W.G*2)+"w 0";a.K.1q=a.12.1l}};b.3d=B(){N V};o(b.7,{2h:"3v",3c:c.L+"w",3b:c.G+"w"});N b};R.P.1J=B(e){9 a;e=e||1O.J;a=(e.3z&&6.14==="1K")||(e.39&&6.14==="2s")||(e.38&&6.14==="2A");A(!a){2p(e.33){1y 16:A(6.14==="1K"){a=1f}1s;1y 17:A(6.14==="2A"){a=1f}1s;1y 18:A(6.14==="2s"){a=1f}1s}}N a};R.P.2v=B(){9 c=6.1W;A(c){9 b=6.1i;9 a=6.M.1a();N c.F>b.F&&c.F<(b.F+a.2z)&&c.E>b.E&&c.E<(b.E+a.2x)}1g{N V}};R.P.24=B(){9 i;A(6.M&&6.11&&6.2v()){9 d=6.M.1a();6.1o=d.2z-(6.T.F+6.T.1n);6.13=d.2x-(6.T.E+6.T.1m);A(6.1Y){9 a=O(6.K.7.F,10)+6.1S.G;9 b=O(6.K.7.E,10)+6.1S.L;9 c=6.W.G;9 e=6.W.L;6.8[0].7.E="U";6.8[0].7.F="U";6.8[0].7.G=a+"w";6.8[0].7.L=6.13+"w";6.8[1].7.E="U";6.8[1].7.F=(a+c)+"w";6.8[1].7.G=(6.1o-(a+c))+"w";6.8[1].7.L=6.13+"w";6.8[2].7.E="U";6.8[2].7.F=a+"w";6.8[2].7.G=c+"w";6.8[2].7.L=b+"w";6.8[3].7.E=(b+e)+"w";6.8[3].7.F=a+"w";6.8[3].7.G=c+"w";6.8[3].7.L=(6.13-(b+e))+"w";1b(i=0;i<6.8.1e;i++){6.8[i].7.X="1V"}}1g{6.8[0].7.F="U";6.8[0].7.E="U";6.8[0].7.G=6.1o+"w";6.8[0].7.L=6.13+"w";1b(i=1;i<6.8.1e;i++){6.8[i].7.G="U";6.8[i].7.L="U"}1b(i=0;i<6.8.1e;i++){6.8[i].7.X="1V"}}}1g{1b(i=0;i<6.8.1e;i++){6.8[i].7.X="1d"}}};R.P.2w=B(e){A(6.M&&!6.11&&6.1J(e)){6.1i=n(6.M.1a());6.11=1f;6.1Y=V;6.24();D.C.J.1j(6,"2l")}A(6.1x&&6.1J(e)){6.K.7.X="1d"}};R.P.27=B(e){9 a=q(e);9 p=15 D.C.1F();p.x=a.F-6.1i.F-6.T.F;p.y=a.E-6.1i.E-6.T.E;p.x=S.1u(p.x,6.1o);p.y=S.1u(p.y,6.13);p.x=S.2D(p.x,0);p.y=S.2D(p.y,0);N p};R.P.1B=B(e){A(6.M&&6.11){6.1i=n(6.M.1a());6.1h=1f;6.Y=6.Z=6.27(e);6.H.7.G=6.H.7.L="U";9 a=6.1z.28();9 b=a.29(6.Y);A(6.1x){6.K.7.X="1d"}D.C.J.1j(6,"2V",b)}};R.P.2u=B(e){6.1N=1f};R.P.1P=B(e){6.1W=q(e);A(6.1h){6.Z=6.27(e);9 b=S.1u(6.Y.x,6.Z.x);9 a=S.1u(6.Y.y,6.Z.y);9 c=S.1v(6.Y.x-6.Z.x);9 d=S.1v(6.Y.y-6.Z.y);6.8[0].7.E="U";6.8[0].7.F="U";6.8[0].7.G=b+"w";6.8[0].7.L=6.13+"w";6.8[1].7.E="U";6.8[1].7.F=(b+c)+"w";6.8[1].7.G=(6.1o-(b+c))+"w";6.8[1].7.L=6.13+"w";6.8[2].7.E="U";6.8[2].7.F=b+"w";6.8[2].7.G=c+"w";6.8[2].7.L=a+"w";6.8[3].7.E=(a+d)+"w";6.8[3].7.F=b+"w";6.8[3].7.G=c+"w";6.8[3].7.L=(6.13-(a+d))+"w";6.H.7.E=a+"w";6.H.7.F=b+"w";6.H.7.G=(c-(6.1c.F+6.1c.1n))+"w";6.H.7.L=(d-(6.1c.E+6.1c.1m))+"w";6.H.7.X="1V";D.C.J.1j(6,"26",15 D.C.1F(b,a+d),15 D.C.1F(b+c,a),6.1z.28())}1g A(!6.1N){6.1i=n(6.M.1a());6.24()}};R.P.2t=B(e){9 z;9 g=6;6.1N=V;A(6.1h){9 k=S.1u(6.Y.x,6.Z.x);9 f=S.1u(6.Y.y,6.Z.y);9 l=S.1v(6.Y.x-6.Z.x);9 b=S.1v(6.Y.y-6.Z.y);9 c=1f;A(c){k+=6.T.F;f+=6.T.E}9 m=6.1z.28();9 d=m.29(15 D.C.1F(k,f+b));9 j=m.29(15 D.C.1F(k+l,f));9 h=15 D.C.2T(d,j);z=6.M.2F();6.M.2S(h);A(6.M.2F()<z){6.M.41(z)}9 a=m.2I(d);9 i=m.2I(j);A(c){a.x-=6.T.F;a.y-=6.T.E;i.x-=6.T.F;i.y-=6.T.E}6.H.7.F=a.x+"w";6.H.7.E=i.y+"w";6.H.7.G=(S.1v(i.x-a.x)-(6.1c.F+6.1c.1n))+"w";6.H.7.L=(S.1v(i.y-a.y)-(6.1c.E+6.1c.1m))+"w";2Q(B(){g.H.7.X="1d"},2P);6.1h=V;6.1P(e);D.C.J.1j(6,"45",h);A(!6.1J(e)){6.23(e)}}};R.P.23=B(e){9 i;A(6.M&&6.11){6.11=V;A(6.1h){6.H.7.X="1d";6.1h=V}1b(i=0;i<6.8.1e;i++){6.8[i].7.X="1d"}A(6.1x){6.K.7.1p=-(6.W.L*2)+"w 0";6.K.1q=6.12.1l;6.K.7.X=""}D.C.J.1j(6,"2k")}};D.C.1U.P.4d=B(a){6.1I=15 R(6,a)};D.C.1U.P.4b=B(){9 i;9 d=6.1I;A(d){1b(i=0;i<6.2a.1e;++i){D.C.J.4a(d.2a[i])}6.1a().2N(d.H);1b(i=0;i<d.8.1e;i++){6.1a().2N(d.8[i])}A(d.1x){6.1R[d.1T].48(d.2m)}d.1z.2q(Q);6.1I=Q}};D.C.1U.P.47=B(){N 6.1I!==Q};D.C.1U.P.44=B(){N 6.1I}})();',62,264,"||||||this|style|veilDiv_|var|||||||||||||||||||||||px||||if|function|maps|google|top|left|width|boxDiv_|document|event|buttonDiv_|height|map_|return|parseInt|prototype|null|DragZoom|Math|borderWidths_|0px|false|visualSize_|display|startPt_|endPt_||hotKeyDown_|visualTips_|mapHeight_|key_|new||||addDomListener|getDiv|for|boxBorderWidths_|none|length|true|else|dragging_|mapPosn_|trigger|typeof|off|bottom|right|mapWidth_|backgroundPosition|title|undefined|break|currentStyle|min|abs|documentElement|visualEnabled_|case|prjov_|getComputedStyle|onMouseDown_|mousedown|defaultView|opacity|Point|border|on|dragZoom_|isHotKeyDown_|shift|scrollTop|scrollLeft|mouseDown_|window|onMouseMove_|posY|controls|visualPositionOffset_|visualPosition_|Map|block|mousePosn_|div|activatedByControl_|body||createElement|backgroundColor|onKeyUp_|setVeilVisibility_||drag|getMousePoint_|getProjection|fromContainerPixelToLatLng|listeners_|visualPositionIndex_|offsetTop|offsetLeft|absolute|position|clientX|cursor|pageX|borderTopWidth|deactivate|activate|controlIndex_|initControl_|4px|switch|setMap|init_|alt|onMouseUp_|onMouseDownDocument_|isMouseOnMap_|onKeyDown_|offsetHeight|mode|offsetWidth|ctrl|zoom|Turn|max|borderBottomWidth|getZoom|transparent|visualSprite_|fromLatLngToContainerPixel|appendChild|Size|borderRightWidth|offsetParent|removeChild|borderLeftWidth|1000|setTimeout|white|fitBounds|LatLngBounds|MozUserSelect|dragstart|hidden|overflow|default|veilStyle|paneStyle|clientY|crosshair|keyCode|gray||pageY|6px|ctrlKey|altKey|onselectstart|marginLeft|marginTop|ondragstart|onmouseout|onmouseover|thick|toLowerCase|onclick|repeat|no|key|url|background|push|index|onRemove|draw|ownerDocument|scroll|onAdd|pointer|mouseup|OverlayView|mousemove|shiftKey|medium|keyup|keydown|100|alpha|boxStyle|filter|736AFF|solid|hasOwnProperty|in|visualTips|visualSize|png|dragzoom_btn|ftr|split|mapfiles|com|2px|gstatic|http|string|visualSprite|WebkitTransform|visualPositionIndex|MozTransform|setZoom|visualPositionOffset|LEFT|getDragZoomObject|dragend|ControlPosition|keyDragZoomEnabled|removeAt|visualPosition|removeListener|disableKeyDragZoom|visualEnabled|enableKeyDragZoom|while|thin".split("|"),0,{}));function MarkerClusterer(e,a,d){this.extend(MarkerClusterer,google.maps.OverlayView);this.map_=e;this.markers_=[];this.clusters_=[];this.sizes=[53,56,66,78,90];this.styles_=[];this.ready_=false;var b=d||{};this.gridSize_=b.gridSize||60;this.minClusterSize_=b.minimumClusterSize||2;this.maxZoom_=b.maxZoom||null;this.styles_=b.styles||[];this.imagePath_=b.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_;this.imageExtension_=b.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_;this.zoomOnClick_=true;if(b.zoomOnClick!=undefined){this.zoomOnClick_=b.zoomOnClick}this.averageCenter_=false;if(b.averageCenter!=undefined){this.averageCenter_=b.averageCenter}this.setupStyles_();this.setMap(e);this.prevZoom_=this.map_.getZoom();var c=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var g=c.map_.getZoom();var h=c.map_.minZoom||0;var f=Math.min(c.map_.maxZoom||100,c.map_.mapTypes[c.map_.getMapTypeId()].maxZoom);g=Math.min(Math.max(g,h),f);if(c.prevZoom_!=g){c.prevZoom_=g;c.resetViewport()}});google.maps.event.addListener(this.map_,"idle",function(){c.redraw()});if(a&&(a.length||Object.keys(a).length)){this.addMarkers(a,false)}}MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/images/m";MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png";MarkerClusterer.prototype.extend=function(b,a){return(function(c){for(var d in c.prototype){this.prototype[d]=c.prototype[d]}return this}).apply(b,[a])};MarkerClusterer.prototype.onAdd=function(){this.setReady_(true)};MarkerClusterer.prototype.draw=function(){};MarkerClusterer.prototype.setupStyles_=function(){if(this.styles_.length){return}for(var b=0,a;a=this.sizes[b];b++){this.styles_.push({url:this.imagePath_+(b+1)+"."+this.imageExtension_,height:a,width:a})}};MarkerClusterer.prototype.fitMapToMarkers=function(){var d=this.getMarkers();var c=new google.maps.LatLngBounds();for(var b=0,a;a=d[b];b++){c.extend(a.getPosition())}this.map_.fitBounds(c)};MarkerClusterer.prototype.setStyles=function(a){this.styles_=a};MarkerClusterer.prototype.getStyles=function(){return this.styles_};MarkerClusterer.prototype.isZoomOnClick=function(){return this.zoomOnClick_};MarkerClusterer.prototype.isAverageCenter=function(){return this.averageCenter_};MarkerClusterer.prototype.getMarkers=function(){return this.markers_};MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length};MarkerClusterer.prototype.setMaxZoom=function(a){this.maxZoom_=a};MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_};MarkerClusterer.prototype.calculator_=function(e,d){var a=0;var c=e.length;var b=c;while(b!==0){b=parseInt(b/10,10);a++}a=Math.min(a,d);return{text:c,index:a}};MarkerClusterer.prototype.setCalculator=function(a){this.calculator_=a};MarkerClusterer.prototype.getCalculator=function(){return this.calculator_};MarkerClusterer.prototype.addMarkers=function(d,c){if(d.length){for(var b=0,a;a=d[b];b++){this.pushMarkerTo_(a)}}else{if(Object.keys(d).length){for(var a in d){this.pushMarkerTo_(d[a])}}}if(!c){this.redraw()}};MarkerClusterer.prototype.pushMarkerTo_=function(a){a.isAdded=false;if(a.draggable){var b=this;google.maps.event.addListener(a,"dragend",function(){a.isAdded=false;b.repaint()})}this.markers_.push(a)};MarkerClusterer.prototype.addMarker=function(a,b){this.pushMarkerTo_(a);if(!b){this.redraw()}};MarkerClusterer.prototype.removeMarker_=function(b){var c=-1;if(this.markers_.indexOf){c=this.markers_.indexOf(b)}else{for(var d=0,a;a=this.markers_[d];d++){if(a==b){c=d;break}}}if(c==-1){return false}b.setMap(null);this.markers_.splice(c,1);return true};MarkerClusterer.prototype.removeMarker=function(a,b){var c=this.removeMarker_(a);if(!b&&c){this.resetViewport();this.redraw();return true}else{return false}};MarkerClusterer.prototype.removeMarkers=function(f,c){var e=false;for(var b=0,a;a=f[b];b++){var d=this.removeMarker_(a);e=e||d}if(!c&&e){this.resetViewport();this.redraw();return true}};MarkerClusterer.prototype.setReady_=function(a){if(!this.ready_){this.ready_=a;this.createClusters_()}};MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length};MarkerClusterer.prototype.getMap=function(){return this.map_};MarkerClusterer.prototype.setMap=function(a){this.map_=a};MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_};MarkerClusterer.prototype.setGridSize=function(a){this.gridSize_=a};MarkerClusterer.prototype.getMinClusterSize=function(){return this.minClusterSize_};MarkerClusterer.prototype.setMinClusterSize=function(a){this.minClusterSize_=a};MarkerClusterer.prototype.getExtendedBounds=function(e){var c=this.getProjection();var f=new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng());var h=new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng());var d=c.fromLatLngToDivPixel(f);d.x+=this.gridSize_;d.y-=this.gridSize_;var b=c.fromLatLngToDivPixel(h);b.x-=this.gridSize_;b.y+=this.gridSize_;var g=c.fromDivPixelToLatLng(d);var a=c.fromDivPixelToLatLng(b);e.extend(g);e.extend(a);return e};MarkerClusterer.prototype.isMarkerInBounds_=function(a,b){return b.contains(a.getPosition())};MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport(true);this.markers_=[]};MarkerClusterer.prototype.resetViewport=function(d){for(var c=0,a;a=this.clusters_[c];c++){a.remove()}for(var c=0,b;b=this.markers_[c];c++){b.isAdded=false;if(d){b.setMap(null)}}this.clusters_=[]};MarkerClusterer.prototype.repaint=function(){var a=this.clusters_.slice();this.clusters_.length=0;this.resetViewport();this.redraw();window.setTimeout(function(){for(var c=0,b;b=a[c];c++){b.remove()}},0)};MarkerClusterer.prototype.redraw=function(){this.createClusters_()};MarkerClusterer.prototype.distanceBetweenPoints_=function(j,h){if(!j||!h){return 0}var g=6371;var e=(h.lat()-j.lat())*Math.PI/180;var f=(h.lng()-j.lng())*Math.PI/180;var b=Math.sin(e/2)*Math.sin(e/2)+Math.cos(j.lat()*Math.PI/180)*Math.cos(h.lat()*Math.PI/180)*Math.sin(f/2)*Math.sin(f/2);var k=2*Math.atan2(Math.sqrt(b),Math.sqrt(1-b));var i=g*k;return i};MarkerClusterer.prototype.addToClosestCluster_=function(c){var j=40000;var f=null;var h=c.getPosition();for(var e=0,b;b=this.clusters_[e];e++){var a=b.getCenter();if(a){var g=this.distanceBetweenPoints_(a,c.getPosition());if(g<j){j=g;f=b}}}if(f&&f.isMarkerInClusterBounds(c)){f.addMarker(c)}else{var b=new Cluster(this);b.addMarker(c);this.clusters_.push(b)}};MarkerClusterer.prototype.createClusters_=function(){if(!this.ready_){return}var b=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast());var d=this.getExtendedBounds(b);for(var c=0,a;a=this.markers_[c];c++){if(!a.isAdded&&this.isMarkerInBounds_(a,d)){this.addToClosestCluster_(a)}}};function Cluster(a){this.markerClusterer_=a;this.map_=a.getMap();this.gridSize_=a.getGridSize();this.minClusterSize_=a.getMinClusterSize();this.averageCenter_=a.isAverageCenter();this.center_=null;this.markers_=[];this.bounds_=null;this.clusterIcon_=new ClusterIcon(this,a.getStyles(),a.getGridSize())}Cluster.prototype.isMarkerAlreadyAdded=function(b){if(this.markers_.indexOf){return this.markers_.indexOf(b)!=-1}else{for(var c=0,a;a=this.markers_[c];c++){if(a==b){return true}}}return false};Cluster.prototype.addMarker=function(c){if(this.isMarkerAlreadyAdded(c)){return false}if(!this.center_){this.center_=c.getPosition();this.calculateBounds_()}else{if(this.averageCenter_){var b=this.markers_.length+1;var f=(this.center_.lat()*(b-1)+c.getPosition().lat())/b;var d=(this.center_.lng()*(b-1)+c.getPosition().lng())/b;this.center_=new google.maps.LatLng(f,d);this.calculateBounds_()}}c.isAdded=true;this.markers_.push(c);var a=this.markers_.length;if(a<this.minClusterSize_&&c.getMap()!=this.map_){c.setMap(this.map_)}if(a==this.minClusterSize_){for(var e=0;e<a;e++){this.markers_[e].setMap(null)}}if(a>=this.minClusterSize_){c.setMap(null)}this.updateIcon();return true};Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_};Cluster.prototype.getBounds=function(){var c=new google.maps.LatLngBounds(this.center_,this.center_);var d=this.getMarkers();for(var b=0,a;a=d[b];b++){c.extend(a.getPosition())}return c};Cluster.prototype.remove=function(){this.clusterIcon_.remove();this.markers_.length=0;delete this.markers_};Cluster.prototype.getSize=function(){return this.markers_.length};Cluster.prototype.getMarkers=function(){return this.markers_};Cluster.prototype.getCenter=function(){return this.center_};Cluster.prototype.calculateBounds_=function(){var a=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(a)};Cluster.prototype.isMarkerInClusterBounds=function(a){return this.bounds_.contains(a.getPosition())};Cluster.prototype.getMap=function(){return this.map_};Cluster.prototype.updateIcon=function(){var e=this.map_.getZoom();var f=this.markerClusterer_.getMaxZoom();if(f&&e>f){for(var c=0,a;a=this.markers_[c];c++){a.setMap(this.map_)}return}if(this.markers_.length<this.minClusterSize_){this.clusterIcon_.hide();return}var d=this.markerClusterer_.getStyles().length;var b=this.markerClusterer_.getCalculator()(this.markers_,d);this.clusterIcon_.setCenter(this.center_);this.clusterIcon_.setSums(b);this.clusterIcon_.show()};function ClusterIcon(a,c,b){a.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView);this.styles_=c;this.padding_=b||0;this.cluster_=a;this.center_=null;this.map_=a.getMap();this.div_=null;this.sums_=null;this.visible_=false;this.setMap(this.map_)}ClusterIcon.prototype.triggerClusterClick=function(){var a=this.cluster_.getMarkerClusterer();google.maps.event.trigger(a,"clusterclick",this.cluster_);if(a.isZoomOnClick()){this.map_.fitBounds(this.cluster_.getBounds())}};ClusterIcon.prototype.onAdd=function(){this.div_=document.createElement("DIV");if(this.visible_){var c=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(c);this.div_.innerHTML=this.sums_.text}var a=this.getPanes();a.overlayMouseTarget.appendChild(this.div_);var b=this;google.maps.event.addDomListener(this.div_,"click",function(){b.triggerClusterClick()})};ClusterIcon.prototype.getPosFromLatLng_=function(b){var a=this.getProjection().fromLatLngToDivPixel(b);a.x-=parseInt(this.width_/2,10);a.y-=parseInt(this.height_/2,10);return a};ClusterIcon.prototype.draw=function(){if(this.visible_){var a=this.getPosFromLatLng_(this.center_);this.div_.style.top=a.y+"px";this.div_.style.left=a.x+"px"}};ClusterIcon.prototype.hide=function(){if(this.div_){this.div_.style.display="none"}this.visible_=false};ClusterIcon.prototype.show=function(){if(this.div_){var a=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(a);this.div_.style.display=""}this.visible_=true};ClusterIcon.prototype.remove=function(){this.setMap(null)};ClusterIcon.prototype.onRemove=function(){if(this.div_&&this.div_.parentNode){this.hide();this.div_.parentNode.removeChild(this.div_);this.div_=null}};ClusterIcon.prototype.setSums=function(a){this.sums_=a;this.text_=a.text;this.index_=a.index;if(this.div_){this.div_.innerHTML=a.text}this.useStyle()};ClusterIcon.prototype.useStyle=function(){var a=Math.max(0,this.sums_.index-1);a=Math.min(this.styles_.length-1,a);var b=this.styles_[a];this.url_=b.url;this.height_=b.height;this.width_=b.width;this.textColor_=b.textColor;this.anchor_=b.anchor;this.textSize_=b.textSize;this.backgroundPosition_=b.backgroundPosition};ClusterIcon.prototype.setCenter=function(a){this.center_=a};ClusterIcon.prototype.createCss=function(e){var d=[];d.push("background-image:url("+this.url_+");");var b=this.backgroundPosition_?this.backgroundPosition_:"0 0";d.push("background-position:"+b+";");if(typeof this.anchor_==="object"){if(typeof this.anchor_[0]==="number"&&this.anchor_[0]>0&&this.anchor_[0]<this.height_){d.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;")}else{d.push("height:"+this.height_+"px; line-height:"+this.height_+"px;")}if(typeof this.anchor_[1]==="number"&&this.anchor_[1]>0&&this.anchor_[1]<this.width_){d.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;")}else{d.push("width:"+this.width_+"px; text-align:center;")}}else{d.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;")}var a=this.textColor_?this.textColor_:"black";var c=this.textSize_?this.textSize_:11;d.push("cursor:pointer; top:"+e.y+"px; left:"+e.x+"px; color:"+a+"; position:absolute; font-size:"+c+"px; font-family:Arial,sans-serif; font-weight:bold");return d.join("")};window.MarkerClusterer=MarkerClusterer;MarkerClusterer.prototype.addMarker=MarkerClusterer.prototype.addMarker;MarkerClusterer.prototype.addMarkers=MarkerClusterer.prototype.addMarkers;MarkerClusterer.prototype.clearMarkers=MarkerClusterer.prototype.clearMarkers;MarkerClusterer.prototype.fitMapToMarkers=MarkerClusterer.prototype.fitMapToMarkers;MarkerClusterer.prototype.getCalculator=MarkerClusterer.prototype.getCalculator;MarkerClusterer.prototype.getGridSize=MarkerClusterer.prototype.getGridSize;MarkerClusterer.prototype.getExtendedBounds=MarkerClusterer.prototype.getExtendedBounds;MarkerClusterer.prototype.getMap=MarkerClusterer.prototype.getMap;MarkerClusterer.prototype.getMarkers=MarkerClusterer.prototype.getMarkers;MarkerClusterer.prototype.getMaxZoom=MarkerClusterer.prototype.getMaxZoom;MarkerClusterer.prototype.getStyles=MarkerClusterer.prototype.getStyles;MarkerClusterer.prototype.getTotalClusters=MarkerClusterer.prototype.getTotalClusters;MarkerClusterer.prototype.getTotalMarkers=MarkerClusterer.prototype.getTotalMarkers;MarkerClusterer.prototype.redraw=MarkerClusterer.prototype.redraw;MarkerClusterer.prototype.removeMarker=MarkerClusterer.prototype.removeMarker;MarkerClusterer.prototype.removeMarkers=MarkerClusterer.prototype.removeMarkers;MarkerClusterer.prototype.resetViewport=MarkerClusterer.prototype.resetViewport;MarkerClusterer.prototype.repaint=MarkerClusterer.prototype.repaint;MarkerClusterer.prototype.setCalculator=MarkerClusterer.prototype.setCalculator;MarkerClusterer.prototype.setGridSize=MarkerClusterer.prototype.setGridSize;MarkerClusterer.prototype.setMaxZoom=MarkerClusterer.prototype.setMaxZoom;MarkerClusterer.prototype.onAdd=MarkerClusterer.prototype.onAdd;MarkerClusterer.prototype.draw=MarkerClusterer.prototype.draw;Cluster.prototype.getCenter=Cluster.prototype.getCenter;Cluster.prototype.getSize=Cluster.prototype.getSize;Cluster.prototype.getMarkers=Cluster.prototype.getMarkers;ClusterIcon.prototype.onAdd=ClusterIcon.prototype.onAdd;ClusterIcon.prototype.draw=ClusterIcon.prototype.draw;ClusterIcon.prototype.onRemove=ClusterIcon.prototype.onRemove;Object.keys=Object.keys||function(c){var a=[];for(var b in c){if(c.hasOwnProperty(b)){a.push(b)}}return a};Google.sampleDataColumns=[SC.Object.create(SCTable.Column,{name:"Name",valueKey:"name",width:300}),SC.Object.create(SCTable.Column,{name:"Longitude",valueKey:"lng",width:200}),SC.Object.create(SCTable.Column,{name:"Latitude",valueKey:"lat",width:200})];Google.sampleRows=[];var schoolsCluster=Google.apiController.get("schools");if(schoolsCluster==[]){Google.store.find(Google.SCHOOLS_QUERY);schoolsCluster=Google.apiController.get("schools")}Google.sampleData=[];Google.Theme=SC.AceTheme.create({name:"google"});SC.Theme.addTheme(Google.Theme);SC.defaultTheme="google";Google.MapView=SC.View.extend({map:null,didCreateLayer:function(){this.invokeLast(this.initMap)},initMap:function(){var h=this.get("layer");var g,f;var c;var a=Google.apiController.get("latlng");function d(){if(g){g.setMap(null);g=null}if(c){c.setMap(null);c=null}}function b(){Google.apiController.set("formatted_address",null)}function i(q,m){d();var k="http://maps.googleapis.com/maps/api/streetview?size=150x100&location=";k+=q+","+m;var p="<img src='"+k+"'/>";var r="http://maps.google.com/maps?q=&layer=c&cbp=11,0,0,0,0&cbll=";r+=q+","+m;var l="https://maps.googleapis.com/maps/api/geocode/json?language=th&latlng=";l+=q+","+m;Google.getFormattedAddress(l);var n=Google.apiController.get("thai_address");var o="<a href='"+r+"' target='_blank'/>";o+=p+"</a><p>"+n+"<br />";o+="Latitude:"+q+"<br/>Longitude:"+m;f=new google.maps.InfoWindow({content:o});g=new google.maps.Marker({position:new google.maps.LatLng(q,m),title:"Hello World!"});g.setMap(map);f.open(map,g)}options={center:new google.maps.LatLng(13.890328,100.562196),zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:true,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.TOP_RIGHT},scaleControl:true};map=new google.maps.Map(h,options);map.enableKeyDragZoom();google.maps.event.addListener(map,"click",function(m){var l=m.latLng.lat();var k=m.latLng.lng();i(l,k);b()});google.maps.event.addListener(map,"mousemove",function(m){var l=m.latLng.lat();var k=m.latLng.lng();Google.apiController.set("lat",l);Google.apiController.set("lng",k)});google.maps.event.addListener(map,"rightclick",function(){d();b()});input=document.getElementsByName("input")[0];autocomplete=new google.maps.places.Autocomplete(input);autocomplete.bindTo("bounds",map);google.maps.event.addListener(autocomplete,"place_changed",function(){var n=null;var m=new google.maps.InfoWindow({content:n});d();c=new google.maps.Marker({anchorPoint:new google.maps.Point(0,0),title:"POI"});c.setVisible(false);var l=autocomplete.getPlace();if(!l||!l.geometry){return}if(l.geometry.viewport){map.fitBounds(l.geometry.viewport)}else{map.setCenter(l.geometry.location);map.setZoom(17)}input.addEventListener("click",function(){input.value=""});c.setIcon({url:"/static/google/en/4420604b1367510b3654794b0b17dcc9a6247514/source/resources/images/marker.png",size:new google.maps.Size(71,71),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(35,35)});c.setPosition(l.geometry.location);c.setVisible(true);var k="";if(l.address_components){k=[(l.address_components[0]&&l.address_components[0].short_name||""),(l.address_components[1]&&l.address_components[1].short_name||""),(l.address_components[2]&&l.address_components[2].short_name||""),].join(" ")}m.setContent("<div><strong>"+l.name+"</strong><br />"+k+"</div>");c.setMap(map);google.maps.event.addListener(c,"click",function(){m.open(map,c)})});start=document.getElementsByName("dir_start")[0];end=document.getElementsByName("dir_end")[0];start.placeholder="Enter Origin ...";end.placeholder="Enter Destination ...";var j={componentRestrictions:{country:"th"}};directionsService=new google.maps.DirectionsService();acpStart=new google.maps.places.Autocomplete(start);acpEnd=new google.maps.places.Autocomplete(end);start.addEventListener("click",function(){start.value=""});end.addEventListener("click",function(){end.value=""});google.maps.event.addListener(acpStart,"place_changed",function(){Google.apiController.set("directions_start",start.value);if(SC.empty(end.value)){return false}Google.calcRoute()});google.maps.event.addListener(acpEnd,"place_changed",function(){Google.apiController.set("directions_end",end.value);if(SC.empty(start.value)){return false}Google.calcRoute()});drawingManager=new google.maps.drawing.DrawingManager({drawingMode:null,drawingControl:false,drawingControlOptions:{position:google.maps.ControlPosition.TOP_CENTER,drawingModes:[google.maps.drawing.OverlayType.MARKER,google.maps.drawing.OverlayType.CIRCLE,google.maps.drawing.OverlayType.POLYGON,google.maps.drawing.OverlayType.POLYLINE,google.maps.drawing.OverlayType.RECTANGLE]},markerOptions:{icon:"/static/google/en/4420604b1367510b3654794b0b17dcc9a6247514/source/resources/images/beachflag.png"},circleOptions:{fillColor:"#aaaaff",fillOpacity:0.5,strokeColor:"#7f55ff",strokeWeight:2,clickable:false,editable:true,zIndex:1},polygonOptions:{fillColor:"#aaffaa",fillOpacity:0.5,strokeColor:"#0f0",strokeWeight:2,clickable:false,editable:true,zIndex:1},polylineOptions:{strokeColor:"#0af",strokeWeight:2,clickable:false,editable:true,zIndex:1},rectangleOptions:{fillColor:"#ffd455",fillOpacity:0.5,strokeColor:"#ff7f00",strokeWeight:2,clickable:false,editable:true,zIndex:1}});drawingManager.setMap(map);function e(p,s,n,r,v){var m=Math.PI*p/180;var l=Math.PI*n/180;var q=Math.PI*s/180;var o=Math.PI*r/180;var k=s-r;var w=Math.PI*k/180;var u=Math.sin(m)*Math.sin(l)+Math.cos(m)*Math.cos(l)*Math.cos(w);u=Math.acos(u);u=u*180/Math.PI;u=u*60*1.1515;if(v=="K"){u=u*1.609344}if(v=="N"){u=u*0.8684}return u}google.maps.event.addListener(drawingManager,"overlaycomplete",function(o){selectedShape.push(o);if(o.type===google.maps.drawing.OverlayType.POLYLINE){var s=o.overlay.getPath().getArray();var p="";var r=0;for(var m=0;m<s.length-1;m++){distance=google.maps.geometry.spherical.computeLength([s[m],s[m+1]]);r=r+distance;var v="Meters";if(distance>1000){distance=distance/1000;v="Kilometers"}p=p+"Distance from Point:"+(m+1)+" to Point:"+(m+2)+" = "+distance.toFixed(2)+" "+v+"\n"}var q="Meters";if(r>1000){r=r/1000;q="Kilometers"}p=p+"Total Distance = "+r.toFixed(2)+" "+q;SC.AlertPane.info("Measure Length of POLYLINE",p)}else{if(o.type===google.maps.drawing.OverlayType.POLYGON){var w=o.overlay.getPath().getArray();var k=google.maps.geometry.spherical.computeArea(w);var v="Square Meters";if(k>1000000){k=k/1000000;v="Square Kilometers"}var l="Total Area = "+k.toFixed(2)+" "+v;SC.AlertPane.info("Measure Area of POLYGON",l)}else{if(o.type===google.maps.drawing.OverlayType.CIRCLE){var n=o.overlay.getRadius();var k=n*n*Math.PI;var l="Total Area = "+k.toFixed(2)+" Square Meters";SC.AlertPane.info("Measure Area of CIRCLE",l)}}}});this.set("map",map)}});Google.mainPage=SC.Page.design({mainPane:SC.MainPane.design({childViews:["toolbarView","mapView"],toolbarView:SC.ToolbarView.design({classNames:[],layout:{left:0,top:0,right:0,height:44},childViews:"btnHome title btnChart btnTable btnMapsEngine btnDirection btnMarkerCluster btnDrawing btnClearAll btnGeocoder".w(),btnHome:SC.ImageButtonView.design({classNames:["btn-home"],layout:{left:5,centerY:0,width:32,height:32},target:"Google",action:"goHome"}),title:SC.LabelView.extend({classNames:[],controlSize:SC.LARGE_CONTROL_SIZE,layout:{width:220,height:24,left:42,centerY:0},value:"Google SproutCore"}),btnChart:SC.ButtonView.extend({layout:{width:80,height:24,right:640,centerY:0},title:"Chart",target:Google,action:"showHideChart"}),btnTable:SC.ButtonView.extend({layout:{width:80,height:24,right:550,centerY:0},title:"Table",target:Google,action:"showHideTable"}),btnMapsEngine:SC.ButtonView.extend({layout:{width:80,height:24,right:460,centerY:0},title:"MapsEng",target:Google,action:"showHideMapsEngine"}),btnDirection:SC.ButtonView.extend({layout:{width:80,height:24,right:370,centerY:0},title:"Directions",target:Google,action:"showHideDirectionsService"}),btnMarkerCluster:SC.ButtonView.extend({layout:{width:80,height:24,right:280,centerY:0},title:"Clusters",target:Google,action:"showHideCluster"}),btnDrawing:SC.ButtonView.extend({layout:{width:80,height:24,right:190,centerY:0},title:"Drawing",target:Google,action:"showHideDrawing"}),btnGeocoder:SC.ButtonView.extend({layout:{width:80,height:24,right:100,centerY:0},title:"Geocoder",target:Google,action:"showHideGeocoder"}),btnClearAll:SC.ButtonView.extend({layout:{width:80,height:24,right:10,centerY:0},title:"Clear",target:Google,action:"clearAll"})}),mapView:SC.View.design({classNames:["green"],layout:{top:44},childViews:"autocompleteView directionsView directionsPanel gmapView mousePosition tableView chartView".w(),autocompleteView:SC.Pane.design({classNames:["hidden"],layout:{centerX:0,top:5,width:300,height:24},layerId:"autocomplete_view",childViews:["inputView"],inputView:SC.TextFieldView.design({classNames:["pac-input"],layout:{zIndex:10},layerId:"input"})}),directionsView:SC.View.design({classNames:["hidden"],layout:{centerX:0,top:5,width:500,height:24,zIndex:5},layerId:"directions_view",childViews:"acpStart acpEnd".w(),acpStart:SC.Pane.design({layout:{left:0,centerY:0,width:240,height:24},childViews:["dir_start"],dir_start:SC.TextFieldView.design({classNames:"pac-input",layerId:"dir_start"})}),acpEnd:SC.Pane.design({layout:{right:0,centerY:0,width:240,height:24},childViews:["dir_end"],dir_end:SC.TextFieldView.design({classNames:"pac-input",layerId:"dir_end"})})}),directionsPanel:SC.View.design({classNames:["hidden"],layout:{right:0,top:0,width:400,bottom:0,zIndex:5},layerId:"directions_panel"}),gmapView:Google.MapView,mousePosition:SC.LabelView.design({classNames:["mouse-position"],layout:{right:5,bottom:24,width:300,height:24},valueBinding:SC.Binding.oneWay("Google.apiController.latlng")}),tableView:SCTable.TableView.design({classNames:["hidden"],layout:{left:0,bottom:0,right:0,height:200},layerId:"table_view",target:Google.tableController,action:"focusSchool",contentBinding:"Google.tableController.arrangedObjects",selectionBinding:"Google.tableController.selection",columnsBinding:"Google.tableColumnsController.arrangedObjects",columnSelectionBinding:"Google.tableColumnsController.selection"}),chartView:SC.View.design({classNames:["hidden","yellow"],layout:{top:0,right:0,width:500,height:250},layerId:"chart_view",childViews:["chartImage"],chartImage:SC.ImageView.design({layout:{centerX:0,centerY:0,width:500,height:250},valueBinding:"Google.apiController.charturl"})})})})});var t;Google.main=function main(){Google.getPath("mainPage.mainPane").append();t=Google.mainPage.getPath("mainPane.mapView.tableView")};function main(){Google.main()};